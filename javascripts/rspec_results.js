(function(e){function t(){}function n(){}function r(){}function a(){}function o(){}function $(e,t,n){function r(){}function a(){}r.prototype=t.constructor.prototype,a.prototype=new r,e&&(a.displayName="SingletonClass_alloc("+e+")");var o=new a;return i(o,a,t,n.prototype),o.$$alloc=n,o.$$proto.$$class=o,o}function i(e,t,n,r){e.$$id=S.uid(),e.$$proto=r,e.constructor=t,n===w?(e.$$is_module=!0,e.$$class=w):(e.$$is_class=!0,e.$$class=k),e.$$super=n,e.$$parent=n,e.$$inc=[]}function s(){function e(){}var t=function(){};t.prototype=a.prototype,e.prototype=new t;var n=new e,r={};return i(n,e,w,r),n}function c(e){var t=new S.Class.$$alloc;return t.$$class=S.Class,t.$$proto=e.constructor.prototype,t.$$is_singleton=!0,t.$$singleton_of=e,t.$$inc=[],t.$$scope=e.$$scope,e.$$meta=t}function u(e){var t=e.$$class,n="#<Class:#<"+t.$$name+":"+t.$$id+">>",r=function(){},a=S.boot_class(t,r);return a.$$name=n,a.$$proto=e,a.$$class=t.$$class,a.$$scope=t.$$scope,a.$$parent=t,a.$$is_singleton=!0,a.$$singleton_of=e,e.$$meta=a}function l(e,t,n,r){var a,o,$,i;for(a=e.$$bridge.$ancestors(),o=0,i=a.length;i>o&&($=a[o],!A.call($.$$proto,n)||!$.$$proto[n]||$.$$proto[n].$$donated||$.$$proto[n].$$stub||$===t);o++)if($===t){e.prototype[n]=r;break}}function _(e,t){var n,r,a,o,$;if("function"==typeof e){for(n=t.$__id__(),r=t.$instance_methods(),o=r.length-1;o>=0;o--)a="$"+r[o],l(e,t,a,t.$$proto[a]);E[n]||(E[n]=[]),E[n].push(e)}else if($=E[e.$__id__()]){for(o=$.length-1;o>=0;o--)_($[o],t);E[t.$__id__()]=$.slice()}}function p(e,t,n){if(n){var r=function(){};r.prototype=n.$$proto||n.prototype,t.prototype=new r}return e&&(t.displayName=e+"_alloc"),t.prototype.constructor=t,t}function d(e,t,n){var r=function(){};r.prototype=n.prototype;var a=function(){};a.prototype=new r,a.displayName="#<Class:"+e+">";var o=new a;return i(o,a,n,t.prototype),o.$$alloc=t,o.$$name=e,o.displayName=e,t.prototype.$$class=o,S[e]=o,S.constants.push(e),o}function f(e,t){for(var n=e.$$scope.constants,r=t.$$scope,a=r.constants,o=0,$=n.length;$>o;o++)a.push(n[o]),r[n[o]]=e.$$scope[n[o]]}function g(e,t){var n,r,a,o,$,i,s,c,u,l,_=e.$$dep,p=e.$$proto[t];if(_)for(n=0,r=_.length;r>n;n++){if(a=_[n],o=a.$$proto,$=o[t],!o.hasOwnProperty(t)||$.$$donated||$.$$stub)if(o.hasOwnProperty(t)&&!$.$$stub){for(i=a.$$inc,s=0,c=i.length;c>s;s++)i[s]===$.$$donated&&(u=s),i[s]===e&&(l=s);l>=u&&(o[t]=p,o[t].$$donated=e)}else o[t]=p,o[t].$$donated=e;else;a.$$dep&&g(a,t)}}function h(e){function t(){return this.$method_missing.$$p=t.$$p,t.$$p=null,this.$method_missing.apply(this,[e.slice(1)].concat(O.call(arguments)))}return t.$$stub=!0,t}function m(e,t,n){var r=e.$$meta||e.$$class;for(t="$"+t;r&&r.$$proto[t]!==n;)r=r.$$parent;if(!r)throw new Error("could not find current class for super()");for(r=r.$$parent;r;){var a=r.$$proto[t];if(a&&a!==n)break;r=r.$$parent}return r.$$proto}function v(e){var t,n,r=[],a="/";"."!==S.current_dir&&(e=S.current_dir.replace(/\/*$/,"/")+e),e=e.replace(/\.(rb|opal|js)$/,""),t=e.split(a);for(var o=0,$=t.length;$>o;o++)n=t[o],""!==n&&(".."===n?r.pop():r.push(n));return r.join(a)}if("undefined"!=typeof this.Opal)return console.warn("Opal already loaded. Loading twice can cause troubles, please fix your setup."),this.Opal;var b,y,x,w,k,S=this.Opal={},E={},R=function(){};R.prototype=S,S.constructor=R,S.constants=[],S.global=this;var A=S.hasOwnProperty,O=S.slice=Array.prototype.slice,M=4,q=M;S.uid=function(){return q+=2},S.cvars={},S.gvars={},S.exit=function(e){S.gvars.DEBUG&&console.log("Exited with status "+e)},S.exceptions=[],S.get=function(e){var t=this[e];return null==t?this.base.$const_get(e):t},S.create_scope=function(e,t,n){var r=function(){},a=r.prototype=new e.constructor;t.$$scope=a,t.$$base_module=e.base,a.base=t,a.constructor=r,a.constants=[],n&&(S.cdecl(e,n,t),r.displayName=n+"_scope_alloc")},S.klass=function(e,t,n,r){var a,o,i;if(e.$$is_class||e.$$is_module||(e=e.$$class),"function"==typeof t&&(o=t,t=x),a=e.$$scope[n],a&&a.$$orig_scope===e.$$scope){if(!a.$$is_class)throw S.TypeError.$new(n+" is not a class");if(t&&a.$$super!==t)throw S.TypeError.$new("superclass mismatch for class "+n);return a}return null==t&&(t=x),i=o||p(n,r,t),a=$(n,t,i),a.$$name=n,a.displayName=n,a.$$is_class=!0,S.create_scope(e.$$scope,a,n),e[n]=e.$$scope[n]=a,o?S.bridge(a,i):(t!==x&&t!==y&&f(t,a),t.$inherited&&t.$inherited(a)),a},S.boot_class=function(e,t){var n=p(null,t,e);return $(null,e,n)},S.module=function(e,t){var n;if(e.$$is_class||e.$$is_module||(e=e.$$class),A.call(e.$$scope,t)){if(n=e.$$scope[t],!n.$$is_module&&n!==x)throw S.TypeError.$new(t+" is not a module")}else n=s(),n.$$name=t,n.$$is_module=!0,n.$$dep=[],S.create_scope(e.$$scope,n,t),e[t]=e.$$scope[t]=n;return n},S.boot_module_object=s,S.get_singleton_class=function(e){return e.$$meta?e.$$meta:e.$$is_class||e.$$is_module?c(e):u(e)},S.append_features=function(e,t){var n,r,a,o,$,i;for(i=t.$$inc.length-1;i>=0;i--)if(t.$$inc[i]===e)return;for(t.$$inc.push(e),e.$$dep.push(t),_(t,e),n={$$name:e.$$name,$$proto:e.$$proto,$$parent:t.$$parent,$$module:e,$$iclass:!0},t.$$parent=n,r=e.$$proto,a=t.$$proto,o=e.$instance_methods(),i=o.length-1;i>=0;i--)$="$"+o[i],(!a.hasOwnProperty($)||a[$].$$donated||a[$].$$stub)&&(a[$]=r[$],a[$].$$donated=e);f(e,t)},S.bridge=function(e,n){if(n.$$bridge)throw S.ArgumentError.$new("already bridged");S.stub_subscribers.push(n.prototype),n.prototype.$$class=e,n.$$bridge=e;for(var r=e.$ancestors(),a=r.length-1;a>=0;a--)_(n,r[a]);for(var o in t.prototype){var $=t.prototype[$];!$||!$.$$stub||o in n.prototype||(n.prototype[o]=$)}return e},S.casgn=function(e,t,n){function r(e,t){e.$$name=t;for(t in e.$$scope){var n=e.$$scope[t];n.$$name===b&&(n.$$is_class||n.$$is_module)&&r(n,t)}}var a=e.$$scope;return(n.$$is_class||n.$$is_module)&&((n.$$is_class||n.$$base_module===x)&&(n.$$base_module=e),n.$$name===b&&n.$$base_module.$$name!==b&&r(n,t)),a.constants.push(t),a[t]=n},S.cdecl=function(e,t,n){return(n.$$is_class||n.$$is_module)&&null==n.$$orig_scope&&(n.$$name=t,n.$$orig_scope=e,e.constructor[t]=n),e.constants.push(t),e[t]=n},S.add_stubs=function(e){var t,n,r,a,o,$=S.stub_subscribers,i=e.length,s=$.length;for(n=0;i>n;n++)for(a=e[n],o=h(a),r=0;s>r;r++)t=$[r],a in t||(t[a]=o)},S.stub_subscribers=[t.prototype],S.add_stub_for=function(e,t){var n=h(t);e[t]=n},S.ac=function(e,t,n,r){var a="";throw a+=n.$$is_class||n.$$is_module?n.$$name+".":n.$$class.$$name+"#",a+=r,S.ArgumentError.$new("["+a+"] wrong number of arguments("+e+" for "+t+")")},S.ancestors=function(e){for(var t=e,n=[];t;){n.push(t);for(var r=0;r<t.$$inc.length;r++)n=n.concat(S.ancestors(t.$$inc[r]));t=t.$$is_class?t.$$super:null}return n},S.find_super_dispatcher=function(e,t,n,r,a){var o;return o=a?e.$$is_class||e.$$is_module?a.$$super:e.$$class.$$proto:e.$$is_class||e.$$is_module?e.$$super:m(e,t,n),o=o["$"+t],o.$$p=r,o},S.find_iter_super_dispatcher=function(e,t,n,r,a){return n.$$def?S.find_super_dispatcher(e,n.$$jsid,n,r,a):S.find_super_dispatcher(e,t,n,r,a)},S.ret=function(e){throw S.returner.$v=e,S.returner},S.yield1=function(e,t){if("function"!=typeof e)throw S.LocalJumpError.$new("no block given");return e.length>1&&t.$$is_array?e.apply(null,t):e(t)},S.yieldX=function(e,t){if("function"!=typeof e)throw S.LocalJumpError.$new("no block given");return e.length>1&&1===t.length&&t[0].$$is_array?e.apply(null,t[0]):(t.$$is_array||(t=O.call(t)),e.apply(null,t))},S.rescue=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(r.$$is_array){var a=S.rescue(e,r);if(a)return a}else if(r["$==="](e))return r}return null},S.is_a=function(e,t){if(e.$$meta===t)return!0;for(var n=e.$$class;n;){if(n===t)return!0;for(var r=0,a=n.$$inc.length;a>r;r++)if(n.$$inc[r]===t)return!0;n=n.$$super}return!1},S.to_ary=function(e){if(e.$$is_array)return e.constructor===Array?e:e.literal;if(e["$respond_to?"]("to_ary",!0)){var t=e.$to_ary();if(t===b)return[e];if(t.$$is_array)return t.constructor===Array?t:t.literal;throw S.TypeError.$new("Can't convert "+e.$$class+" to Array ("+e.$$class+"#to_ary gives "+t.$$class+")")}return[e]},S.to_a=function(e){if(e.$$is_array)return e.constructor===Array?e.slice():e.literal.slice();if(e["$respond_to?"]("to_a",!0)){var t=e.$to_a();if(t===b)return[e];if(t.$$is_array)return t.constructor===Array?t:t.literal;throw S.TypeError.$new("Can't convert "+e.$$class+" to Array ("+e.$$class+"#to_a gives "+t.$$class+")")}return[e]},S.kwrestargs=function(e,t){var n=[],r={},a=null,o=e.$$smap;for(a in o)t[a]||(n.push(a),r[a]=o[a]);return S.hash2(n,r)},S.send=function(e,t){var n=O.call(arguments,2),r=e["$"+t];return r?r.apply(e,n):e.$method_missing.apply(e,[t].concat(n))},S.block_send=function(e,t,n){var r=O.call(arguments,3),a=e["$"+t];return a?(a.$$p=n,a.apply(e,r)):e.$method_missing.apply(e,[t].concat(r))},S.defn=function(e,t,n){if(e.$$proto[t]=n,e.$$is_module&&(g(e,t),e.$$module_function&&S.defs(e,t,n)),e.$__id__&&!e.$__id__.$$stub){var r=E[e.$__id__()];if(r)for(var a=r.length-1;a>=0;a--)l(r[a],e,t,n)}e.$method_added&&!e.$method_added.$$stub&&e.$method_added(t.substr(1));var o=e.$$singleton_of;return o&&o.$singleton_method_added&&!o.$singleton_method_added.$$stub&&o.$singleton_method_added(t.substr(1)),b},S.defs=function(e,t,n){S.defn(S.get_singleton_class(e),t,n)},S.def=function(e,t,n){e.$$eval||!e.$$is_class&&!e.$$is_module?S.defs(e,t,n):S.defn(e,t,n)},S.rdef=function(e,t){if(!A.call(e.$$proto,t))throw S.NameError.$new("method '"+t.substr(1)+"' not defined in "+e.$name());delete e.$$proto[t],e.$$is_singleton?e.$$proto.$singleton_method_removed&&!e.$$proto.$singleton_method_removed.$$stub&&e.$$proto.$singleton_method_removed(t.substr(1)):e.$method_removed&&!e.$method_removed.$$stub&&e.$method_removed(t.substr(1))},S.udef=function(e,t){if(!e.$$proto[t]||e.$$proto[t].$$stub)throw S.NameError.$new("method '"+t.substr(1)+"' not defined in "+e.$name());S.add_stub_for(e.$$proto,t),e.$$is_singleton?e.$$proto.$singleton_method_undefined&&!e.$$proto.$singleton_method_undefined.$$stub&&e.$$proto.$singleton_method_undefined(t.substr(1)):e.$method_undefined&&!e.$method_undefined.$$stub&&e.$method_undefined(t.substr(1))},S.alias=function(e,t,n){var r="$"+t,a="$"+n,o=e.$$proto["$"+n];if(e.$$eval)return S.alias(S.get_singleton_class(e),t,n);if("function"!=typeof o||o.$$stub){for(var $=e.$$super;"function"!=typeof o&&$;)o=$[a],$=$.$$super;if("function"!=typeof o||o.$$stub)throw S.NameError.$new("undefined method `"+n+"' for class `"+e.$name()+"'")}return S.defn(e,r,o),e},S.alias_native=function(e,t,n){var r="$"+t,a=e.$$proto[n];if("function"!=typeof a||a.$$stub)throw S.NameError.$new("undefined native method `"+n+"' for class `"+e.$name()+"'");return S.defn(e,r,a),e},S.hash_init=function(e){e.$$map={},e.$$smap={},e.$$keys=[]},S.hash_clone=function(e,t){t.none=e.none,t.proc=e.proc;for(var n,r,a=0,o=e.$$keys,$=o.length;$>a;a++)n=e.$$keys[a],n.$$is_string?r=e.$$smap[n]:(r=n.value,n=n.key),S.hash_put(t,n,r)},S.hash_put=function(t,n,r){if(n.$$is_string)return t.$$smap.hasOwnProperty(n)||t.$$keys.push(n),void(t.$$smap[n]=r);var a,o,$=n.$hash();if(!t.$$map.hasOwnProperty($))return a={key:n,key_hash:$,value:r},t.$$keys.push(a),void(t.$$map[$]=a);for(a=t.$$map[$];a;){if(n===a.key||n["$eql?"](a.key)){o=e,a.value=r;break}o=a,a=a.next}o&&(a={key:n,key_hash:$,value:r},t.$$keys.push(a),o.next=a)},S.hash_get=function(e,t){if(t.$$is_string){if(e.$$smap.hasOwnProperty(t))return e.$$smap[t]}else{var n,r=t.$hash();if(e.$$map.hasOwnProperty(r))for(n=e.$$map[r];n;){if(t===n.key||t["$eql?"](n.key))return n.value;n=n.next}}},S.hash_delete=function(e,t){var n,r,a=e.$$keys,o=a.length;if(t.$$is_string){if(!e.$$smap.hasOwnProperty(t))return;for(n=0;o>n;n++)if(a[n]===t){a.splice(n,1);break}return r=e.$$smap[t],delete e.$$smap[t],r}var $=t.$hash();if(e.$$map.hasOwnProperty($))for(var i,s=e.$$map[$];s;){if(t===s.key||t["$eql?"](s.key)){for(r=s.value,n=0;o>n;n++)if(a[n]===s){a.splice(n,1);break}return i&&s.next?i.next=s.next:i?delete i.next:s.next?e.$$map[$]=s.next:delete e.$$map[$],r}i=s,s=s.next}},S.hash_rehash=function(t){for(var n,r,a,o=0,$=t.$$keys.length;$>o;o++)if(!t.$$keys[o].$$is_string&&(n=t.$$keys[o].key.$hash(),n!==t.$$keys[o].key_hash)){for(r=t.$$map[t.$$keys[o].key_hash],a=e;r;){if(r===t.$$keys[o]){a&&r.next?a.next=r.next:a?delete a.next:r.next?t.$$map[t.$$keys[o].key_hash]=r.next:delete t.$$map[t.$$keys[o].key_hash];break}a=r,r=r.next}if(t.$$keys[o].key_hash=n,t.$$map.hasOwnProperty(n)){for(r=t.$$map[n],a=e;r;){if(r===t.$$keys[o]){a=e;break}a=r,r=r.next}a&&(a.next=t.$$keys[o])}else t.$$map[n]=t.$$keys[o]}},S.hash=function(){var e,t,n,r,a,o,$=arguments.length;if(1===$&&arguments[0].$$is_hash)return arguments[0];if(t=new S.Hash.$$alloc,S.hash_init(t),1===$&&arguments[0].$$is_array){for(e=arguments[0],r=e.length,n=0;r>n;n++){if(2!==e[n].length)throw S.ArgumentError.$new("value not of length 2: "+e[n].$inspect());a=e[n][0],o=e[n][1],S.hash_put(t,a,o)}return t}if(1===$){e=arguments[0];for(a in e)e.hasOwnProperty(a)&&(o=e[a],S.hash_put(t,a,o));return t}if($%2!==0)throw S.ArgumentError.$new("odd number of arguments for Hash");for(n=0;$>n;n+=2)a=arguments[n],o=arguments[n+1],S.hash_put(t,a,o);return t},S.hash2=function(e,t){var n=new S.Hash.$$alloc;return n.$$map={},n.$$keys=e,n.$$smap=t,n},S.range=function(e,t,n){var r=new S.Range.$$alloc;return r.begin=e,r.end=t,r.exclude=n,r},S.ivar=function(e){return"constructor"===e||"displayName"===e||"__count__"===e||"__noSuchMethod__"===e||"__parent__"===e||"__proto__"===e||"hasOwnProperty"===e||"valueOf"===e?e+"$":e},S.modules={},S.loaded_features=["corelib/runtime"],S.current_dir=".",S.require_table={"corelib/runtime":!0},S.loaded=function(e){var t,n,r;for(t=0,n=e.length;n>t;t++){if(r=v(e[t]),S.require_table[r])return;S.loaded_features.push(r),S.require_table[r]=!0}},S.load=function(e){e=v(e),S.loaded([e]);var t=S.modules[e];if(t)t(S);else{var n=S.dynamic_require_severity||"warning",r="cannot load such file -- "+e;"error"===n?S.LoadError?S.LoadError.$new(r):function(){throw r}():"warning"===n&&console.warn("WARNING: LoadError: "+r)}return!0},S.require=function(e){return e=v(e),S.require_table[e]?!1:S.load(e)},p("BasicObject",t),p("Object",n,t),p("Module",a,n),p("Class",r,a),y=d("BasicObject",t,r),x=d("Object",n,y.constructor),w=d("Module",a,x.constructor),k=d("Class",r,w.constructor),y.$$class=k,x.$$class=k,w.$$class=k,k.$$class=k,y.$$super=null,x.$$super=y,w.$$super=x,k.$$super=w,y.$$parent=null,x.$$parent=y,w.$$parent=x,k.$$parent=w,S.base=x,y.$$scope=x.$$scope=S,y.$$orig_scope=x.$$orig_scope=S,w.$$scope=x.$$scope,w.$$orig_scope=x.$$orig_scope,k.$$scope=x.$$scope,k.$$orig_scope=x.$$orig_scope,x.$$proto.toString=function(){return this.$to_s()},x.$$proto.$require=S.require,S.top=new x.$$alloc,S.klass(x,x,"NilClass",o),b=S.nil=new o,b.$$id=M,b.call=b.apply=function(){throw S.LocalJumpError.$new("no block given")},S.breaker=new Error("unexpected break"),S.returner=new Error("unexpected return"),TypeError.$$super=Error}).call(this),"undefined"!=typeof global&&(global.Opal=this.Opal,Opal.global=global),"undefined"!=typeof window&&(window.Opal=this.Opal,Opal.global=window),Opal.modules["corelib/helpers"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice),a=e.module;return e.add_stubs(["$new","$class","$===","$respond_to?","$raise","$type_error","$__send__","$coerce_to","$nil?","$<=>","$inspect","$coerce_to!"]),function(t){var o,$=o=a(t,"Opal"),i=($.$$proto,$.$$scope);e.defs($,"$bridge",function(t,n){return e.bridge(t,n)}),e.defs($,"$type_error",function(e,t,r,a){var o,$;return null==r&&(r=n),null==a&&(a=n),(o=($=r!==!1&&r!==n)?a:r)===n||o.$$is_boolean&&1!=o?i.get("TypeError").$new("no implicit conversion of "+e.$class()+" into "+t):i.get("TypeError").$new("can't convert "+e.$class()+" into "+t+" ("+e.$class()+"#"+r+" gives "+a.$class())}),e.defs($,"$coerce_to",function(e,t,r){var a,o=this;return(a=t["$==="](e))===n||a.$$is_boolean&&1!=a?(((a=e["$respond_to?"](r))===n||a.$$is_boolean&&1!=a)&&o.$raise(o.$type_error(e,t)),e.$__send__(r)):e}),e.defs($,"$coerce_to!",function(e,t,r){var a,o=this,$=n;return $=o.$coerce_to(e,t,r),((a=t["$==="]($))===n||a.$$is_boolean&&1!=a)&&o.$raise(o.$type_error(e,t,r,$)),$}),e.defs($,"$coerce_to?",function(e,t,r){var a,o=this,$=n;return(a=e["$respond_to?"](r))===n||a.$$is_boolean&&1!=a?n:($=o.$coerce_to(e,t,r),(a=$["$nil?"]())===n||a.$$is_boolean&&1!=a?(((a=t["$==="]($))===n||a.$$is_boolean&&1!=a)&&o.$raise(o.$type_error(e,t,r,$)),$):n)}),e.defs($,"$try_convert",function(e,t,r){var a;return(a=t["$==="](e))===n||a.$$is_boolean&&1!=a?(a=e["$respond_to?"](r))===n||a.$$is_boolean&&1!=a?n:e.$__send__(r):e}),e.defs($,"$compare",function(e,t){var r,a=this,o=n;return o=e["$<=>"](t),(r=o===n)===n||r.$$is_boolean&&1!=r||a.$raise(i.get("ArgumentError"),"comparison of "+e.$class()+" with "+t.$class()+" failed"),o}),e.defs($,"$destructure",function(e){return 1==e.length?e[0]:e.$$is_array?e:r.call(e)}),e.defs($,"$respond_to?",function(e,t){return null!=e&&e.$$class?e["$respond_to?"](t):!1}),e.defs($,"$inspect",function(e){return void 0===e?"undefined":null===e?"null":e.$$class?e.$inspect():e.toString()}),e.defs($,"$instance_variable_name!",function(e){var t,r=this;return e=i.get("Opal")["$coerce_to!"](e,i.get("String"),"to_str"),((t=/^@[a-zA-Z_][a-zA-Z0-9_]*?$/.test(e))===n||t.$$is_boolean&&1!=t)&&r.$raise(i.get("NameError").$new("'"+e+"' is not allowed as an instance variable name",e)),e})}(t.base)},Opal.modules["corelib/module"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.dynamic_require_severity="ignore";var r=(e.top,e),a=e.nil,o=(e.breaker,e.slice),$=e.klass;return e.add_stubs(["$===","$raise","$equal?","$<","$>","$nil?","$attr_reader","$attr_writer","$coerce_to!","$new","$=~","$inject","$const_get","$split","$const_missing","$to_str","$to_proc","$lambda","$bind","$call","$class","$append_features","$included","$name","$to_s","$__id__"]),function(r,$super){function i(){}var s,c,u,l,_=i=$(r,$super,"Module",i),p=(_.$$proto,_.$$scope);return e.defs(_,"$new",s=function(){var t=s.$$p,n=t||a;s.$$p=null;var r=e.boot_module_object();if(r.$$name=a,r.$$class=e.Module,r.$$dep=[],r.$$is_module=!0,r.$$proto={},e.create_scope(e.Module.$$scope,r),n!==a){var o=n.$$s;n.$$s=null,n.call(r),n.$$s=o}return r}),e.defn(_,"$===",function(t){var n,r=this;return(n=null==t)===a||n.$$is_boolean&&1!=n?e.is_a(t,r):!1}),e.defn(_,"$<",function(t){var n,r=this;((n=p.get("Module")["$==="](t))===a||n.$$is_boolean&&1!=n)&&r.$raise(p.get("TypeError"),"compared with non class/module");var o,$,i,s=r;if(s===t)return!1;for($=0,o=e.ancestors(r),i=o.length;i>$;$++)if(o[$]===t)return!0;for($=0,o=e.ancestors(t),i=o.length;i>$;$++)if(o[$]===r)return!1;return a}),e.defn(_,"$<=",function(e){var n,r=this;return(n=r["$equal?"](e))!==!1&&n!==a?n:t(r,e)}),e.defn(_,"$>",function(e){var n,r=this;return((n=p.get("Module")["$==="](e))===a||n.$$is_boolean&&1!=n)&&r.$raise(p.get("TypeError"),"compared with non class/module"),t(e,r)}),e.defn(_,"$>=",function(e){var t,r=this;return(t=r["$equal?"](e))!==!1&&t!==a?t:n(r,e)}),e.defn(_,"$<=>",function(e){var n,r=this,o=a;return r===e?0:(n=p.get("Module")["$==="](e))===a||n.$$is_boolean&&1!=n?a:(o=t(r,e),(n=o["$nil?"]())===a||n.$$is_boolean&&1!=n?o!==!1&&o!==a?-1:1:a)}),e.defn(_,"$alias_method",function(t,n){var r=this;return e.alias(r,t,n),r}),e.defn(_,"$alias_native",function(t,n){var r=this;return null==n&&(n=t),e.alias_native(r,t,n),r}),e.defn(_,"$ancestors",function(){var t=this;return e.ancestors(t)}),e.defn(_,"$append_features",function(t){var n=this;return e.append_features(n,t),n}),e.defn(_,"$attr_accessor",function(){var t,n,r=this,o=a,$=arguments.length-0;0>$&&($=0);var i=new Array($);for(o=0;$>o;o++)i[o]=arguments[o+0];return(t=r).$attr_reader.apply(t,e.to_a(i)),(n=r).$attr_writer.apply(n,e.to_a(i))}),e.alias(_,"attr","attr_accessor"),e.defn(_,"$attr_reader",function(){var t=this,n=a,r=arguments.length-0;0>r&&(r=0);var o=new Array(r);for(n=0;r>n;n++)o[n]=arguments[n+0];for(var $=t.$$proto,i=o.length-1;i>=0;i--){var s=o[i],c="$"+s,u=e.ivar(s),l=function(e){return function(){return null==this[e]?a:this[e]}}(u);$[u]=a,t.$$is_singleton?$.constructor.prototype[c]=l:e.defn(t,c,l)}return a}),e.defn(_,"$attr_writer",function(){var t=this,n=a,r=arguments.length-0;0>r&&(r=0);var o=new Array(r);for(n=0;r>n;n++)o[n]=arguments[n+0];for(var $=t.$$proto,i=o.length-1;i>=0;i--){var s=o[i],c="$"+s+"=",u=e.ivar(s),l=function(e){return function(t){return this[e]=t}}(u);$[u]=a,t.$$is_singleton?$.constructor.prototype[c]=l:e.defn(t,c,l)}return a}),e.defn(_,"$autoload",function(e,t){var n,r=this;return(n=r.$$autoload)||(n=r.$$autoload={}),n[e]=t,a}),e.defn(_,"$class_variable_get",function(t){var n,r=this;t=p.get("Opal")["$coerce_to!"](t,p.get("String"),"to_str"),(n=t.length<3||"@@"!==t.slice(0,2))===a||n.$$is_boolean&&1!=n||r.$raise(p.get("NameError").$new("class vars should start with @@",t));var o=e.cvars[t.slice(2)];return function(){return(n=null==o)===a||n.$$is_boolean&&1!=n?a:r.$raise(p.get("NameError").$new("uninitialized class variable @@a in",t))}(),o}),e.defn(_,"$class_variable_set",function(t,n){var r,o=this;return t=p.get("Opal")["$coerce_to!"](t,p.get("String"),"to_str"),(r=t.length<3||"@@"!==t.slice(0,2))===a||r.$$is_boolean&&1!=r||o.$raise(p.get("NameError")),e.cvars[t.slice(2)]=n,n}),e.defn(_,"$constants",function(){var e=this;return e.$$scope.constants.slice(0)}),e.defn(_,"$const_defined?",function(t,n){var r,o=this;null==n&&(n=!0),((r=t["$=~"](/^[A-Z]\w*$/))===a||r.$$is_boolean&&1!=r)&&o.$raise(p.get("NameError").$new("wrong constant name "+t,t));var $=[o.$$scope];if(n||o===e.Object)for(var i=o.$$super;i!==e.BasicObject;)$.push(i.$$scope),i=i.$$super;for(var s=0,c=$.length;c>s;s++)if($[s].hasOwnProperty(t))return!0;return!1}),e.defn(_,"$const_get",function(t,n){var r,o,$,i=this;if(null==n&&(n=!0),(r=-1!=t.indexOf("::")&&"::"!=t)!==a&&(!r.$$is_boolean||1==r))return(r=(o=t.$split("::")).$inject,r.$$p=($=function(e,t){$.$$s||this;return null==e&&(e=a),null==t&&(t=a),e.$const_get(t)},$.$$s=i,$),r).call(o,i);((r=/^[A-Z]\w*$/.test(t))===a||r.$$is_boolean&&1!=r)&&i.$raise(p.get("NameError").$new("wrong constant name "+t,t));var s=[i.$$scope];if(n||i==e.Object)for(var c=i.$$super;c!==e.BasicObject;)s.push(c.$$scope),c=c.$$super;for(var u=0,l=s.length;l>u;u++)if(s[u].hasOwnProperty(t))return s[u][t];return i.$const_missing(t)}),e.defn(_,"$const_missing",function(e){var t=this;if(t.$$autoload){var n=t.$$autoload[e];if(n)return t.$require(n),t.$const_get(e)}return t.$raise(p.get("NameError").$new("uninitialized constant "+t+"::"+e,e))}),e.defn(_,"$const_set",function(t,n){var r,o=this;((r=t["$=~"](/^[A-Z]\w*$/))===a||r.$$is_boolean&&1!=r)&&o.$raise(p.get("NameError").$new("wrong constant name "+t,t));try{t=t.$to_str()}catch($){try{o.$raise(p.get("TypeError"),"conversion with #to_str failed")}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}return e.casgn(o,t,n),n}),e.defn(_,"$define_method",c=function(t,n){var r,$,i,s,u=this,l=c.$$p,_=l||a,d=a;c.$$p=null,(r=void 0===n&&_===a)===a||r.$$is_boolean&&1!=r||u.$raise(p.get("ArgumentError"),"tried to create a Proc object without a block"),(r=_)!==!1&&r!==a?r:_=function(){return d=n,p.get("Proc")["$==="](d)?n:p.get("Method")["$==="](d)?n.$to_proc().$$unbound:p.get("UnboundMethod")["$==="](d)?($=(i=u).$lambda,$.$$p=(s=function(t){var r,$=s.$$s||this,i=a;return t=o.call(arguments,0),i=n.$bind($),(r=i).$call.apply(r,e.to_a(t))},s.$$s=u,s),$).call(i):u.$raise(p.get("TypeError"),"wrong argument type "+_.$class()+" (expected Proc/Method)")}();var f="$"+t;return _.$$jsid=t,_.$$s=null,_.$$def=_,e.defn(u,f,_),t}),e.defn(_,"$remove_method",function(){var t=this,n=a,r=arguments.length-0;0>r&&(r=0);var o=new Array(r);for(n=0;r>n;n++)o[n]=arguments[n+0];for(var $=0,i=o.length;i>$;$++)e.rdef(t,"$"+o[$]);return t}),e.defn(_,"$singleton_class?",function(){var e=this;return!!e.$$is_singleton}),e.defn(_,"$include",function(){var e=this,t=a,n=arguments.length-0;0>n&&(n=0);var r=new Array(n);for(t=0;n>t;t++)r[t]=arguments[t+0];for(var o=r.length-1;o>=0;o--){var $=r[o];$!==e&&($.$$is_module||e.$raise(p.get("TypeError"),"wrong argument type "+$.$class()+" (expected Module)"),$.$append_features(e),$.$included(e))}return e}),e.defn(_,"$include?",function(e){for(var t=this,n=t;n;n=n.$$super)for(var r=0;r!=n.$$inc.length;r++){var a=n.$$inc[r];if(e===a)return!0}return!1}),e.defn(_,"$instance_method",function(e){var t=this,n=t.$$proto["$"+e];return(!n||n.$$stub)&&t.$raise(p.get("NameError").$new("undefined method `"+e+"' for class `"+t.$name()+"'",e)),p.get("UnboundMethod").$new(t,n,e)}),e.defn(_,"$instance_methods",function(t){var n=this;null==t&&(t=!0);var r=[],a=n.$$proto;for(var o in a)if("$"===o.charAt(0)&&"function"==typeof a[o]&&!a[o].$$stub){if(!n.$$is_module){if(n!==e.BasicObject&&a[o]===e.BasicObject.$$proto[o])continue;if(!t&&!a.hasOwnProperty(o))continue;if(!t&&a[o].$$donated)continue}r.push(o.substr(1))}return r}),e.defn(_,"$included",function(e){return a}),e.defn(_,"$extended",function(e){return a}),e.defn(_,"$method_added",function(){return a}),e.defn(_,"$method_removed",function(){return a}),e.defn(_,"$method_undefined",function(){return a}),e.defn(_,"$module_eval",u=function(){var e=this,t=u.$$p,n=t||a;u.$$p=null,n!==!1&&n!==a||e.$raise(p.get("ArgumentError"),"no block given");var r,o=n.$$s;return n.$$s=null,r=n.call(e),n.$$s=o,r}),e.alias(_,"class_eval","module_eval"),e.defn(_,"$module_exec",l=function(){var e=this,t=l.$$p,n=t||a,r=a,o=arguments.length-0;0>o&&(o=0);var $=new Array(o);for(r=0;o>r;r++)$[r]=arguments[r+0];l.$$p=null,n===a&&e.$raise(p.get("LocalJumpError"),"no block given");var i,s=n.$$s;return n.$$s=null,i=n.apply(e,$),n.$$s=s,i}),e.alias(_,"class_exec","module_exec"),e.defn(_,"$method_defined?",function(e){var t=this,n=t.$$proto["$"+e];return!!n&&!n.$$stub}),e.defn(_,"$module_function",function(){var t=this,n=a,r=arguments.length-0;0>r&&(r=0);var o=new Array(r);for(n=0;r>n;n++)o[n]=arguments[n+0];if(0===o.length)t.$$module_function=!0;else for(var $=0,i=o.length;i>$;$++){var s=o[$],c="$"+s,u=t.$$proto[c];e.defs(t,c,u)}return t}),e.defn(_,"$name",function(){var t=this;if(t.$$full_name)return t.$$full_name;for(var n=[],r=t;r;){if(r.$$name===a)return 0===n.length?a:n.join("::");if(n.unshift(r.$$name),r=r.$$base_module,r===e.Object)break}return 0===n.length?a:t.$$full_name=n.join("::")}),e.defn(_,"$remove_class_variable",function(){return a}),e.defn(_,"$remove_const",function(e){var t=this,n=t.$$scope[e];return delete t.$$scope[e],n}),e.defn(_,"$to_s",function(){var t,n=this;return(t=e.Module.$name.call(n))!==!1&&t!==a?t:"#<"+(n.$$is_module?"Module":"Class")+":0x"+n.$__id__().$to_s(16)+">"}),e.defn(_,"$undef_method",function(){var t=this,n=a,r=arguments.length-0;0>r&&(r=0);var o=new Array(r);for(n=0;r>n;n++)o[n]=arguments[n+0];for(var $=0,i=o.length;i>$;$++)e.udef(t,"$"+o[$]);return t}),a&&"undef_method"}(r.base,null)},Opal.modules["corelib/class"]=function(e){e.dynamic_require_severity="ignore";var t=e.top,n=e,r=e.nil,a=(e.breaker,e.slice,e.klass);return e.add_stubs(["$require","$raise","$allocate"]),t.$require("corelib/module"),function(t,$super){function n(){}var o,$,i=n=a(t,$super,"Class",n),s=(i.$$proto,i.$$scope);return e.defs(i,"$new",o=function(t){function n(){}var a=this,$=o.$$p,i=$||r;null==t&&(t=s.get("Object")),o.$$p=null,t.$$is_class||a.$raise(s.get("TypeError"),"superclass must be a Class");var c=e.boot_class(t,n);if(c.$$name=r,c.$$parent=t,c.$$is_class=!0,e.create_scope(t.$$scope,c),t.$inherited(c),i!==r){var u=i.$$s;i.$$s=null,i.call(c),i.$$s=u}return c}),e.defn(i,"$allocate",function(){var t=this,n=new t.$$alloc;return n.$$id=e.uid(),n}),e.defn(i,"$inherited",function(e){return r}),e.defn(i,"$new",$=function(){var e=this,t=$.$$p,n=t||r,a=r,o=arguments.length-0;0>o&&(o=0);var i=new Array(o);for(a=0;o>a;a++)i[a]=arguments[a+0];$.$$p=null;var s=e.$allocate();return s.$initialize.$$p=n,s.$initialize.apply(s,i),s}),e.defn(i,"$superclass",function(){var e=this;return e.$$super||r}),r&&"superclass"}(n.base,null)},Opal.modules["corelib/basic_object"]=function(Opal){function $rb_gt(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}Opal.dynamic_require_severity="ignore";var OPAL_CONFIG={method_missing:!0,arity_check:!1,freezing:!0,tainting:!0},self=Opal.top,$scope=Opal,nil=Opal.nil,$breaker=Opal.breaker,$slice=Opal.slice,$klass=Opal.klass,$range=Opal.range,$hash2=Opal.hash2;return Opal.add_stubs(["$==","$!","$nil?","$cover?","$size","$raise","$compile","$lambda","$>","$new","$inspect"]),function($base,$super){function $BasicObject(){}var self=$BasicObject=$klass($base,$super,"BasicObject",$BasicObject),def=self.$$proto,$scope=self.$$scope,TMP_1,TMP_2,TMP_4,TMP_5;return Opal.defn(self,"$initialize",function(){return nil}),Opal.defn(self,"$==",function(e){var t=this;return t===e}),Opal.defn(self,"$eql?",function(e){var t=this;return t["$=="](e)}),Opal.alias(self,"equal?","=="),Opal.defn(self,"$__id__",function(){var e=this;return e.$$id||(e.$$id=Opal.uid())}),Opal.defn(self,"$__send__",TMP_1=function(e){var t=this,n=TMP_1.$$p,r=n||nil,a=nil,o=arguments.length-1;0>o&&(o=0);var $=new Array(o);for(a=0;o>a;a++)$[a]=arguments[a+1];TMP_1.$$p=null;var i=t["$"+e];return i?(r!==nil&&(i.$$p=r),i.apply(t,$)):(r!==nil&&(t.$method_missing.$$p=r),t.$method_missing.apply(t,[e].concat($)))}),Opal.defn(self,"$!",function(){return!1}),Opal.defn(self,"$!=",function(e){var t=this;return t["$=="](e)["$!"]()}),Opal.alias(self,"equal?","=="),Opal.defn(self,"$instance_eval",TMP_2=function(){var $a,$b,TMP_3,self=this,$iter=TMP_2.$$p,block=$iter||nil,string=nil,file=nil,_lineno=nil,compiled=nil,wrapper=nil,$splat_index=nil,array_size=arguments.length-0;0>array_size&&(array_size=0);var args=new Array(array_size);for($splat_index=0;array_size>$splat_index;$splat_index++)args[$splat_index]=arguments[$splat_index+0];TMP_2.$$p=null,$b=block["$nil?"](),($a=$b!==!1&&$b!==nil?!!Opal.compile:$b)===nil||$a.$$is_boolean&&1!=$a?$rb_gt(args.$size(),0)&&$scope.get("Kernel").$raise($scope.get("ArgumentError"),"wrong number of arguments ("+args.$size()+" for 0)"):((($a=$range(1,3,!1)["$cover?"](args.$size()))===nil||$a.$$is_boolean&&1!=$a)&&$scope.get("Kernel").$raise($scope.get("ArgumentError"),"wrong number of arguments (0 for 1..3)"),$a=Opal.to_a(args),string=null==$a[0]?nil:$a[0],file=null==$a[1]?nil:$a[1],_lineno=null==$a[2]?nil:$a[2],$a,compiled=$scope.get("Opal").$compile(string,$hash2(["file","eval"],{file:($a=file)!==!1&&$a!==nil?$a:"(eval)",eval:!0})),wrapper=function(){return eval(compiled)},block=($a=($b=$scope.get("Kernel")).$lambda,$a.$$p=(TMP_3=function(){var e=TMP_3.$$s||this;return wrapper.call(e)},TMP_3.$$s=self,TMP_3),$a).call($b));var old=block.$$s,result;if(block.$$s=null,self.$$is_class||self.$$is_module){self.$$eval=!0;try{result=block.call(self,self)}finally{self.$$eval=!1}}else result=block.call(self,self);return block.$$s=old,result}),Opal.defn(self,"$instance_exec",TMP_4=function(){var e=this,t=TMP_4.$$p,n=t||nil,r=nil,a=arguments.length-0;0>a&&(a=0);var o=new Array(a);for(r=0;a>r;r++)o[r]=arguments[r+0];TMP_4.$$p=null,n!==!1&&n!==nil||$scope.get("Kernel").$raise($scope.get("ArgumentError"),"no block given");var $,i=n.$$s;if(n.$$s=null,e.$$is_class||e.$$is_module){e.$$eval=!0;try{$=n.apply(e,o)}finally{e.$$eval=!1}}else $=n.apply(e,o);return n.$$s=i,$}),Opal.defn(self,"$singleton_method_added",function(){return nil}),Opal.defn(self,"$singleton_method_removed",function(){return nil}),Opal.defn(self,"$singleton_method_undefined",function(){return nil}),Opal.defn(self,"$method_missing",TMP_5=function(e){var t,n=this,r=(TMP_5.$$p,nil),a=arguments.length-1;0>a&&(a=0);var o=new Array(a);for(r=0;a>r;r++)o[r]=arguments[r+1];return TMP_5.$$p=null,$scope.get("Kernel").$raise($scope.get("NoMethodError").$new(function(){return(t=n.$inspect&&!n.$inspect.$$stub)===nil||t.$$is_boolean&&1!=t?"undefined method `"+e+"' for "+n.$$class:"undefined method `"+e+"' for "+n.$inspect()+":"+n.$$class}(),e))}),nil&&"method_missing"}($scope.base,null)},Opal.modules["corelib/kernel"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?t>=e:e["$<="](t)}e.dynamic_require_severity="ignore";var r=(e.top,e),a=e.nil,o=e.breaker,$=(e.slice,e.module),i=e.gvars,s=e.hash2,c=e.klass;return e.add_stubs(["$raise","$new","$inspect","$!","$=~","$==","$object_id","$class","$coerce_to?","$<<","$allocate","$copy_instance_variables","$copy_singleton_methods","$initialize_clone","$initialize_copy","$define_method","$to_proc","$singleton_class","$initialize_dup","$for","$loop","$pop","$call","$append_features","$extended","$length","$respond_to?","$[]","$nil?","$to_a","$to_int","$fetch","$Integer","$Float","$to_ary","$to_str","$coerce_to","$to_s","$__id__","$instance_variable_name!","$coerce_to!","$===","$>","$print","$format","$puts","$each","$<=","$empty?","$exception","$kind_of?","$respond_to_missing?","$try_convert!","$expand_path","$join","$start_with?","$sym","$arg","$include"]),
function(r){var c,u,l,_,p,d,f,g,h,m,v=c=$(r,"Kernel"),b=(v.$$proto,v.$$scope);e.defn(v,"$method_missing",u=function(e){var t=this,n=(u.$$p,a),r=arguments.length-1;0>r&&(r=0);var o=new Array(r);for(n=0;r>n;n++)o[n]=arguments[n+1];return u.$$p=null,t.$raise(b.get("NoMethodError").$new("undefined method `"+e+"' for "+t.$inspect(),e,o))}),e.defn(v,"$=~",function(e){return!1}),e.defn(v,"$!~",function(e){var t=this;return t["$=~"](e)["$!"]()}),e.defn(v,"$===",function(e){var t,n=this;return(t=n.$object_id()["$=="](e.$object_id()))!==!1&&t!==a?t:n["$=="](e)}),e.defn(v,"$<=>",function(e){var t=this;t.$$comparable=!0;var n=t["$=="](e);return n&&n!==a?0:a}),e.defn(v,"$method",function(e){var t=this,n=t["$"+e];return(!n||n.$$stub)&&t.$raise(b.get("NameError").$new("undefined method `"+e+"' for class `"+t.$class()+"'",e)),b.get("Method").$new(t,n,e)}),e.defn(v,"$methods",function(t){var n=this;null==t&&(t=!0);var r=[];for(var o in n)if("$"==o[0]&&"function"==typeof n[o]){if((0==t||t===a)&&!e.hasOwnProperty.call(n,o))continue;void 0===n[o].$$stub&&r.push(o.substr(1))}return r}),e.alias(v,"public_methods","methods"),e.defn(v,"$Array",function(e){var t;return e===a?[]:e.$$is_array?e:(t=b.get("Opal")["$coerce_to?"](e,b.get("Array"),"to_ary"),t!==a?t:(t=b.get("Opal")["$coerce_to?"](e,b.get("Array"),"to_a"),t!==a?t:[e]))}),e.defn(v,"$at_exit",l=function(){var e,t=l.$$p,n=t||a;return null==i.__at_exit__&&(i.__at_exit__=a),l.$$p=null,(e=i.__at_exit__)!==!1&&e!==a?e:i.__at_exit__=[],i.__at_exit__["$<<"](n)}),e.defn(v,"$caller",function(){return[]}),e.defn(v,"$class",function(){var e=this;return e.$$class}),e.defn(v,"$copy_instance_variables",function(e){var t=this;for(var n in e)e.hasOwnProperty(n)&&"$"!==n.charAt(0)&&(t[n]=e[n])}),e.defn(v,"$copy_singleton_methods",function(t){var n,r=this;if(t.hasOwnProperty("$$meta")){var a=e.get_singleton_class(t).$$proto,o=e.get_singleton_class(r).$$proto;for(n in a)"$"===n.charAt(0)&&a.hasOwnProperty(n)&&(o[n]=a[n])}for(n in t)"$"===n.charAt(0)&&"$"!==n.charAt(1)&&t.hasOwnProperty(n)&&(r[n]=t[n])}),e.defn(v,"$clone",function(){var e=this,t=a;return t=e.$class().$allocate(),t.$copy_instance_variables(e),t.$copy_singleton_methods(e),t.$initialize_clone(e),t}),e.defn(v,"$initialize_clone",function(e){var t=this;return t.$initialize_copy(e)}),e.defn(v,"$define_singleton_method",_=function(e,t){var n,r,o=this,$=_.$$p,i=$||a;return _.$$p=null,(n=(r=o.$singleton_class()).$define_method,n.$$p=i.$to_proc(),n).call(r,e,t)}),e.defn(v,"$dup",function(){var e=this,t=a;return t=e.$class().$allocate(),t.$copy_instance_variables(e),t.$initialize_dup(e),t}),e.defn(v,"$initialize_dup",function(e){var t=this;return t.$initialize_copy(e)}),e.defn(v,"$enum_for",p=function(t){var n,r,o=this,$=p.$$p,i=$||a,s=a,c=arguments.length-1;0>c&&(c=0);var u=new Array(c);for(s=0;c>s;s++)u[s]=arguments[s+1];return null==t&&(t="each"),p.$$p=null,(n=(r=b.get("Enumerator")).$for,n.$$p=i.$to_proc(),n).apply(r,[o,t].concat(e.to_a(u)))}),e.alias(v,"to_enum","enum_for"),e.defn(v,"$equal?",function(e){var t=this;return t===e}),e.defn(v,"$exit",function(t){var n,r,$,s=this;return null==i.__at_exit__&&(i.__at_exit__=a),null==t&&(t=!0),(n=i.__at_exit__)!==!1&&n!==a?n:i.__at_exit__=[],(n=(r=s).$loop,n.$$p=($=function(){var e=($.$$s||this,a);return null==i.__at_exit__&&(i.__at_exit__=a),e=i.__at_exit__.$pop(),e!==!1&&e!==a?e.$call():(o.$v=a,o)},$.$$s=s,$),n).call(r),(n=t===!0)===a||n.$$is_boolean&&1!=n||(t=0),e.exit(t),a}),e.defn(v,"$extend",function(){var e=this,t=a,n=arguments.length-0;0>n&&(n=0);var r=new Array(n);for(t=0;n>t;t++)r[t]=arguments[t+0];for(var o=e.$singleton_class(),$=r.length-1;$>=0;$--){var i=r[$];i.$$is_module||e.$raise(b.get("TypeError"),"wrong argument type "+i.$class()+" (expected Module)"),i.$append_features(o),i.$extended(e)}return e}),e.defn(v,"$format",function(e){function t(){I&Y&&p.$raise(b.get("ArgumentError"),"flag after width"),I&W&&p.$raise(b.get("ArgumentError"),"flag after precision")}function n(){I&Y&&p.$raise(b.get("ArgumentError"),"width given twice"),I&W&&p.$raise(b.get("ArgumentError"),"width after precision")}function r(e){return e>=h.length&&p.$raise(b.get("ArgumentError"),"too few arguments"),h[e]}function o(){switch(F){case-1:p.$raise(b.get("ArgumentError"),"unnumbered("+P+") mixed with numbered");case-2:p.$raise(b.get("ArgumentError"),"unnumbered("+P+") mixed with named")}return F=P++,r(F-1)}function $(e){return F>0&&p.$raise(b.get("ArgumentError"),"numbered("+e+") after unnumbered("+F+")"),-2===F&&p.$raise(b.get("ArgumentError"),"numbered("+e+") after named"),1>e&&p.$raise(b.get("ArgumentError"),"invalid index - "+e+"$"),F=-1,r(e-1)}function s(){return void 0===C?o():C}function c(t){for(var n,r="";;v++){if(v===T&&p.$raise(b.get("ArgumentError"),"malformed format string - %*[0-9]"),e.charCodeAt(v)<48||e.charCodeAt(v)>57)return v--,n=parseInt(r,10)||0,n>2147483647&&p.$raise(b.get("ArgumentError"),""+t+" too big"),n;r+=e.charAt(v)}}function u(t){var n,r=c(t);return"$"===e.charAt(v+1)?(v++,n=$(r)):n=o(),n.$to_int()}var l,_,p=this,d=a,f=a;null==i.DEBUG&&(i.DEBUG=a);var g=arguments.length-1;0>g&&(g=0);var h=new Array(g);for(f=0;g>f;f++)h[f]=arguments[f+1];(l=(_=h.$length()["$=="](1))?h["$[]"](0)["$respond_to?"]("to_ary"):h.$length()["$=="](1))===a||l.$$is_boolean&&1!=l||(d=b.get("Opal")["$coerce_to?"](h["$[]"](0),b.get("Array"),"to_ary"),((l=d["$nil?"]())===a||l.$$is_boolean&&1!=l)&&(h=d.$to_a()));var m,v,y,x,w,k,S,E,R,A,O,M,q,z,C,I,N="",j=0,T=e.length,P=1,F=0,D=0,B=1,H=2,L=4,U=8,G=16,Y=32,V=64,W=128;for(v=e.indexOf("%");-1!==v;v=e.indexOf("%",v)){switch(x=void 0,I=D,k=-1,S=-1,C=void 0,m=v,v++,e.charAt(v)){case"%":j=v;case"":case"\n":case"\x00":v++;continue}e:for(;T>v;v++)switch(e.charAt(v)){case" ":t(),I|=G;continue e;case"#":t(),I|=B;continue e;case"+":t(),I|=L;continue e;case"-":t(),I|=H;continue e;case"0":t(),I|=U;continue e;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":if(E=c("width"),"$"===e.charAt(v+1)){if(v+2===T){x="%",v++;break e}void 0!==C&&p.$raise(b.get("ArgumentError"),"value given twice - %"+E+"$"),C=$(E),v++}else n(),I|=Y,k=E;continue e;case"<":case"{":for(A="<"===e.charAt(v)?">":"}",R="",v++;;v++){if(v===T&&p.$raise(b.get("ArgumentError"),"malformed name - unmatched parenthesis"),e.charAt(v)===A){if(F>0&&p.$raise(b.get("ArgumentError"),"named "+R+" after unnumbered("+F+")"),-1===F&&p.$raise(b.get("ArgumentError"),"named "+R+" after numbered"),F=-2,void 0!==h[0]&&h[0].$$is_hash||p.$raise(b.get("ArgumentError"),"one hash required"),C=h[0].$fetch(R),">"===A)continue e;if(x=C.toString(),-1!==S&&(x=x.slice(0,S)),I&H)for(;x.length<k;)x+=" ";else for(;x.length<k;)x=" "+x;break e}R+=e.charAt(v)}case"*":v++,n(),I|=Y,k=u("width"),0>k&&(I|=H,k=-k);continue e;case".":if(I&W&&p.$raise(b.get("ArgumentError"),"precision given twice"),I|=V|W,S=0,v++,"*"===e.charAt(v)){v++,S=u("precision"),0>S&&(I&=~V);continue e}S=c("precision");continue e;case"d":case"i":case"u":if(y=p.$Integer(s()),y>=0){for(x=y.toString();x.length<S;)x="0"+x;if(I&H)for((I&L||I&G)&&(x=(I&L?"+":" ")+x);x.length<k;)x+=" ";else if(I&U&&-1===S){for(;x.length<k-(I&L||I&G?1:0);)x="0"+x;(I&L||I&G)&&(x=(I&L?"+":" ")+x)}else for((I&L||I&G)&&(x=(I&L?"+":" ")+x);x.length<k;)x=" "+x}else{for(x=(-y).toString();x.length<S;)x="0"+x;if(I&H)for(x="-"+x;x.length<k;)x+=" ";else if(I&U&&-1===S){for(;x.length<k-1;)x="0"+x;x="-"+x}else for(x="-"+x;x.length<k;)x=" "+x}break e;case"b":case"B":case"o":case"x":case"X":switch(e.charAt(v)){case"b":case"B":O=2,M="0b",q=/^1+/,z="1";break;case"o":O=8,M="0",q=/^3?7+/,z="7";break;case"x":case"X":O=16,M="0x",q=/^f+/,z="f"}if(y=p.$Integer(s()),y>=0){for(x=y.toString(O);x.length<S;)x="0"+x;if(I&H)for((I&L||I&G)&&(x=(I&L?"+":" ")+x),I&B&&0!==y&&(x=M+x);x.length<k;)x+=" ";else if(I&U&&-1===S){for(;x.length<k-(I&L||I&G?1:0)-(I&B&&0!==y?M.length:0);)x="0"+x;I&B&&0!==y&&(x=M+x),(I&L||I&G)&&(x=(I&L?"+":" ")+x)}else for(I&B&&0!==y&&(x=M+x),(I&L||I&G)&&(x=(I&L?"+":" ")+x);x.length<k;)x=" "+x}else if(I&L||I&G){for(x=(-y).toString(O);x.length<S;)x="0"+x;if(I&H)for(I&B&&(x=M+x),x="-"+x;x.length<k;)x+=" ";else if(I&U&&-1===S){for(;x.length<k-1-(I&B?2:0);)x="0"+x;I&B&&(x=M+x),x="-"+x}else for(I&B&&(x=M+x),x="-"+x;x.length<k;)x=" "+x}else{for(x=(y>>>0).toString(O).replace(q,z);x.length<S-2;)x=z+x;if(I&H)for(x=".."+x,I&B&&(x=M+x);x.length<k;)x+=" ";else if(I&U&&-1===S){for(;x.length<k-2-(I&B?M.length:0);)x=z+x;x=".."+x,I&B&&(x=M+x)}else for(x=".."+x,I&B&&(x=M+x);x.length<k;)x=" "+x}e.charAt(v)===e.charAt(v).toUpperCase()&&(x=x.toUpperCase());break e;case"f":case"e":case"E":case"g":case"G":if(y=p.$Float(s()),y>=0||isNaN(y)){if(y===1/0)x="Inf";else switch(e.charAt(v)){case"f":x=y.toFixed(-1===S?6:S);break;case"e":case"E":x=y.toExponential(-1===S?6:S);break;case"g":case"G":x=y.toExponential(),w=parseInt(x.split("e")[1],10),-4>w||w>=(-1===S?6:S)||(x=y.toPrecision(-1===S?I&B?6:void 0:S))}if(I&H)for((I&L||I&G)&&(x=(I&L?"+":" ")+x);x.length<k;)x+=" ";else if(I&U&&y!==1/0&&!isNaN(y)){for(;x.length<k-(I&L||I&G?1:0);)x="0"+x;(I&L||I&G)&&(x=(I&L?"+":" ")+x)}else for((I&L||I&G)&&(x=(I&L?"+":" ")+x);x.length<k;)x=" "+x}else{if(y===-(1/0))x="Inf";else switch(e.charAt(v)){case"f":x=(-y).toFixed(-1===S?6:S);break;case"e":case"E":x=(-y).toExponential(-1===S?6:S);break;case"g":case"G":x=(-y).toExponential(),w=parseInt(x.split("e")[1],10),-4>w||w>=(-1===S?6:S)||(x=(-y).toPrecision(-1===S?I&B?6:void 0:S))}if(I&H)for(x="-"+x;x.length<k;)x+=" ";else if(I&U&&y!==-(1/0)){for(;x.length<k-1;)x="0"+x;x="-"+x}else for(x="-"+x;x.length<k;)x=" "+x}e.charAt(v)!==e.charAt(v).toUpperCase()||y===1/0||y===-(1/0)||isNaN(y)||(x=x.toUpperCase()),x=x.replace(/([eE][-+]?)([0-9])$/,"$10$2");break e;case"a":case"A":p.$raise(b.get("NotImplementedError"),"`A` and `a` format field types are not implemented in Opal yet");case"c":if(y=s(),y["$respond_to?"]("to_ary")&&(y=y.$to_ary()[0]),x=y["$respond_to?"]("to_str")?y.$to_str():String.fromCharCode(b.get("Opal").$coerce_to(y,b.get("Integer"),"to_int")),1!==x.length&&p.$raise(b.get("ArgumentError"),"%c requires a character"),I&H)for(;x.length<k;)x+=" ";else for(;x.length<k;)x=" "+x;break e;case"p":if(x=s().$inspect(),-1!==S&&(x=x.slice(0,S)),I&H)for(;x.length<k;)x+=" ";else for(;x.length<k;)x=" "+x;break e;case"s":if(x=s().$to_s(),-1!==S&&(x=x.slice(0,S)),I&H)for(;x.length<k;)x+=" ";else for(;x.length<k;)x=" "+x;break e;default:p.$raise(b.get("ArgumentError"),"malformed format string - %"+e.charAt(v))}void 0===x&&p.$raise(b.get("ArgumentError"),"malformed format string - %"),N+=e.slice(j,m)+x,j=v+1}return i.DEBUG&&F>=0&&P<h.length&&p.$raise(b.get("ArgumentError"),"too many arguments for format string"),N+e.slice(j)}),e.defn(v,"$hash",function(){var e=this;return e.$__id__()}),e.defn(v,"$initialize_copy",function(e){return a}),e.defn(v,"$inspect",function(){var e=this;return e.$to_s()}),e.defn(v,"$instance_of?",function(e){var t=this;return e.$$is_class||e.$$is_module||t.$raise(b.get("TypeError"),"class or module required"),t.$$class===e}),e.defn(v,"$instance_variable_defined?",function(t){var n=this;return t=b.get("Opal")["$instance_variable_name!"](t),e.hasOwnProperty.call(n,t.substr(1))}),e.defn(v,"$instance_variable_get",function(t){var n=this;t=b.get("Opal")["$instance_variable_name!"](t);var r=n[e.ivar(t.substr(1))];return null==r?a:r}),e.defn(v,"$instance_variable_set",function(t,n){var r=this;return t=b.get("Opal")["$instance_variable_name!"](t),r[e.ivar(t.substr(1))]=n}),e.defn(v,"$remove_instance_variable",function(t){var n=this;t=b.get("Opal")["$instance_variable_name!"](t);var r,a=e.ivar(t.substr(1));return n.hasOwnProperty(a)?(r=n[a],delete n[a],r):n.$raise(b.get("NameError"),"instance variable "+t+" not defined")}),e.defn(v,"$instance_variables",function(){var e,t=this,n=[];for(var r in t)t.hasOwnProperty(r)&&"$"!==r.charAt(0)&&(e="$"===r.substr(-1)?r.slice(0,r.length-1):r,n.push("@"+e));return n}),e.defn(v,"$Integer",function(e,t){var n,r,o,$=this;return e.$$is_string?(void 0===t?t=0:(t=b.get("Opal").$coerce_to(t,b.get("Integer"),"to_int"),(1===t||0>t||t>36)&&$.$raise(b.get("ArgumentError"),"invalid radix "+t)),r=e.toLowerCase(),r=r.replace(/(\d)_(?=\d)/g,"$1"),r=r.replace(/^(\s*[+-]?)(0[bodx]?)/,function(n,r,a){switch(a){case"0b":if(0===t||2===t)return t=2,r;case"0":case"0o":if(0===t||8===t)return t=8,r;case"0d":if(0===t||10===t)return t=10,r;case"0x":if(0===t||16===t)return t=16,r}$.$raise(b.get("ArgumentError"),'invalid value for Integer(): "'+e+'"')}),t=0===t?10:t,o="0-"+(10>=t?t-1:"9a-"+String.fromCharCode(97+(t-11))),new RegExp("^\\s*[+-]?["+o+"]+\\s*$").test(r)||$.$raise(b.get("ArgumentError"),'invalid value for Integer(): "'+e+'"'),n=parseInt(r,t),isNaN(n)&&$.$raise(b.get("ArgumentError"),'invalid value for Integer(): "'+e+'"'),n):(void 0!==t&&$.$raise(b.get("ArgumentError"),"base specified for non string value"),e===a&&$.$raise(b.get("TypeError"),"can't convert nil into Integer"),e.$$is_number?((e===1/0||e===-(1/0)||isNaN(e))&&$.$raise(b.get("FloatDomainError"),e),Math.floor(e)):e["$respond_to?"]("to_int")&&(n=e.$to_int(),n!==a)?n:b.get("Opal")["$coerce_to!"](e,b.get("Integer"),"to_i"))}),e.defn(v,"$Float",function(e){var t,n=this;return e===a&&n.$raise(b.get("TypeError"),"can't convert nil into Float"),e.$$is_string?(t=e.toString(),t=t.replace(/(\d)_(?=\d)/g,"$1"),/^\s*[-+]?0[xX][0-9a-fA-F]+\s*$/.test(t)?n.$Integer(t):(/^\s*[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?\s*$/.test(t)||n.$raise(b.get("ArgumentError"),'invalid value for Float(): "'+e+'"'),parseFloat(t))):b.get("Opal")["$coerce_to!"](e,b.get("Float"),"to_f")}),e.defn(v,"$Hash",function(e){var t,n;return(t=(n=e["$nil?"]())!==!1&&n!==a?n:e["$=="]([]))===a||t.$$is_boolean&&1!=t?(t=b.get("Hash")["$==="](e))===a||t.$$is_boolean&&1!=t?b.get("Opal")["$coerce_to!"](e,b.get("Hash"),"to_hash"):e:s([],{})}),e.defn(v,"$is_a?",function(t){var n=this;return t.$$is_class||t.$$is_module||n.$raise(b.get("TypeError"),"class or module required"),e.is_a(n,t)}),e.alias(v,"kind_of?","is_a?"),e.defn(v,"$lambda",d=function(){var e=d.$$p,t=e||a;return d.$$p=null,t.$$is_lambda=!0,t}),e.defn(v,"$load",function(t){return t=b.get("Opal")["$coerce_to!"](t,b.get("String"),"to_str"),e.load(t)}),e.defn(v,"$loop",f=function(){var e=this,t=f.$$p,n=t||a;for(f.$$p=null;;)if(n()===o)return o.$v;return e}),e.defn(v,"$nil?",function(){return!1}),e.alias(v,"object_id","__id__"),e.defn(v,"$printf",function(){var n,r=this,o=a,$=arguments.length-0;0>$&&($=0);var i=new Array($);for(o=0;$>o;o++)i[o]=arguments[o+0];return t(i.$length(),0)&&r.$print((n=r).$format.apply(n,e.to_a(i))),a}),e.defn(v,"$proc",g=function(){var e=this,t=g.$$p,n=t||a;return g.$$p=null,n!==!1&&n!==a||e.$raise(b.get("ArgumentError"),"tried to create Proc object without a block"),n.$$is_lambda=!1,n}),e.defn(v,"$puts",function(){var t,n=a;null==i.stdout&&(i.stdout=a);var r=arguments.length-0;0>r&&(r=0);var o=new Array(r);for(n=0;r>n;n++)o[n]=arguments[n+0];return(t=i.stdout).$puts.apply(t,e.to_a(o))}),e.defn(v,"$p",function(){var e,t,r,o=this,$=a,s=arguments.length-0;0>s&&(s=0);var c=new Array(s);for($=0;s>$;$++)c[$]=arguments[$+0];return(e=(t=c).$each,e.$$p=(r=function(e){r.$$s||this;return null==i.stdout&&(i.stdout=a),null==e&&(e=a),i.stdout.$puts(e.$inspect())},r.$$s=o,r),e).call(t),n(c.$length(),1)?c["$[]"](0):c}),e.defn(v,"$print",function(){var t,n=a;null==i.stdout&&(i.stdout=a);var r=arguments.length-0;0>r&&(r=0);var o=new Array(r);for(n=0;r>n;n++)o[n]=arguments[n+0];return(t=i.stdout).$print.apply(t,e.to_a(o))}),e.defn(v,"$warn",function(){var t,n,r=a;null==i.VERBOSE&&(i.VERBOSE=a),null==i.stderr&&(i.stderr=a);var o=arguments.length-0;0>o&&(o=0);var $=new Array(o);for(r=0;o>r;r++)$[r]=arguments[r+0];return(t=(n=i.VERBOSE["$nil?"]())!==!1&&n!==a?n:$["$empty?"]())===a||t.$$is_boolean&&1!=t?(t=i.stderr).$puts.apply(t,e.to_a($)):a}),e.defn(v,"$raise",function(t,n,r){if(null==i["!"]&&(i["!"]=a),null==n&&(n=a),null==r&&(r=a),null==t&&i["!"]!==a)throw i["!"];throw null==t?t=b.get("RuntimeError").$new():t.$$is_string?t=b.get("RuntimeError").$new(t):t.$$is_class&&t["$respond_to?"]("exception")?t=t.$exception(n):t["$kind_of?"](b.get("Exception"))||(t=b.get("TypeError").$new("exception class/object expected")),i["!"]!==a&&e.exceptions.push(i["!"]),i["!"]=t,t}),e.alias(v,"fail","raise"),e.defn(v,"$rand",function(e){var t=this;if(void 0===e)return Math.random();if(e.$$is_range){var n=e.begin,r=e.end-n;return e.exclude||r++,t.$rand(r)+n}return Math.floor(Math.random()*Math.abs(b.get("Opal").$coerce_to(e,b.get("Integer"),"to_int")))}),e.defn(v,"$respond_to?",function(e,t){var n,r=this;if(null==t&&(t=!1),(n=r["$respond_to_missing?"](e,t))!==a&&(!n.$$is_boolean||1==n))return!0;var o=r["$"+e];return"function"!=typeof o||o.$$stub?!1:!0}),e.defn(v,"$respond_to_missing?",function(e,t){return null==t&&(t=!1),!1}),e.defn(v,"$require",function(t){return t=b.get("Opal")["$coerce_to!"](t,b.get("String"),"to_str"),e.require(t)}),e.defn(v,"$require_relative",function(t){return b.get("Opal")["$try_convert!"](t,b.get("String"),"to_str"),t=b.get("File").$expand_path(b.get("File").$join(e.current_file,"..",t)),e.require(t)}),e.defn(v,"$require_tree",function(t){t=b.get("File").$expand_path(t),t["$=="](".")&&(t="");for(var n in e.modules)n["$start_with?"](t)&&e.require(n);return a}),e.alias(v,"send","__send__"),e.alias(v,"public_send","__send__"),e.defn(v,"$singleton_class",function(){var t=this;return e.get_singleton_class(t)}),e.defn(v,"$sleep",function(e){var t=this;null==e&&(e=a),e===a&&t.$raise(b.get("TypeError"),"can't convert NilClass into time interval"),e.$$is_number||t.$raise(b.get("TypeError"),"can't convert "+e.$class()+" into time interval"),0>e&&t.$raise(b.get("ArgumentError"),"time interval must be positive");for(var n=new Date;new Date-n<=1e3*e;);return e}),e.alias(v,"sprintf","format"),e.alias(v,"srand","rand"),e.defn(v,"$String",function(e){var t;return(t=b.get("Opal")["$coerce_to?"](e,b.get("String"),"to_str"))!==!1&&t!==a?t:b.get("Opal")["$coerce_to!"](e,b.get("String"),"to_s")}),e.defn(v,"$tap",h=function(){var t=this,n=h.$$p,r=n||a;return h.$$p=null,e.yield1(r,t)===o?o.$v:t}),e.defn(v,"$to_proc",function(){var e=this;return e}),e.defn(v,"$to_s",function(){var e=this;return"#<"+e.$class()+":0x"+e.$__id__().$to_s(16)+">"}),e.defn(v,"$catch",m=function(t){var n,r=this,$=m.$$p,i=$||a,s=a;m.$$p=null;try{return n=e.yieldX(i,[]),n===o?n:n}catch(c){if(!e.rescue(c,[b.get("UncaughtThrowError")]))throw c;s=c;try{return s.$sym()["$=="](t)?s.$arg():r.$raise()}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}),e.defn(v,"$throw",function(){var e=this,t=a,n=arguments.length-0;0>n&&(n=0);var r=new Array(n);for(t=0;n>t;t++)r[t]=arguments[t+0];return e.$raise(b.get("UncaughtThrowError").$new(r))})}(r.base),function(e,$super){function t(){}var n=t=c(e,$super,"Object",t),r=(n.$$proto,n.$$scope);return n.$include(r.get("Kernel"))}(r.base,null)},Opal.modules["corelib/error"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.dynamic_require_severity="ignore";var n=(e.top,e),r=e.nil,a=(e.breaker,e.slice,e.klass),o=e.module;return e.add_stubs(["$new","$clone","$to_s","$empty?","$class","$attr_reader","$[]","$>","$length","$inspect"]),function(t,$super){function n(){}var o=n=a(t,$super,"Exception",n),$=o.$$proto;o.$$scope;return $.message=r,e.defs(o,"$new",function(){var e=this,t=r,n=arguments.length-0;0>n&&(n=0);var a=new Array(n);for(t=0;n>t;t++)a[t]=arguments[t+0];var o=a.length>0?a[0]:r,$=new e.$$alloc(o);return Error.captureStackTrace&&Error.captureStackTrace($),$.name=e.$$name,$.$initialize.apply($,a),$}),e.defs(o,"$exception",function(){var t,n=this,a=r,o=arguments.length-0;0>o&&(o=0);var $=new Array(o);for(a=0;o>a;a++)$[a]=arguments[a+0];return(t=n).$new.apply(t,e.to_a($))}),e.defn(o,"$initialize",function(){var e=this,t=r,n=arguments.length-0;0>n&&(n=0);var a=new Array(n);for(t=0;n>t;t++)a[t]=arguments[t+0];return e.message=a.length>0?a[0]:r}),e.defn(o,"$backtrace",function(){var e=this,t=e.stack;return"string"==typeof t?t.split("\n").slice(0,15):t?t.slice(0,15):[]}),e.defn(o,"$exception",function(e){var t=this;if(null==e&&(e=r),e===r||t===e)return t;var n=t.$clone();return n.message=e,n}),e.defn(o,"$message",function(){var e=this;return e.$to_s()}),e.defn(o,"$inspect",function(){var e,t=this,n=r;return n=t.$to_s(),(e=n["$empty?"]())===r||e.$$is_boolean&&1!=e?"#<"+t.$class().$to_s()+": "+t.$to_s()+">":t.$class().$to_s()}),e.defn(o,"$to_s",function(){var e,t,n=this;return t=n.message,(e=t!==!1&&t!==r?n.message.$to_s():t)!==!1&&e!==r?e:n.$class().$to_s()}),r&&"to_s"}(n.base,Error),function(e,$super){function t(){}var n=t=a(e,$super,"ScriptError",t);n.$$proto,n.$$scope;return r}(n.base,n.get("Exception")),function(e,$super){function t(){}var n=t=a(e,$super,"SyntaxError",t);n.$$proto,n.$$scope;return r}(n.base,n.get("ScriptError")),function(e,$super){function t(){}var n=t=a(e,$super,"LoadError",t);n.$$proto,n.$$scope;return r}(n.base,n.get("ScriptError")),function(e,$super){function t(){}var n=t=a(e,$super,"NotImplementedError",t);n.$$proto,n.$$scope;return r}(n.base,n.get("ScriptError")),function(e,$super){function t(){}var n=t=a(e,$super,"SystemExit",t);n.$$proto,n.$$scope;return r}(n.base,n.get("Exception")),function(e,$super){function t(){}var n=t=a(e,$super,"NoMemoryError",t);n.$$proto,n.$$scope;return r}(n.base,n.get("Exception")),function(e,$super){function t(){}var n=t=a(e,$super,"SignalException",t);n.$$proto,n.$$scope;return r}(n.base,n.get("Exception")),function(e,$super){function t(){}var n=t=a(e,$super,"Interrupt",t);n.$$proto,n.$$scope;return r}(n.base,n.get("Exception")),function(e,$super){function t(){}var n=t=a(e,$super,"SecurityError",t);n.$$proto,n.$$scope;return r}(n.base,n.get("Exception")),function(e,$super){function t(){}var n=t=a(e,$super,"StandardError",t);n.$$proto,n.$$scope;return r}(n.base,n.get("Exception")),function(e,$super){function t(){}var n=t=a(e,$super,"ZeroDivisionError",t);n.$$proto,n.$$scope;return r}(n.base,n.get("StandardError")),function(e,$super){function t(){}var n=t=a(e,$super,"NameError",t);n.$$proto,n.$$scope;return r}(n.base,n.get("StandardError")),function(e,$super){function t(){}var n=t=a(e,$super,"NoMethodError",t);n.$$proto,n.$$scope;return r}(n.base,n.get("NameError")),function(e,$super){function t(){}var n=t=a(e,$super,"RuntimeError",t);n.$$proto,n.$$scope;return r}(n.base,n.get("StandardError")),function(e,$super){function t(){}var n=t=a(e,$super,"LocalJumpError",t);n.$$proto,n.$$scope;return r}(n.base,n.get("StandardError")),function(e,$super){function t(){}var n=t=a(e,$super,"TypeError",t);n.$$proto,n.$$scope;return r}(n.base,n.get("StandardError")),function(e,$super){function t(){}var n=t=a(e,$super,"ArgumentError",t);n.$$proto,n.$$scope;return r}(n.base,n.get("StandardError")),function(e,$super){function t(){}var n=t=a(e,$super,"IndexError",t);n.$$proto,n.$$scope;return r}(n.base,n.get("StandardError")),function(e,$super){function t(){}var n=t=a(e,$super,"StopIteration",t);n.$$proto,n.$$scope;return r}(n.base,n.get("IndexError")),function(e,$super){function t(){}var n=t=a(e,$super,"KeyError",t);n.$$proto,n.$$scope;return r}(n.base,n.get("IndexError")),function(e,$super){function t(){}var n=t=a(e,$super,"RangeError",t);n.$$proto,n.$$scope;return r}(n.base,n.get("StandardError")),function(e,$super){function t(){}var n=t=a(e,$super,"FloatDomainError",t);n.$$proto,n.$$scope;return r}(n.base,n.get("RangeError")),function(e,$super){function t(){}var n=t=a(e,$super,"IOError",t);n.$$proto,n.$$scope;return r}(n.base,n.get("StandardError")),function(e,$super){function t(){}var n=t=a(e,$super,"SystemCallError",t);n.$$proto,n.$$scope;return r}(n.base,n.get("StandardError")),function(t){var n,$=n=o(t,"Errno"),i=($.$$proto,$.$$scope);!function(t,$super){function n(){}var o,$=n=a(t,$super,"EINVAL",n);$.$$proto,$.$$scope;return e.defs($,"$new",o=function(){var t=this;o.$$p;return o.$$p=null,e.find_super_dispatcher(t,"new",o,null,n).apply(t,["Invalid argument"])}),r&&"new"}(i.base,i.get("SystemCallError"))}(n.base),function(n,$super){function o(){}var $,i=o=a(n,$super,"UncaughtThrowError",o),s=i.$$proto;i.$$scope;return s.sym=r,i.$attr_reader("sym","arg"),e.defn(i,"$initialize",$=function(n){var r=this;$.$$p;return $.$$p=null,r.sym=n["$[]"](0),t(n.$length(),1)&&(r.arg=n["$[]"](1)),e.find_super_dispatcher(r,"initialize",$,null).apply(r,["uncaught throw "+r.sym.$inspect()])}),r&&"initialize"}(n.base,n.get("ArgumentError")),function(t,$super){function n(){}var o,$=n=a(t,$super,"NameError",n);$.$$proto,$.$$scope;return $.$attr_reader("name"),e.defn($,"$initialize",o=function(t,n){var a=this;o.$$p;return null==n&&(n=r),o.$$p=null,e.find_super_dispatcher(a,"initialize",o,null).apply(a,[t]),a.name=n}),r&&"initialize"}(n.base,null),function(t,$super){function n(){}var o,$=n=a(t,$super,"NoMethodError",n);$.$$proto,$.$$scope;return $.$attr_reader("args"),e.defn($,"$initialize",o=function(t,n,r){var a=this;o.$$p;return null==r&&(r=[]),o.$$p=null,e.find_super_dispatcher(a,"initialize",o,null).apply(a,[t,n]),a.args=r}),r&&"initialize"}(n.base,null)},Opal.modules["corelib/constants"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e);e.nil,e.breaker,e.slice;return e.cdecl(t,"RUBY_PLATFORM","opal"),e.cdecl(t,"RUBY_ENGINE","opal"),e.cdecl(t,"RUBY_VERSION","2.2.3"),e.cdecl(t,"RUBY_ENGINE_VERSION","0.9.0"),e.cdecl(t,"RUBY_RELEASE_DATE","2015-12-20"),e.cdecl(t,"RUBY_PATCHLEVEL",0),e.cdecl(t,"RUBY_REVISION",0),e.cdecl(t,"RUBY_COPYRIGHT","opal - Copyright (C) 2013-2015 Adam Beynon"),e.cdecl(t,"RUBY_DESCRIPTION","opal "+t.get("RUBY_ENGINE_VERSION")+" ("+t.get("RUBY_RELEASE_DATE")+" revision "+t.get("RUBY_REVISION")+")")},Opal.modules["opal/base"]=function(e){e.dynamic_require_severity="ignore";var t=e.top;e.nil,e.breaker,e.slice;return e.add_stubs(["$require"]),t.$require("corelib/runtime"),t.$require("corelib/helpers"),t.$require("corelib/module"),t.$require("corelib/class"),t.$require("corelib/basic_object"),t.$require("corelib/kernel"),t.$require("corelib/error"),t.$require("corelib/constants")},Opal.modules["corelib/nil"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.dynamic_require_severity="ignore";var n=(e.top,e),r=e.nil,a=(e.breaker,e.slice,e.klass);return e.add_stubs(["$raise","$class","$new","$>","$length","$Rational"]),function(n,$super){function o(){}var $=o=a(n,$super,"NilClass",o),i=$.$$proto,s=$.$$scope;return i.$$meta=$,e.defn($,"$!",function(){return!0}),e.defn($,"$&",function(e){return!1}),e.defn($,"$|",function(e){return e!==!1&&e!==r}),e.defn($,"$^",function(e){return e!==!1&&e!==r}),e.defn($,"$==",function(e){return e===r}),e.defn($,"$dup",function(){var e=this;return e.$raise(s.get("TypeError"),"can't dup "+e.$class())}),e.defn($,"$clone",function(){var e=this;return e.$raise(s.get("TypeError"),"can't clone "+e.$class())}),e.defn($,"$inspect",function(){return"nil"}),e.defn($,"$nil?",function(){return!0}),e.defn($,"$singleton_class",function(){return s.get("NilClass")}),e.defn($,"$to_a",function(){return[]}),e.defn($,"$to_h",function(){return e.hash()}),e.defn($,"$to_i",function(){return 0}),e.alias($,"to_f","to_i"),e.defn($,"$to_s",function(){return""}),e.defn($,"$to_c",function(){return s.get("Complex").$new(0,0)}),e.defn($,"$rationalize",function(){var e=this,n=r,a=arguments.length-0;0>a&&(a=0);var o=new Array(a);for(n=0;a>n;n++)o[n]=arguments[n+0];return t(o.$length(),1)&&e.$raise(s.get("ArgumentError")),e.$Rational(0,1)}),e.defn($,"$to_r",function(){var e=this;return e.$Rational(0,1)}),e.defn($,"$instance_variables",function(){return[]}),r&&"instance_variables"}(n.base,null),e.cdecl(n,"NIL",r)},Opal.modules["corelib/boolean"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.klass);return e.add_stubs(["$raise","$class"]),function(t,$super){function a(){}var o=a=r(t,$super,"Boolean",a),$=o.$$proto,i=o.$$scope;return $.$$is_boolean=!0,$.$$meta=o,e.defn(o,"$__id__",function(){var e=this;return e.valueOf()?2:0}),e.alias(o,"object_id","__id__"),e.defn(o,"$!",function(){var e=this;return 1!=e}),e.defn(o,"$&",function(e){var t=this;return 1==t?e!==!1&&e!==n:!1}),e.defn(o,"$|",function(e){var t=this;return 1==t?!0:e!==!1&&e!==n}),e.defn(o,"$^",function(e){var t=this;return 1==t?e===!1||e===n:e!==!1&&e!==n}),e.defn(o,"$==",function(e){var t=this;return 1==t===e.valueOf()}),e.alias(o,"equal?","=="),e.alias(o,"eql?","=="),e.defn(o,"$singleton_class",function(){return i.get("Boolean")}),e.defn(o,"$to_s",function(){var e=this;return 1==e?"true":"false"}),e.defn(o,"$dup",function(){var e=this;return e.$raise(i.get("TypeError"),"can't dup "+e.$class())}),e.defn(o,"$clone",function(){var e=this;return e.$raise(i.get("TypeError"),"can't clone "+e.$class())}),n&&"clone"}(t.base,Boolean),e.cdecl(t,"TrueClass",t.get("Boolean")),e.cdecl(t,"FalseClass",t.get("Boolean")),e.cdecl(t,"TRUE",!0),e.cdecl(t,"FALSE",!1)},Opal.modules["corelib/comparable"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}e.dynamic_require_severity="ignore";var r=(e.top,e),a=e.nil,o=(e.breaker,e.slice,e.module);return e.add_stubs(["$===","$>","$<","$equal?","$<=>","$normalize","$raise","$class"]),function(r){var $,i=$=o(r,"Comparable"),s=(i.$$proto,i.$$scope);e.defs(i,"$normalize",function(e){var r;return(r=s.get("Integer")["$==="](e))===a||r.$$is_boolean&&1!=r?t(e,0)?1:n(e,0)?-1:0:e}),e.defn(i,"$==",function(t){var n,r=this,o=a;try{return(n=r["$equal?"](t))===a||n.$$is_boolean&&1!=n?r["$<=>"]==e.Kernel["$<=>"]?!1:r.$$comparable?(delete r.$$comparable,!1):(n=o=r["$<=>"](t))===a||n.$$is_boolean&&1!=n?!1:0==s.get("Comparable").$normalize(o):!0}catch($){if(!e.rescue($,[s.get("StandardError")]))throw $;try{return!1}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}),e.defn(i,"$>",function(e){var t,n=this,r=a;return((t=r=n["$<=>"](e))===a||t.$$is_boolean&&1!=t)&&n.$raise(s.get("ArgumentError"),"comparison of "+n.$class()+" with "+e.$class()+" failed"),s.get("Comparable").$normalize(r)>0}),e.defn(i,"$>=",function(e){var t,n=this,r=a;return((t=r=n["$<=>"](e))===a||t.$$is_boolean&&1!=t)&&n.$raise(s.get("ArgumentError"),"comparison of "+n.$class()+" with "+e.$class()+" failed"),s.get("Comparable").$normalize(r)>=0}),e.defn(i,"$<",function(e){var t,n=this,r=a;return((t=r=n["$<=>"](e))===a||t.$$is_boolean&&1!=t)&&n.$raise(s.get("ArgumentError"),"comparison of "+n.$class()+" with "+e.$class()+" failed"),s.get("Comparable").$normalize(r)<0}),e.defn(i,"$<=",function(e){var t,n=this,r=a;return((t=r=n["$<=>"](e))===a||t.$$is_boolean&&1!=t)&&n.$raise(s.get("ArgumentError"),"comparison of "+n.$class()+" with "+e.$class()+" failed"),s.get("Comparable").$normalize(r)<=0}),e.defn(i,"$between?",function(e,r){var a=this;return n(a,e)?!1:t(a,r)?!1:!0})}(r.base)},Opal.modules["corelib/regexp"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.klass),a=e.gvars;return e.add_stubs(["$nil?","$[]","$raise","$escape","$options","$to_str","$new","$join","$coerce_to!","$!","$match","$coerce_to?","$begin","$coerce_to","$call","$=~","$attr_reader","$===","$inspect","$to_a"]),function(e,$super){function t(){}var a=t=r(e,$super,"RegexpError",t);a.$$proto,a.$$scope;return n}(t.base,t.get("StandardError")),function(t,$super){function o(){}var $,i=o=r(t,$super,"Regexp",o),s=i.$$proto,c=i.$$scope;return e.cdecl(c,"IGNORECASE",1),e.cdecl(c,"MULTILINE",4),s.$$is_regexp=!0,function(t){var r,o=t.$$scope;t.$$proto;return e.defn(t,"$allocate",r=function(){var t=this,a=r.$$p,o=n,$=n,i=n;for(r.$$p=null,$=[],i=0;i<arguments.length;i++)$[i]=arguments[i];return o=e.find_super_dispatcher(t,"allocate",r,a).apply(t,$),o.uninitialized=!0,o}),e.defn(t,"$escape",function(e){return e.replace(/([-[\]\/{}()*+?.^$\\| ])/g,"\\$1").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\f]/g,"\\f").replace(/[\t]/g,"\\t")}),e.defn(t,"$last_match",function(e){var t;return null==a["~"]&&(a["~"]=n),null==e&&(e=n),(t=e["$nil?"]())===n||t.$$is_boolean&&1!=t?a["~"]["$[]"](e):a["~"]}),e.alias(t,"quote","escape"),e.defn(t,"$union",function(){var e=this,t=n,r=arguments.length-0;0>r&&(r=0);var a=new Array(r);for(t=0;r>t;t++)a[t]=arguments[t+0];var $,i,s,c,u;if(0==a.length)return/(?!)/;$=a[0].$$is_array,a.length>1&&$&&e.$raise(o.get("TypeError"),"no implicit conversion of Array into String"),$&&(a=a[0]),c=void 0,i=[];for(var l=0;l<a.length;l++)s=a[l],s.$$is_string?i.push(e.$escape(s)):s.$$is_regexp?(u=s.$options(),void 0!=c&&c!=u&&e.$raise(o.get("TypeError"),"All expressions must use the same options"),c=u,i.push("("+s.source+")")):i.push(e.$escape(s.$to_str()));return e.$new(i.$join("|"),c)}),e.defn(t,"$new",function(e,t){var n=this;if(e.$$is_regexp)return new RegExp(e);if(e=o.get("Opal")["$coerce_to!"](e,o.get("String"),"to_str"),
"\\"===e.charAt(e.length-1)&&n.$raise(o.get("RegexpError"),"too short escape sequence: /"+e+"/"),void 0===t||t["$!"]())return new RegExp(e);if(t.$$is_number){var r="";o.get("IGNORECASE")&t&&(r+="i"),o.get("MULTILINE")&t&&(r+="m"),t=r}else t="i";return new RegExp(e,t)}),n&&"new"}(e.get_singleton_class(i)),e.defn(i,"$==",function(e){var t=this;return e.constructor==RegExp&&t.toString()===e.toString()}),e.defn(i,"$===",function(e){var t=this;return t.$match(c.get("Opal")["$coerce_to?"](e,c.get("String"),"to_str"))!==n}),e.defn(i,"$=~",function(e){var t,r=this;return null==a["~"]&&(a["~"]=n),t=r.$match(e),t!==!1&&t!==n?a["~"].$begin(0):t}),e.alias(i,"eql?","=="),e.defn(i,"$inspect",function(){var e=this;return e.toString()}),e.defn(i,"$match",$=function(e,t){var r=this,o=$.$$p,i=o||n;if(null==a["~"]&&(a["~"]=n),$.$$p=null,r.uninitialized&&r.$raise(c.get("TypeError"),"uninitialized Regexp"),t=void 0===t?0:c.get("Opal").$coerce_to(t,c.get("Integer"),"to_int"),e===n)return a["~"]=n;if(e=c.get("Opal").$coerce_to(e,c.get("String"),"to_str"),0>t&&(t+=e.length,0>t))return a["~"]=n;var s=r.source,u="g";r.multiline&&(s=s.replace(".","[\\s\\S]"),u+="m");for(var l,_=new RegExp(s,u+(r.ignoreCase?"i":""));;){if(l=_.exec(e),null===l)return a["~"]=n;if(l.index>=t)return a["~"]=c.get("MatchData").$new(_,l),i===n?a["~"]:i.$call(a["~"]);_.lastIndex=l.index+1}}),e.defn(i,"$~",function(){var e=this;return null==a._&&(a._=n),e["$=~"](a._)}),e.defn(i,"$source",function(){var e=this;return e.source}),e.defn(i,"$options",function(){var e=this;e.uninitialized&&e.$raise(c.get("TypeError"),"uninitialized Regexp");var t=0;return e.multiline&&(t|=c.get("MULTILINE")),e.ignoreCase&&(t|=c.get("IGNORECASE")),t}),e.defn(i,"$casefold?",function(){var e=this;return e.ignoreCase}),e.alias(i,"to_s","source")}(t.base,RegExp),function(t,$super){function o(){}var $=o=r(t,$super,"MatchData",o),i=$.$$proto,s=$.$$scope;return i.matches=n,$.$attr_reader("post_match","pre_match","regexp","string"),e.defn($,"$initialize",function(e,t){var r=this;a["~"]=r,r.regexp=e,r.begin=t.index,r.string=t.input,r.pre_match=t.input.slice(0,t.index),r.post_match=t.input.slice(t.index+t[0].length),r.matches=[];for(var o=0,$=t.length;$>o;o++){var i=t[o];null==i?r.matches.push(n):r.matches.push(i)}}),e.defn($,"$[]",function(){var t,r=this,a=n,o=arguments.length-0;0>o&&(o=0);var $=new Array(o);for(a=0;o>a;a++)$[a]=arguments[a+0];return(t=r.matches)["$[]"].apply(t,e.to_a($))}),e.defn($,"$offset",function(e){var t=this;return 0!==e&&t.$raise(s.get("ArgumentError"),"MatchData#offset only supports 0th element"),[t.begin,t.begin+t.matches[e].length]}),e.defn($,"$==",function(e){var t,r,a,o,$=this;return(t=s.get("MatchData")["$==="](e))===n||t.$$is_boolean&&1!=t?!1:(o=$.string==e.string,a=o!==!1&&o!==n?$.regexp.toString()==e.regexp.toString():o,r=a!==!1&&a!==n?$.pre_match==e.pre_match:a,t=r!==!1&&r!==n?$.post_match==e.post_match:r,t!==!1&&t!==n?$.begin==e.begin:t)}),e.alias($,"eql?","=="),e.defn($,"$begin",function(e){var t=this;return 0!==e&&t.$raise(s.get("ArgumentError"),"MatchData#begin only supports 0th element"),t.begin}),e.defn($,"$end",function(e){var t=this;return 0!==e&&t.$raise(s.get("ArgumentError"),"MatchData#end only supports 0th element"),t.begin+t.matches[e].length}),e.defn($,"$captures",function(){var e=this;return e.matches.slice(1)}),e.defn($,"$inspect",function(){for(var e=this,t="#<MatchData "+e.matches[0].$inspect(),n=1,r=e.matches.length;r>n;n++)t+=" "+n+":"+e.matches[n].$inspect();return t+">"}),e.defn($,"$length",function(){var e=this;return e.matches.length}),e.alias($,"size","length"),e.defn($,"$to_a",function(){var e=this;return e.matches}),e.defn($,"$to_s",function(){var e=this;return e.matches[0]}),e.defn($,"$values_at",function(){var e=this,t=n,r=arguments.length-0;0>r&&(r=0);var a=new Array(r);for(t=0;r>t;t++)a[t]=arguments[t+0];var o,$,i,c=[];for(o=0;o<a.length;o++)a[o].$$is_range&&($=a[o].$to_a(),$.unshift(o,1),Array.prototype.splice.apply(a,$)),i=s.get("Opal")["$coerce_to!"](a[o],s.get("Integer"),"to_int"),0>i&&(i+=e.matches.length,0>i)?c.push(n):c.push(e.matches[i]);return c}),n&&"values_at"}(t.base,null)},Opal.modules["corelib/string"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e/t:e["$/"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="ignore";var r=e.top,a=e,o=e.nil,$=e.breaker,i=e.slice,s=e.klass,c=e.gvars;return e.add_stubs(["$require","$include","$coerce_to?","$coerce_to","$raise","$===","$format","$to_s","$respond_to?","$to_str","$<=>","$==","$=~","$new","$empty?","$ljust","$ceil","$/","$+","$rjust","$floor","$to_a","$each_char","$to_proc","$coerce_to!","$copy_singleton_methods","$initialize_clone","$initialize_dup","$enum_for","$size","$chomp","$[]","$to_i","$class","$each_line","$match","$captures","$proc","$shift","$__send__","$succ","$escape"]),r.$require("corelib/comparable"),r.$require("corelib/regexp"),function(r,$super){function a(){}function u(e){function t(e){var t,n,r,a,o,$,i="",s=e.length;for(t=0;s>t;t++)if(n=e.charAt(t),"-"===n&&t>0&&s-1>t&&!r){for(a=e.charCodeAt(t-1),o=e.charCodeAt(t+1),a>o&&b.$raise(x.get("ArgumentError"),'invalid range "'+a+"-"+o+'" in string transliteration'),$=a+1;o+1>$;$++)i+=String.fromCharCode($);r=!0,t++}else r="\\"===n,i+=n;return i}function n(e,t){if(0===e.length)return t;var n,r,a="",o=e.length;for(n=0;o>n;n++)r=e.charAt(n),-1!==t.indexOf(r)&&(a+=r);return a}var r,a,o,$,i,s,c="",u="";for(r=0,a=e.length;a>r;r++)o=x.get("Opal").$coerce_to(e[r],x.get("String"),"to_str"),$="^"===o.charAt(0)&&o.length>1,o=t($?o.slice(1):o),$?u=n(u,o):c=n(c,o);if(c.length>0&&u.length>0){for(s="",r=0,a=c.length;a>r;r++)i=c.charAt(r),-1===u.indexOf(i)&&(s+=i);c=s,u=""}return c.length>0?"["+x.get("Regexp").$escape(c)+"]":u.length>0?"[^"+x.get("Regexp").$escape(u)+"]":null}var l,_,p,d,f,g,h,m,v,b=a=s(r,$super,"String",a),y=b.$$proto,x=b.$$scope;y.length=o,b.$include(x.get("Comparable")),y.$$is_string=!0,e.defn(b,"$__id__",function(){var e=this;return e.toString()}),e.alias(b,"object_id","__id__"),e.defs(b,"$try_convert",function(e){return x.get("Opal")["$coerce_to?"](e,x.get("String"),"to_str")}),e.defs(b,"$new",function(e){return null==e&&(e=""),e=x.get("Opal").$coerce_to(e,x.get("String"),"to_str"),new String(e)}),e.defn(b,"$initialize",function(e){var t=this;return void 0===e?t:t.$raise(x.get("NotImplementedError"),"Mutable strings are not supported in Opal.")}),e.defn(b,"$%",function(t){var n,r=this;return(n=x.get("Array")["$==="](t))===o||n.$$is_boolean&&1!=n?r.$format(r,t):(n=r).$format.apply(n,[r].concat(e.to_a(t)))}),e.defn(b,"$*",function(e){var t=this;if(e=x.get("Opal").$coerce_to(e,x.get("Integer"),"to_int"),0>e&&t.$raise(x.get("ArgumentError"),"negative argument"),0===e)return"";var n="",r=t.toString();for(r.length*e>=1<<28&&t.$raise(x.get("RangeError"),"multiply count must not overflow maximum string size");1===(1&e)&&(n+=r),e>>>=1,0!==e;)r+=r;return n}),e.defn(b,"$+",function(e){var t=this;return e=x.get("Opal").$coerce_to(e,x.get("String"),"to_str"),t+e.$to_s()}),e.defn(b,"$<=>",function(e){var t,n=this;if((t=e["$respond_to?"]("to_str"))===o||t.$$is_boolean&&1!=t){var r=e["$<=>"](n);return r===o?o:r>0?-1:0>r?1:0}return e=e.$to_str().$to_s(),n>e?1:e>n?-1:0}),e.defn(b,"$==",function(e){var t=this;return e.$$is_string?t.toString()===e.toString():x.get("Opal")["$respond_to?"](e,"to_str")?e["$=="](t):!1}),e.alias(b,"eql?","=="),e.alias(b,"===","=="),e.defn(b,"$=~",function(e){var t=this;return e.$$is_string&&t.$raise(x.get("TypeError"),"type mismatch: String given"),e["$=~"](t)}),e.defn(b,"$[]",function(e,t){var n,r=this,a=r.length;if(e.$$is_range)return n=e.exclude,t=x.get("Opal").$coerce_to(e.end,x.get("Integer"),"to_int"),e=x.get("Opal").$coerce_to(e.begin,x.get("Integer"),"to_int"),Math.abs(e)>a?o:(0>e&&(e+=a),0>t&&(t+=a),n||(t+=1),t-=e,0>t&&(t=0),r.substr(e,t));if(e.$$is_string)return null!=t&&r.$raise(x.get("TypeError")),-1!==r.indexOf(e)?e:o;if(e.$$is_regexp){var $=r.match(e);return null===$?(c["~"]=o,o):(c["~"]=x.get("MatchData").$new(e,$),null==t?$[0]:(t=x.get("Opal").$coerce_to(t,x.get("Integer"),"to_int"),0>t&&-t<$.length?$[t+=$.length]:t>=0&&t<$.length?$[t]:o))}return e=x.get("Opal").$coerce_to(e,x.get("Integer"),"to_int"),0>e&&(e+=a),null==t?e>=a||0>e?o:r.substr(e,1):(t=x.get("Opal").$coerce_to(t,x.get("Integer"),"to_int"),0>t?o:e>a||0>e?o:r.substr(e,t))}),e.alias(b,"byteslice","[]"),e.defn(b,"$capitalize",function(){var e=this;return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}),e.defn(b,"$casecmp",function(e){var t=this;e=x.get("Opal").$coerce_to(e,x.get("String"),"to_str").$to_s();var n=/^[\x00-\x7F]*$/;return n.test(t)&&n.test(e)&&(t=t.toLowerCase(),e=e.toLowerCase()),t["$<=>"](e)}),e.defn(b,"$center",function(e,r){var a,$=this;if(null==r&&(r=" "),e=x.get("Opal").$coerce_to(e,x.get("Integer"),"to_int"),r=x.get("Opal").$coerce_to(r,x.get("String"),"to_str").$to_s(),(a=r["$empty?"]())===o||a.$$is_boolean&&1!=a||$.$raise(x.get("ArgumentError"),"zero width padding"),(a=e<=$.length)!==o&&(!a.$$is_boolean||1==a))return $;var i=$.$ljust(t(n(e,$.length),2).$ceil(),r),s=$.$rjust(t(n(e,$.length),2).$floor(),r);return s+i.slice($.length)}),e.defn(b,"$chars",l=function(){var e,t,n=this,r=l.$$p,a=r||o;return l.$$p=null,a===!1||a===o?n.$each_char().$to_a():(e=(t=n).$each_char,e.$$p=a.$to_proc(),e).call(t)}),e.defn(b,"$chomp",function(e){var t,n=this;if(null==c["/"]&&(c["/"]=o),null==e&&(e=c["/"]),(t=e===o||0===n.length)!==o&&(!t.$$is_boolean||1==t))return n;if(e=x.get("Opal")["$coerce_to!"](e,x.get("String"),"to_str").$to_s(),"\n"===e)return n.replace(/\r?\n?$/,"");if(""===e)return n.replace(/(\r?\n)+$/,"");if(n.length>e.length){var r=n.substr(n.length-e.length,e.length);if(r===e)return n.substr(0,n.length-e.length)}return n}),e.defn(b,"$chop",function(){var e=this,t=e.length;return 1>=t?"":"\n"===e.charAt(t-1)&&"\r"===e.charAt(t-2)?e.substr(0,t-2):e.substr(0,t-1)}),e.defn(b,"$chr",function(){var e=this;return e.charAt(0)}),e.defn(b,"$clone",function(){var e=this,t=o;return t=e.slice(),t.$copy_singleton_methods(e),t.$initialize_clone(e),t}),e.defn(b,"$dup",function(){var e=this,t=o;return t=e.slice(),t.$initialize_dup(e),t}),e.defn(b,"$count",function(){var e=this,t=o,n=arguments.length-0;0>n&&(n=0);var r=new Array(n);for(t=0;n>t;t++)r[t]=arguments[t+0];0===r.length&&e.$raise(x.get("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var a=u(r);return null===a?0:e.length-e.replace(new RegExp(a,"g"),"").length}),e.defn(b,"$delete",function(){var e=this,t=o,n=arguments.length-0;0>n&&(n=0);var r=new Array(n);for(t=0;n>t;t++)r[t]=arguments[t+0];0===r.length&&e.$raise(x.get("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var a=u(r);return null===a?e:e.replace(new RegExp(a,"g"),"")}),e.defn(b,"$downcase",function(){var e=this;return e.toLowerCase()}),e.defn(b,"$each_char",_=function(){var t,n,r,a=this,i=_.$$p,s=i||o;if(_.$$p=null,s===o)return(t=(n=a).$enum_for,t.$$p=(r=function(){var e=r.$$s||this;return e.$size()},r.$$s=a,r),t).call(n,"each_char");for(var c=0,u=a.length;u>c;c++){var l=e.yield1(s,a.charAt(c));if(l===$)return $.$v}return a}),e.defn(b,"$each_line",p=function(t){var n=this,r=p.$$p,a=r||o;if(null==c["/"]&&(c["/"]=o),null==t&&(t=c["/"]),p.$$p=null,a===o)return n.$enum_for("each_line",t);var i;if(t===o)return i=e.yield1(a,n),i===$?i.$v:n;t=x.get("Opal").$coerce_to(t,x.get("String"),"to_str");var s,u,l,_,d,f,g;if(0===t.length){for(s=n.split(/(\n{2,})/),u=0,l=s.length;l>u;u+=2)if((s[u]||s[u+1])&&(i=e.yield1(a,(s[u]||"")+(s[u+1]||"")),i===$))return i.$v;return n}for(d=n.$chomp(t),f=n.length!=d.length,g=d.split(t),u=0,_=g.length;_>u;u++)if(_-1>u||f){if(i=e.yield1(a,g[u]+t),i===$)return i.$v}else if(i=e.yield1(a,g[u]),i===$)return i.$v;return n}),e.defn(b,"$empty?",function(){var e=this;return 0===e.length}),e.defn(b,"$end_with?",function(){var e=this,t=o,n=arguments.length-0;0>n&&(n=0);var r=new Array(n);for(t=0;n>t;t++)r[t]=arguments[t+0];for(var a=0,$=r.length;$>a;a++){var i=x.get("Opal").$coerce_to(r[a],x.get("String"),"to_str").$to_s();if(e.length>=i.length&&e.substr(e.length-i.length,i.length)==i)return!0}return!1}),e.alias(b,"eql?","=="),e.alias(b,"equal?","==="),e.defn(b,"$gsub",d=function(e,t){var n=this,r=d.$$p,a=r||o;if(d.$$p=null,void 0===t&&a===o)return n.$enum_for("gsub",e);var $,i,s="",u=o,l=0;for(e.$$is_regexp?e=new RegExp(e.source,"gm"+(e.ignoreCase?"i":"")):(e=x.get("Opal").$coerce_to(e,x.get("String"),"to_str"),e=new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));;){if($=e.exec(n),null===$){c["~"]=o,s+=n.slice(l);break}u=x.get("MatchData").$new(e,$),void 0===t?i=a($[0]):t.$$is_hash?i=t["$[]"]($[0]).$to_s():(t.$$is_string||(t=x.get("Opal").$coerce_to(t,x.get("String"),"to_str")),i=t.replace(/([\\]+)([0-9+&`'])/g,function(e,t,r){if(t.length%2===0)return e;switch(r){case"+":for(var a=$.length-1;a>0;a--)if(void 0!==$[a])return t.slice(1)+$[a];return"";case"&":return t.slice(1)+$[0];case"`":return t.slice(1)+n.slice(0,$.index);case"'":return t.slice(1)+n.slice($.index+$[0].length);default:return t.slice(1)+($[r]||"")}}).replace(/\\\\/g,"\\")),e.lastIndex===$.index?(s+=i+n.slice(l,$.index+1),e.lastIndex+=1):s+=n.slice(l,$.index)+i,l=e.lastIndex}return c["~"]=u,s}),e.defn(b,"$hash",function(){var e=this;return e.toString()}),e.defn(b,"$hex",function(){var e=this;return e.$to_i(16)}),e.defn(b,"$include?",function(e){var t,n=this;return e.$$is_string?-1!==n.indexOf(e):(((t=e["$respond_to?"]("to_str"))===o||t.$$is_boolean&&1!=t)&&n.$raise(x.get("TypeError"),"no implicit conversion of "+e.$class()+" into String"),-1!==n.indexOf(e.$to_str()))}),e.defn(b,"$index",function(e,t){var n,r,a,$=this;if(void 0===t)t=0;else if(t=x.get("Opal").$coerce_to(t,x.get("Integer"),"to_int"),0>t&&(t+=$.length,0>t))return o;if(e.$$is_regexp)for(a=new RegExp(e.source,"gm"+(e.ignoreCase?"i":""));;){if(r=a.exec($),null===r){c["~"]=o,n=-1;break}if(r.index>=t){c["~"]=x.get("MatchData").$new(a,r),n=r.index;break}a.lastIndex=r.index+1}else e=x.get("Opal").$coerce_to(e,x.get("String"),"to_str"),n=0===e.length&&t>$.length?-1:$.indexOf(e,t);return-1===n?o:n}),e.defn(b,"$inspect",function(){var e=this,t=/[\\\"\x00-\x1f\x7f-\x9f\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n={"":"\\a","":"\\e","\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","":"\\v",'"':'\\"',"\\":"\\\\"},r=e.replace(t,function(e){return n[e]||"\\u"+("0000"+e.charCodeAt(0).toString(16).toUpperCase()).slice(-4)});return'"'+r.replace(/\#[\$\@\{]/g,"\\$&")+'"'}),e.defn(b,"$intern",function(){var e=this;return e}),e.defn(b,"$lines",f=function(e){var t,n,r=this,a=f.$$p,$=a||o,i=o;return null==c["/"]&&(c["/"]=o),null==e&&(e=c["/"]),f.$$p=null,i=(t=(n=r).$each_line,t.$$p=$.$to_proc(),t).call(n,e),$!==!1&&$!==o?r:i.$to_a()}),e.defn(b,"$length",function(){var e=this;return e.length}),e.defn(b,"$ljust",function(e,t){var n,r=this;if(null==t&&(t=" "),e=x.get("Opal").$coerce_to(e,x.get("Integer"),"to_int"),t=x.get("Opal").$coerce_to(t,x.get("String"),"to_str").$to_s(),(n=t["$empty?"]())===o||n.$$is_boolean&&1!=n||r.$raise(x.get("ArgumentError"),"zero width padding"),(n=e<=r.length)!==o&&(!n.$$is_boolean||1==n))return r;var a=-1,$="";for(e-=r.length;++a<e;)$+=t;return r+$.slice(0,e)}),e.defn(b,"$lstrip",function(){var e=this;return e.replace(/^\s*/,"")}),e.defn(b,"$match",g=function(e,t){var n,r,a=this,$=g.$$p,i=$||o;return g.$$p=null,(n=(r=x.get("String")["$==="](e))!==!1&&r!==o?r:e["$respond_to?"]("to_str"))===o||n.$$is_boolean&&1!=n||(e=x.get("Regexp").$new(e.$to_str())),((n=x.get("Regexp")["$==="](e))===o||n.$$is_boolean&&1!=n)&&a.$raise(x.get("TypeError"),"wrong argument type "+e.$class()+" (expected Regexp)"),(n=(r=e).$match,n.$$p=i.$to_proc(),n).call(r,a,t)}),e.defn(b,"$next",function(){var e=this,t=e.length;if(0===t)return"";for(var n,r=e,a=e.search(/[a-zA-Z0-9]/),o=!1;t--;){if(n=e.charCodeAt(t),n>=48&&57>=n||n>=65&&90>=n||n>=97&&122>=n)switch(n){case 57:o=!0,n=48;break;case 90:o=!0,n=65;break;case 122:o=!0,n=97;break;default:o=!1,n+=1}else-1===a?255===n?(o=!0,n=0):(o=!1,n+=1):o=!0;if(r=r.slice(0,t)+String.fromCharCode(n)+r.slice(t+1),o&&(0===t||t===a)){switch(n){case 65:break;case 97:break;default:n+=1}r=0===t?String.fromCharCode(n)+r:r.slice(0,t)+String.fromCharCode(n)+r.slice(t),o=!1}if(!o)break}return r}),e.defn(b,"$oct",function(){var e,t=this,n=t,r=8;return/^\s*_/.test(n)?0:(n=n.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/i,function(e,t,n,a){switch(a.charAt(0)){case"+":case"-":return e;case"0":if("x"===a.charAt(1)&&"0x"===n)return e}switch(n){case"0b":r=2;break;case"0":case"0o":r=8;break;case"0d":r=10;break;case"0x":r=16}return t+a}),e=parseInt(n.replace(/_(?!_)/g,""),r),isNaN(e)?0:e)}),e.defn(b,"$ord",function(){var e=this;return e.charCodeAt(0)}),e.defn(b,"$partition",function(e){var t,n,r=this;return e.$$is_regexp?(n=e.exec(r),null===n?t=-1:(x.get("MatchData").$new(e,n),e=n[0],t=n.index)):(e=x.get("Opal").$coerce_to(e,x.get("String"),"to_str"),t=r.indexOf(e)),-1===t?[r,"",""]:[r.slice(0,t),r.slice(t,t+e.length),r.slice(t+e.length)]}),e.defn(b,"$reverse",function(){var e=this;return e.split("").reverse().join("")}),e.defn(b,"$rindex",function(e,t){var n,r,a,$,i=this;if(void 0===t)t=i.length;else if(t=x.get("Opal").$coerce_to(t,x.get("Integer"),"to_int"),0>t&&(t+=i.length,0>t))return o;if(e.$$is_regexp){for(r=null,a=new RegExp(e.source,"gm"+(e.ignoreCase?"i":""));;){if($=a.exec(i),null===$||$.index>t)break;r=$,a.lastIndex=r.index+1}null===r?(c["~"]=o,n=-1):(x.get("MatchData").$new(a,r),n=r.index)}else e=x.get("Opal").$coerce_to(e,x.get("String"),"to_str"),n=i.lastIndexOf(e,t);return-1===n?o:n}),e.defn(b,"$rjust",function(e,t){var n,r=this;if(null==t&&(t=" "),e=x.get("Opal").$coerce_to(e,x.get("Integer"),"to_int"),t=x.get("Opal").$coerce_to(t,x.get("String"),"to_str").$to_s(),(n=t["$empty?"]())===o||n.$$is_boolean&&1!=n||r.$raise(x.get("ArgumentError"),"zero width padding"),(n=e<=r.length)!==o&&(!n.$$is_boolean||1==n))return r;var a=Math.floor(e-r.length),$=Math.floor(a/t.length),i=Array($+1).join(t),s=a-i.length;return i+t.slice(0,s)+r}),e.defn(b,"$rpartition",function(e){var t,n,r,a,o=this;if(e.$$is_regexp){for(n=null,r=new RegExp(e.source,"gm"+(e.ignoreCase?"i":""));;){if(a=r.exec(o),null===a)break;n=a,r.lastIndex=n.index+1}null===n?t=-1:(x.get("MatchData").$new(r,n),e=n[0],t=n.index)}else e=x.get("Opal").$coerce_to(e,x.get("String"),"to_str"),t=o.lastIndexOf(e);return-1===t?["","",o]:[o.slice(0,t),o.slice(t,t+e.length),o.slice(t+e.length)]}),e.defn(b,"$rstrip",function(){var e=this;return e.replace(/[\s\u0000]*$/,"")}),e.defn(b,"$scan",h=function(e){var t=this,n=h.$$p,r=n||o;h.$$p=null;var a,$=[],i=o;for(e.$$is_regexp?e=new RegExp(e.source,"gm"+(e.ignoreCase?"i":"")):(e=x.get("Opal").$coerce_to(e,x.get("String"),"to_str"),e=new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));null!=(a=e.exec(t));)i=x.get("MatchData").$new(e,a),r===o?1==a.length?$.push(a[0]):$.push(i.$captures()):1==a.length?r(a[0]):r.call(t,i.$captures()),e.lastIndex===a.index&&(e.lastIndex+=1);return c["~"]=i,r!==o?t:$}),e.alias(b,"size","length"),e.alias(b,"slice","[]"),e.defn(b,"$split",function(e,t){var n,r=this;if(null==c[";"]&&(c[";"]=o),0===r.length)return[];if(void 0===t)t=0;else if(t=x.get("Opal")["$coerce_to!"](t,x.get("Integer"),"to_int"),1===t)return[r];(void 0===e||e===o)&&(e=(n=c[";"])!==!1&&n!==o?n:" ");var a,$,i=[],s=r.toString(),u=0;if(e.$$is_regexp?e=new RegExp(e.source,"gm"+(e.ignoreCase?"i":"")):(e=x.get("Opal").$coerce_to(e,x.get("String"),"to_str").$to_s()," "===e?(e=/\s+/gm,s=s.replace(/^\s+/,"")):e=new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm")),i=s.split(e),1===i.length&&i[0]===s)return i;for(;-1!==($=i.indexOf(void 0));)i.splice($,1);if(0===t){for(;""===i[i.length-1];)i.length-=1;return i}if(a=e.exec(s),0>t){if(null!==a&&""===a[0]&&-1===e.source.indexOf("(?="))for($=0;$<a.length;$++)i.push("");return i}if(null!==a&&""===a[0])return i.splice(t-1,i.length-1,i.slice(t-1).join("")),i;for($=0;null!==a&&($++,u=e.lastIndex,$+1!==t);)a=e.exec(s);return i.splice(t-1,i.length-1,s.slice(u)),i}),e.defn(b,"$squeeze",function(){var e=this,t=o,n=arguments.length-0;0>n&&(n=0);var r=new Array(n);for(t=0;n>t;t++)r[t]=arguments[t+0];if(0===r.length)return e.replace(/(.)\1+/g,"$1");var a=u(r);return null===a?e:e.replace(new RegExp("("+a+")\\1+","g"),"$1")}),e.defn(b,"$start_with?",function(){var e=this,t=o,n=arguments.length-0;0>n&&(n=0);var r=new Array(n);for(t=0;n>t;t++)r[t]=arguments[t+0];for(var a=0,$=r.length;$>a;a++){var i=x.get("Opal").$coerce_to(r[a],x.get("String"),"to_str").$to_s();if(0===e.indexOf(i))return!0}return!1}),e.defn(b,"$strip",function(){var e=this;return e.replace(/^\s*/,"").replace(/[\s\u0000]*$/,"")}),e.defn(b,"$sub",m=function(e,t){var n=this,r=m.$$p,a=r||o;m.$$p=null,e.$$is_regexp||(e=x.get("Opal").$coerce_to(e,x.get("String"),"to_str"),e=new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")));var $=e.exec(n);return null===$?(c["~"]=o,n.toString()):(x.get("MatchData").$new(e,$),void 0===t?(a===o&&n.$raise(x.get("ArgumentError"),"wrong number of arguments (1 for 2)"),n.slice(0,$.index)+a($[0])+n.slice($.index+$[0].length)):t.$$is_hash?n.slice(0,$.index)+t["$[]"]($[0]).$to_s()+n.slice($.index+$[0].length):(t=x.get("Opal").$coerce_to(t,x.get("String"),"to_str"),t=t.replace(/([\\]+)([0-9+&`'])/g,function(e,t,r){if(t.length%2===0)return e;switch(r){case"+":for(var a=$.length-1;a>0;a--)if(void 0!==$[a])return t.slice(1)+$[a];return"";case"&":return t.slice(1)+$[0];case"`":return t.slice(1)+n.slice(0,$.index);case"'":return t.slice(1)+n.slice($.index+$[0].length);default:return t.slice(1)+($[r]||"")}}).replace(/\\\\/g,"\\"),n.slice(0,$.index)+t+n.slice($.index+$[0].length)))}),e.alias(b,"succ","next"),e.defn(b,"$sum",function(e){var t=this;null==e&&(e=16),e=x.get("Opal").$coerce_to(e,x.get("Integer"),"to_int");for(var n=0,r=t.length,a=0;r>a;a++)n+=t.charCodeAt(a);return 0>=e?n:n&Math.pow(2,e)-1}),e.defn(b,"$swapcase",function(){var e=this,t=e.replace(/([a-z]+)|([A-Z]+)/g,function(e,t,n){return t?e.toUpperCase():e.toLowerCase()});return e.constructor===String?t:e.$class().$new(t)}),e.defn(b,"$to_f",function(){var e=this;if("_"===e.charAt(0))return 0;var t=parseFloat(e.replace(/_/g,""));return isNaN(t)||t==1/0||t==-(1/0)?0:t}),e.defn(b,"$to_i",function(e){var t=this;null==e&&(e=10);var n,r=t.toLowerCase(),a=x.get("Opal").$coerce_to(e,x.get("Integer"),"to_int");return(1===a||0>a||a>36)&&t.$raise(x.get("ArgumentError"),"invalid radix "+a),/^\s*_/.test(r)?0:(r=r.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/,function(e,t,n,r){switch(r.charAt(0)){case"+":case"-":return e;case"0":if("x"===r.charAt(1)&&"0x"===n&&(0===a||16===a))return e}switch(n){case"0b":if(0===a||2===a)return a=2,t+r;break;case"0":case"0o":if(0===a||8===a)return a=8,t+r;break;case"0d":if(0===a||10===a)return a=10,t+r;break;case"0x":if(0===a||16===a)return a=16,t+r}return e}),n=parseInt(r.replace(/_(?!_)/g,""),a),isNaN(n)?0:n)}),e.defn(b,"$to_proc",function(){var t,n,r,a=this,$=o;return $=a,(t=(n=a).$proc,t.$$p=(r=function(t){var n,a,s,c=r.$$s||this,u=o;return t=i.call(arguments,0),n=r.$$p||o,r.$$p=null,(a=t["$empty?"]())===o||a.$$is_boolean&&1!=a||c.$raise(x.get("ArgumentError"),"no receiver given"),u=t.$shift(),(a=(s=u).$__send__,a.$$p=n.$to_proc(),a).apply(s,[$].concat(e.to_a(t)))},r.$$s=a,r),t).call(n)}),e.defn(b,"$to_s",function(){var e=this;return e.toString()}),e.alias(b,"to_str","to_s"),e.alias(b,"to_sym","intern"),e.defn(b,"$tr",function(e,t){var n=this;if(e=x.get("Opal").$coerce_to(e,x.get("String"),"to_str").$to_s(),t=x.get("Opal").$coerce_to(t,x.get("String"),"to_str").$to_s(),0==e.length||e===t)return n;var r,a,o,$,i,s,c,u={},l=e.split(""),_=l.length,p=t.split(""),d=p.length,f=!1,g=null;"^"===l[0]&&l.length>1&&(f=!0,l.shift(),g=p[d-1],_-=1);var h=[],m=null;for(a=!1,r=0;_>r;r++)if($=l[r],null==m)m=$,h.push($);else if("-"===$)"-"===m?(h.push("-"),h.push("-")):r==_-1?h.push("-"):a=!0;else if(a){for(i=m.charCodeAt(0),s=$.charCodeAt(0),i>s&&n.$raise(x.get("ArgumentError"),'invalid range "'+String.fromCharCode(i)+"-"+String.fromCharCode(s)+'" in string transliteration'),o=i+1;s>o;o++)h.push(String.fromCharCode(o));h.push($),a=null,m=null}else h.push($);if(l=h,_=l.length,f)for(r=0;_>r;r++)u[l[r]]=!0;else{if(d>0){var v=[],b=null;for(a=!1,r=0;d>r;r++)if($=p[r],null==m)m=$,v.push($);else if("-"===$)"-"===b?(v.push("-"),v.push("-")):r==d-1?v.push("-"):a=!0;else if(a){for(i=m.charCodeAt(0),s=$.charCodeAt(0),i>s&&n.$raise(x.get("ArgumentError"),'invalid range "'+String.fromCharCode(i)+"-"+String.fromCharCode(s)+'" in string transliteration'),o=i+1;s>o;o++)v.push(String.fromCharCode(o));v.push($),a=null,m=null}else v.push($);p=v,d=p.length}var y=_-d;if(y>0){var w=d>0?p[d-1]:"";for(r=0;y>r;r++)p.push(w)}for(r=0;_>r;r++)u[l[r]]=p[r]}var k="";for(r=0,c=n.length;c>r;r++){$=n.charAt(r);var S=u[$];k+=f?null==S?g:$:null!=S?S:$}return k}),e.defn(b,"$tr_s",function(e,t){var n=this;if(e=x.get("Opal").$coerce_to(e,x.get("String"),"to_str").$to_s(),t=x.get("Opal").$coerce_to(t,x.get("String"),"to_str").$to_s(),0==e.length)return n;var r,a,o,$,i,s,c,u={},l=e.split(""),_=l.length,p=t.split(""),d=p.length,f=!1,g=null;"^"===l[0]&&l.length>1&&(f=!0,l.shift(),g=p[d-1],_-=1);var h=[],m=null;for(a=!1,r=0;_>r;r++)if($=l[r],null==m)m=$,h.push($);else if("-"===$)"-"===m?(h.push("-"),h.push("-")):r==_-1?h.push("-"):a=!0;else if(a){for(i=m.charCodeAt(0),s=$.charCodeAt(0),i>s&&n.$raise(x.get("ArgumentError"),'invalid range "'+String.fromCharCode(i)+"-"+String.fromCharCode(s)+'" in string transliteration'),o=i+1;s>o;o++)h.push(String.fromCharCode(o));h.push($),a=null,m=null}else h.push($);if(l=h,_=l.length,f)for(r=0;_>r;r++)u[l[r]]=!0;else{if(d>0){var v=[],b=null;for(a=!1,r=0;d>r;r++)if($=p[r],null==m)m=$,v.push($);else if("-"===$)"-"===b?(v.push("-"),v.push("-")):r==d-1?v.push("-"):a=!0;else if(a){for(i=m.charCodeAt(0),s=$.charCodeAt(0),i>s&&n.$raise(x.get("ArgumentError"),'invalid range "'+String.fromCharCode(i)+"-"+String.fromCharCode(s)+'" in string transliteration'),o=i+1;s>o;o++)v.push(String.fromCharCode(o));v.push($),a=null,m=null}else v.push($);p=v,d=p.length}var y=_-d;if(y>0){var w=d>0?p[d-1]:"";for(r=0;y>r;r++)p.push(w)}for(r=0;_>r;r++)u[l[r]]=p[r]}var k="",S=null;for(r=0,c=n.length;c>r;r++){$=n.charAt(r);var E=u[$];f?null==E?null==S&&(k+=g,S=!0):(k+=$,S=null):null!=E?(null==S||S!==E)&&(k+=E,S=E):(k+=$,S=null)}return k}),e.defn(b,"$upcase",function(){var e=this;return e.toUpperCase()}),e.defn(b,"$upto",v=function(e,t){var n=this,r=v.$$p,a=r||o;if(null==t&&(t=!1),v.$$p=null,a===o)return n.$enum_for("upto",e,t);e=x.get("Opal").$coerce_to(e,x.get("String"),"to_str");var i,s,c,u=n.toString();if(1===u.length&&1===e.length)for(i=u.charCodeAt(0),s=e.charCodeAt(0);s>=i&&(!t||i!==s);){if(c=a(String.fromCharCode(i)),c===$)return $.$v;i+=1}else if(parseInt(u,10).toString()===u&&parseInt(e,10).toString()===e)for(i=parseInt(u,10),s=parseInt(e,10);s>=i&&(!t||i!==s);){if(c=a(i.toString()),c===$)return $.$v;i+=1}else for(;u.length<=e.length&&e>=u&&(!t||u!==e);){if(c=a(u),c===$)return $.$v;u=u.$succ()}return n})}(a.base,String),e.cdecl(a,"Symbol",a.get("String"))},Opal.modules["corelib/enumerable"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}function a(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function o(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function $(e,t){return"number"==typeof e&&"number"==typeof t?e/t:e["$/"](t)}e.dynamic_require_severity="ignore";var i=(e.top,e),s=e.nil,c=e.breaker,u=e.slice,l=e.module;return e.add_stubs(["$raise","$new","$yield","$dup","$enum_for","$enumerator_size","$flatten","$map","$==","$destructure","$respond_to?","$coerce_to!","$>","$*","$nil?","$coerce_to","$try_convert","$<","$+","$-","$ceil","$/","$size","$===","$<<","$[]","$[]=","$inspect","$__send__","$compare","$<=>","$proc","$call","$to_a","$lambda","$sort!","$map!","$first","$zip"]),function(i){var _,p,d,f,g,h,m,v,b,y,x,w,k,S,E,R,A,O,M,q,z,C,I,N,j,T,P,F,D,B,H,L,U,G,Y,V,W=_=l(i,"Enumerable"),K=(W.$$proto,W.$$scope);e.defn(W,"$all?",p=function(){var t,n=this,r=p.$$p,a=r||s;p.$$p=null;var o=!0;return a!==s?n.$each.$$p=function(){var n=e.yieldX(a,arguments);return n===c?(o=c.$v,c):(t=n)===s||t.$$is_boolean&&0==t?(o=!1,c):void 0}:n.$each.$$p=function(e){return 1==arguments.length&&((t=e)===s||t.$$is_boolean&&0==t)?(o=!1,c):void 0},n.$each(),o}),e.defn(W,"$any?",d=function(){var t,n=this,r=d.$$p,a=r||s;d.$$p=null;var o=!1;return a!==s?n.$each.$$p=function(){var n=e.yieldX(a,arguments);return n===c?(o=c.$v,c):(t=n)===s||t.$$is_boolean&&1!=t?void 0:(o=!0,c)}:n.$each.$$p=function(e){return 1==arguments.length&&((t=e)===s||t.$$is_boolean&&1!=t)?void 0:(o=!0,c)},n.$each(),o}),e.defn(W,"$chunk",f=function(t){var n,r,a,o=this,$=f.$$p,i=$||s;return f.$$p=null,i!==!1&&i!==s||K.get("Kernel").$raise(K.get("ArgumentError"),"no block given"),(n=(r=e.get("Enumerator")).$new,n.$$p=(a=function(n){function r(){d.length>0&&n.$yield(p,d)}var o,$,u,l=a.$$s||this;null==n&&(n=s);var _,p=s,d=[];_=void 0==t||t===s?i:(o=($=K.get("Proc")).$new,o.$$p=(u=function(e){u.$$s||this;return null==e&&(e=s),i.$yield(e,t.$dup())},u.$$s=l,u),o).call($),l.$each.$$p=function(t){var n=e.yield1(_,t);return n===c?c:void(n===s?(r(),d=[],p=s):(p===s||p===n?d.push(t):(r(),d=[t]),p=n))},l.$each(),r()},a.$$s=o,a),n).call(r)}),e.defn(W,"$collect",g=function(){var t,n,r,a=this,o=g.$$p,$=o||s;if(g.$$p=null,$===s)return(t=(n=a).$enum_for,t.$$p=(r=function(){var e=r.$$s||this;return e.$enumerator_size()},r.$$s=a,r),t).call(n,"collect");var i=[];return a.$each.$$p=function(){var t=e.yieldX($,arguments);return t===c?(i=c.$v,c):void i.push(t)},a.$each(),i}),e.defn(W,"$collect_concat",h=function(){var t,n,r,a,o,$=this,i=h.$$p,u=i||s;return h.$$p=null,u===s?(t=(n=$).$enum_for,t.$$p=(r=function(){var e=r.$$s||this;return e.$enumerator_size()},r.$$s=$,r),t).call(n,"collect_concat"):(t=(a=$).$map,t.$$p=(o=function(t){var n;o.$$s||this;return null==t&&(t=s),n=e.yield1(u,t),n===c?n:n},o.$$s=$,o),t).call(a).$flatten(1)}),e.defn(W,"$count",m=function(t){var n,r=this,a=m.$$p,o=a||s;m.$$p=null;var $=0;return null!=t?o=function(){return K.get("Opal").$destructure(arguments)["$=="](t)}:o===s&&(o=function(){return!0}),r.$each.$$p=function(){var t=e.yieldX(o,arguments);return t===c?($=c.$v,c):void((n=t)===s||n.$$is_boolean&&1!=n||$++)},r.$each(),$}),e.defn(W,"$cycle",v=function(r){var a,o,$,i=this,u=v.$$p,l=u||s;if(null==r&&(r=s),v.$$p=null,l===s)return(a=(o=i).$enum_for,a.$$p=($=function(){var e,a=$.$$s||this;return r["$=="](s)?(e=a["$respond_to?"]("size"))===s||e.$$is_boolean&&1!=e?s:K.get("Float").$$scope.get("INFINITY"):(r=K.get("Opal")["$coerce_to!"](r,K.get("Integer"),"to_int"),t(r,0)?n(a.$enumerator_size(),r):0)},$.$$s=i,$),a).call(o,"cycle",r);if((a=r["$nil?"]())===s||a.$$is_boolean&&1!=a){if(r=K.get("Opal")["$coerce_to!"](r,K.get("Integer"),"to_int"),(a=0>=r)!==s&&(!a.$$is_boolean||1==a))return s}else;var _,p,d,f,g=[];if(i.$each.$$p=function(){var t=K.get("Opal").$destructure(arguments),n=e.yield1(l,t);return n===c?(_=c.$v,c):void g.push(t)},i.$each(),void 0!==_)return _;if(0===g.length)return s;if(r===s){for(;;)for(p=0,d=g.length;d>p;p++)if(f=e.yield1(l,g[p]),f===c)return c.$v}else for(;r>1;){for(p=0,d=g.length;d>p;p++)if(f=e.yield1(l,g[p]),f===c)return c.$v;r--}}),e.defn(W,"$detect",b=function(t){var n,r=this,a=b.$$p,o=a||s;if(b.$$p=null,o===s)return r.$enum_for("detect",t);var $;return r.$each.$$p=function(){var t=K.get("Opal").$destructure(arguments),r=e.yield1(o,t);return r===c?($=c.$v,c):(n=r)===s||n.$$is_boolean&&1!=n?void 0:($=t,c)},r.$each(),void 0===$&&void 0!==t&&($="function"==typeof t?t():t),void 0===$?s:$}),e.defn(W,"$drop",function(e){var t,n=this;e=K.get("Opal").$coerce_to(e,K.get("Integer"),"to_int"),(t=0>e)===s||t.$$is_boolean&&1!=t||n.$raise(K.get("ArgumentError"),"attempt to drop negative size");var r=[],a=0;return n.$each.$$p=function(){a>=e&&r.push(K.get("Opal").$destructure(arguments)),a++},n.$each(),r}),e.defn(W,"$drop_while",y=function(){var t,n=this,r=y.$$p,a=r||s;if(y.$$p=null,a===s)return n.$enum_for("drop_while");var o=[],$=!0;return n.$each.$$p=function(){var n=K.get("Opal").$destructure(arguments);if($){var r=e.yield1(a,n);if(r===c)return o=c.$v,c;((t=r)===s||t.$$is_boolean&&0==t)&&($=!1,o.push(n))}else o.push(n)},n.$each(),o}),e.defn(W,"$each_cons",x=function(t){var n,$,i,u=this,l=x.$$p,_=l||s;if(x.$$p=null,(n=1!=arguments.length)===s||n.$$is_boolean&&1!=n||u.$raise(K.get("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 1)"),t=K.get("Opal").$try_convert(t,K.get("Integer"),"to_int"),
(n=0>=t)===s||n.$$is_boolean&&1!=n||u.$raise(K.get("ArgumentError"),"invalid size"),_===s)return(n=($=u).$enum_for,n.$$p=(i=function(){var e,n,$=i.$$s||this,c=s;return c=$.$enumerator_size(),(e=c["$nil?"]())===s||e.$$is_boolean&&1!=e?(e=(n=c["$=="](0))!==!1&&n!==s?n:r(c,t))===s||e.$$is_boolean&&1!=e?a(o(c,t),1):0:s},i.$$s=u,i),n).call($,"each_cons",t);var p=[],d=s;return u.$each.$$p=function(){var n=K.get("Opal").$destructure(arguments);if(p.push(n),p.length>t&&p.shift(),p.length==t){var r=e.yield1(_,p.slice(0,t));if(r==c)return d=c.$v,c}},u.$each(),d}),e.defn(W,"$each_entry",w=function(){var e=this;w.$$p;return w.$$p=null,e.$raise(K.get("NotImplementedError"))}),e.defn(W,"$each_slice",k=function(t){var n,r,a,o=this,i=k.$$p,u=i||s;if(k.$$p=null,t=K.get("Opal").$coerce_to(t,K.get("Integer"),"to_int"),(n=0>=t)===s||n.$$is_boolean&&1!=n||o.$raise(K.get("ArgumentError"),"invalid slice size"),u===s)return(n=(r=o).$enum_for,n.$$p=(a=function(){var e,n=a.$$s||this;return(e=n["$respond_to?"]("size"))===s||e.$$is_boolean&&1!=e?s:$(n.$size(),t).$ceil()},a.$$s=o,a),n).call(r,"each_slice",t);var l,_=[];return o.$each.$$p=function(){var n=K.get("Opal").$destructure(arguments);if(_.push(n),_.length===t){if(e.yield1(u,_)===c)return l=c.$v,c;_=[]}},o.$each(),void 0!==l?l:_.length>0&&e.yield1(u,_)===c?c.$v:s}),e.defn(W,"$each_with_index",S=function(){var t,n,r,a=this,o=S.$$p,$=o||s,i=s,u=arguments.length-0;0>u&&(u=0);var l=new Array(u);for(i=0;u>i;i++)l[i]=arguments[i+0];if(S.$$p=null,$===s)return(t=(n=a).$enum_for,t.$$p=(r=function(){var e=r.$$s||this;return e.$enumerator_size()},r.$$s=a,r),t).apply(n,["each_with_index"].concat(e.to_a(l)));var _,p=0;return a.$each.$$p=function(){var e=K.get("Opal").$destructure(arguments),t=$(e,p);return t===c?(_=c.$v,c):void p++},a.$each.apply(a,l),void 0!==_?_:a}),e.defn(W,"$each_with_object",E=function(e){var t,n,r,a=this,o=E.$$p,$=o||s;if(E.$$p=null,$===s)return(t=(n=a).$enum_for,t.$$p=(r=function(){var e=r.$$s||this;return e.$enumerator_size()},r.$$s=a,r),t).call(n,"each_with_object",e);var i;return a.$each.$$p=function(){var t=K.get("Opal").$destructure(arguments),n=$(t,e);return n===c?(i=c.$v,c):void 0},a.$each(),void 0!==i?i:e}),e.defn(W,"$entries",function(){var e=this,t=s,n=arguments.length-0;0>n&&(n=0);var r=new Array(n);for(t=0;n>t;t++)r[t]=arguments[t+0];var a=[];return e.$each.$$p=function(){a.push(K.get("Opal").$destructure(arguments))},e.$each.apply(e,r),a}),e.alias(W,"find","detect"),e.defn(W,"$find_all",R=function(){var t,n,r,a=this,o=R.$$p,$=o||s;if(R.$$p=null,$===s)return(t=(n=a).$enum_for,t.$$p=(r=function(){var e=r.$$s||this;return e.$enumerator_size()},r.$$s=a,r),t).call(n,"find_all");var i=[];return a.$each.$$p=function(){var n=K.get("Opal").$destructure(arguments),r=e.yield1($,n);return r===c?(i=c.$v,c):void((t=r)===s||t.$$is_boolean&&1!=t||i.push(n))},a.$each(),i}),e.defn(W,"$find_index",A=function(t){var n,r=this,a=A.$$p,o=a||s;if(A.$$p=null,(n=void 0===t&&o===s)!==s&&(!n.$$is_boolean||1==n))return r.$enum_for("find_index");var $=s,i=0;return null!=t?r.$each.$$p=function(){var e=K.get("Opal").$destructure(arguments);return e["$=="](t)?($=i,c):void(i+=1)}:o!==s&&(r.$each.$$p=function(){var t=e.yieldX(o,arguments);return t===c?($=c.$v,c):(n=t)===s||n.$$is_boolean&&1!=n?void(i+=1):($=i,c)}),r.$each(),$}),e.defn(W,"$first",function(e){var t,n=this,r=s;if((t=void 0===e)===s||t.$$is_boolean&&1!=t){if(r=[],e=K.get("Opal").$coerce_to(e,K.get("Integer"),"to_int"),(t=0>e)===s||t.$$is_boolean&&1!=t||n.$raise(K.get("ArgumentError"),"attempt to take negative size"),(t=0==e)!==s&&(!t.$$is_boolean||1==t))return[];var a=0;e=K.get("Opal").$coerce_to(e,K.get("Integer"),"to_int"),n.$each.$$p=function(){return r.push(K.get("Opal").$destructure(arguments)),e<=++a?c:void 0},n.$each()}else r=s,n.$each.$$p=function(){return r=K.get("Opal").$destructure(arguments),c},n.$each();return r}),e.alias(W,"flat_map","collect_concat"),e.defn(W,"$grep",O=function(t){var n,r=this,a=O.$$p,o=a||s;O.$$p=null;var $=[];return o!==s?r.$each.$$p=function(){var r=K.get("Opal").$destructure(arguments),a=t["$==="](r);if((n=a)!==s&&(!n.$$is_boolean||1==n)){if(a=e.yield1(o,r),a===c)return $=c.$v,c;$.push(a)}}:r.$each.$$p=function(){var e=K.get("Opal").$destructure(arguments),r=t["$==="](e);(n=r)===s||n.$$is_boolean&&1!=n||$.push(e)},r.$each(),$}),e.defn(W,"$group_by",M=function(){var t,n,r,a,o,$=this,i=M.$$p,u=i||s,l=s;if(M.$$p=null,u===s)return(t=(n=$).$enum_for,t.$$p=(r=function(){var e=r.$$s||this;return e.$enumerator_size()},r.$$s=$,r),t).call(n,"group_by");l=K.get("Hash").$new();var _;return $.$each.$$p=function(){var n=K.get("Opal").$destructure(arguments),r=e.yield1(u,n);return r===c?(_=c.$v,c):void(t=r,a=l,(o=a["$[]"](t))!==!1&&o!==s?o:a["$[]="](t,[]))["$<<"](n)},$.$each(),void 0!==_?_:l}),e.defn(W,"$include?",function(e){var t=this,n=!1;return t.$each.$$p=function(){var t=K.get("Opal").$destructure(arguments);return t["$=="](e)?(n=!0,c):void 0},t.$each(),n}),e.defn(W,"$inject",q=function(t,n){var r=this,a=q.$$p,o=a||s;q.$$p=null;var $=t;return o!==s&&void 0===n?r.$each.$$p=function(){var t=K.get("Opal").$destructure(arguments);return void 0===$?void($=t):(t=e.yieldX(o,[$,t]),t===c?($=c.$v,c):void($=t))}:(void 0===n&&(K.get("Symbol")["$==="](t)||r.$raise(K.get("TypeError"),""+t.$inspect()+" is not a Symbol"),n=t,$=void 0),r.$each.$$p=function(){var e=K.get("Opal").$destructure(arguments);return void 0===$?void($=e):void($=$.$__send__(n,e))}),r.$each(),void 0==$?s:$}),e.defn(W,"$lazy",function(){var t,n,r,a=this;return(t=(n=K.get("Enumerator").$$scope.get("Lazy")).$new,t.$$p=(r=function(t,n){var a;r.$$s||this;return null==t&&(t=s),n=u.call(arguments,1),(a=t).$yield.apply(a,e.to_a(n))},r.$$s=a,r),t).call(n,a,a.$enumerator_size())}),e.defn(W,"$enumerator_size",function(){var e,t=this;return(e=t["$respond_to?"]("size"))===s||e.$$is_boolean&&1!=e?s:t.$size()}),e.alias(W,"map","collect"),e.defn(W,"$max",z=function(){var e=this,t=z.$$p,n=t||s;z.$$p=null;var r;return n!==s?e.$each.$$p=function(){var t=K.get("Opal").$destructure(arguments);if(void 0===r)return void(r=t);var a=n(t,r);return a===c?(r=c.$v,c):(a===s&&e.$raise(K.get("ArgumentError"),"comparison failed"),void(a>0&&(r=t)))}:e.$each.$$p=function(){var e=K.get("Opal").$destructure(arguments);return void 0===r?void(r=e):void(K.get("Opal").$compare(e,r)>0&&(r=e))},e.$each(),void 0===r?s:r}),e.defn(W,"$max_by",C=function(){var t,n,r,a=this,o=C.$$p,$=o||s;if(C.$$p=null,$===!1||$===s)return(t=(n=a).$enum_for,t.$$p=(r=function(){var e=r.$$s||this;return e.$enumerator_size()},r.$$s=a,r),t).call(n,"max_by");var i,u;return a.$each.$$p=function(){var t=K.get("Opal").$destructure(arguments),n=e.yield1($,t);return void 0===i?(i=t,void(u=n)):n===c?(i=c.$v,c):void(n["$<=>"](u)>0&&(i=t,u=n))},a.$each(),void 0===i?s:i}),e.alias(W,"member?","include?"),e.defn(W,"$min",I=function(){var e=this,t=I.$$p,n=t||s;I.$$p=null;var r;return n!==s?e.$each.$$p=function(){var t=K.get("Opal").$destructure(arguments);if(void 0===r)return void(r=t);var a=n(t,r);return a===c?(r=c.$v,c):(a===s&&e.$raise(K.get("ArgumentError"),"comparison failed"),void(0>a&&(r=t)))}:e.$each.$$p=function(){var e=K.get("Opal").$destructure(arguments);return void 0===r?void(r=e):void(K.get("Opal").$compare(e,r)<0&&(r=e))},e.$each(),void 0===r?s:r}),e.defn(W,"$min_by",N=function(){var t,n,r,a=this,o=N.$$p,$=o||s;if(N.$$p=null,$===!1||$===s)return(t=(n=a).$enum_for,t.$$p=(r=function(){var e=r.$$s||this;return e.$enumerator_size()},r.$$s=a,r),t).call(n,"min_by");var i,u;return a.$each.$$p=function(){var t=K.get("Opal").$destructure(arguments),n=e.yield1($,t);return void 0===i?(i=t,void(u=n)):n===c?(i=c.$v,c):void(n["$<=>"](u)<0&&(i=t,u=n))},a.$each(),void 0===i?s:i}),e.defn(W,"$minmax",j=function(){var e,t,n,r,a=this,o=j.$$p,$=o||s;j.$$p=null,(e=$)!==!1&&e!==s?e:$=(t=(n=a).$proc,t.$$p=(r=function(e,t){r.$$s||this;return null==e&&(e=s),null==t&&(t=s),e["$<=>"](t)},r.$$s=a,r),t).call(n);var i=s,c=s,u=!0;return a.$each.$$p=function(){var e=K.get("Opal").$destructure(arguments);if(u)i=c=e,u=!1;else{var t=$.$call(i,e);t===s?a.$raise(K.get("ArgumentError"),"comparison failed"):t>0&&(i=e);var n=$.$call(c,e);n===s?a.$raise(K.get("ArgumentError"),"comparison failed"):0>n&&(c=e)}},a.$each(),[i,c]}),e.defn(W,"$minmax_by",T=function(){var e=this;T.$$p;return T.$$p=null,e.$raise(K.get("NotImplementedError"))}),e.defn(W,"$none?",P=function(){var t,n=this,r=P.$$p,a=r||s;P.$$p=null;var o=!0;return a!==s?n.$each.$$p=function(){var n=e.yieldX(a,arguments);return n===c?(o=c.$v,c):(t=n)===s||t.$$is_boolean&&1!=t?void 0:(o=!1,c)}:n.$each.$$p=function(){var e=K.get("Opal").$destructure(arguments);return(t=e)===s||t.$$is_boolean&&1!=t?void 0:(o=!1,c)},n.$each(),o}),e.defn(W,"$one?",F=function(){var t,n=this,r=F.$$p,a=r||s;F.$$p=null;var o=!1;return a!==s?n.$each.$$p=function(){var n=e.yieldX(a,arguments);if(n===c)return o=c.$v,c;if((t=n)!==s&&(!t.$$is_boolean||1==t)){if(o===!0)return o=!1,c;o=!0}}:n.$each.$$p=function(){var e=K.get("Opal").$destructure(arguments);if((t=e)!==s&&(!t.$$is_boolean||1==t)){if(o===!0)return o=!1,c;o=!0}},n.$each(),o}),e.defn(W,"$partition",D=function(){var t,n,r,a=this,o=D.$$p,$=o||s;if(D.$$p=null,$===s)return(t=(n=a).$enum_for,t.$$p=(r=function(){var e=r.$$s||this;return e.$enumerator_size()},r.$$s=a,r),t).call(n,"partition");var i,u=[],l=[];return a.$each.$$p=function(){var n=K.get("Opal").$destructure(arguments),r=e.yield1($,n);return r===c?(i=c.$v,c):void((t=r)===s||t.$$is_boolean&&1!=t?l.push(n):u.push(n))},a.$each(),[u,l]}),e.alias(W,"reduce","inject"),e.defn(W,"$reject",B=function(){var t,n,r,a=this,o=B.$$p,$=o||s;if(B.$$p=null,$===s)return(t=(n=a).$enum_for,t.$$p=(r=function(){var e=r.$$s||this;return e.$enumerator_size()},r.$$s=a,r),t).call(n,"reject");var i=[];return a.$each.$$p=function(){var n=K.get("Opal").$destructure(arguments),r=e.yield1($,n);return r===c?(i=c.$v,c):void(((t=r)===s||t.$$is_boolean&&0==t)&&i.push(n))},a.$each(),i}),e.defn(W,"$reverse_each",H=function(){var t,n,r,a=this,o=H.$$p,$=o||s;if(H.$$p=null,$===s)return(t=(n=a).$enum_for,t.$$p=(r=function(){var e=r.$$s||this;return e.$enumerator_size()},r.$$s=a,r),t).call(n,"reverse_each");var i=[];a.$each.$$p=function(){i.push(arguments)},a.$each();for(var c=i.length-1;c>=0;c--)e.yieldX($,i[c]);return i}),e.alias(W,"select","find_all"),e.defn(W,"$slice_before",L=function(t){var n,r,a,o=this,$=L.$$p,i=$||s;return L.$$p=null,(n=void 0===t&&i===s||arguments.length>1)===s||n.$$is_boolean&&1!=n||o.$raise(K.get("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 1)"),(n=(r=K.get("Enumerator")).$new,n.$$p=(a=function(n){var r,o=a.$$s||this;null==n&&(n=s);var $=[];i!==s?void 0===t?o.$each.$$p=function(){var t=K.get("Opal").$destructure(arguments),a=e.yield1(i,t);(r=a)!==s&&(!r.$$is_boolean||1==r)&&$.length>0&&(n["$<<"]($),$=[]),$.push(t)}:o.$each.$$p=function(){var e=K.get("Opal").$destructure(arguments),a=i(e,t.$dup());(r=a)!==s&&(!r.$$is_boolean||1==r)&&$.length>0&&(n["$<<"]($),$=[]),$.push(e)}:o.$each.$$p=function(){var e=K.get("Opal").$destructure(arguments),a=t["$==="](e);(r=a)!==s&&(!r.$$is_boolean||1==r)&&$.length>0&&(n["$<<"]($),$=[]),$.push(e)},o.$each(),$.length>0&&n["$<<"]($)},a.$$s=o,a),n).call(r)}),e.defn(W,"$sort",U=function(){var e,t,n,r=this,a=U.$$p,o=a||s,$=s;return U.$$p=null,$=r.$to_a(),o!==s||(o=(e=(t=r).$lambda,e.$$p=(n=function(e,t){n.$$s||this;return null==e&&(e=s),null==t&&(t=s),e["$<=>"](t)},n.$$s=r,n),e).call(t)),$.sort(o)}),e.defn(W,"$sort_by",G=function(){var e,t,n,r,a,o,$,i,c,u=this,l=G.$$p,_=l||s,p=s;return G.$$p=null,_===s?(e=(t=u).$enum_for,e.$$p=(n=function(){var e=n.$$s||this;return e.$enumerator_size()},n.$$s=u,n),e).call(t,"sort_by"):(p=(e=(r=u).$map,e.$$p=(a=function(){var e=(a.$$s||this,s);return e=K.get("Opal").$destructure(arguments),[_.$call(e),e]},a.$$s=u,a),e).call(r),(e=(o=p)["$sort!"],e.$$p=($=function(e,t){$.$$s||this;return null==e&&(e=s),null==t&&(t=s),e[0]["$<=>"](t[0])},$.$$s=u,$),e).call(o),(e=(i=p)["$map!"],e.$$p=(c=function(e){c.$$s||this;return null==e&&(e=s),e[1]},c.$$s=u,c),e).call(i))}),e.defn(W,"$take",function(e){var t=this;return t.$first(e)}),e.defn(W,"$take_while",Y=function(){var t,n=this,r=Y.$$p,a=r||s;if(Y.$$p=null,a===!1||a===s)return n.$enum_for("take_while");var o=[];return n.$each.$$p=function(){var n=K.get("Opal").$destructure(arguments),r=e.yield1(a,n);return r===c?(o=c.$v,c):(t=r)===s||t.$$is_boolean&&0==t?c:void o.push(n)},n.$each(),o}),e.alias(W,"to_a","entries"),e.defn(W,"$zip",V=function(){var t,n=this,r=(V.$$p,s),a=arguments.length-0;0>a&&(a=0);var o=new Array(a);for(r=0;a>r;r++)o[r]=arguments[r+0];return V.$$p=null,(t=n.$to_a()).$zip.apply(t,e.to_a(o))})}(i.base)},Opal.modules["corelib/enumerator"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}e.dynamic_require_severity="ignore";var r=e.top,a=e,o=e.nil,$=e.breaker,i=e.slice,s=e.klass;return e.add_stubs(["$require","$include","$allocate","$new","$to_proc","$coerce_to","$nil?","$empty?","$+","$class","$__send__","$===","$call","$enum_for","$size","$destructure","$inspect","$[]","$raise","$yield","$each","$enumerator_size","$respond_to?","$try_convert","$<","$for"]),r.$require("corelib/enumerable"),function(r,$super){function a(){}var c,u,l,_,p=a=s(r,$super,"Enumerator",a),d=p.$$proto,f=p.$$scope;return d.size=d.args=d.object=d.method=o,p.$include(f.get("Enumerable")),d.$$is_enumerator=!0,e.defs(p,"$for",c=function(e,t){var n=this,r=c.$$p,a=r||o,$=o,i=arguments.length-2;0>i&&(i=0);var s=new Array(i);for($=0;i>$;$++)s[$]=arguments[$+2];null==t&&(t="each"),c.$$p=null;var u=n.$allocate();return u.object=e,u.size=a,u.method=t,u.args=s,u}),e.defn(p,"$initialize",u=function(){var e,t,n=this,r=u.$$p,a=r||o;return u.$$p=null,a!==!1&&a!==o?(n.object=(e=(t=f.get("Generator")).$new,e.$$p=a.$to_proc(),e).call(t),n.method="each",n.args=[],n.size=arguments[0]||o,(e=n.size)===o||e.$$is_boolean&&1!=e?o:n.size=f.get("Opal").$coerce_to(n.size,f.get("Integer"),"to_int")):(n.object=arguments[0],n.method=arguments[1]||"each",n.args=i.call(arguments,2),n.size=o)}),e.defn(p,"$each",l=function(){var n,r,a,$=this,i=l.$$p,s=i||o,c=o,u=arguments.length-0;0>u&&(u=0);var _=new Array(u);for(c=0;u>c;c++)_[c]=arguments[c+0];return l.$$p=null,r=s["$nil?"](),(n=r!==!1&&r!==o?_["$empty?"]():r)===o||n.$$is_boolean&&1!=n?(_=t($.args,_),(n=s["$nil?"]())===o||n.$$is_boolean&&1!=n?(r=(a=$.object).$__send__,r.$$p=s.$to_proc(),r).apply(a,[$.method].concat(e.to_a(_))):(n=$.$class()).$new.apply(n,[$.object,$.method].concat(e.to_a(_)))):$}),e.defn(p,"$size",function(){var t,n=this;return(t=f.get("Proc")["$==="](n.size))===o||t.$$is_boolean&&1!=t?n.size:(t=n.size).$call.apply(t,e.to_a(n.args))}),e.defn(p,"$with_index",_=function(e){var t,n,r,a=this,i=_.$$p,s=i||o;if(null==e&&(e=0),_.$$p=null,e=e!==!1&&e!==o?f.get("Opal").$coerce_to(e,f.get("Integer"),"to_int"):0,s===!1||s===o)return(t=(n=a).$enum_for,t.$$p=(r=function(){var e=r.$$s||this;return e.$size()},r.$$s=a,r),t).call(n,"with_index",e);var c,u=e;return a.$each.$$p=function(){var e=f.get("Opal").$destructure(arguments),t=s(e,u);return t===$?(c=$.$v,$):(u++,t)},a.$each(),void 0!==c?c:a.object}),e.alias(p,"with_object","each_with_object"),e.defn(p,"$inspect",function(){var e,n=this,r=o;return r="#<"+n.$class()+": "+n.object.$inspect()+":"+n.method,((e=n.args["$empty?"]())===o||e.$$is_boolean&&1!=e)&&(r=t(r,"("+n.args.$inspect()["$[]"](f.get("Range").$new(1,-2))+")")),t(r,">")}),function(t,$super){function n(){}var r,a,i=n=s(t,$super,"Generator",n),c=i.$$proto,u=i.$$scope;return c.block=o,i.$include(u.get("Enumerable")),e.defn(i,"$initialize",r=function(){var e=this,t=r.$$p,n=t||o;return r.$$p=null,n!==!1&&n!==o||e.$raise(u.get("LocalJumpError"),"no block given"),e.block=n}),e.defn(i,"$each",a=function(){var t,n,r=this,i=a.$$p,s=i||o,c=o,l=o,_=arguments.length-0;0>_&&(_=0);var p=new Array(_);for(l=0;_>l;l++)p[l]=arguments[l+0];a.$$p=null,c=(t=(n=u.get("Yielder")).$new,t.$$p=s.$to_proc(),t).call(n);try{if(p.unshift(c),e.yieldX(r.block,p)===$)return $.$v}catch(d){if(d===$)return $.$v;throw d}return r}),o&&"each"}(f.base,null),function(t,$super){function n(){}var r,a=n=s(t,$super,"Yielder",n),i=a.$$proto;a.$$scope;return i.block=o,e.defn(a,"$initialize",r=function(){var e=this,t=r.$$p,n=t||o;return r.$$p=null,e.block=n}),e.defn(a,"$yield",function(){var t=this,n=o,r=arguments.length-0;0>r&&(r=0);var a=new Array(r);for(n=0;r>n;n++)a[n]=arguments[n+0];var i=e.yieldX(t.block,a);if(i===$)throw $;return i}),e.defn(a,"$<<",function(){var t,n=this,r=o,a=arguments.length-0;0>a&&(a=0);var $=new Array(a);for(r=0;a>r;r++)$[r]=arguments[r+0];return(t=n).$yield.apply(t,e.to_a($)),n}),o&&"<<"}(f.base,null),function(r,$super){function a(){}var c,u,l,_,p,d,f,g,h,m=a=s(r,$super,"Lazy",a),v=m.$$proto,b=m.$$scope;return v.enumerator=o,function(e,$super){function t(){}var n=t=s(e,$super,"StopLazyError",t);n.$$proto,n.$$scope;return o}(b.base,b.get("Exception")),e.defn(m,"$initialize",c=function(t,n){var r,a=this,s=c.$$p,u=s||o;return null==n&&(n=o),c.$$p=null,u!==o||a.$raise(b.get("ArgumentError"),"tried to call lazy new without a block"),a.enumerator=t,e.find_super_dispatcher(a,"initialize",c,(r=function(n,a){var s,c,l,_=r.$$s||this;null==n&&(n=o),a=i.call(arguments,1);try{return(s=(c=t).$each,s.$$p=(l=function(t){l.$$s||this;return t=i.call(arguments,0),t.unshift(n),e.yieldX(u,t)===$?$:void 0},l.$$s=_,l),s).apply(c,e.to_a(a))}catch(p){if(!e.rescue(p,[b.get("Exception")]))throw p;try{return o}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}},r.$$s=a,r)).apply(a,[n])}),e.alias(m,"force","to_a"),e.defn(m,"$lazy",function(){var e=this;return e}),e.defn(m,"$collect",u=function(){var t,n,r,a=this,s=u.$$p,c=s||o;return u.$$p=null,c!==!1&&c!==o||a.$raise(b.get("ArgumentError"),"tried to call lazy map without a block"),(t=(n=b.get("Lazy")).$new,t.$$p=(r=function(t,n){r.$$s||this;null==t&&(t=o),n=i.call(arguments,1);var a=e.yieldX(c,n);return a===$?$:void t.$yield(a)},r.$$s=a,r),t).call(n,a,a.$enumerator_size())}),e.defn(m,"$collect_concat",l=function(){var t,n,r,a=this,s=l.$$p,c=s||o;return l.$$p=null,c!==!1&&c!==o||a.$raise(b.get("ArgumentError"),"tried to call lazy map without a block"),(t=(n=b.get("Lazy")).$new,t.$$p=(r=function(t,n){var a,s,u,l,_,p=r.$$s||this;null==t&&(t=o),n=i.call(arguments,1);var d=e.yieldX(c,n);if(d===$)return $;if(d["$respond_to?"]("force")&&d["$respond_to?"]("each"))(a=(s=d).$each,a.$$p=(u=function(e){u.$$s||this;return null==e&&(e=o),t.$yield(e)},u.$$s=p,u),a).call(s);else{var f=b.get("Opal").$try_convert(d,b.get("Array"),"to_ary");f===o?t.$yield(d):(a=(l=d).$each,a.$$p=(_=function(e){_.$$s||this;return null==e&&(e=o),t.$yield(e)},_.$$s=p,_),a).call(l)}},r.$$s=a,r),t).call(n,a,o)}),e.defn(m,"$drop",function(r){var a,$,s,c=this,u=o,l=o,_=o;return r=b.get("Opal").$coerce_to(r,b.get("Integer"),"to_int"),n(r,0)&&c.$raise(b.get("ArgumentError"),"attempt to drop negative size"),u=c.$enumerator_size(),l=function(){return(a=b.get("Integer")["$==="](u))===o||a.$$is_boolean&&1!=a?u:n(r,u)?r:u}(),_=0,(a=($=b.get("Lazy")).$new,a.$$p=(s=function(a,$){var c;s.$$s||this;return null==a&&(a=o),$=i.call(arguments,1),n(_,r)?_=t(_,1):(c=a).$yield.apply(c,e.to_a($))},s.$$s=c,s),a).call($,c,l)}),e.defn(m,"$drop_while",_=function(){var t,n,r,a=this,s=_.$$p,c=s||o,u=o;return _.$$p=null,c!==!1&&c!==o||a.$raise(b.get("ArgumentError"),"tried to call lazy drop_while without a block"),u=!0,(t=(n=b.get("Lazy")).$new,t.$$p=(r=function(t,n){var a,s;r.$$s||this;if(null==t&&(t=o),n=i.call(arguments,1),u===!1||u===o)return(s=t).$yield.apply(s,e.to_a(n));var l=e.yieldX(c,n);return l===$?$:void(((a=l)===o||a.$$is_boolean&&0==a)&&(u=!1,(a=t).$yield.apply(a,e.to_a(n))))},r.$$s=a,r),t).call(n,a,o)}),e.defn(m,"$enum_for",p=function(t){var n,r,a=this,$=p.$$p,i=$||o,s=o,c=arguments.length-1;0>c&&(c=0);var u=new Array(c);for(s=0;c>s;s++)u[s]=arguments[s+1];return null==t&&(t="each"),p.$$p=null,(n=(r=a.$class()).$for,n.$$p=i.$to_proc(),n).apply(r,[a,t].concat(e.to_a(u)))}),e.defn(m,"$find_all",d=function(){var t,n,r,a=this,s=d.$$p,c=s||o;return d.$$p=null,c!==!1&&c!==o||a.$raise(b.get("ArgumentError"),"tried to call lazy select without a block"),(t=(n=b.get("Lazy")).$new,t.$$p=(r=function(t,n){var a;r.$$s||this;null==t&&(t=o),n=i.call(arguments,1);var s=e.yieldX(c,n);return s===$?$:void((a=s)===o||a.$$is_boolean&&1!=a||(a=t).$yield.apply(a,e.to_a(n)))},r.$$s=a,r),t).call(n,a,o)}),e.alias(m,"flat_map","collect_concat"),e.defn(m,"$grep",f=function(t){var n,r,a,s,c,u=this,l=f.$$p,_=l||o;return f.$$p=null,_!==!1&&_!==o?(n=(r=b.get("Lazy")).$new,n.$$p=(a=function(n,r){var s;a.$$s||this;null==n&&(n=o),r=i.call(arguments,1);var c=b.get("Opal").$destructure(r),u=t["$==="](c);if((s=u)!==o&&(!s.$$is_boolean||1==s)){if(u=e.yield1(_,c),u===$)return $;n.$yield(e.yield1(_,c))}},a.$$s=u,a),n).call(r,u,o):(n=(s=b.get("Lazy")).$new,n.$$p=(c=function(e,n){var r;c.$$s||this;null==e&&(e=o),n=i.call(arguments,1);var a=b.get("Opal").$destructure(n),$=t["$==="](a);(r=$)===o||r.$$is_boolean&&1!=r||e.$yield(a)},c.$$s=u,c),n).call(s,u,o)}),e.alias(m,"map","collect"),e.alias(m,"select","find_all"),e.defn(m,"$reject",g=function(){var t,n,r,a=this,s=g.$$p,c=s||o;return g.$$p=null,c!==!1&&c!==o||a.$raise(b.get("ArgumentError"),"tried to call lazy reject without a block"),(t=(n=b.get("Lazy")).$new,t.$$p=(r=function(t,n){var a;r.$$s||this;null==t&&(t=o),n=i.call(arguments,1);var s=e.yieldX(c,n);return s===$?$:void(((a=s)===o||a.$$is_boolean&&0==a)&&(a=t).$yield.apply(a,e.to_a(n)))},r.$$s=a,r),t).call(n,a,o)}),e.defn(m,"$take",function(r){var a,$,s,c=this,u=o,l=o,_=o;return r=b.get("Opal").$coerce_to(r,b.get("Integer"),"to_int"),n(r,0)&&c.$raise(b.get("ArgumentError"),"attempt to take negative size"),u=c.$enumerator_size(),l=function(){return(a=b.get("Integer")["$==="](u))===o||a.$$is_boolean&&1!=a?u:n(r,u)?r:u}(),_=0,(a=($=b.get("Lazy")).$new,a.$$p=(s=function(a,$){var c,u=s.$$s||this;return null==a&&(a=o),$=i.call(arguments,1),n(_,r)?((c=a).$yield.apply(c,e.to_a($)),_=t(_,1)):u.$raise(b.get("StopLazyError"))},s.$$s=c,s),a).call($,c,l)}),e.defn(m,"$take_while",h=function(){var t,n,r,a=this,s=h.$$p,c=s||o;return h.$$p=null,c!==!1&&c!==o||a.$raise(b.get("ArgumentError"),"tried to call lazy take_while without a block"),(t=(n=b.get("Lazy")).$new,t.$$p=(r=function(t,n){var a,s=r.$$s||this;null==t&&(t=o),n=i.call(arguments,1);var u=e.yieldX(c,n);return u===$?$:void((a=u)===o||a.$$is_boolean&&1!=a?s.$raise(b.get("StopLazyError")):(a=t).$yield.apply(a,e.to_a(n)))},r.$$s=a,r),t).call(n,a,o)}),e.alias(m,"to_enum","enum_for"),e.defn(m,"$inspect",function(){var e=this;return"#<"+e.$class()+": "+e.enumerator.$inspect()+">"}),o&&"inspect"}(f.base,p)}(a.base,null)},Opal.modules["corelib/numeric"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}function a(e,t){return"number"==typeof e&&"number"==typeof t?e/t:e["$/"](t)}function o(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.dynamic_require_severity="ignore";var $=e.top,i=e,s=e.nil,c=(e.breaker,e.slice,e.klass);return e.add_stubs(["$require","$include","$instance_of?","$class","$Float","$coerce","$===","$raise","$__send__","$equal?","$coerce_to!","$-@","$**","$-","$*","$div","$<","$ceil","$to_f","$denominator","$to_r","$==","$floor","$/","$%","$Complex","$zero?","$numerator","$abs","$arg","$round","$to_i","$truncate","$>"]),$.$require("corelib/comparable"),function($,$super){function i(){}var u=i=c($,$super,"Numeric",i),l=(u.$$proto,u.$$scope);return u.$include(l.get("Comparable")),e.defn(u,"$coerce",function(e){var t,n=this;return(t=e["$instance_of?"](n.$class()))===s||t.$$is_boolean&&1!=t?[n.$Float(e),n.$Float(n)]:[e,n]}),e.defn(u,"$__coerced__",function(t,n){var r,a,o=this,$=s,i=s,c=s;try{a=n.$coerce(o),r=e.to_ary(a),$=null==r[0]?s:r[0],i=null==r[1]?s:r[1],a}catch(u){try{c=t,"+"["$==="](c)||"-"["$==="](c)||"*"["$==="](c)||"/"["$==="](c)||"%"["$==="](c)||"&"["$==="](c)||"|"["$==="](c)||"^"["$==="](c)||"**"["$==="](c)?o.$raise(l.get("TypeError"),""+n.$class()+" can't be coerce into Numeric"):(">"["$==="](c)||">="["$==="](c)||"<"["$==="](c)||"<="["$==="](c)||"<=>"["$==="](c))&&o.$raise(l.get("ArgumentError"),"comparison of "+o.$class()+" with "+n.$class()+" failed")}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}return $.$__send__(t,i)}),e.defn(u,"$<=>",function(e){var t,n=this;return(t=n["$equal?"](e))===s||t.$$is_boolean&&1!=t?s:0}),e.defn(u,"$[]",function(e){var n=this,r=s,a=s;return e=l.get("Opal")["$coerce_to!"](e,l.get("Integer"),"to_int"),r=2["$**"](30)["$-@"](),a=t(2["$**"](30),1),r>e||e>a?0:(n>>e)%2}),e.defn(u,"$+@",function(){var e=this;return e}),e.defn(u,"$-@",function(){var e=this;return t(0,e)}),e.defn(u,"$%",function(e){var r=this;return t(r,n(e,r.$div(e)))}),e.defn(u,"$abs",function(){var e=this;return r(e,0)?e["$-@"]():e}),e.defn(u,"$abs2",function(){var e=this;return n(e,e)}),e.defn(u,"$angle",function(){var e=this;return r(e,0)?l.get("Math").$$scope.get("PI"):0}),e.alias(u,"arg","angle"),e.defn(u,"$ceil",function(){var e=this;return e.$to_f().$ceil()}),e.defn(u,"$conj",function(){var e=this;return e}),e.alias(u,"conjugate","conj"),e.defn(u,"$denominator",function(){var e=this;return e.$to_r().$denominator()}),e.defn(u,"$div",function(e){var t=this;return e["$=="](0)&&t.$raise(l.get("ZeroDivisionError"),"divided by o"),a(t,e).$floor()}),e.defn(u,"$divmod",function(e){var t=this;return[t.$div(e),t["$%"](e)]}),e.defn(u,"$fdiv",function(e){var t=this;return a(t.$to_f(),e)}),e.defn(u,"$floor",function(){var e=this;return e.$to_f().$floor()}),e.defn(u,"$i",function(){var e=this;return e.$Complex(0,e)}),e.defn(u,"$imag",function(){return 0}),e.alias(u,"imaginary","imag"),e.defn(u,"$integer?",function(){return!1}),e.alias(u,"magnitude","abs"),e.alias(u,"modulo","%"),e.defn(u,"$nonzero?",function(){var e,t=this;return(e=t["$zero?"]())===s||e.$$is_boolean&&1!=e?t:s}),e.defn(u,"$numerator",function(){var e=this;return e.$to_r().$numerator()}),e.alias(u,"phase","arg"),e.defn(u,"$polar",function(){var e=this;return[e.$abs(),e.$arg()]}),e.defn(u,"$quo",function(e){var t=this;return a(l.get("Opal")["$coerce_to!"](t,l.get("Rational"),"to_r"),e)}),e.defn(u,"$real",function(){var e=this;return e}),e.defn(u,"$real?",function(){return!0}),e.defn(u,"$rect",function(){var e=this;return[e,0]}),e.alias(u,"rectangular","rect"),e.defn(u,"$round",function(e){var t=this;return t.$to_f().$round(e)}),e.defn(u,"$to_c",function(){var e=this;return e.$Complex(e,0)}),e.defn(u,"$to_int",function(){var e=this;return e.$to_i()}),e.defn(u,"$truncate",function(){var e=this;return e.$to_f().$truncate()}),e.defn(u,"$zero?",function(){var e=this;return e["$=="](0)}),e.defn(u,"$positive?",function(){var e=this;return o(e,0)}),e.defn(u,"$negative?",function(){var e=this;return r(e,0)}),e.defn(u,"$dup",function(){var e=this;return e.$raise(l.get("TypeError"),"can't dup "+e.$class())}),e.defn(u,"$clone",function(){var e=this;return e.$raise(l.get("TypeError"),"can't clone "+e.$class())}),s&&"clone"}(i.base,null)},Opal.modules["corelib/array"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}e.dynamic_require_severity="ignore";var a=e.top,o=e,$=e.nil,i=e.breaker,s=(e.slice,e.klass),c=e.hash2,u=e.gvars;return e.add_stubs(["$require","$include","$raise","$===","$to_a","$respond_to?","$to_ary","$coerce_to","$initialize","$to_proc","$coerce_to?","$join","$to_str","$class","$clone","$hash","$<=>","$==","$object_id","$inspect","$enum_for","$coerce_to!","$>","$*","$enumerator_size","$empty?","$copy_singleton_methods","$initialize_clone","$initialize_dup","$replace","$size","$eql?","$length","$begin","$end","$exclude_end?","$flatten","$__id__","$[]","$to_s","$new","$!","$delete_if","$each","$reverse","$rotate","$rand","$at","$keep_if","$shuffle!","$dup","$<","$sort","$!=","$times","$[]=","$<<","$kind_of?","$last","$first","$upto"]),a.$require("corelib/enumerable"),a.$require("corelib/numeric"),function(a,$super){function o(){}function l(e,t){return e===t||0===t?1:t>0&&e>t?l(e-1,t-1)+l(e-1,t):0}var _,p,d,f,g,h,m,v,b,y,x,w,k,S,E,R,A,O,M,q,z,C,I,N,j,T,P,F,D,B=o=s(a,$super,"Array",o),H=B.$$proto,L=B.$$scope;return H.length=$,B.$include(L.get("Enumerable")),H.$$is_array=!0,e.defs(B,"$[]",function(){var e=$,t=arguments.length-0;0>t&&(t=0);var n=new Array(t);for(e=0;t>e;e++)n[e]=arguments[e+0];return n}),e.defn(B,"$initialize",_=function(e,t){var n,r=this,a=_.$$p,o=a||$;if(null==e&&(e=$),null==t&&(t=$),_.$$p=null,(n=arguments.length>2)===$||n.$$is_boolean&&1!=n||r.$raise(L.get("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..2)"),0===arguments.length)return r.splice(0,r.length),r;if((n=1===arguments.length)!==$&&(!n.$$is_boolean||1==n)){if(!((n=L.get("Array")["$==="](e))===$||n.$$is_boolean&&1!=n))return e.$to_a();if((n=e["$respond_to?"]("to_ary"))!==$&&(!n.$$is_boolean||1==n))return e.$to_ary()}e=L.get("Opal").$coerce_to(e,L.get("Integer"),"to_int"),(n=0>e)===$||n.$$is_boolean&&1!=n||r.$raise(L.get("ArgumentError"),"negative array size"),r.splice(0,r.length);var s,c;if(o===$)for(s=0;e>s;s++)r.push(t);else for(s=0,c;e>s;s++){if(c=o(s),c===i)return i.$v;r[s]=c}return r}),e.defs(B,"$new",p=function(){var t,n,r=p.$$p,a=r||$,o=$,i=arguments.length-0;0>i&&(i=0);var s=new Array(i);for(o=0;i>o;o++)s[o]=arguments[o+0];return p.$$p=null,(t=(n=[]).$initialize,t.$$p=a.$to_proc(),t).apply(n,e.to_a(s))}),e.defs(B,"$try_convert",function(e){return L.get("Opal")["$coerce_to?"](e,L.get("Array"),"to_ary")}),e.defn(B,"$&",function(t){var n,r=this;t=(n=L.get("Array")["$==="](t))===$||n.$$is_boolean&&1!=n?L.get("Opal").$coerce_to(t,L.get("Array"),"to_ary").$to_a():t.$to_a();var a,o,i,s=[],u=c([],{});for(a=0,o=t.length;o>a;a++)e.hash_put(u,t[a],!0);for(a=0,o=r.length;o>a;a++)i=r[a],void 0!==e.hash_delete(u,i)&&s.push(i);return s}),e.defn(B,"$|",function(t){var n,r=this;t=(n=L.get("Array")["$==="](t))===$||n.$$is_boolean&&1!=n?L.get("Opal").$coerce_to(t,L.get("Array"),"to_ary").$to_a():t.$to_a();var a,o,i=c([],{});for(a=0,o=r.length;o>a;a++)e.hash_put(i,r[a],!0);for(a=0,o=t.length;o>a;a++)e.hash_put(i,t[a],!0);return i.$keys()}),e.defn(B,"$*",function(e){var t,n=this;if((t=e["$respond_to?"]("to_str"))!==$&&(!t.$$is_boolean||1==t))return n.$join(e.$to_str());((t=e["$respond_to?"]("to_int"))===$||t.$$is_boolean&&1!=t)&&n.$raise(L.get("TypeError"),"no implicit conversion of "+e.$class()+" into Integer"),e=L.get("Opal").$coerce_to(e,L.get("Integer"),"to_int"),(t=0>e)===$||t.$$is_boolean&&1!=t||n.$raise(L.get("ArgumentError"),"negative argument");for(var r=[],a=0;e>a;a++)r=r.concat(n);return r}),e.defn(B,"$+",function(e){var t,n=this;return e=(t=L.get("Array")["$==="](e))===$||t.$$is_boolean&&1!=t?L.get("Opal").$coerce_to(e,L.get("Array"),"to_ary").$to_a():e.$to_a(),n.concat(e)}),e.defn(B,"$-",function(t){var n,r=this;if(t=(n=L.get("Array")["$==="](t))===$||n.$$is_boolean&&1!=n?L.get("Opal").$coerce_to(t,L.get("Array"),"to_ary").$to_a():t.$to_a(),(n=0===r.length)!==$&&(!n.$$is_boolean||1==n))return[];if((n=0===t.length)!==$&&(!n.$$is_boolean||1==n))return r.$clone();var a,o,i,s=[],u=c([],{});for(a=0,o=t.length;o>a;a++)e.hash_put(u,t[a],!0);for(a=0,o=r.length;o>a;a++)i=r[a],void 0===e.hash_get(u,i)&&s.push(i);return s}),e.defn(B,"$<<",function(e){var t=this;return t.push(e),t}),e.defn(B,"$<=>",function(e){var t,n=this;if((t=L.get("Array")["$==="](e))===$||t.$$is_boolean&&1!=t){if((t=e["$respond_to?"]("to_ary"))===$||t.$$is_boolean&&1!=t)return $;e=e.$to_ary().$to_a()}else e=e.$to_a();if(n.$hash()===e.$hash())return 0;for(var r=Math.min(n.length,e.length),a=0;r>a;a++){var o=n[a]["$<=>"](e[a]);if(0!==o)return o}return n.length["$<=>"](e.length)}),e.defn(B,"$==",function(e){function t(e,n){var a,o,$,i;if(e===n)return!0;if(!n.$$is_array)return L.get("Opal")["$respond_to?"](n,"to_ary")?n["$=="](e):!1;if(e.constructor!==Array&&(e=e.literal),n.constructor!==Array&&(n=n.literal),e.length!==n.length)return!1;for(r[e.$object_id()]=!0,a=0,o=e.length;o>a;a++)if($=e[a],i=n[a],$.$$is_array){if(i.$$is_array&&i.length!==$.length)return!1;if(!r.hasOwnProperty($.$object_id())&&!t($,i))return!1}else if(!$["$=="](i))return!1;return!0}var n=this,r={};return t(n,e)}),e.defn(B,"$[]",function(e,t){var n,r,a,o=this,i=o.length;return e.$$is_range?(n=e.exclude,r=L.get("Opal").$coerce_to(e.begin,L.get("Integer"),"to_int"),a=L.get("Opal").$coerce_to(e.end,L.get("Integer"),"to_int"),0>r&&(r+=i,0>r)?$:r>i?$:0>a&&(a+=i,0>a)?[]:(n||(a+=1),
o.slice(r,a))):(e=L.get("Opal").$coerce_to(e,L.get("Integer"),"to_int"),0>e&&(e+=i,0>e)?$:void 0===t?e>=i||0>e?$:o[e]:(t=L.get("Opal").$coerce_to(t,L.get("Integer"),"to_int"),0>t||e>i||0>e?$:o.slice(e,e+t)))}),e.defn(B,"$[]=",function(e,t,n){var r,a,o=this,i=$,s=$,c=o.length;if((r=L.get("Range")["$==="](e))===$||r.$$is_boolean&&1!=r){(r=void 0===n)===$||r.$$is_boolean&&1!=r?(s=t,t=n,i=(r=L.get("Array")["$==="](t))===$||r.$$is_boolean&&1!=r?(r=t["$respond_to?"]("to_ary"))===$||r.$$is_boolean&&1!=r?[t]:t.$to_ary().$to_a():t.$to_a()):s=1;var u;if(e=L.get("Opal").$coerce_to(e,L.get("Integer"),"to_int"),s=L.get("Opal").$coerce_to(s,L.get("Integer"),"to_int"),0>e&&(u=e,e+=c,0>e&&o.$raise(L.get("IndexError"),"index "+u+" too small for array; minimum "+-o.length)),0>s&&o.$raise(L.get("IndexError"),"negative length ("+s+")"),e>c)for(a=c;e>a;a++)o[a]=$;return void 0===n?o[e]=t:o.splice.apply(o,[e,s].concat(i)),t}i=(r=L.get("Array")["$==="](t))===$||r.$$is_boolean&&1!=r?(r=t["$respond_to?"]("to_ary"))===$||r.$$is_boolean&&1!=r?[t]:t.$to_ary().$to_a():t.$to_a();var l=e.exclude,_=L.get("Opal").$coerce_to(e.begin,L.get("Integer"),"to_int"),p=L.get("Opal").$coerce_to(e.end,L.get("Integer"),"to_int");if(0>_&&(_+=c,0>_&&o.$raise(L.get("RangeError"),""+e.$inspect()+" out of range")),0>p&&(p+=c),l||(p+=1),_>c)for(a=c;_>a;a++)o[a]=$;return 0>p?o.splice.apply(o,[_,0].concat(i)):o.splice.apply(o,[_,p-_].concat(i)),t}),e.defn(B,"$assoc",function(e){for(var t,n=this,r=0,a=n.length;a>r;r++)if(t=n[r],t.length&&t[0]["$=="](e))return t;return $}),e.defn(B,"$at",function(e){var t=this;return e=L.get("Opal").$coerce_to(e,L.get("Integer"),"to_int"),0>e&&(e+=t.length),0>e||e>=t.length?$:t[e]}),e.defn(B,"$bsearch",d=function(){var e=this,t=d.$$p,n=t||$;if(d.$$p=null,n===$)return e.$enum_for("bsearch");for(var r,a,o,s=0,c=e.length,u=!1,l=$;c>s;){if(r=s+Math.floor((c-s)/2),a=e[r],o=n(a),o===i)return i.$v;if(o===!0)l=a,u=!0;else if(o===!1||o===$)u=!1;else if(o.$$is_number){if(0===o)return a;u=0>o}else e.$raise(L.get("TypeError"),"wrong argument type "+o.$class()+" (must be numeric, true, false or nil)");u?c=r:s=r+1}return l}),e.defn(B,"$cycle",f=function(r){var a,o,s,c,u=this,l=f.$$p,_=l||$;if(null==r&&(r=$),f.$$p=null,_===$)return(a=(o=u).$enum_for,a.$$p=(s=function(){var e=s.$$s||this;return r["$=="]($)?L.get("Float").$$scope.get("INFINITY"):(r=L.get("Opal")["$coerce_to!"](r,L.get("Integer"),"to_int"),t(r,0)?n(e.$enumerator_size(),r):0)},s.$$s=u,s),a).call(o,"cycle",r);if((a=(c=u["$empty?"]())!==!1&&c!==$?c:r["$=="](0))!==$&&(!a.$$is_boolean||1==a))return $;var p,d,g;if(r===$){for(;;)for(p=0,d=u.length;d>p;p++)if(g=e.yield1(_,u[p]),g===i)return i.$v}else{if(r=L.get("Opal")["$coerce_to!"](r,L.get("Integer"),"to_int"),0>=r)return u;for(;r>0;){for(p=0,d=u.length;d>p;p++)if(g=e.yield1(_,u[p]),g===i)return i.$v;r--}}return u}),e.defn(B,"$clear",function(){var e=this;return e.splice(0,e.length),e}),e.defn(B,"$clone",function(){var e=this,t=$;return t=[],t.$copy_singleton_methods(e),t.$initialize_clone(e),t}),e.defn(B,"$dup",function(){var e=this,t=$;return t=[],t.$initialize_dup(e),t}),e.defn(B,"$initialize_copy",function(e){var t=this;return t.$replace(e)}),e.defn(B,"$collect",g=function(){var t,n,r,a=this,o=g.$$p,s=o||$;if(g.$$p=null,s===$)return(t=(n=a).$enum_for,t.$$p=(r=function(){var e=r.$$s||this;return e.$size()},r.$$s=a,r),t).call(n,"collect");for(var c=[],u=0,l=a.length;l>u;u++){var _=e.yield1(s,a[u]);if(_===i)return i.$v;c.push(_)}return c}),e.defn(B,"$collect!",h=function(){var t,n,r,a=this,o=h.$$p,s=o||$;if(h.$$p=null,s===$)return(t=(n=a).$enum_for,t.$$p=(r=function(){var e=r.$$s||this;return e.$size()},r.$$s=a,r),t).call(n,"collect!");for(var c=0,u=a.length;u>c;c++){var l=e.yield1(s,a[c]);if(l===i)return i.$v;a[c]=l}return a}),e.defn(B,"$combination",m=function(t){var n,r,a,o=this,s=m.$$p,c=s||$,u=$;if(m.$$p=null,u=L.get("Opal")["$coerce_to!"](t,L.get("Integer"),"to_int"),c===$)return(n=(r=o).$enum_for,n.$$p=(a=function(){var e=a.$$s||this;return l(e.length,u)},a.$$s=o,a),n).call(r,"combination",u);var _,p,d,f,g,h,v;if(0===u)(n=e.yield1(c,[]))===i?i.$v:n;else if(1===u)for(_=0,p=o.length;p>_;_++)(n=e.yield1(c,[o[_]]))===i?i.$v:n;else if(u===o.length)(n=e.yield1(c,o.slice()))===i?i.$v:n;else if(u>=0&&u<o.length){for(d=[],_=0;u+1>=_;_++)d.push(0);for(f=[],g=0,h=!1,d[0]=-1;!h;){for(f[g]=o[d[g+1]];u-1>g;)g++,v=d[g+1]=d[g]+1,f[g]=o[v];(n=e.yield1(c,f.slice()))===i?i.$v:n,g++;do h=0===g,d[g]++,g--;while(d[g+1]+u===o.length+g+1)}}return o}),e.defn(B,"$compact",function(){for(var e,t=this,n=[],r=0,a=t.length;a>r;r++)(e=t[r])!==$&&n.push(e);return n}),e.defn(B,"$compact!",function(){for(var e=this,t=e.length,n=0,r=e.length;r>n;n++)e[n]===$&&(e.splice(n,1),r--,n--);return e.length===t?$:e}),e.defn(B,"$concat",function(e){var t,n=this;e=(t=L.get("Array")["$==="](e))===$||t.$$is_boolean&&1!=t?L.get("Opal").$coerce_to(e,L.get("Array"),"to_ary").$to_a():e.$to_a();for(var r=0,a=e.length;a>r;r++)n.push(e[r]);return n}),e.defn(B,"$delete",v=function(t){var n,r=this,a=v.$$p,o=a||$;v.$$p=null;for(var s=r.length,c=0,u=s;u>c;c++)r[c]["$=="](t)&&(r.splice(c,1),u--,c--);return r.length===s?o!==$?(n=e.yieldX(o,[]))===i?i.$v:n:$:t}),e.defn(B,"$delete_at",function(e){var t=this;if(e=L.get("Opal").$coerce_to(e,L.get("Integer"),"to_int"),0>e&&(e+=t.length),0>e||e>=t.length)return $;var n=t[e];return t.splice(e,1),n}),e.defn(B,"$delete_if",b=function(){var e,t,n,r=this,a=b.$$p,o=a||$;if(b.$$p=null,o===$)return(e=(t=r).$enum_for,e.$$p=(n=function(){var e=n.$$s||this;return e.$size()},n.$$s=r,n),e).call(t,"delete_if");for(var s,c=0,u=r.length;u>c;c++){if((s=o(r[c]))===i)return i.$v;s!==!1&&s!==$&&(r.splice(c,1),u--,c--)}return r}),e.defn(B,"$drop",function(e){var t=this;return 0>e&&t.$raise(L.get("ArgumentError")),t.slice(e)}),e.defn(B,"$each",y=function(){var t,n,r,a=this,o=y.$$p,s=o||$;if(y.$$p=null,s===$)return(t=(n=a).$enum_for,t.$$p=(r=function(){var e=r.$$s||this;return e.$size()},r.$$s=a,r),t).call(n,"each");for(var c=0,u=a.length;u>c;c++){var l=e.yield1(s,a[c]);if(l==i)return i.$v}return a}),e.defn(B,"$each_index",x=function(){var t,n,r,a=this,o=x.$$p,s=o||$;if(x.$$p=null,s===$)return(t=(n=a).$enum_for,t.$$p=(r=function(){var e=r.$$s||this;return e.$size()},r.$$s=a,r),t).call(n,"each_index");for(var c=0,u=a.length;u>c;c++){var l=e.yield1(s,c);if(l===i)return i.$v}return a}),e.defn(B,"$empty?",function(){var e=this;return 0===e.length}),e.defn(B,"$eql?",function(e){function t(e,n){var a,o,$,i;if(!n.$$is_array)return!1;if(n=n.$to_a(),e.length!==n.length)return!1;for(r[e.$object_id()]=!0,a=0,o=e.length;o>a;a++)if($=e[a],i=n[a],$.$$is_array){if(i.$$is_array&&i.length!==$.length)return!1;if(!r.hasOwnProperty($.$object_id())&&!t($,i))return!1}else if(!$["$eql?"](i))return!1;return!0}var n=this,r={};return t(n,e)}),e.defn(B,"$fetch",w=function(e,t){var n=this,r=w.$$p,a=r||$;w.$$p=null;var o=e;return e=L.get("Opal").$coerce_to(e,L.get("Integer"),"to_int"),0>e&&(e+=n.length),e>=0&&e<n.length?n[e]:a!==$?a(o):null!=t?t:void(0===n.length?n.$raise(L.get("IndexError"),"index "+o+" outside of array bounds: 0...0"):n.$raise(L.get("IndexError"),"index "+o+" outside of array bounds: -"+n.length+"..."+n.length))}),e.defn(B,"$fill",k=function(){var t,n,r=this,a=k.$$p,o=a||$,s=$,c=$,u=$,l=$,_=$,p=$,d=arguments.length-0;0>d&&(d=0);var f=new Array(d);for(p=0;d>p;p++)f[p]=arguments[p+0];k.$$p=null;var g,h,m;if(o!==!1&&o!==$?((t=f.length>2)===$||t.$$is_boolean&&1!=t||r.$raise(L.get("ArgumentError"),"wrong number of arguments ("+f.$length()+" for 0..2)"),n=f,t=e.to_ary(n),s=null==t[0]?$:t[0],c=null==t[1]?$:t[1],n):((t=0==f.length)===$||t.$$is_boolean&&1!=t?(t=f.length>3)===$||t.$$is_boolean&&1!=t||r.$raise(L.get("ArgumentError"),"wrong number of arguments ("+f.$length()+" for 1..3)"):r.$raise(L.get("ArgumentError"),"wrong number of arguments (0 for 1..3)"),n=f,t=e.to_ary(n),u=null==t[0]?$:t[0],s=null==t[1]?$:t[1],c=null==t[2]?$:t[2],n),(t=L.get("Range")["$==="](s))===$||t.$$is_boolean&&1!=t)if(s!==!1&&s!==$)if(l=L.get("Opal").$coerce_to(s,L.get("Integer"),"to_int"),(t=0>l)===$||t.$$is_boolean&&1!=t||(l+=r.length),(t=0>l)===$||t.$$is_boolean&&1!=t||(l=0),c!==!1&&c!==$){if(_=L.get("Opal").$coerce_to(c,L.get("Integer"),"to_int"),(t=0==_)!==$&&(!t.$$is_boolean||1==t))return r;_+=l}else _=r.length;else l=0,_=r.length;else if(c!==!1&&c!==$&&r.$raise(L.get("TypeError"),"length invalid with range"),l=L.get("Opal").$coerce_to(s.$begin(),L.get("Integer"),"to_int"),(t=0>l)===$||t.$$is_boolean&&1!=t||(l+=r.length),(t=0>l)===$||t.$$is_boolean&&1!=t||r.$raise(L.get("RangeError"),""+s.$inspect()+" out of range"),_=L.get("Opal").$coerce_to(s.$end(),L.get("Integer"),"to_int"),(t=0>_)===$||t.$$is_boolean&&1!=t||(_+=r.length),((t=s["$exclude_end?"]())===$||t.$$is_boolean&&1!=t)&&(_+=1),(t=l>=_)!==$&&(!t.$$is_boolean||1==t))return r;if((t=l>r.length)!==$&&(!t.$$is_boolean||1==t))for(g=r.length;_>g;g++)r[g]=$;if((t=_>r.length)===$||t.$$is_boolean&&1!=t||(r.length=_),o!==!1&&o!==$)for(h=r.length;_>l;l++){if(m=o(l),m===i)return i.$v;r[l]=m}else for(h=r.length;_>l;l++)r[l]=u;return r}),e.defn(B,"$first",function(e){var t=this;return null==e?0===t.length?$:t[0]:(e=L.get("Opal").$coerce_to(e,L.get("Integer"),"to_int"),0>e&&t.$raise(L.get("ArgumentError"),"negative array size"),t.slice(0,e))}),e.defn(B,"$flatten",function(e){function t(e,r){var a,o,i,s,c=[];for(e=e.$to_a(),a=0,o=e.length;o>a;a++)if(i=e[a],L.get("Opal")["$respond_to?"](i,"to_ary"))if(s=i.$to_ary(),s!==$)switch(s.$$is_array||n.$raise(L.get("TypeError")),s===n&&n.$raise(L.get("ArgumentError")),r){case void 0:c.push.apply(c,t(s));break;case 0:c.push(s);break;default:c.push.apply(c,t(s,r-1))}else c.push(i);else c.push(i);return c}var n=this;return void 0!==e&&(e=L.get("Opal").$coerce_to(e,L.get("Integer"),"to_int")),t(n,e)}),e.defn(B,"$flatten!",function(e){var t=this,n=t.$flatten(e);if(t.length==n.length){for(var r=0,a=t.length;a>r&&t[r]===n[r];r++);if(r==a)return $}return t.$replace(n),t}),e.defn(B,"$hash",function(){var t,n,r,a=this,o=void 0==e.hash_ids,$=["A"],i=a.$object_id();try{if(o&&(e.hash_ids={}),e.hash_ids.hasOwnProperty(i))return"self";for(r in e.hash_ids)if(e.hash_ids.hasOwnProperty(r)&&(t=e.hash_ids[r],a["$eql?"](t)))return"self";for(e.hash_ids[i]=a,n=0;n<a.length;n++)t=a[n],$.push(t.$hash());return $.join(",")}finally{o&&delete e.hash_ids}}),e.defn(B,"$include?",function(e){for(var t=this,n=0,r=t.length;r>n;n++)if(t[n]["$=="](e))return!0;return!1}),e.defn(B,"$index",S=function(e){var t=this,n=S.$$p,r=n||$;S.$$p=null;var a,o,s;if(null!=e){for(a=0,o=t.length;o>a;a++)if(t[a]["$=="](e))return a}else{if(r===$)return t.$enum_for("index");for(a=0,o=t.length;o>a;a++){if((s=r(t[a]))===i)return i.$v;if(s!==!1&&s!==$)return a}}return $}),e.defn(B,"$insert",function(e){var t=this,n=$,r=arguments.length-1;0>r&&(r=0);var a=new Array(r);for(n=0;r>n;n++)a[n]=arguments[n+1];if(e=L.get("Opal").$coerce_to(e,L.get("Integer"),"to_int"),a.length>0){if(0>e&&(e+=t.length+1,0>e&&t.$raise(L.get("IndexError"),""+e+" is out of bounds")),e>t.length)for(var o=t.length;e>o;o++)t.push($);t.splice.apply(t,[e,0].concat(a))}return t}),e.defn(B,"$inspect",function(){for(var e=this,t=[],n=e.$__id__(),r=0,a=e.length;a>r;r++){var o=e["$[]"](r);o.$__id__()===n?t.push("[...]"):t.push(o.$inspect())}return"["+t.join(", ")+"]"}),e.defn(B,"$join",function(e){var t,n=this;if(null==u[","]&&(u[","]=$),null==e&&(e=$),(t=0===n.length)!==$&&(!t.$$is_boolean||1==t))return"";(t=e===$)===$||t.$$is_boolean&&1!=t||(e=u[","]);var r,a,o,i,s=[];for(r=0,a=n.length;a>r;r++)o=n[r],L.get("Opal")["$respond_to?"](o,"to_str")&&(i=o.$to_str(),i!==$)?s.push(i.$to_s()):L.get("Opal")["$respond_to?"](o,"to_ary")&&(i=o.$to_ary(),i===n&&n.$raise(L.get("ArgumentError")),i!==$)?s.push(i.$join(e)):L.get("Opal")["$respond_to?"](o,"to_s")&&(i=o.$to_s(),i!==$)?s.push(i):n.$raise(L.get("NoMethodError").$new(""+L.get("Opal").$inspect(o)+" doesn't respond to #to_str, #to_ary or #to_s","to_str"));return e===$?s.join(""):s.join(L.get("Opal")["$coerce_to!"](e,L.get("String"),"to_str").$to_s())}),e.defn(B,"$keep_if",E=function(){var e,t,n,r=this,a=E.$$p,o=a||$;if(E.$$p=null,o===$)return(e=(t=r).$enum_for,e.$$p=(n=function(){var e=n.$$s||this;return e.$size()},n.$$s=r,n),e).call(t,"keep_if");for(var s,c=0,u=r.length;u>c;c++){if((s=o(r[c]))===i)return i.$v;(s===!1||s===$)&&(r.splice(c,1),u--,c--)}return r}),e.defn(B,"$last",function(e){var t=this;return null==e?0===t.length?$:t[t.length-1]:(e=L.get("Opal").$coerce_to(e,L.get("Integer"),"to_int"),0>e&&t.$raise(L.get("ArgumentError"),"negative array size"),e>t.length&&(e=t.length),t.slice(t.length-e,t.length))}),e.defn(B,"$length",function(){var e=this;return e.length}),e.alias(B,"map","collect"),e.alias(B,"map!","collect!"),e.defn(B,"$permutation",R=function(t){var n,r,a,o=this,s=R.$$p,c=s||$,u=$,l=$;if(R.$$p=null,c===$)return(n=(r=o).$enum_for,n.$$p=(a=function(){var e=a.$$s||this;return e.$size()},a.$$s=o,a),n).call(r,"permutation",t);var _,p,d;if(t=void 0===t?o.length:L.get("Opal").$coerce_to(t,L.get("Integer"),"to_int"),0>t||o.length<t);else if(0===t)(n=e.yield1(c,[]))===i?i.$v:n;else if(1===t)for(var f=0;f<o.length;f++)(n=e.yield1(c,[o[f]]))===i?i.$v:n;else u=L.get("Array").$new(t),l=L.get("Array").$new(o.length,!1),_=function(t,n,r,a,$){o=this;for(var i=0;i<o.length;i++)if(a["$[]"](i)["$!"]())if(n[r]=i,t-1>r)a[i]=!0,_.call(o,t,n,r+1,a,$),a[i]=!1;else{d=[];for(var s=0;s<n.length;s++)d.push(o[n[s]]);e.yield1($,d)}},c!==$?(p=o.slice(),_.call(p,t,u,0,l,c)):_.call(o,t,u,0,l,c);return o}),e.defn(B,"$pop",function(e){var t,n=this;return(t=void 0===e)===$||t.$$is_boolean&&1!=t?(e=L.get("Opal").$coerce_to(e,L.get("Integer"),"to_int"),(t=0>e)===$||t.$$is_boolean&&1!=t||n.$raise(L.get("ArgumentError"),"negative array size"),(t=0===n.length)===$||t.$$is_boolean&&1!=t?(t=e>n.length)===$||t.$$is_boolean&&1!=t?n.splice(n.length-e,n.length):n.splice(0,n.length):[]):(t=0===n.length)===$||t.$$is_boolean&&1!=t?n.pop():$}),e.defn(B,"$product",A=function(){var t,n=this,r=A.$$p,a=r||$,o=$,s=arguments.length-0;0>s&&(s=0);var c=new Array(s);for(o=0;s>o;o++)c[o]=arguments[o+0];A.$$p=null;var u,l,_,p,d=a!==$?null:[],f=c.length+1,g=new Array(f),h=new Array(f),m=new Array(f),v=1;for(m[0]=n,u=1;f>u;u++)m[u]=L.get("Opal").$coerce_to(c[u-1],L.get("Array"),"to_ary");for(u=0;f>u;u++){if(p=m[u].length,0===p)return d||n;v*=p,v>2147483647&&n.$raise(L.get("RangeError"),"too big to product"),h[u]=p,g[u]=0}e:for(;;){for(_=[],u=0;f>u;u++)_.push(m[u][g[u]]);for(d?d.push(_):(t=e.yield1(a,_))===i?i.$v:t,l=f-1,g[l]++;g[l]===h[l];){if(g[l]=0,--l<0)break e;g[l]++}}return d||n}),e.defn(B,"$push",function(){var e=this,t=$,n=arguments.length-0;0>n&&(n=0);var r=new Array(n);for(t=0;n>t;t++)r[t]=arguments[t+0];for(var a=0,o=r.length;o>a;a++)e.push(r[a]);return e}),e.defn(B,"$rassoc",function(e){for(var t,n=this,r=0,a=n.length;a>r;r++)if(t=n[r],t.length&&void 0!==t[1]&&t[1]["$=="](e))return t;return $}),e.defn(B,"$reject",O=function(){var e,t,n,r=this,a=O.$$p,o=a||$;if(O.$$p=null,o===$)return(e=(t=r).$enum_for,e.$$p=(n=function(){var e=n.$$s||this;return e.$size()},n.$$s=r,n),e).call(t,"reject");for(var s,c=[],u=0,l=r.length;l>u;u++){if((s=o(r[u]))===i)return i.$v;(s===!1||s===$)&&c.push(r[u])}return c}),e.defn(B,"$reject!",M=function(){var e,t,n,r,a=this,o=M.$$p,i=o||$,s=$;return M.$$p=null,i===$?(e=(t=a).$enum_for,e.$$p=(n=function(){var e=n.$$s||this;return e.$size()},n.$$s=a,n),e).call(t,"reject!"):(s=a.$length(),(e=(r=a).$delete_if,e.$$p=i.$to_proc(),e).call(r),a.$length()["$=="](s)?$:a)}),e.defn(B,"$replace",function(e){var t,n=this;return e=(t=L.get("Array")["$==="](e))===$||t.$$is_boolean&&1!=t?L.get("Opal").$coerce_to(e,L.get("Array"),"to_ary").$to_a():e.$to_a(),n.splice(0,n.length),n.push.apply(n,e),n}),e.defn(B,"$reverse",function(){var e=this;return e.slice(0).reverse()}),e.defn(B,"$reverse!",function(){var e=this;return e.reverse()}),e.defn(B,"$reverse_each",q=function(){var e,t,n,r,a=this,o=q.$$p,i=o||$;return q.$$p=null,i===$?(e=(t=a).$enum_for,e.$$p=(n=function(){var e=n.$$s||this;return e.$size()},n.$$s=a,n),e).call(t,"reverse_each"):((e=(r=a.$reverse()).$each,e.$$p=i.$to_proc(),e).call(r),a)}),e.defn(B,"$rindex",z=function(e){var t=this,n=z.$$p,r=n||$;z.$$p=null;var a,o;if(null!=e){for(a=t.length-1;a>=0&&!(a>=t.length);a--)if(t[a]["$=="](e))return a}else if(r!==$)for(a=t.length-1;a>=0&&!(a>=t.length);a--){if((o=r(t[a]))===i)return i.$v;if(o!==!1&&o!==$)return a}else if(null==e)return t.$enum_for("rindex");return $}),e.defn(B,"$rotate",function(e){var t=this;null==e&&(e=1),e=L.get("Opal").$coerce_to(e,L.get("Integer"),"to_int");var n,r,a,o;return 1===t.length?t.slice():0===t.length?[]:(n=t.slice(),r=e%n.length,a=n.slice(r),o=n.slice(0,r),a.concat(o))}),e.defn(B,"$rotate!",function(e){var t=this,n=$;return null==e&&(e=1),0===t.length||1===t.length?t:(e=L.get("Opal").$coerce_to(e,L.get("Integer"),"to_int"),n=t.$rotate(e),t.$replace(n))}),function(t,$super){function n(){}var r=n=s(t,$super,"SampleRandom",n),a=r.$$proto,o=r.$$scope;return a.rng=$,e.defn(r,"$initialize",function(e){var t=this;return t.rng=e}),e.defn(r,"$rand",function(e){var t,n=this,r=$;return r=o.get("Opal").$coerce_to(n.rng.$rand(e),o.get("Integer"),"to_int"),(t=0>r)===$||t.$$is_boolean&&1!=t||n.$raise(o.get("RangeError"),"random value must be >= 0"),((t=e>r)===$||t.$$is_boolean&&1!=t)&&n.$raise(o.get("RangeError"),"random value must be less than Array size"),r}),$&&"rand"}(L.base,null),e.defn(B,"$sample",function(e,t){var n,r,a=this,o=$,i=$;if((n=void 0===e)!==$&&(!n.$$is_boolean||1==n))return a.$at(L.get("Kernel").$rand(a.length));if((n=void 0===t)===$||n.$$is_boolean&&1!=n?(e=L.get("Opal").$coerce_to(e,L.get("Integer"),"to_int"),t=L.get("Opal").$coerce_to(t,L.get("Hash"),"to_hash")):(n=o=L.get("Opal")["$coerce_to?"](e,L.get("Hash"),"to_hash"))===$||n.$$is_boolean&&1!=n?(t=$,e=L.get("Opal").$coerce_to(e,L.get("Integer"),"to_int")):(t=o,e=$),(n=(r=e!==!1&&e!==$)?0>e:e)===$||n.$$is_boolean&&1!=n||a.$raise(L.get("ArgumentError"),"count must be greater than 0"),t!==!1&&t!==$&&(i=t["$[]"]("random")),i=(n=(r=i!==!1&&i!==$)?i["$respond_to?"]("rand"):i)===$||n.$$is_boolean&&1!=n?L.get("Kernel"):L.get("SampleRandom").$new(i),e===!1||e===$)return a[i.$rand(a.length)];var s,c,u,l,_,p,d,f;switch(e>a.length&&(e=a.length),e){case 0:return[];case 1:return[a[i.$rand(a.length)]];case 2:return l=i.$rand(a.length),_=i.$rand(a.length),l===_&&(_=0===l?l+1:l-1),[a[l],a[_]];default:if(a.length/e>3){for(s=!1,c=0,u=L.get("Array").$new(e),l=1,u[0]=i.$rand(a.length);e>l;){for(p=i.$rand(a.length),_=0;l>_;){for(;p===u[_];){if(c++,c>100){s=!0;break}p=i.$rand(a.length)}if(s)break;_++}if(s)break;u[l]=p,l++}if(!s){for(l=0;e>l;)u[l]=a[u[l]],l++;return u}}u=a.slice();for(var g=0;e>g;g++)d=i.$rand(a.length),f=u[g],u[g]=u[d],u[d]=f;return e===a.length?u:u["$[]"](0,e)}}),e.defn(B,"$select",C=function(){var t,n,r,a=this,o=C.$$p,s=o||$;if(C.$$p=null,s===$)return(t=(n=a).$enum_for,t.$$p=(r=function(){var e=r.$$s||this;return e.$size()},r.$$s=a,r),t).call(n,"select");for(var c,u,l=[],_=0,p=a.length;p>_;_++){if(c=a[_],(u=e.yield1(s,c))===i)return i.$v;u!==!1&&u!==$&&l.push(c)}return l}),e.defn(B,"$select!",I=function(){var e,t,n,r,a=this,o=I.$$p,i=o||$;if(I.$$p=null,i===$)return(e=(t=a).$enum_for,e.$$p=(n=function(){var e=n.$$s||this;return e.$size()},n.$$s=a,n),e).call(t,"select!");var s=a.length;return(e=(r=a).$keep_if,e.$$p=i.$to_proc(),e).call(r),a.length===s?$:a}),e.defn(B,"$shift",function(e){var t,n=this;return(t=void 0===e)===$||t.$$is_boolean&&1!=t?(e=L.get("Opal").$coerce_to(e,L.get("Integer"),"to_int"),(t=0>e)===$||t.$$is_boolean&&1!=t||n.$raise(L.get("ArgumentError"),"negative array size"),(t=0===n.length)===$||t.$$is_boolean&&1!=t?n.splice(0,e):[]):(t=0===n.length)===$||t.$$is_boolean&&1!=t?n.shift():$}),e.alias(B,"size","length"),e.defn(B,"$shuffle",function(e){var t=this;return t.$dup()["$shuffle!"](e)}),e.defn(B,"$shuffle!",function(e){var t,n,r,a=this,o=a.length;for(void 0!==e&&(e=L.get("Opal")["$coerce_to?"](e,L.get("Hash"),"to_hash"),e!==$&&(e=e["$[]"]("random"),e!==$&&e["$respond_to?"]("rand")&&(t=e)));o;)t?(n=t.$rand(o).$to_int(),0>n&&a.$raise(L.get("RangeError"),"random number too small "+n),n>=o&&a.$raise(L.get("RangeError"),"random number too big "+n)):n=Math.floor(Math.random()*o),r=a[--o],a[o]=a[n],a[n]=r;return a}),e.alias(B,"slice","[]"),e.defn(B,"$slice!",function(e,t){var n=this;return 0>e&&(e+=n.length),null!=t?n.splice(e,t):0>e||e>=n.length?$:n.splice(e,1)[0]}),e.defn(B,"$sort",N=function(){var e,n=this,a=N.$$p,o=a||$;if(N.$$p=null,(e=n.length>1)===$||e.$$is_boolean&&1!=e)return n;o===$&&(o=function(e,t){return e["$<=>"](t)});try{return n.slice().sort(function(e,a){var s=o(e,a);if(s===i)throw i;return s===$&&n.$raise(L.get("ArgumentError"),"comparison of "+e.$inspect()+" with "+a.$inspect()+" failed"),t(s,0)?1:r(s,0)?-1:0})}catch(s){if(s===i)return i.$v;throw s}}),e.defn(B,"$sort!",j=function(){var e,t,n=this,r=j.$$p,a=r||$;j.$$p=null;var o;o=a!==$?(e=(t=n.slice()).$sort,e.$$p=a.$to_proc(),e).call(t):n.slice().$sort(),n.length=0;for(var i=0,s=o.length;s>i;i++)n.push(o[i]);return n}),e.defn(B,"$take",function(e){var t=this;return 0>e&&t.$raise(L.get("ArgumentError")),t.slice(0,e)}),e.defn(B,"$take_while",T=function(){var e=this,t=T.$$p,n=t||$;T.$$p=null;for(var r,a,o=[],s=0,c=e.length;c>s;s++){if(r=e[s],(a=n(r))===i)return i.$v;if(a===!1||a===$)return o;o.push(r)}return o}),e.defn(B,"$to_a",function(){var e=this;return e}),e.alias(B,"to_ary","to_a"),e.defn(B,"$to_h",function(){var t,n,r,a,o=this,$=o.length,i=c([],{});for(t=0;$>t;t++)n=L.get("Opal")["$coerce_to?"](o[t],L.get("Array"),"to_ary"),n.$$is_array||o.$raise(L.get("TypeError"),"wrong element type "+n.$class()+" at "+t+" (expected array)"),2!==n.length&&o.$raise(L.get("ArgumentError"),"wrong array length at "+t+" (expected 2, was "+n.$length()+")"),r=n[0],a=n[1],e.hash_put(i,r,a);return i}),e.alias(B,"to_s","inspect"),e.defn(B,"$transpose",function(){var e,t,n,r=this,a=$,o=$;return(e=r["$empty?"]())===$||e.$$is_boolean&&1!=e?(a=[],o=$,(e=(t=r).$each,e.$$p=(n=function(e){var t,r,i,s=n.$$s||this;return null==e&&(e=$),e=(t=L.get("Array")["$==="](e))===$||t.$$is_boolean&&1!=t?L.get("Opal").$coerce_to(e,L.get("Array"),"to_ary").$to_a():e.$to_a(),(t=o)!==!1&&t!==$?t:o=e.length,(t=e.length["$!="](o))===$||t.$$is_boolean&&1!=t||s.$raise(L.get("IndexError"),"element size differs ("+e.length+" should be "+o),(t=(r=e.length).$times,t.$$p=(i=function(t){var n,r,o,s=(i.$$s||this,$);return null==t&&(t=$),n=t,r=a,s=(o=r["$[]"](n))!==!1&&o!==$?o:r["$[]="](n,[]),s["$<<"](e.$at(t))},i.$$s=s,i),t).call(r)},n.$$s=r,n),e).call(t),a):[]}),e.defn(B,"$uniq",P=function(){var t=this,n=P.$$p,r=n||$;P.$$p=null;var a,o,i,s,u=c([],{});if(r===$)for(a=0,o=t.length;o>a;a++)i=t[a],void 0===e.hash_get(u,i)&&e.hash_put(u,i,i);else for(a=0,o=t.length;o>a;a++)i=t[a],s=e.yield1(r,i),void 0===e.hash_get(u,s)&&e.hash_put(u,s,i);return u.$values()}),e.defn(B,"$uniq!",F=function(){var t=this,n=F.$$p,r=n||$;F.$$p=null;var a,o,i,s,u=t.length,l=c([],{});for(a=0,o=u;o>a;a++)i=t[a],s=r===$?i:e.yield1(r,i),void 0!==e.hash_get(l,s)?(t.splice(a,1),o--,a--):e.hash_put(l,s,i);return t.length===u?$:t}),e.defn(B,"$unshift",function(){var e=this,t=$,n=arguments.length-0;0>n&&(n=0);var r=new Array(n);for(t=0;n>t;t++)r[t]=arguments[t+0];for(var a=r.length-1;a>=0;a--)e.unshift(r[a]);return e}),e.defn(B,"$values_at",function(){var e,t,n,r=this,a=$,o=$,i=arguments.length-0;0>i&&(i=0);var s=new Array(i);for(o=0;i>o;o++)s[o]=arguments[o+0];return a=[],(e=(t=s).$each,e.$$p=(n=function(e){var t,r,o,i=n.$$s||this,s=$,c=$,u=$;return null==e&&(e=$),(t=e["$kind_of?"](L.get("Range")))===$||t.$$is_boolean&&1!=t?(u=L.get("Opal").$coerce_to(e,L.get("Integer"),"to_int"),a["$<<"](i.$at(u))):(s=L.get("Opal").$coerce_to(e.$last(),L.get("Integer"),"to_int"),c=L.get("Opal").$coerce_to(e.$first(),L.get("Integer"),"to_int"),0>c?(c+=i.length,$):(0>s&&(s+=i.length),e["$exclude_end?"]()&&s--,c>s?$:(t=(r=c).$upto,t.$$p=(o=function(e){var t=o.$$s||this;return null==e&&(e=$),a["$<<"](t.$at(e))},o.$$s=i,o),t).call(r,s)))},n.$$s=r,n),e).call(t),a}),e.defn(B,"$zip",D=function(){var e,t=this,n=D.$$p,r=n||$,a=$,o=arguments.length-0;0>o&&(o=0);var i=new Array(o);for(a=0;o>a;a++)i[a]=arguments[a+0];D.$$p=null;var s,c,u,l,_,p=[],d=t.length;for(l=0,_=i.length;_>l;l++)c=i[l],c.$$is_array||(c.$$is_enumerator?c.$size()===1/0?i[l]=c.$take(d):i[l]=c.$to_a():i[l]=((e=L.get("Opal")["$coerce_to?"](c,L.get("Array"),"to_ary"))!==!1&&e!==$?e:L.get("Opal")["$coerce_to!"](c,L.get("Enumerator"),"each")).$to_a());for(u=0;d>u;u++){for(s=[t[u]],l=0,_=i.length;_>l;l++)c=i[l][u],null==c&&(c=$),s[l+1]=c;p[u]=s}if(r!==$){for(u=0;d>u;u++)r(p[u]);return $}return p}),$&&"zip"}(o.base,Array)},Opal.modules["corelib/hash"]=function(e){e.dynamic_require_severity="ignore";var t=e.top,n=e,r=e.nil,a=e.breaker,o=(e.slice,e.klass);return e.add_stubs(["$require","$include","$coerce_to?","$[]","$merge!","$allocate","$raise","$==","$coerce_to!","$lambda?","$abs","$arity","$call","$enum_for","$size","$inspect","$flatten","$eql?","$default","$to_proc","$dup","$===","$default_proc","$default_proc=","$default=","$alias_method"]),t.$require("corelib/enumerable"),function(t,$super){function n(){}var $,i,s,c,u,l,_,p,d,f,g,h,m,v,b=n=o(t,$super,"Hash",n),y=b.$$proto,x=b.$$scope;y.proc=y.none=r,b.$include(x.get("Enumerable")),y.$$is_hash=!0,e.defs(b,"$[]",function(){var e=this,t=r,n=arguments.length-0;0>n&&(n=0);var a=new Array(n);for(t=0;n>t;t++)a[t]=arguments[t+0];var o,$,i=a.length;if(1===i){if(o=x.get("Opal")["$coerce_to?"](a["$[]"](0),x.get("Hash"),"to_hash"),o!==r)return e.$allocate()["$merge!"](o);for(a=x.get("Opal")["$coerce_to?"](a["$[]"](0),x.get("Array"),"to_ary"),a===r&&e.$raise(x.get("ArgumentError"),"odd number of arguments for Hash"),i=a.length,o=e.$allocate(),$=0;i>$;$++)if(a[$].$$is_array)switch(a[$].length){case 1:o.$store(a[$][0],r);break;case 2:o.$store(a[$][0],a[$][1]);break;default:e.$raise(x.get("ArgumentError"),"invalid number of elements ("+a[$].length+" for 1..2)")}return o}for(i%2!==0&&e.$raise(x.get("ArgumentError"),"odd number of arguments for Hash"),o=e.$allocate(),$=0;i>$;$+=2)o.$store(a[$],a[$+1]);return o}),e.defs(b,"$allocate",function(){var t=this,n=new t.$$alloc;return e.hash_init(n),n.none=r,n.proc=r,n}),e.defs(b,"$try_convert",function(e){return x.get("Opal")["$coerce_to?"](e,x.get("Hash"),"to_hash")}),e.defn(b,"$initialize",$=function(e){var t=this,n=$.$$p,a=n||r;return $.$$p=null,void 0!==e&&a!==r&&t.$raise(x.get("ArgumentError"),"wrong number of arguments (1 for 0)"),t.none=void 0===e?r:e,t.proc=a,t}),e.defn(b,"$==",function(t){var n=this;if(n===t)return!0;if(!t.$$is_hash)return!1;if(n.$$keys.length!==t.$$keys.length)return!1;for(var r,a,o,$=0,i=n.$$keys,s=i.length;s>$;$++)if(r=i[$],r.$$is_string?(a=n.$$smap[r],o=t.$$smap[r]):(a=r.value,o=e.hash_get(t,r.key)),void 0===o||!a["$eql?"](o))return!1;return!0}),e.defn(b,"$[]",function(t){var n=this,r=e.hash_get(n,t);return void 0!==r?r:n.$default(t)}),e.defn(b,"$[]=",function(t,n){var r=this;return e.hash_put(r,t,n),n}),e.defn(b,"$assoc",function(e){for(var t,n=this,a=0,o=n.$$keys,$=o.length;$>a;a++)if(t=o[a],t.$$is_string){if(t["$=="](e))return[t,n.$$smap[t]]}else if(t.key["$=="](e))return[t.key,t.value];return r}),e.defn(b,"$clear",function(){var t=this;return e.hash_init(t),t}),e.defn(b,"$clone",function(){var t=this,n=new t.$$class.$$alloc;return e.hash_init(n),e.hash_clone(t,n),n}),e.defn(b,"$default",function(e){var t=this;return void 0!==e&&t.proc!==r?t.proc.$call(t,e):t.none}),e.defn(b,"$default=",function(e){var t=this;return t.proc=r,t.none=e,e}),e.defn(b,"$default_proc",function(){var e=this;return e.proc}),e.defn(b,"$default_proc=",function(e){var t=this;return e!==r&&(e=x.get("Opal")["$coerce_to!"](e,x.get("Proc"),"to_proc"),e["$lambda?"]()&&2!==e.$arity().$abs()&&t.$raise(x.get("TypeError"),"default_proc takes two arguments")),t.none=r,t.proc=e,e}),e.defn(b,"$delete",i=function(t){var n=this,a=i.$$p,o=a||r;i.$$p=null;var $=e.hash_delete(n,t);return void 0!==$?$:o!==r?o.$call(t):r}),e.defn(b,"$delete_if",s=function(){var t,n,o,$=this,i=s.$$p,c=i||r;if(s.$$p=null,c===!1||c===r)return(t=(n=$).$enum_for,t.$$p=(o=function(){var e=o.$$s||this;return e.$size()},o.$$s=$,o),t).call(n,"delete_if");for(var u,l,_,p=0,d=$.$$keys,f=d.length;f>p;p++){if(u=d[p],u.$$is_string?l=$.$$smap[u]:(l=u.value,u=u.key),_=c(u,l),_===a)return a.$v;_!==!1&&_!==r&&void 0!==e.hash_delete($,u)&&(f--,p--)}return $}),e.alias(b,"dup","clone"),e.defn(b,"$each",c=function(){var t,n,o,$=this,i=c.$$p,s=i||r;if(c.$$p=null,s===!1||s===r)return(t=(n=$).$enum_for,t.$$p=(o=function(){var e=o.$$s||this;return e.$size()},o.$$s=$,o),t).call(n,"each");for(var u,l,_,p=0,d=$.$$keys,f=d.length;f>p;p++)if(u=d[p],u.$$is_string?l=$.$$smap[u]:(l=u.value,u=u.key),_=e.yield1(s,[u,l]),_===a)return a.$v;return $}),e.defn(b,"$each_key",u=function(){var e,t,n,o=this,$=u.$$p,i=$||r;if(u.$$p=null,i===!1||i===r)return(e=(t=o).$enum_for,e.$$p=(n=function(){var e=n.$$s||this;return e.$size()},n.$$s=o,n),e).call(t,"each_key");for(var s,c=0,l=o.$$keys,_=l.length;_>c;c++)if(s=l[c],i(s.$$is_string?s:s.key)===a)return a.$v;return o}),e.alias(b,"each_pair","each"),e.defn(b,"$each_value",l=function(){var e,t,n,o=this,$=l.$$p,i=$||r;if(l.$$p=null,i===!1||i===r)return(e=(t=o).$enum_for,e.$$p=(n=function(){var e=n.$$s||this;return e.$size()},n.$$s=o,n),e).call(t,"each_value");for(var s,c=0,u=o.$$keys,_=u.length;_>c;c++)if(s=u[c],i(s.$$is_string?o.$$smap[s]:s.value)===a)return a.$v;return o}),e.defn(b,"$empty?",function(){var e=this;return 0===e.$$keys.length}),e.alias(b,"eql?","=="),e.defn(b,"$fetch",_=function(t,n){var o=this,$=_.$$p,i=$||r;_.$$p=null;var s=e.hash_get(o,t);return void 0!==s?s:i!==r?(s=i(t),s===a?a.$v:s):void 0!==n?n:o.$raise(x.get("KeyError"),"key not found: "+t.$inspect())}),e.defn(b,"$flatten",function(e){var t=this;null==e&&(e=1),e=x.get("Opal")["$coerce_to!"](e,x.get("Integer"),"to_int");for(var n,r,a=[],o=0,$=t.$$keys,i=$.length;i>o;o++)if(n=$[o],n.$$is_string?r=t.$$smap[n]:(r=n.value,n=n.key),a.push(n),r.$$is_array){if(1===e){a.push(r);continue}a=a.concat(r.$flatten(e-2))}else a.push(r);return a}),e.defn(b,"$has_key?",function(t){var n=this;return void 0!==e.hash_get(n,t)}),e.defn(b,"$has_value?",function(e){for(var t,n=this,r=0,a=n.$$keys,o=a.length;o>r;r++)if(t=a[r],(t.$$is_string?n.$$smap[t]:t.value)["$=="](e))return!0;return!1}),e.defn(b,"$hash",function(){var t,n,r=this,a=void 0===e.hash_ids,o=r.$object_id(),$=["Hash"];try{if(a&&(e.hash_ids={}),e.hash_ids.hasOwnProperty(o))return"self";for(t in e.hash_ids)if(e.hash_ids.hasOwnProperty(t)&&(n=e.hash_ids[t],r["$eql?"](n)))return"self";e.hash_ids[o]=r;for(var i=0,s=r.$$keys,c=s.length;c>i;i++)t=s[i],t.$$is_string?$.push([t,r.$$smap[t].$hash()]):$.push([t.key_hash,t.value.$hash()]);return $.sort().join()}finally{a&&delete e.hash_ids}}),e.alias(b,"include?","has_key?"),e.defn(b,"$index",function(e){for(var t,n,a=this,o=0,$=a.$$keys,i=$.length;i>o;o++)if(t=$[o],t.$$is_string?n=a.$$smap[t]:(n=t.value,t=t.key),n["$=="](e))return t;return r}),e.defn(b,"$indexes",function(){var t=this,n=r,a=arguments.length-0;0>a&&(a=0);var o=new Array(a);for(n=0;a>n;n++)o[n]=arguments[n+0];for(var $,i,s=[],c=0,u=o.length;u>c;c++)$=o[c],i=e.hash_get(t,$),void 0!==i?s.push(i):s.push(t.$default());return s}),e.alias(b,"indices","indexes");var w;return e.defn(b,"$inspect",function(){var e=this,t=void 0===w,n=e.$object_id(),r=[];try{if(t&&(w={}),w.hasOwnProperty(n))return"{...}";w[n]=!0;for(var a,o,$=0,i=e.$$keys,s=i.length;s>$;$++)a=i[$],a.$$is_string?o=e.$$smap[a]:(o=a.value,a=a.key),r.push(a.$inspect()+"=>"+o.$inspect());return"{"+r.join(", ")+"}"}finally{t&&(w=void 0)}}),e.defn(b,"$invert",function(){for(var t,n,r=this,a=e.hash(),o=0,$=r.$$keys,i=$.length;i>o;o++)t=$[o],t.$$is_string?n=r.$$smap[t]:(n=t.value,t=t.key),e.hash_put(a,n,t);return a}),e.defn(b,"$keep_if",p=function(){var t,n,o,$=this,i=p.$$p,s=i||r;if(p.$$p=null,s===!1||s===r)return(t=(n=$).$enum_for,t.$$p=(o=function(){var e=o.$$s||this;return e.$size()},o.$$s=$,o),t).call(n,"keep_if");for(var c,u,l,_=0,d=$.$$keys,f=d.length;f>_;_++){if(c=d[_],c.$$is_string?u=$.$$smap[c]:(u=c.value,c=c.key),l=s(c,u),l===a)return a.$v;(l===!1||l===r)&&void 0!==e.hash_delete($,c)&&(f--,_--)}return $}),e.alias(b,"key","index"),e.alias(b,"key?","has_key?"),e.defn(b,"$keys",function(){for(var e,t=this,n=[],r=0,a=t.$$keys,o=a.length;o>r;r++)e=a[r],e.$$is_string?n.push(e):n.push(e.key);return n}),e.defn(b,"$length",function(){var e=this;return e.$$keys.length}),e.alias(b,"member?","has_key?"),e.defn(b,"$merge",d=function(e){var t,n,a=this,o=d.$$p,$=o||r;return d.$$p=null,(t=(n=a.$dup())["$merge!"],t.$$p=$.$to_proc(),t).call(n,e)}),e.defn(b,"$merge!",f=function(t){var n=this,a=f.$$p,o=a||r;f.$$p=null,x.get("Hash")["$==="](t)||(t=x.get("Opal")["$coerce_to!"](t,x.get("Hash"),"to_hash"));
var $,i,s,c,u=t.$$keys,l=u.length;if(o===r){for($=0;l>$;$++)i=u[$],i.$$is_string?c=t.$$smap[i]:(c=i.value,i=i.key),e.hash_put(n,i,c);return n}for($=0;l>$;$++)i=u[$],i.$$is_string?c=t.$$smap[i]:(c=i.value,i=i.key),s=e.hash_get(n,i),void 0!==s?e.hash_put(n,i,o(i,s,c)):e.hash_put(n,i,c);return n}),e.defn(b,"$rassoc",function(e){for(var t,n,a=this,o=0,$=a.$$keys,i=$.length;i>o;o++)if(t=$[o],t.$$is_string?n=a.$$smap[t]:(n=t.value,t=t.key),n["$=="](e))return[t,n];return r}),e.defn(b,"$rehash",function(){var t=this;return e.hash_rehash(t),t}),e.defn(b,"$reject",g=function(){var t,n,o,$=this,i=g.$$p,s=i||r;if(g.$$p=null,s===!1||s===r)return(t=(n=$).$enum_for,t.$$p=(o=function(){var e=o.$$s||this;return e.$size()},o.$$s=$,o),t).call(n,"reject");for(var c,u,l,_=e.hash(),p=0,d=$.$$keys,f=d.length;f>p;p++){if(c=d[p],c.$$is_string?u=$.$$smap[c]:(u=c.value,c=c.key),l=s(c,u),l===a)return a.$v;(l===!1||l===r)&&e.hash_put(_,c,u)}return _}),e.defn(b,"$reject!",h=function(){var t,n,o,$=this,i=h.$$p,s=i||r;if(h.$$p=null,s===!1||s===r)return(t=(n=$).$enum_for,t.$$p=(o=function(){var e=o.$$s||this;return e.$size()},o.$$s=$,o),t).call(n,"reject!");for(var c,u,l,_=!1,p=0,d=$.$$keys,f=d.length;f>p;p++){if(c=d[p],c.$$is_string?u=$.$$smap[c]:(u=c.value,c=c.key),l=s(c,u),l===a)return a.$v;l!==!1&&l!==r&&void 0!==e.hash_delete($,c)&&(_=!0,f--,p--)}return _?$:r}),e.defn(b,"$replace",function(t){var n,a,o=this;t=x.get("Opal")["$coerce_to!"](t,x.get("Hash"),"to_hash"),e.hash_init(o);for(var $,i,s=0,c=t.$$keys,u=c.length;u>s;s++)$=c[s],$.$$is_string?i=t.$$smap[$]:(i=$.value,$=$.key),e.hash_put(o,$,i);return(n=t.$default_proc())===r||n.$$is_boolean&&1!=n?(n=[t.$default()],a=o,a["$default="].apply(a,n),n[n.length-1]):(n=[t.$default_proc()],a=o,a["$default_proc="].apply(a,n),n[n.length-1]),o}),e.defn(b,"$select",m=function(){var t,n,o,$=this,i=m.$$p,s=i||r;if(m.$$p=null,s===!1||s===r)return(t=(n=$).$enum_for,t.$$p=(o=function(){var e=o.$$s||this;return e.$size()},o.$$s=$,o),t).call(n,"select");for(var c,u,l,_=e.hash(),p=0,d=$.$$keys,f=d.length;f>p;p++){if(c=d[p],c.$$is_string?u=$.$$smap[c]:(u=c.value,c=c.key),l=s(c,u),l===a)return a.$v;l!==!1&&l!==r&&e.hash_put(_,c,u)}return _}),e.defn(b,"$select!",v=function(){var t,n,o,$=this,i=v.$$p,s=i||r;if(v.$$p=null,s===!1||s===r)return(t=(n=$).$enum_for,t.$$p=(o=function(){var e=o.$$s||this;return e.$size()},o.$$s=$,o),t).call(n,"select!");for(var c,u,l,_=r,p=0,d=$.$$keys,f=d.length;f>p;p++){if(c=d[p],c.$$is_string?u=$.$$smap[c]:(u=c.value,c=c.key),l=s(c,u),l===a)return a.$v;(l===!1||l===r)&&(void 0!==e.hash_delete($,c)&&(f--,p--),_=$)}return _}),e.defn(b,"$shift",function(){var t,n=this,a=n.$$keys;return a.length>0?(t=a[0],t=t.$$is_string?t:t.key,[t,e.hash_delete(n,t)]):n.$default(r)}),e.alias(b,"size","length"),b.$alias_method("store","[]="),e.defn(b,"$to_a",function(){for(var e,t,n=this,r=[],a=0,o=n.$$keys,$=o.length;$>a;a++)e=o[a],e.$$is_string?t=n.$$smap[e]:(t=e.value,e=e.key),r.push([e,t]);return r}),e.defn(b,"$to_h",function(){var t=this;if(t.$$class===e.Hash)return t;var n=new e.Hash.$$alloc;return e.hash_init(n),e.hash_clone(t,n),n}),e.defn(b,"$to_hash",function(){var e=this;return e}),e.alias(b,"to_s","inspect"),e.alias(b,"update","merge!"),e.alias(b,"value?","has_value?"),e.alias(b,"values_at","indexes"),e.defn(b,"$values",function(){for(var e,t=this,n=[],r=0,a=t.$$keys,o=a.length;o>r;r++)e=a[r],e.$$is_string?n.push(t.$$smap[e]):n.push(e.value);return n}),r&&"values"}(n.base,null)},Opal.modules["corelib/number"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function a(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function o(e,t){return"number"==typeof e&&"number"==typeof t?e/t:e["$/"](t)}function $(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}function i(e,t){return"number"==typeof e&&"number"==typeof t?t>=e:e["$<="](t)}function s(e,t){return"number"==typeof e&&"number"==typeof t?e>=t:e["$>="](t)}e.dynamic_require_severity="ignore";var c=e.top,u=e,l=e.nil,_=e.breaker,p=(e.slice,e.klass);return e.add_stubs(["$require","$bridge","$raise","$class","$Float","$respond_to?","$coerce_to!","$__coerced__","$===","$!","$>","$**","$new","$<","$to_f","$==","$nan?","$infinite?","$enum_for","$+","$-","$gcd","$lcm","$/","$frexp","$to_i","$ldexp","$rationalize","$*","$<<","$to_r","$-@","$size","$<=","$>="]),c.$require("corelib/numeric"),function(c,$super){function u(){}var d,f,g,h,m,v,b,y,x,w,k=u=p(c,$super,"Number",u),S=(k.$$proto,k.$$scope);return S.get("Opal").$bridge(k,Number),Number.prototype.$$is_number=!0,e.defn(k,"$coerce",function(e){var t=this;if(e===l)t.$raise(S.get("TypeError"),"can't convert "+e.$class()+" into Float");else{if(e.$$is_string)return[t.$Float(e),t];if(e["$respond_to?"]("to_f"))return[S.get("Opal")["$coerce_to!"](e,S.get("Float"),"to_f"),t];if(e.$$is_number)return[e,t];t.$raise(S.get("TypeError"),"can't convert "+e.$class()+" into Float")}}),e.defn(k,"$__id__",function(){var e=this;return 2*e+1}),e.alias(k,"object_id","__id__"),e.defn(k,"$+",function(e){var t=this;return e.$$is_number?t+e:t.$__coerced__("+",e)}),e.defn(k,"$-",function(e){var t=this;return e.$$is_number?t-e:t.$__coerced__("-",e)}),e.defn(k,"$*",function(e){var t=this;return e.$$is_number?t*e:t.$__coerced__("*",e)}),e.defn(k,"$/",function(e){var t=this;return e.$$is_number?t/e:t.$__coerced__("/",e)}),e.alias(k,"fdiv","/"),e.defn(k,"$%",function(e){var t=this;return e.$$is_number?e==-(1/0)?e:0!=e?0>e||0>t?(t%e+e)%e:t%e:void t.$raise(S.get("ZeroDivisionError"),"divided by 0"):t.$__coerced__("%",e)}),e.defn(k,"$&",function(e){var t=this;return e.$$is_number?t&e:t.$__coerced__("&",e)}),e.defn(k,"$|",function(e){var t=this;return e.$$is_number?t|e:t.$__coerced__("|",e)}),e.defn(k,"$^",function(e){var t=this;return e.$$is_number?t^e:t.$__coerced__("^",e)}),e.defn(k,"$<",function(e){var t=this;return e.$$is_number?e>t:t.$__coerced__("<",e)}),e.defn(k,"$<=",function(e){var t=this;return e.$$is_number?e>=t:t.$__coerced__("<=",e)}),e.defn(k,"$>",function(e){var t=this;return e.$$is_number?t>e:t.$__coerced__(">",e)}),e.defn(k,"$>=",function(e){var t=this;return e.$$is_number?t>=e:t.$__coerced__(">=",e)}),e.defn(k,"$<=>",function(t){var n=this;try{return t.$$is_number?isNaN(n)||isNaN(t)?l:n>t?1:t>n?-1:0:n.$__coerced__("<=>",t)}catch(r){if(!e.rescue(r,[S.get("ArgumentError")]))throw r;try{return l}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}),e.defn(k,"$<<",function(e){var t=this;return e=S.get("Opal")["$coerce_to!"](e,S.get("Integer"),"to_int"),e>0?t<<e:t>>-e}),e.defn(k,"$>>",function(e){var t=this;return e=S.get("Opal")["$coerce_to!"](e,S.get("Integer"),"to_int"),e>0?t>>e:t<<-e}),e.defn(k,"$[]",function(e){var t=this;return e=S.get("Opal")["$coerce_to!"](e,S.get("Integer"),"to_int"),e<S.get("Integer").$$scope.get("MIN")||e>S.get("Integer").$$scope.get("MAX")?0:0>t?(~t+1>>e)%2:(t>>e)%2}),e.defn(k,"$+@",function(){var e=this;return+e}),e.defn(k,"$-@",function(){var e=this;return-e}),e.defn(k,"$~",function(){var e=this;return~e}),e.defn(k,"$**",function(e){var r,a,o,$=this;return(r=S.get("Integer")["$==="](e))===l||r.$$is_boolean&&1!=r?(r=(a=n($,0))?(o=S.get("Float")["$==="](e))!==!1&&o!==l?o:S.get("Rational")["$==="](e):n($,0))===l||r.$$is_boolean&&1!=r?(r=null!=e.$$is_number)===l||r.$$is_boolean&&1!=r?$.$__coerced__("**",e):Math.pow($,e):S.get("Complex").$new($,0)["$**"](e.$to_f()):(r=(a=S.get("Integer")["$==="]($)["$!"]())!==!1&&a!==l?a:t(e,0))===l||r.$$is_boolean&&1!=r?S.get("Rational").$new($,1)["$**"](e):Math.pow($,e)}),e.defn(k,"$==",function(e){var t=this;return e.$$is_number?t==Number(e):e["$respond_to?"]("==")?e["$=="](t):!1}),e.defn(k,"$abs",function(){var e=this;return Math.abs(e)}),e.defn(k,"$abs2",function(){var e=this;return Math.abs(e*e)}),e.defn(k,"$angle",function(){var e,t=this;return(e=t["$nan?"]())===l||e.$$is_boolean&&1!=e?0==t?1/t>0?0:Math.PI:0>t?Math.PI:0:t}),e.alias(k,"arg","angle"),e.alias(k,"phase","angle"),e.defn(k,"$bit_length",function(){var e,t=this;if(((e=S.get("Integer")["$==="](t))===l||e.$$is_boolean&&1!=e)&&t.$raise(S.get("NoMethodError").$new("undefined method `bit_length` for "+t+":Float","bit_length")),0===t||-1===t)return 0;for(var n=0,r=0>t?~t:t;0!=r;)n+=1,r>>>=1;return n}),e.defn(k,"$ceil",function(){var e=this;return Math.ceil(e)}),e.defn(k,"$chr",function(e){var t=this;return String.fromCharCode(t)}),e.defn(k,"$denominator",d=function(){var t,n,r=this,a=d.$$p,o=l,$=l;for(d.$$p=null,o=[],$=0;$<arguments.length;$++)o[$]=arguments[$];return(t=(n=r["$nan?"]())!==!1&&n!==l?n:r["$infinite?"]())===l||t.$$is_boolean&&1!=t?e.find_super_dispatcher(r,"denominator",d,a).apply(r,o):1}),e.defn(k,"$downto",f=function(e){var n,o,$,i=this,s=f.$$p,c=s||l;if(f.$$p=null,c===l)return(n=(o=i).$enum_for,n.$$p=($=function(){var n,o=$.$$s||this;return((n=S.get("Numeric")["$==="](e))===l||n.$$is_boolean&&1!=n)&&o.$raise(S.get("ArgumentError"),"comparison of "+o.$class()+" with "+e.$class()+" failed"),t(e,o)?0:r(a(o,e),1)},$.$$s=i,$),n).call(o,"downto",e);e.$$is_number||i.$raise(S.get("ArgumentError"),"comparison of "+i.$class()+" with "+e.$class()+" failed");for(var u=i;u>=e;u--)if(c(u)===_)return _.$v;return i}),e.alias(k,"eql?","=="),e.defn(k,"$equal?",function(e){var t,n=this;return(t=n["$=="](e))!==!1&&t!==l?t:isNaN(n)&&isNaN(e)}),e.defn(k,"$even?",function(){var e=this;return e%2===0}),e.defn(k,"$floor",function(){var e=this;return Math.floor(e)}),e.defn(k,"$gcd",function(e){var t,n=this;((t=S.get("Integer")["$==="](e))===l||t.$$is_boolean&&1!=t)&&n.$raise(S.get("TypeError"),"not an integer");for(var r=Math.abs(n),a=Math.abs(e);r>0;){var o=r;r=a%r,a=o}return a}),e.defn(k,"$gcdlcm",function(e){var t=this;return[t.$gcd(),t.$lcm()]}),e.defn(k,"$integer?",function(){var e=this;return e%1===0}),e.defn(k,"$is_a?",g=function(t){var n,r,a=this,o=g.$$p,$=l,i=l;for(g.$$p=null,$=[],i=0;i<arguments.length;i++)$[i]=arguments[i];return((n=(r=t["$=="](S.get("Fixnum")))?S.get("Integer")["$==="](a):t["$=="](S.get("Fixnum")))===l||n.$$is_boolean&&1!=n)&&((n=(r=t["$=="](S.get("Integer")))?S.get("Integer")["$==="](a):t["$=="](S.get("Integer")))===l||n.$$is_boolean&&1!=n)&&((n=(r=t["$=="](S.get("Float")))?S.get("Float")["$==="](a):t["$=="](S.get("Float")))===l||n.$$is_boolean&&1!=n)?e.find_super_dispatcher(a,"is_a?",g,o).apply(a,$):!0}),e.alias(k,"kind_of?","is_a?"),e.defn(k,"$instance_of?",h=function(t){var n,r,a=this,o=h.$$p,$=l,i=l;for(h.$$p=null,$=[],i=0;i<arguments.length;i++)$[i]=arguments[i];return((n=(r=t["$=="](S.get("Fixnum")))?S.get("Integer")["$==="](a):t["$=="](S.get("Fixnum")))===l||n.$$is_boolean&&1!=n)&&((n=(r=t["$=="](S.get("Integer")))?S.get("Integer")["$==="](a):t["$=="](S.get("Integer")))===l||n.$$is_boolean&&1!=n)&&((n=(r=t["$=="](S.get("Float")))?S.get("Float")["$==="](a):t["$=="](S.get("Float")))===l||n.$$is_boolean&&1!=n)?e.find_super_dispatcher(a,"instance_of?",h,o).apply(a,$):!0}),e.defn(k,"$lcm",function(e){var t,n=this;return((t=S.get("Integer")["$==="](e))===l||t.$$is_boolean&&1!=t)&&n.$raise(S.get("TypeError"),"not an integer"),0==n||0==e?0:Math.abs(n*e/n.$gcd(e))}),e.alias(k,"magnitude","abs"),e.alias(k,"modulo","%"),e.defn(k,"$next",function(){var e=this;return e+1}),e.defn(k,"$nonzero?",function(){var e=this;return 0==e?l:e}),e.defn(k,"$numerator",m=function(){var t,n,r=this,a=m.$$p,o=l,$=l;for(m.$$p=null,o=[],$=0;$<arguments.length;$++)o[$]=arguments[$];return(t=(n=r["$nan?"]())!==!1&&n!==l?n:r["$infinite?"]())===l||t.$$is_boolean&&1!=t?e.find_super_dispatcher(r,"numerator",m,a).apply(r,o):r}),e.defn(k,"$odd?",function(){var e=this;return e%2!==0}),e.defn(k,"$ord",function(){var e=this;return e}),e.defn(k,"$pred",function(){var e=this;return e-1}),e.defn(k,"$quo",v=function(t){var n,r=this,a=v.$$p,$=l,i=l;for(v.$$p=null,$=[],i=0;i<arguments.length;i++)$[i]=arguments[i];return(n=S.get("Integer")["$==="](r))===l||n.$$is_boolean&&1!=n?o(r,t):e.find_super_dispatcher(r,"quo",v,a).apply(r,$)}),e.defn(k,"$rationalize",function(t){var n,r,o=this,i=l,s=l;return arguments.length>1&&o.$raise(S.get("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),(n=S.get("Integer")["$==="](o))===l||n.$$is_boolean&&1!=n?(n=o["$infinite?"]())===l||n.$$is_boolean&&1!=n?(n=o["$nan?"]())===l||n.$$is_boolean&&1!=n?(n=null==t)===l||n.$$is_boolean&&1!=n?o.$to_r().$rationalize(t):(r=S.get("Math").$frexp(o),n=e.to_ary(r),i=null==n[0]?l:n[0],s=null==n[1]?l:n[1],r,i=S.get("Math").$ldexp(i,S.get("Float").$$scope.get("MANT_DIG")).$to_i(),s=a(s,S.get("Float").$$scope.get("MANT_DIG")),S.get("Rational").$new($(2,i),1["$<<"](a(1,s))).$rationalize(S.get("Rational").$new(1,1["$<<"](a(1,s))))):o.$raise(S.get("FloatDomainError"),"NaN"):o.$raise(S.get("FloatDomainError"),"Infinity"):S.get("Rational").$new(o,1)}),e.defn(k,"$round",function($){var c,u,_=this,p=l,d=l;if((c=S.get("Integer")["$==="](_))===l||c.$$is_boolean&&1!=c){if(u=_["$nan?"](),(c=u!==!1&&u!==l?null==$:u)===l||c.$$is_boolean&&1!=c||_.$raise(S.get("FloatDomainError"),"NaN"),$=S.get("Opal")["$coerce_to!"]($||0,S.get("Integer"),"to_int"),i($,0))(c=_["$nan?"]())===l||c.$$is_boolean&&1!=c?(c=_["$infinite?"]())===l||c.$$is_boolean&&1!=c||_.$raise(S.get("FloatDomainError"),"Infinity"):_.$raise(S.get("RangeError"),"NaN");else{if($["$=="](0))return Math.round(_);if((c=(u=_["$nan?"]())!==!1&&u!==l?u:_["$infinite?"]())!==l&&(!c.$$is_boolean||1==c))return _}return u=S.get("Math").$frexp(_),c=e.to_ary(u),p=null==c[0]?l:c[0],d=null==c[1]?l:c[1],u,s($,a(r(S.get("Float").$$scope.get("DIG"),2),function(){return t(d,0)?o(d,4):a(o(d,3),1)}()))?_:n($,function(){return t(d,0)?r(o(d,3),1):o(d,4)}()["$-@"]())?0:Math.round(_*Math.pow(10,$))/Math.pow(10,$)}if((c=null==$)!==l&&(!c.$$is_boolean||1==c))return _;if(u=S.get("Float")["$==="]($),(c=u!==!1&&u!==l?$["$infinite?"]():u)===l||c.$$is_boolean&&1!=c||_.$raise(S.get("RangeError"),"Infinity"),$=S.get("Opal")["$coerce_to!"]($,S.get("Integer"),"to_int"),n($,S.get("Integer").$$scope.get("MIN"))&&_.$raise(S.get("RangeError"),"out of bounds"),(c=$>=0)!==l&&(!c.$$is_boolean||1==c))return _;if($=$["$-@"](),.415241*$-.125>_.$size())return 0;var f=Math.pow(10,$),g=Math.floor((Math.abs(g)+f/2)/f)*f;return 0>_?-g:g}),e.defn(k,"$step",b=function(e,t){var n,r=this,a=b.$$p,o=a||l;if(null==t&&(t=1),b.$$p=null,o===!1||o===l)return r.$enum_for("step",e,t);(n=0==t)===l||n.$$is_boolean&&1!=n||r.$raise(S.get("ArgumentError"),"step cannot be 0");var $=r;if(e===1/0||e===-(1/0))return o($),r;if(t>0)for(;e>=$;)o($),$+=t;else for(;$>=e;)o($),$+=t;return r}),e.alias(k,"succ","next"),e.defn(k,"$times",y=function(){var e=this,t=y.$$p,n=t||l;if(y.$$p=null,n===!1||n===l)return e.$enum_for("times");for(var r=0;e>r;r++)if(n(r)===_)return _.$v;return e}),e.defn(k,"$to_f",function(){var e=this;return e}),e.defn(k,"$to_i",function(){var e=this;return parseInt(e,10)}),e.alias(k,"to_int","to_i"),e.defn(k,"$to_r",function(){var t,n,r=this,o=l,i=l;return(t=S.get("Integer")["$==="](r))===l||t.$$is_boolean&&1!=t?(n=S.get("Math").$frexp(r),t=e.to_ary(n),o=null==t[0]?l:t[0],i=null==t[1]?l:t[1],n,o=S.get("Math").$ldexp(o,S.get("Float").$$scope.get("MANT_DIG")).$to_i(),i=a(i,S.get("Float").$$scope.get("MANT_DIG")),$(o,S.get("Float").$$scope.get("RADIX")["$**"](i)).$to_r()):S.get("Rational").$new(r,1)}),e.defn(k,"$to_s",function(e){var r,a,o=this;return null==e&&(e=10),(r=(a=n(e,2))!==!1&&a!==l?a:t(e,36))===l||r.$$is_boolean&&1!=r||o.$raise(S.get("ArgumentError"),"base must be between 2 and 36"),o.toString(e)}),e.alias(k,"truncate","to_i"),e.alias(k,"inspect","to_s"),e.defn(k,"$divmod",x=function(t){var n,r,a=this,o=x.$$p,$=l,i=l;for(x.$$p=null,$=[],i=0;i<arguments.length;i++)$[i]=arguments[i];return(n=(r=a["$nan?"]())!==!1&&r!==l?r:t["$nan?"]())===l||n.$$is_boolean&&1!=n?(n=a["$infinite?"]())===l||n.$$is_boolean&&1!=n?e.find_super_dispatcher(a,"divmod",x,o).apply(a,$):a.$raise(S.get("FloatDomainError"),"Infinity"):a.$raise(S.get("FloatDomainError"),"NaN")}),e.defn(k,"$upto",w=function(e){var t,o,$,i=this,s=w.$$p,c=s||l;if(w.$$p=null,c===l)return(t=(o=i).$enum_for,t.$$p=($=function(){var t,o=$.$$s||this;return((t=S.get("Numeric")["$==="](e))===l||t.$$is_boolean&&1!=t)&&o.$raise(S.get("ArgumentError"),"comparison of "+o.$class()+" with "+e.$class()+" failed"),n(e,o)?0:r(a(e,o),1)},$.$$s=i,$),t).call(o,"upto",e);e.$$is_number||i.$raise(S.get("ArgumentError"),"comparison of "+i.$class()+" with "+e.$class()+" failed");for(var u=i;e>=u;u++)if(c(u)===_)return _.$v;return i}),e.defn(k,"$zero?",function(){var e=this;return 0==e}),e.defn(k,"$size",function(){return 4}),e.defn(k,"$nan?",function(){var e=this;return isNaN(e)}),e.defn(k,"$finite?",function(){var e=this;return e!=1/0&&e!=-(1/0)&&!isNaN(e)}),e.defn(k,"$infinite?",function(){var e=this;return e==1/0?1:e==-(1/0)?-1:l}),e.defn(k,"$positive?",function(){var e=this;return e==1/0||1/e>0}),e.defn(k,"$negative?",function(){var e=this;return e==-(1/0)||0>1/e}),l&&"negative?"}(u.base,u.get("Numeric")),e.cdecl(u,"Fixnum",u.get("Number")),function(t,$super){function n(){}var r=n=p(t,$super,"Integer",n),a=(r.$$proto,r.$$scope);return e.defs(r,"$===",function(e){return e.$$is_number?e%1===0:!1}),e.cdecl(a,"MAX",Math.pow(2,30)-1),e.cdecl(a,"MIN",-Math.pow(2,30))}(u.base,u.get("Numeric")),function(t,$super){function n(){}var r,a=n=p(t,$super,"Float",n),o=(a.$$proto,a.$$scope);return e.defs(a,"$===",function(e){return!!e.$$is_number}),e.cdecl(o,"INFINITY",1/0),e.cdecl(o,"MAX",Number.MAX_VALUE),e.cdecl(o,"MIN",Number.MIN_VALUE),e.cdecl(o,"NAN",NaN),e.cdecl(o,"DIG",15),e.cdecl(o,"MANT_DIG",53),e.cdecl(o,"RADIX",2),(r="undefined"!=typeof Number.EPSILON)===l||r.$$is_boolean&&1!=r?e.cdecl(o,"EPSILON",2.220446049250313e-16):e.cdecl(o,"EPSILON",Number.EPSILON)}(u.base,u.get("Numeric"))},Opal.modules["corelib/range"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?t>=e:e["$<="](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.dynamic_require_severity="ignore";var a=e.top,o=e,$=e.nil,i=e.breaker,s=(e.slice,e.klass);return e.add_stubs(["$require","$include","$attr_reader","$<=>","$raise","$include?","$<=","$<","$enum_for","$upto","$to_proc","$succ","$!","$==","$===","$exclude_end?","$eql?","$begin","$end","$-","$abs","$to_i","$inspect"]),a.$require("corelib/enumerable"),function(a,$super){function o(){}var c,u,l,_=o=s(a,$super,"Range",o),p=_.$$proto,d=_.$$scope;return p.begin=p.exclude=p.end=$,_.$include(d.get("Enumerable")),p.$$is_range=!0,_.$attr_reader("begin","end"),e.defn(_,"$initialize",function(e,t,n){var r,a=this;return null==n&&(n=!1),((r=e["$<=>"](t))===$||r.$$is_boolean&&1!=r)&&a.$raise(d.get("ArgumentError")),a.begin=e,a.end=t,a.exclude=n}),e.defn(_,"$==",function(e){var t=this;return e.$$is_range?t.exclude===e.exclude&&t.begin==e.begin&&t.end==e.end:!1}),e.defn(_,"$===",function(e){var t=this;return t["$include?"](e)}),e.defn(_,"$cover?",function(e){var r,a,o=this;return(r=t(o.begin,e))?function(){return(a=o.exclude)===$||a.$$is_boolean&&1!=a?t(e,o.end):n(e,o.end)}():t(o.begin,e)}),e.defn(_,"$each",c=function(){var t,r,a,o=this,s=c.$$p,u=s||$,l=$,_=$;if(c.$$p=null,u===$)return o.$enum_for("each");var p,f,g;if(o.begin.$$is_number&&o.end.$$is_number){for((o.begin%1!==0||o.end%1!==0)&&o.$raise(d.get("TypeError"),"can't iterate from Float"),p=o.begin,f=o.end+function(){return(t=o.exclude)===$||t.$$is_boolean&&1!=t?1:0}();f>p;p++)if(g=u(p),g===i)return i.$v;return o}if(o.begin.$$is_string&&o.end.$$is_string)return g=(t=(r=o.begin).$upto,t.$$p=u.$to_proc(),t).call(r,o.end,o.exclude),g===o.begin?o:g;for(l=o.begin,_=o.end;n(l,_);){if(e.yield1(u,l)===i)return i.$v;l=l.$succ()}return a=o.exclude["$!"](),(t=a!==!1&&a!==$?l["$=="](_):a)===$||t.$$is_boolean&&1!=t||e.yield1(u,l)!==i?o:i.$v}),e.defn(_,"$eql?",function(e){var t,n,r=this;return(t=d.get("Range")["$==="](e))===$||t.$$is_boolean&&1!=t?!1:(n=r.exclude["$==="](e["$exclude_end?"]()),t=n!==!1&&n!==$?r.begin["$eql?"](e.$begin()):n,t!==!1&&t!==$?r.end["$eql?"](e.$end()):t)}),e.defn(_,"$exclude_end?",function(){var e=this;return e.exclude}),e.alias(_,"first","begin"),e.alias(_,"include?","cover?"),e.alias(_,"last","end"),e.defn(_,"$max",u=function(){var t=this,n=u.$$p,r=n||$,a=$,o=$;for(u.$$p=null,a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return r!==$?e.find_super_dispatcher(t,"max",u,n).apply(t,a):t.exclude?t.end-1:t.end}),e.alias(_,"member?","cover?"),e.defn(_,"$min",l=function(){var t=this,n=l.$$p,r=n||$,a=$,o=$;for(l.$$p=null,a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return r!==$?e.find_super_dispatcher(t,"min",l,n).apply(t,a):t.begin}),e.alias(_,"member?","include?"),e.defn(_,"$size",function(){var e,t,a=this,o=$,i=$,s=$;return o=a.begin,i=a.end,(e=a.exclude)===$||e.$$is_boolean&&1!=e||(i=r(i,1)),t=d.get("Numeric")["$==="](o),(e=t!==!1&&t!==$?d.get("Numeric")["$==="](i):t)===$||e.$$is_boolean&&1!=e?$:n(i,o)?0:(s=d.get("Float").$$scope.get("INFINITY"),(e=(t=s["$=="](o.$abs()))!==!1&&t!==$?t:i.$abs()["$=="](s))===$||e.$$is_boolean&&1!=e?(Math.abs(i-o)+1).$to_i():s)}),e.defn(_,"$step",function(e){var t=this;return null==e&&(e=1),t.$raise(d.get("NotImplementedError"))}),e.defn(_,"$to_s",function(){var e=this;return e.begin.$inspect()+(e.exclude?"...":"..")+e.end.$inspect()}),e.alias(_,"inspect","to_s")}(o.base,null)},Opal.modules["corelib/proc"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=e.breaker,a=e.slice,o=e.klass;return e.add_stubs(["$raise","$coerce_to!"]),function(t,$super){function $(){}var i,s,c=$=o(t,$super,"Proc",$),u=c.$$proto,l=c.$$scope;return u.$$is_proc=!0,u.$$is_lambda=!1,e.defs(c,"$new",i=function(){var e=this,t=i.$$p,r=t||n;return i.$$p=null,r!==!1&&r!==n||e.$raise(l.get("ArgumentError"),"tried to create a Proc object without a block"),r}),e.defn(c,"$call",s=function(){var t=this,a=s.$$p,o=a||n,$=n,i=arguments.length-0;0>i&&(i=0);var c=new Array(i);for($=0;i>$;$++)c[$]=arguments[$+0];s.$$p=null,o!==n&&(t.$$p=o);var u;return u=t.$$is_lambda?t.apply(null,c):e.yieldX(t,c),u===r?r.$v:u}),e.alias(c,"[]","call"),e.alias(c,"===","call"),e.alias(c,"yield","call"),e.defn(c,"$to_proc",function(){var e=this;return e}),e.defn(c,"$lambda?",function(){var e=this;return!!e.$$is_lambda}),e.defn(c,"$arity",function(){var e=this;return e.$$is_curried?-1:e.$$arity?e.$$arity:e.length}),e.defn(c,"$source_location",function(){var e=this;return e.$$is_curried?n:n}),e.defn(c,"$binding",function(){var e=this;return e.$$is_curried&&e.$raise(l.get("ArgumentError"),"Can't create Binding"),n}),e.defn(c,"$parameters",function(){var e=this;return e.$$is_curried?[["rest"]]:n}),e.defn(c,"$curry",function(e){function t(){var r,o=a.call(arguments),$=o.length;return $>e&&n.$$is_lambda&&!n.$$is_curried&&n.$raise(l.get("ArgumentError"),"wrong number of arguments ("+$+" for "+e+")"),$>=e?n.$call.apply(n,o):(r=function(){return t.apply(null,o.concat(a.call(arguments)))},r.$$is_lambda=n.$$is_lambda,r.$$is_curried=!0,r)}var n=this;return void 0===e?e=n.length:(e=l.get("Opal")["$coerce_to!"](e,l.get("Integer"),"to_int"),n.$$is_lambda&&e!==n.length&&n.$raise(l.get("ArgumentError"),"wrong number of arguments ("+e+" for "+n.length+")")),t.$$is_lambda=n.$$is_lambda,t.$$is_curried=!0,t}),e.defn(c,"$dup",function(){var e=this,t=e.$$original_proc||e,n=function(){return t.apply(this,arguments)};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n}),e.alias(c,"clone","dup")}(t.base,Function)},Opal.modules["corelib/method"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice),a=e.klass;return e.add_stubs(["$attr_reader","$class","$arity","$new","$name"]),function(t,$super){function o(){}var $,i=o=a(t,$super,"Method",o),s=i.$$proto,c=i.$$scope;return s.method=s.receiver=s.owner=s.name=n,i.$attr_reader("owner","receiver","name"),e.defn(i,"$initialize",function(e,t,n){var r=this;return r.receiver=e,r.owner=e.$class(),r.name=n,r.method=t}),e.defn(i,"$arity",function(){var e=this;return e.method.$arity()}),e.defn(i,"$call",$=function(){var e=this,t=$.$$p,r=t||n,a=n,o=arguments.length-0;0>o&&(o=0);var i=new Array(o);for(a=0;o>a;a++)i[a]=arguments[a+0];return $.$$p=null,e.method.$$p=r,e.method.apply(e.receiver,i)}),e.alias(i,"[]","call"),e.defn(i,"$unbind",function(){var e=this;return c.get("UnboundMethod").$new(e.owner,e.method,e.name)}),e.defn(i,"$to_proc",function(){var e=this,t=function(){return e.$call.apply(e,r.call(arguments))};return t.$$unbound=e.method,t.$$is_lambda=!0,t}),e.defn(i,"$inspect",function(){var e=this;return"#<Method: "+e.receiver.$class()+"#"+e.name+">"}),n&&"inspect"}(t.base,null),function(t,$super){function r(){}var o=r=a(t,$super,"UnboundMethod",r),$=o.$$proto,i=o.$$scope;return $.method=$.name=$.owner=n,o.$attr_reader("owner","name"),e.defn(o,"$initialize",function(e,t,n){var r=this;return r.owner=e,r.method=t,r.name=n}),e.defn(o,"$arity",function(){var e=this;return e.method.$arity()}),e.defn(o,"$bind",function(e){var t=this;return i.get("Method").$new(e,t.method,t.name)}),e.defn(o,"$inspect",function(){var e=this;return"#<UnboundMethod: "+e.owner.$name()+"#"+e.name+">"}),n&&"inspect"}(t.base,null)},Opal.modules["corelib/variables"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.gvars),a=e.hash2;return e.add_stubs(["$new"]),r["&"]=r["~"]=r["`"]=r["'"]=n,r.LOADED_FEATURES=r['"']=e.loaded_features,r.LOAD_PATH=r[":"]=[],r["/"]="\n",r[","]=n,e.cdecl(t,"ARGV",[]),e.cdecl(t,"ARGF",t.get("Object").$new()),e.cdecl(t,"ENV",a([],{})),r.VERBOSE=!1,r.DEBUG=!1,r.SAFE=0},Opal.modules["opal/mini"]=function(e){e.dynamic_require_severity="ignore";var t=e.top;e.nil,e.breaker,e.slice;return e.add_stubs(["$require"]),t.$require("opal/base"),t.$require("corelib/nil"),t.$require("corelib/boolean"),t.$require("corelib/string"),t.$require("corelib/comparable"),t.$require("corelib/enumerable"),t.$require("corelib/enumerator"),t.$require("corelib/array"),t.$require("corelib/hash"),t.$require("corelib/number"),t.$require("corelib/range"),t.$require("corelib/proc"),t.$require("corelib/method"),t.$require("corelib/regexp"),t.$require("corelib/variables")},Opal.modules["corelib/array/inheritance"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="ignore";var a=(e.top,e),o=e.nil,$=(e.breaker,e.slice,e.klass);return e.add_stubs(["$new","$allocate","$initialize","$to_proc","$__send__","$clone","$respond_to?","$==","$eql?","$inspect","$hash","$*","$class","$slice","$uniq","$flatten","$-","$+"]),function(t,$super){function n(){}var r=n=$(t,$super,"Array",n),a=(r.$$proto,r.$$scope);return e.defs(r,"$inherited",function(e){var t=o;t=a.get("Class").$new(a.get("Array").$$scope.get("Wrapper")),e.$$proto=t.$$proto,e.$$proto.$$class=e,e.$$alloc=t.$$alloc,e.$$parent=a.get("Array").$$scope.get("Wrapper"),e.$allocate=t.$allocate,e.$new=t.$new,e["$[]"]=t["$[]"]}),o&&"inherited"}(a.base,null),function(a,$super){function i(){}var s,c,u,l,_,p=i=$(a,$super,"Wrapper",i),d=p.$$proto,f=p.$$scope;return d.literal=o,d.$$is_array=!0,e.defs(p,"$allocate",s=function(t){var n=this,r=(s.$$p,o);return null==t&&(t=[]),s.$$p=null,r=e.find_super_dispatcher(n,"allocate",s,null,i).apply(n,[]),r.literal=t,r}),e.defs(p,"$new",c=function(){var t,n,r=this,a=c.$$p,$=a||o,i=o,s=o,u=arguments.length-0;0>u&&(u=0);var l=new Array(u);for(s=0;u>s;s++)l[s]=arguments[s+0];return c.$$p=null,i=r.$allocate(),(t=(n=i).$initialize,t.$$p=$.$to_proc(),t).apply(n,e.to_a(l)),i}),e.defs(p,"$[]",function(){var e=this,t=o,n=arguments.length-0;0>n&&(n=0);var r=new Array(n);for(t=0;n>t;t++)r[t]=arguments[t+0];return e.$allocate(r)}),e.defn(p,"$initialize",u=function(){var t,n,r=this,a=u.$$p,$=a||o,i=o,s=arguments.length-0;0>s&&(s=0);var c=new Array(s);for(i=0;s>i;i++)c[i]=arguments[i+0];return u.$$p=null,r.literal=(t=(n=f.get("Array")).$new,t.$$p=$.$to_proc(),t).apply(n,e.to_a(c))}),e.defn(p,"$method_missing",l=function(){var t,n,r=this,a=l.$$p,$=a||o,i=o,s=o,c=arguments.length-0;0>c&&(c=0);var u=new Array(c);for(s=0;c>s;s++)u[s]=arguments[s+0];return l.$$p=null,i=(t=(n=r.literal).$__send__,t.$$p=$.$to_proc(),t).apply(n,e.to_a(u)),(t=i===r.literal)===o||t.$$is_boolean&&1!=t?i:r}),e.defn(p,"$initialize_copy",function(e){var t=this;return t.literal=e.literal.$clone()}),e.defn(p,"$respond_to?",_=function(t){var n,r=this,a=_.$$p,$=o,i=o;for(_.$$p=null,$=[],i=0;i<arguments.length;i++)$[i]=arguments[i];return(n=e.find_super_dispatcher(r,"respond_to?",_,a).apply(r,$))!==!1&&n!==o?n:r.literal["$respond_to?"](t)}),e.defn(p,"$==",function(e){var t=this;return t.literal["$=="](e)}),e.defn(p,"$eql?",function(e){var t=this;return t.literal["$eql?"](e)}),e.defn(p,"$to_a",function(){var e=this;return e.literal}),e.defn(p,"$to_ary",function(){var e=this;return e}),e.defn(p,"$inspect",function(){var e=this;return e.literal.$inspect()}),e.defn(p,"$hash",function(){var e=this;return e.literal.$hash()}),e.defn(p,"$*",function(e){var n=this,r=t(n.literal,e);return r.$$is_array?n.$class().$allocate(r):r}),e.defn(p,"$[]",function(e,t){var n=this,r=n.literal.$slice(e,t);return r.$$is_array&&(e.$$is_range||void 0!==t)?n.$class().$allocate(r):r}),e.alias(p,"slice","[]"),e.defn(p,"$uniq",function(){var e=this;return e.$class().$allocate(e.literal.$uniq())}),e.defn(p,"$flatten",function(e){var t=this;return t.$class().$allocate(t.literal.$flatten(e))}),e.defn(p,"$-",function(e){var t=this;return n(t.literal,e)}),e.defn(p,"$+",function(e){var t=this;return r(t.literal,e)}),o&&"+"}(a.get("Array"),null)},Opal.modules["corelib/string/inheritance"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}e.dynamic_require_severity="ignore";var r=e.top,a=e,o=e.nil,$=e.breaker,i=(e.slice,e.klass),s=e.gvars;return e.add_stubs(["$require","$new","$allocate","$initialize","$to_proc","$__send__","$class","$clone","$respond_to?","$==","$inspect","$+","$*","$map","$split","$enum_for","$each_line","$to_a","$%"]),r.$require("corelib/string"),function(t,$super){function n(){}var r=n=i(t,$super,"String",n),a=(r.$$proto,r.$$scope);return e.defs(r,"$inherited",function(e){var t=o;t=a.get("Class").$new(a.get("String").$$scope.get("Wrapper")),e.$$proto=t.$$proto,e.$$proto.$$class=e,e.$$alloc=t.$$alloc,e.$$parent=a.get("String").$$scope.get("Wrapper"),e.$allocate=t.$allocate,e.$new=t.$new}),o&&"inherited"}(a.base,null),function(r,$super){function a(){}var c,u,l,_,p,d,f=a=i(r,$super,"Wrapper",a),g=f.$$proto;f.$$scope;return g.literal=o,g.$$is_string=!0,e.defs(f,"$allocate",c=function(t){var n=this,r=(c.$$p,o);return null==t&&(t=""),c.$$p=null,r=e.find_super_dispatcher(n,"allocate",c,null,a).apply(n,[]),r.literal=t,r}),e.defs(f,"$new",u=function(){var t,n,r=this,a=u.$$p,$=a||o,i=o,s=o,c=arguments.length-0;0>c&&(c=0);var l=new Array(c);for(s=0;c>s;s++)l[s]=arguments[s+0];return u.$$p=null,i=r.$allocate(),(t=(n=i).$initialize,t.$$p=$.$to_proc(),t).apply(n,e.to_a(l)),i}),e.defs(f,"$[]",function(){var e=this,t=o,n=arguments.length-0;0>n&&(n=0);var r=new Array(n);for(t=0;n>t;t++)r[t]=arguments[t+0];return e.$allocate(r)}),e.defn(f,"$initialize",function(e){var t=this;return null==e&&(e=""),t.literal=e}),e.defn(f,"$method_missing",l=function(){var t,n,r=this,a=l.$$p,$=a||o,i=o,s=o,c=arguments.length-0;0>c&&(c=0);var u=new Array(c);for(s=0;c>s;s++)u[s]=arguments[s+0];return l.$$p=null,i=(t=(n=r.literal).$__send__,t.$$p=$.$to_proc(),t).apply(n,e.to_a(u)),(t=null!=i.$$is_string)===o||t.$$is_boolean&&1!=t?i:(t=i==r.literal)===o||t.$$is_boolean&&1!=t?r.$class().$allocate(i):r}),e.defn(f,"$initialize_copy",function(e){var t=this;return t.literal=e.literal.$clone()}),e.defn(f,"$respond_to?",_=function(t){var n,r=this,a=_.$$p,$=o,i=o;for(_.$$p=null,$=[],i=0;i<arguments.length;i++)$[i]=arguments[i];return(n=e.find_super_dispatcher(r,"respond_to?",_,a).apply(r,$))!==!1&&n!==o?n:r.literal["$respond_to?"](t)}),e.defn(f,"$==",function(e){var t=this;return t.literal["$=="](e)}),e.alias(f,"eql?","=="),e.alias(f,"===","=="),e.defn(f,"$to_s",function(){var e=this;return e.literal}),e.alias(f,"to_str","to_s"),e.defn(f,"$inspect",function(){var e=this;return e.literal.$inspect()}),e.defn(f,"$+",function(e){var n=this;return t(n.literal,e)}),e.defn(f,"$*",function(e){var t=this,r=n(t.literal,e);return r.$$is_string?t.$class().$allocate(r):r}),e.defn(f,"$split",function(e,t){var n,r,a,$=this;return(n=(r=$.literal.$split(e,t)).$map,n.$$p=(a=function(e){var t=a.$$s||this;return null==e&&(e=o),
t.$class().$allocate(e)},a.$$s=$,a),n).call(r)}),e.defn(f,"$replace",function(e){var t=this;return t.literal=e}),e.defn(f,"$each_line",p=function(t){var n,r,a,i=this,c=p.$$p,u=c||o;return null==s["/"]&&(s["/"]=o),null==t&&(t=s["/"]),p.$$p=null,u===o?i.$enum_for("each_line",t):(n=(r=i.literal).$each_line,n.$$p=(a=function(t){var n,r=a.$$s||this;return null==t&&(t=o),n=e.yield1(u,r.$class().$allocate(t)),n===$?n:n},a.$$s=i,a),n).call(r,t)}),e.defn(f,"$lines",d=function(e){var t,n,r=this,a=d.$$p,$=a||o,i=o;return null==s["/"]&&(s["/"]=o),null==e&&(e=s["/"]),d.$$p=null,i=(t=(n=r).$each_line,t.$$p=$.$to_proc(),t).call(n,e),$!==!1&&$!==o?r:i.$to_a()}),e.defn(f,"$%",function(e){var t=this;return t.literal["$%"](e)}),o&&"%"}(a.get("String"),null)},Opal.modules["corelib/string/encoding"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="ignore";var n,r,a,o,$,i,s,c=e.top,u=e,l=e.nil,_=e.breaker,p=(e.slice,e.klass),d=e.hash2;return e.add_stubs(["$require","$+","$[]","$new","$to_proc","$each","$const_set","$sub","$upcase","$const_get","$===","$==","$name","$include?","$names","$constants","$raise","$attr_accessor","$attr_reader","$register","$length","$bytes","$to_a","$each_byte","$bytesize","$enum_for","$force_encoding","$dup","$coerce_to!","$find","$nil?","$getbyte"]),c.$require("corelib/string"),function(n,$super){function r(){}var a,o=r=p(n,$super,"Encoding",r),$=o.$$proto,i=o.$$scope;return $.ascii=$.dummy=$.name=l,e.defs(o,"$register",a=function(e,n){var r,o,$,s,c=this,u=a.$$p,_=u||l,p=l,f=l;return null==n&&(n=d([],{})),a.$$p=null,p=t([e],(r=n["$[]"]("aliases"))!==!1&&r!==l?r:[]),f=(r=(o=i.get("Class")).$new,r.$$p=_.$to_proc(),r).call(o,c).$new(e,p,(r=n["$[]"]("ascii"))!==!1&&r!==l?r:!1,(r=n["$[]"]("dummy"))!==!1&&r!==l?r:!1),(r=($=p).$each,r.$$p=(s=function(e){var t=s.$$s||this;return null==e&&(e=l),t.$const_set(e.$sub("-","_"),f)},s.$$s=c,s),r).call($)}),e.defs(o,"$find",function(t){try{var n,r,a,o=this,$=l;return $=t.$upcase(),(n=(r=o.$constants()).$each,n.$$p=(a=function(t){var n,r,o=a.$$s||this,s=l;return null==t&&(t=l),s=o.$const_get(t),(n=i.get("Encoding")["$==="](s))===l||n.$$is_boolean&&1!=n?l:(n=(r=s.$name()["$=="]($))!==!1&&r!==l?r:s.$names()["$include?"]($))===l||n.$$is_boolean&&1!=n?l:void e.ret(s)},a.$$s=o,a),n).call(r),o.$raise(i.get("ArgumentError"),"unknown encoding name - "+t)}catch(s){if(s===e.returner)return s.$v;throw s}}),function(e){e.$$scope,e.$$proto;return e.$attr_accessor("default_external")}(e.get_singleton_class(o)),o.$attr_reader("name","names"),e.defn(o,"$initialize",function(e,t,n,r){var a=this;return a.name=e,a.names=t,a.ascii=n,a.dummy=r}),e.defn(o,"$ascii_compatible?",function(){var e=this;return e.ascii}),e.defn(o,"$dummy?",function(){var e=this;return e.dummy}),e.defn(o,"$to_s",function(){var e=this;return e.name}),e.defn(o,"$inspect",function(){var e,t=this;return"#<Encoding:"+t.name+function(){return(e=t.dummy)===l||e.$$is_boolean&&1!=e?l:" (dummy)"}()+">"}),e.defn(o,"$each_byte",function(){var e=this;return e.$raise(i.get("NotImplementedError"))}),e.defn(o,"$getbyte",function(){var e=this;return e.$raise(i.get("NotImplementedError"))}),e.defn(o,"$bytesize",function(){var e=this;return e.$raise(i.get("NotImplementedError"))}),function(e,$super){function t(){}var n=t=p(e,$super,"EncodingError",t);n.$$proto,n.$$scope;return l}(i.base,i.get("StandardError")),function(e,$super){function t(){}var n=t=p(e,$super,"CompatibilityError",t);n.$$proto,n.$$scope;return l}(i.base,i.get("EncodingError"))}(u.base,null),(n=(r=u.get("Encoding")).$register,n.$$p=(a=function(){var t,n=a.$$s||this;return e.def(n,"$each_byte",t=function(n){var r,a=t.$$p,o=a||l;t.$$p=null;for(var $=0,i=n.length;i>$;$++){var s=n.charCodeAt($);if(127>=s)(r=e.yield1(o,s))===_?_.$v:r;else for(var c=encodeURIComponent(n.charAt($)).substr(1).split("%"),u=0,p=c.length;p>u;u++)(r=e.yield1(o,parseInt(c[u],16)))===_?_.$v:r}}),e.def(n,"$bytesize",function(){var e=this;return e.$bytes().$length()}),l&&"bytesize"},a.$$s=c,a),n).call(r,"UTF-8",d(["aliases","ascii"],{aliases:["CP65001"],ascii:!0})),(n=(o=u.get("Encoding")).$register,n.$$p=($=function(){var t,n=$.$$s||this;return e.def(n,"$each_byte",t=function(n){var r,a=t.$$p,o=a||l;t.$$p=null;for(var $=0,i=n.length;i>$;$++){var s=n.charCodeAt($);(r=e.yield1(o,255&s))===_?_.$v:r,(r=e.yield1(o,s>>8))===_?_.$v:r}}),e.def(n,"$bytesize",function(){var e=this;return e.$bytes().$length()}),l&&"bytesize"},$.$$s=c,$),n).call(o,"UTF-16LE"),(n=(i=u.get("Encoding")).$register,n.$$p=(s=function(){var t,n=s.$$s||this;return e.def(n,"$each_byte",t=function(n){var r,a=t.$$p,o=a||l;t.$$p=null;for(var $=0,i=n.length;i>$;$++)(r=e.yield1(o,255&n.charCodeAt($)))===_?_.$v:r}),e.def(n,"$bytesize",function(){var e=this;return e.$bytes().$length()}),l&&"bytesize"},s.$$s=c,s),n).call(i,"ASCII-8BIT",d(["aliases","ascii"],{aliases:["BINARY"],ascii:!0})),function(t,$super){function n(){}var r,a=n=p(t,$super,"String",n),o=a.$$proto,$=a.$$scope;return o.encoding=l,String.prototype.encoding=$.get("Encoding").$$scope.get("UTF_16LE"),e.defn(a,"$bytes",function(){var e=this;return e.$each_byte().$to_a()}),e.defn(a,"$bytesize",function(){var e=this;return e.encoding.$bytesize(e)}),e.defn(a,"$each_byte",r=function(){var e,t,n=this,a=r.$$p,o=a||l;return r.$$p=null,o===l?n.$enum_for("each_byte"):((e=(t=n.encoding).$each_byte,e.$$p=o.$to_proc(),e).call(t,n),n)}),e.defn(a,"$encode",function(e){var t=this;return t.$dup().$force_encoding(e)}),e.defn(a,"$encoding",function(){var e=this;return e.encoding}),e.defn(a,"$force_encoding",function(e){var t,n=this;if(e=$.get("Opal")["$coerce_to!"](e,$.get("String"),"to_str"),e=$.get("Encoding").$find(e),e["$=="](n.encoding))return n;(t=e["$nil?"]())===l||t.$$is_boolean&&1!=t||n.$raise($.get("ArgumentError"),"unknown encoding name - "+e);var r=new String(n);return r.encoding=e,r}),e.defn(a,"$getbyte",function(e){var t=this;return t.encoding.$getbyte(t,e)}),l&&"getbyte"}(u.base,null)},Opal.modules["corelib/math"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e/t:e["$/"](t)}e.dynamic_require_severity="ignore";var r=(e.top,e),a=e.nil,o=(e.breaker,e.slice,e.module);return e.add_stubs(["$new","$raise","$Float","$type_error","$Integer","$module_function","$checked","$float!","$===","$gamma","$-","$integer!","$/","$infinite?"]),function(r){var $,i,s=$=o(r,"Math"),c=(s.$$proto,s.$$scope);e.cdecl(c,"E",Math.E),e.cdecl(c,"PI",Math.PI),e.cdecl(c,"DomainError",c.get("Class").$new(c.get("StandardError"))),e.defs(s,"$checked",function(e){var t=this,n=a,r=arguments.length-1;0>r&&(r=0);var o=new Array(r);for(n=0;r>n;n++)o[n]=arguments[n+1];if(isNaN(o[0])||2==o.length&&isNaN(o[1]))return NaN;var $=Math[e].apply(null,o);return isNaN($)&&t.$raise(c.get("DomainError"),'Numerical argument is out of domain - "'+e+'"'),$}),e.defs(s,"$float!",function(t){var n=this;try{return n.$Float(t)}catch(r){if(!e.rescue(r,[c.get("ArgumentError")]))throw r;try{return n.$raise(c.get("Opal").$type_error(t,c.get("Float")))}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}),e.defs(s,"$integer!",function(t){var n=this;try{return n.$Integer(t)}catch(r){if(!e.rescue(r,[c.get("ArgumentError")]))throw r;try{return n.$raise(c.get("Opal").$type_error(t,c.get("Integer")))}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}),s.$module_function(),e.defn(s,"$acos",function(e){return c.get("Math").$checked("acos",c.get("Math")["$float!"](e))}),((i="undefined"!=typeof Math.acosh)===a||i.$$is_boolean&&1!=i)&&(Math.acosh=function(e){return Math.log(e+Math.sqrt(e*e-1))}),e.defn(s,"$acosh",function(e){return c.get("Math").$checked("acosh",c.get("Math")["$float!"](e))}),e.defn(s,"$asin",function(e){return c.get("Math").$checked("asin",c.get("Math")["$float!"](e))}),((i="undefined"!=typeof Math.asinh)===a||i.$$is_boolean&&1!=i)&&(Math.asinh=function(e){return Math.log(e+Math.sqrt(e*e+1))}),e.defn(s,"$asinh",function(e){return c.get("Math").$checked("asinh",c.get("Math")["$float!"](e))}),e.defn(s,"$atan",function(e){return c.get("Math").$checked("atan",c.get("Math")["$float!"](e))}),e.defn(s,"$atan2",function(e,t){return c.get("Math").$checked("atan2",c.get("Math")["$float!"](e),c.get("Math")["$float!"](t))}),((i="undefined"!=typeof Math.atanh)===a||i.$$is_boolean&&1!=i)&&(Math.atanh=function(e){return.5*Math.log((1+e)/(1-e))}),e.defn(s,"$atanh",function(e){return c.get("Math").$checked("atanh",c.get("Math")["$float!"](e))}),((i="undefined"!=typeof Math.cbrt)===a||i.$$is_boolean&&1!=i)&&(Math.cbrt=function(e){if(0==e)return 0;if(0>e)return-Math.cbrt(-e);for(var t=e,n=0;.125>t;)t*=8,n--;for(;t>1;)t*=.125,n++;for(t=(-.46946116*t+1.072302)*t+.3812513;0>n;)t*=.5,n++;for(;n>0;)t*=2,n--;return t=2/3*t+1/3*e/(t*t),t=2/3*t+1/3*e/(t*t),t=2/3*t+1/3*e/(t*t),t=2/3*t+1/3*e/(t*t)}),e.defn(s,"$cbrt",function(e){return c.get("Math").$checked("cbrt",c.get("Math")["$float!"](e))}),e.defn(s,"$cos",function(e){return c.get("Math").$checked("cos",c.get("Math")["$float!"](e))}),((i="undefined"!=typeof Math.cosh)===a||i.$$is_boolean&&1!=i)&&(Math.cosh=function(e){return(Math.exp(e)+Math.exp(-e))/2}),e.defn(s,"$cosh",function(e){return c.get("Math").$checked("cosh",c.get("Math")["$float!"](e))}),((i="undefined"!=typeof Math.erf)===a||i.$$is_boolean&&1!=i)&&(Math.erf=function(e){var t=.254829592,n=-.284496736,r=1.421413741,a=-1.453152027,o=1.061405429,$=.3275911,i=1;0>e&&(i=-1),e=Math.abs(e);var s=1/(1+$*e),c=1-((((o*s+a)*s+r)*s+n)*s+t)*s*Math.exp(-e*e);return i*c}),e.defn(s,"$erf",function(e){return c.get("Math").$checked("erf",c.get("Math")["$float!"](e))}),((i="undefined"!=typeof Math.erfc)===a||i.$$is_boolean&&1!=i)&&(Math.erfc=function(e){var t=Math.abs(e),n=1/(.5*t+1),r=.17087277*n+-.82215223,a=n*r+1.48851587,o=n*a+-1.13520398,$=n*o+.27886807,i=n*$+-.18628806,s=n*i+.09678418,c=n*s+.37409196,u=n*c+1.00002368,l=n*u,_=-t*t-1.26551223+l,p=n*Math.exp(_);return 0>e?2-p:p}),e.defn(s,"$erfc",function(e){return c.get("Math").$checked("erfc",c.get("Math")["$float!"](e))}),e.defn(s,"$exp",function(e){return c.get("Math").$checked("exp",c.get("Math")["$float!"](e))}),e.defn(s,"$frexp",function(e){if(e=c.get("Math")["$float!"](e),isNaN(e))return[NaN,0];var t=Math.floor(Math.log(Math.abs(e))/Math.log(2))+1,n=e/Math.pow(2,t);return[n,t]}),e.defn(s,"$gamma",function(e){var n=this;e=c.get("Math")["$float!"](e);var r,a,o,$,i,s,u,l,_,p=4.7421875,d=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];if(isNaN(e))return NaN;if(0===e&&0>1/e)return-(1/0);if((-1===e||e===-(1/0))&&n.$raise(c.get("DomainError"),'Numerical argument is out of domain - "gamma"'),c.get("Integer")["$==="](e)){if(0>=e)return isFinite(e)?1/0:NaN;if(e>171)return 1/0;for($=e-2,i=e-1;$>1;)i*=$,$--;return 0==i&&(i=1),i}if(.5>e)return Math.PI/(Math.sin(Math.PI*e)*c.get("Math").$gamma(t(1,e)));if(e>=171.35)return 1/0;if(e>85)return s=e*e,u=s*e,l=u*e,_=l*e,Math.sqrt(2*Math.PI/e)*Math.pow(e/Math.E,e)*(1+1/(12*e)+1/(288*s)-139/(51840*u)-571/(2488320*l)+163879/(209018880*_)+5246819/(75246796800*_*e));for(e-=1,o=d[0],r=1;r<d.length;++r)o+=d[r]/(e+r);return a=e+p+.5,Math.sqrt(2*Math.PI)*Math.pow(a,e+.5)*Math.exp(-a)*o}),((i="undefined"!=typeof Math.hypot)===a||i.$$is_boolean&&1!=i)&&(Math.hypot=function(e,t){return Math.sqrt(e*e+t*t)}),e.defn(s,"$hypot",function(e,t){return c.get("Math").$checked("hypot",c.get("Math")["$float!"](e),c.get("Math")["$float!"](t))}),e.defn(s,"$ldexp",function(e,t){var n=this;return e=c.get("Math")["$float!"](e),t=c.get("Math")["$integer!"](t),isNaN(t)&&n.$raise(c.get("RangeError"),"float NaN out of range of integer"),e*Math.pow(2,t)}),e.defn(s,"$lgamma",function(e){return-1==e?[1/0,1]:[Math.log(Math.abs(c.get("Math").$gamma(e))),c.get("Math").$gamma(e)<0?-1:1]}),e.defn(s,"$log",function(e,t){var r,o=this;return(r=c.get("String")["$==="](e))===a||r.$$is_boolean&&1!=r||o.$raise(c.get("Opal").$type_error(e,c.get("Float"))),(r=null==t)===a||r.$$is_boolean&&1!=r?((r=c.get("String")["$==="](t))===a||r.$$is_boolean&&1!=r||o.$raise(c.get("Opal").$type_error(t,c.get("Float"))),n(c.get("Math").$checked("log",c.get("Math")["$float!"](e)),c.get("Math").$checked("log",c.get("Math")["$float!"](t)))):c.get("Math").$checked("log",c.get("Math")["$float!"](e))}),((i="undefined"!=typeof Math.log10)===a||i.$$is_boolean&&1!=i)&&(Math.log10=function(e){return Math.log(e)/Math.LN10}),e.defn(s,"$log10",function(e){var t,n=this;return(t=c.get("String")["$==="](e))===a||t.$$is_boolean&&1!=t||n.$raise(c.get("Opal").$type_error(e,c.get("Float"))),c.get("Math").$checked("log10",c.get("Math")["$float!"](e))}),((i="undefined"!=typeof Math.log2)===a||i.$$is_boolean&&1!=i)&&(Math.log2=function(e){return Math.log(e)/Math.LN2}),e.defn(s,"$log2",function(e){var t,n=this;return(t=c.get("String")["$==="](e))===a||t.$$is_boolean&&1!=t||n.$raise(c.get("Opal").$type_error(e,c.get("Float"))),c.get("Math").$checked("log2",c.get("Math")["$float!"](e))}),e.defn(s,"$sin",function(e){return c.get("Math").$checked("sin",c.get("Math")["$float!"](e))}),((i="undefined"!=typeof Math.sinh)===a||i.$$is_boolean&&1!=i)&&(Math.sinh=function(e){return(Math.exp(e)-Math.exp(-e))/2}),e.defn(s,"$sinh",function(e){return c.get("Math").$checked("sinh",c.get("Math")["$float!"](e))}),e.defn(s,"$sqrt",function(e){return c.get("Math").$checked("sqrt",c.get("Math")["$float!"](e))}),e.defn(s,"$tan",function(e){var t;return e=c.get("Math")["$float!"](e),(t=e["$infinite?"]())===a||t.$$is_boolean&&1!=t?c.get("Math").$checked("tan",c.get("Math")["$float!"](e)):c.get("Float").$$scope.get("NAN")}),((i="undefined"!=typeof Math.tanh)===a||i.$$is_boolean&&1!=i)&&(Math.tanh=function(e){return e==1/0?1:e==-(1/0)?-1:(Math.exp(e)-Math.exp(-e))/(Math.exp(e)+Math.exp(-e))}),e.defn(s,"$tanh",function(e){return c.get("Math").$checked("tanh",c.get("Math")["$float!"](e))})}(r.base)},Opal.modules["corelib/complex"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function a(e,t){return"number"==typeof e&&"number"==typeof t?e/t:e["$/"](t)}function o(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.dynamic_require_severity="ignore";var $=e.top,i=e,s=e.nil,c=(e.breaker,e.slice,e.klass),u=e.module;return e.add_stubs(["$require","$===","$real?","$raise","$new","$*","$cos","$sin","$attr_reader","$class","$==","$real","$imag","$Complex","$-@","$+","$__coerced__","$-","$nan?","$/","$conj","$abs2","$quo","$polar","$exp","$log","$>","$!=","$divmod","$**","$hypot","$atan2","$lcm","$denominator","$to_s","$numerator","$abs","$arg","$rationalize","$to_f","$to_i","$to_r","$inspect","$positive?","$infinite?"]),$.$require("corelib/numeric"),function($,$super){function i(){}var u=i=c($,$super,"Complex",i),l=u.$$proto,_=u.$$scope;return l.real=l.imag=s,e.defs(u,"$rect",function(e,t){var n,r,a,o,$=this;return null==t&&(t=0),o=_.get("Numeric")["$==="](e),a=o!==!1&&o!==s?e["$real?"]():o,r=a!==!1&&a!==s?_.get("Numeric")["$==="](t):a,((n=r!==!1&&r!==s?t["$real?"]():r)===s||n.$$is_boolean&&1!=n)&&$.$raise(_.get("TypeError"),"not a real"),$.$new(e,t)}),function(t){t.$$scope,t.$$proto;return e.alias(t,"rectangular","rect")}(e.get_singleton_class(u)),e.defs(u,"$polar",function(e,n){var r,a,o,$,i=this;return null==n&&(n=0),$=_.get("Numeric")["$==="](e),o=$!==!1&&$!==s?e["$real?"]():$,a=o!==!1&&o!==s?_.get("Numeric")["$==="](n):o,((r=a!==!1&&a!==s?n["$real?"]():a)===s||r.$$is_boolean&&1!=r)&&i.$raise(_.get("TypeError"),"not a real"),i.$new(t(e,_.get("Math").$cos(n)),t(e,_.get("Math").$sin(n)))}),u.$attr_reader("real","imag"),e.defn(u,"$initialize",function(e,t){var n=this;return null==t&&(t=0),n.real=e,n.imag=t}),e.defn(u,"$coerce",function(e){var t,n,r=this;return(t=_.get("Complex")["$==="](e))===s||t.$$is_boolean&&1!=t?(n=_.get("Numeric")["$==="](e),(t=n!==!1&&n!==s?e["$real?"]():n)===s||t.$$is_boolean&&1!=t?r.$raise(_.get("TypeError"),""+e.$class()+" can't be coerced into Complex"):[_.get("Complex").$new(e,0),r]):[e,r]}),e.defn(u,"$==",function(e){var t,n,r=this;return(t=_.get("Complex")["$==="](e))===s||t.$$is_boolean&&1!=t?(n=_.get("Numeric")["$==="](e),(t=n!==!1&&n!==s?e["$real?"]():n)===s||t.$$is_boolean&&1!=t?e["$=="](r):(t=r.real["$=="](e))?r.imag["$=="](0):r.real["$=="](e)):(t=r.real["$=="](e.$real()))?r.imag["$=="](e.$imag()):r.real["$=="](e.$real())}),e.defn(u,"$-@",function(){var e=this;return e.$Complex(e.real["$-@"](),e.imag["$-@"]())}),e.defn(u,"$+",function(e){var t,r,a=this;return(t=_.get("Complex")["$==="](e))===s||t.$$is_boolean&&1!=t?(r=_.get("Numeric")["$==="](e),(t=r!==!1&&r!==s?e["$real?"]():r)===s||t.$$is_boolean&&1!=t?a.$__coerced__("+",e):a.$Complex(n(a.real,e),a.imag)):a.$Complex(n(a.real,e.$real()),n(a.imag,e.$imag()))}),e.defn(u,"$-",function(e){var t,n,a=this;return(t=_.get("Complex")["$==="](e))===s||t.$$is_boolean&&1!=t?(n=_.get("Numeric")["$==="](e),(t=n!==!1&&n!==s?e["$real?"]():n)===s||t.$$is_boolean&&1!=t?a.$__coerced__("-",e):a.$Complex(r(a.real,e),a.imag)):a.$Complex(r(a.real,e.$real()),r(a.imag,e.$imag()))}),e.defn(u,"$*",function(e){var a,o,$=this;return(a=_.get("Complex")["$==="](e))===s||a.$$is_boolean&&1!=a?(o=_.get("Numeric")["$==="](e),(a=o!==!1&&o!==s?e["$real?"]():o)===s||a.$$is_boolean&&1!=a?$.$__coerced__("*",e):$.$Complex(t($.real,e),t($.imag,e))):$.$Complex(r(t($.real,e.$real()),t($.imag,e.$imag())),n(t($.real,e.$imag()),t($.imag,e.$real())))}),e.defn(u,"$/",function(e){var n,r,o,$,i,c=this;return(n=_.get("Complex")["$==="](e))===s||n.$$is_boolean&&1!=n?(r=_.get("Numeric")["$==="](e),(n=r!==!1&&r!==s?e["$real?"]():r)===s||n.$$is_boolean&&1!=n?c.$__coerced__("/",e):c.$Complex(c.real.$quo(e),c.imag.$quo(e))):(i=_.get("Number")["$==="](c.real),(n=(r=(o=($=i!==!1&&i!==s?c.real["$nan?"]():i)!==!1&&$!==s?$:(i=_.get("Number")["$==="](c.imag),i!==!1&&i!==s?c.imag["$nan?"]():i))!==!1&&o!==s?o:($=_.get("Number")["$==="](e.$real()),$!==!1&&$!==s?e.$real()["$nan?"]():$))!==!1&&r!==s?r:(o=_.get("Number")["$==="](e.$imag()),o!==!1&&o!==s?e.$imag()["$nan?"]():o))===s||n.$$is_boolean&&1!=n?a(t(c,e.$conj()),e.$abs2()):_.get("Complex").$new(_.get("Float").$$scope.get("NAN"),_.get("Float").$$scope.get("NAN")))}),e.defn(u,"$**",function($){var i,c,u,l,p,d=this,f=s,g=s,h=s,m=s,v=s,b=s,y=s,x=s,w=s,k=s,S=s;if($["$=="](0))return _.get("Complex").$new(1,0);if((i=_.get("Complex")["$==="]($))===s||i.$$is_boolean&&1!=i){if((i=_.get("Integer")["$==="]($))===s||i.$$is_boolean&&1!=i)return(i=(c=_.get("Float")["$==="]($))!==!1&&c!==s?c:_.get("Rational")["$==="]($))===s||i.$$is_boolean&&1!=i?d.$__coerced__("**",$):(c=d.$polar(),i=e.to_ary(c),f=null==i[0]?s:i[0],g=null==i[1]?s:i[1],c,_.get("Complex").$polar(f["$**"]($),t(g,$)));if(o($,0)){for(y=d,x=y,w=r($,1);(c=w["$!="](0))!==s&&(!c.$$is_boolean||1==c);){for(;p=w.$divmod(2),l=e.to_ary(p),k=null==l[0]?s:l[0],S=null==l[1]?s:l[1],(u=S["$=="](0))!==s&&(!u.$$is_boolean||1==u);)y=d.$Complex(r(t(y.$real(),y.$real()),t(y.$imag(),y.$imag())),t(t(2,y.$real()),y.$imag())),w=k;x=t(x,y),w=r(w,1)}return x}return a(_.get("Rational").$new(1,1),d)["$**"]($["$-@"]())}return c=d.$polar(),i=e.to_ary(c),f=null==i[0]?s:i[0],g=null==i[1]?s:i[1],c,h=$.$real(),m=$.$imag(),v=_.get("Math").$exp(r(t(h,_.get("Math").$log(f)),t(m,g))),b=n(t(g,h),t(m,_.get("Math").$log(f))),_.get("Complex").$polar(v,b)}),e.defn(u,"$abs",function(){var e=this;return _.get("Math").$hypot(e.real,e.imag)}),e.defn(u,"$abs2",function(){var e=this;return n(t(e.real,e.real),t(e.imag,e.imag))}),e.defn(u,"$angle",function(){var e=this;return _.get("Math").$atan2(e.imag,e.real)}),e.alias(u,"arg","angle"),e.defn(u,"$conj",function(){var e=this;return e.$Complex(e.real,e.imag["$-@"]())}),e.alias(u,"conjugate","conj"),e.defn(u,"$denominator",function(){var e=this;return e.real.$denominator().$lcm(e.imag.$denominator())}),e.alias(u,"divide","/"),e.defn(u,"$eql?",function(e){var t,n,r=this;return n=_.get("Complex")["$==="](e),t=n!==!1&&n!==s?r.real.$class()["$=="](r.imag.$class()):n,t!==!1&&t!==s?r["$=="](e):t}),e.defn(u,"$fdiv",function(e){var t,n=this;return((t=_.get("Numeric")["$==="](e))===s||t.$$is_boolean&&1!=t)&&n.$raise(_.get("TypeError"),""+e.$class()+" can't be coerced into Complex"),a(n,e)}),e.defn(u,"$hash",function(){var e=this;return"Complex:"+e.real+":"+e.imag}),e.alias(u,"imaginary","imag"),e.defn(u,"$inspect",function(){var e=this;return"("+e.$to_s()+")"}),e.alias(u,"magnitude","abs"),e.defn(u,"$numerator",function(){var e=this,n=s;return n=e.$denominator(),e.$Complex(t(e.real.$numerator(),a(n,e.real.$denominator())),t(e.imag.$numerator(),a(n,e.imag.$denominator())))}),e.alias(u,"phase","arg"),e.defn(u,"$polar",function(){var e=this;return[e.$abs(),e.$arg()]}),e.alias(u,"quo","/"),e.defn(u,"$rationalize",function(e){var t,n=this;return arguments.length>1&&n.$raise(_.get("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),(t=n.imag["$!="](0))===s||t.$$is_boolean&&1!=t||n.$raise(_.get("RangeError"),"can't' convert "+n+" into Rational"),n.$real().$rationalize(e)}),e.defn(u,"$real?",function(){return!1}),e.defn(u,"$rect",function(){var e=this;return[e.real,e.imag]}),e.alias(u,"rectangular","rect"),e.defn(u,"$to_f",function(){var e=this;return e.imag["$=="](0)||e.$raise(_.get("RangeError"),"can't convert "+e+" into Float"),e.real.$to_f()}),e.defn(u,"$to_i",function(){var e=this;return e.imag["$=="](0)||e.$raise(_.get("RangeError"),"can't convert "+e+" into Integer"),e.real.$to_i()}),e.defn(u,"$to_r",function(){var e=this;return e.imag["$=="](0)||e.$raise(_.get("RangeError"),"can't convert "+e+" into Rational"),e.real.$to_r()}),e.defn(u,"$to_s",function(){var e,t,r,a=this,o=s;return o=a.real.$inspect(),r=_.get("Number")["$==="](a.imag),o=(e=(t=r!==!1&&r!==s?a.imag["$nan?"]():r)!==!1&&t!==s?t:a.imag["$positive?"]())===s||e.$$is_boolean&&1!=e?n(o,"-"):n(o,"+"),o=n(o,a.imag.$abs().$inspect()),t=_.get("Number")["$==="](a.imag),(e=t!==!1&&t!==s?(r=a.imag["$nan?"]())!==!1&&r!==s?r:a.imag["$infinite?"]():t)===s||e.$$is_boolean&&1!=e||(o=n(o,"*")),n(o,"i")}),e.cdecl(_,"I",u.$new(0,1))}(i.base,i.get("Numeric")),function(t){var n,r=n=u(t,"Kernel"),a=(r.$$proto,r.$$scope);e.defn(r,"$Complex",function(e,t){return null==t&&(t=s),t!==!1&&t!==s?a.get("Complex").$new(e,t):a.get("Complex").$new(e,0)})}(i.base)},Opal.modules["corelib/rational"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e/t:e["$/"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function a(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}function o(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function $(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function i(e,t){return"number"==typeof e&&"number"==typeof t?t>=e:e["$<="](t)}e.dynamic_require_severity="ignore";var s=e.top,c=e,u=e.nil,l=(e.breaker,e.slice,e.klass),_=e.module;return e.add_stubs(["$require","$to_i","$==","$raise","$<","$-@","$new","$gcd","$/","$nil?","$===","$reduce","$to_r","$equal?","$!","$coerce_to!","$attr_reader","$to_f","$numerator","$denominator","$<=>","$-","$*","$__coerced__","$+","$Rational","$>","$**","$abs","$ceil","$with_precision","$floor","$to_s","$<=","$truncate","$send","$convert"]),s.$require("corelib/numeric"),function(s,$super){function c(){}var _=c=l(s,$super,"Rational",c),p=_.$$proto,d=_.$$scope;return p.num=p.den=u,e.defs(_,"$reduce",function(e,r){var a=this,o=u;if(e=e.$to_i(),r=r.$to_i(),r["$=="](0))a.$raise(d.get("ZeroDivisionError"),"divided by 0");else if(t(r,0))e=e["$-@"](),r=r["$-@"]();else if(r["$=="](1))return a.$new(e,r);return o=e.$gcd(r),a.$new(n(e,o),n(r,o))}),e.defs(_,"$convert",function(e,t){var r,a,o,$=this;return(r=(a=e["$nil?"]())!==!1&&a!==u?a:t["$nil?"]())===u||r.$$is_boolean&&1!=r||$.$raise(d.get("TypeError"),"cannot convert nil into Rational"),a=d.get("Integer")["$==="](e),(r=a!==!1&&a!==u?d.get("Integer")["$==="](t):a)===u||r.$$is_boolean&&1!=r?((r=(a=(o=d.get("Float")["$==="](e))!==!1&&o!==u?o:d.get("String")["$==="](e))!==!1&&a!==u?a:d.get("Complex")["$==="](e))===u||r.$$is_boolean&&1!=r||(e=e.$to_r()),(r=(a=(o=d.get("Float")["$==="](t))!==!1&&o!==u?o:d.get("String")["$==="](t))!==!1&&a!==u?a:d.get("Complex")["$==="](t))===u||r.$$is_boolean&&1!=r||(t=t.$to_r()),a=t["$equal?"](1),(r=a!==!1&&a!==u?d.get("Integer")["$==="](e)["$!"]():a)===u||r.$$is_boolean&&1!=r?(a=d.get("Numeric")["$==="](e),(r=a!==!1&&a!==u?d.get("Numeric")["$==="](t):a)===u||r.$$is_boolean&&1!=r?$.$reduce(e,t):n(e,t)):d.get("Opal")["$coerce_to!"](e,d.get("Rational"),"to_r")):$.$reduce(e,t)}),_.$attr_reader("numerator","denominator"),e.defn(_,"$initialize",function(e,t){var n=this;return n.num=e,n.den=t}),e.defn(_,"$numerator",function(){var e=this;return e.num}),e.defn(_,"$denominator",function(){var e=this;return e.den}),e.defn(_,"$coerce",function(e){var t=this,n=u;return function(){return n=e,d.get("Rational")["$==="](n)?[e,t]:d.get("Integer")["$==="](n)?[e.$to_r(),t]:d.get("Float")["$==="](n)?[e,t.$to_f()]:u}()}),e.defn(_,"$==",function(e){var t,n=this,r=u;return function(){return r=e,d.get("Rational")["$==="](r)?(t=n.num["$=="](e.$numerator()))?n.den["$=="](e.$denominator()):n.num["$=="](e.$numerator()):d.get("Integer")["$==="](r)?(t=n.num["$=="](e))?n.den["$=="](1):n.num["$=="](e):d.get("Float")["$==="](r)?n.$to_f()["$=="](e):e["$=="](n)}()}),e.defn(_,"$<=>",function(e){var t=this,n=u;return function(){return n=e,d.get("Rational")["$==="](n)?r(a(t.num,e.$denominator()),a(t.den,e.$numerator()))["$<=>"](0):d.get("Integer")["$==="](n)?r(t.num,a(t.den,e))["$<=>"](0):d.get("Float")["$==="](n)?t.$to_f()["$<=>"](e):t.$__coerced__("<=>",e)}()}),e.defn(_,"$+",function(e){var t=this,n=u,r=u,$=u;return function(){return n=e,d.get("Rational")["$==="](n)?(r=o(a(t.num,e.$denominator()),a(t.den,e.$numerator())),$=a(t.den,e.$denominator()),t.$Rational(r,$)):d.get("Integer")["$==="](n)?t.$Rational(o(t.num,a(e,t.den)),t.den):d.get("Float")["$==="](n)?o(t.$to_f(),e):t.$__coerced__("+",e)}()}),e.defn(_,"$-",function(e){var t=this,n=u,o=u,$=u;return function(){return n=e,d.get("Rational")["$==="](n)?(o=r(a(t.num,e.$denominator()),a(t.den,e.$numerator())),$=a(t.den,e.$denominator()),t.$Rational(o,$)):d.get("Integer")["$==="](n)?t.$Rational(r(t.num,a(e,t.den)),t.den):d.get("Float")["$==="](n)?r(t.$to_f(),e):t.$__coerced__("-",e)}()}),e.defn(_,"$*",function(e){var t=this,n=u,r=u,o=u;return function(){return n=e,d.get("Rational")["$==="](n)?(r=a(t.num,e.$numerator()),o=a(t.den,e.$denominator()),t.$Rational(r,o)):d.get("Integer")["$==="](n)?t.$Rational(a(t.num,e),t.den):d.get("Float")["$==="](n)?a(t.$to_f(),e):t.$__coerced__("*",e)}()}),e.defn(_,"$/",function(e){var t=this,r=u,o=u,$=u;return function(){return r=e,d.get("Rational")["$==="](r)?(o=a(t.num,e.$denominator()),$=a(t.den,e.$numerator()),t.$Rational(o,$)):d.get("Integer")["$==="](r)?e["$=="](0)?n(t.$to_f(),0):t.$Rational(t.num,a(t.den,e)):d.get("Float")["$==="](r)?n(t.$to_f(),e):t.$__coerced__("/",e)}()}),e.defn(_,"$**",function(e){var n,r,a=this,o=u;return function(){return o=e,d.get("Integer")["$==="](o)?(n=(r=a["$=="](0))?t(e,0):a["$=="](0))===u||n.$$is_boolean&&1!=n?$(e,0)?a.$Rational(a.num["$**"](e),a.den["$**"](e)):t(e,0)?a.$Rational(a.den["$**"](e["$-@"]()),a.num["$**"](e["$-@"]())):a.$Rational(1,1):d.get("Float").$$scope.get("INFINITY"):d.get("Float")["$==="](o)?a.$to_f()["$**"](e):d.get("Rational")["$==="](o)?e["$=="](0)?a.$Rational(1,1):e.$denominator()["$=="](1)?t(e,0)?a.$Rational(a.den["$**"](e.$numerator().$abs()),a.num["$**"](e.$numerator().$abs())):a.$Rational(a.num["$**"](e.$numerator()),a.den["$**"](e.$numerator())):(n=(r=a["$=="](0))?t(e,0):a["$=="](0))===u||n.$$is_boolean&&1!=n?a.$to_f()["$**"](e):a.$raise(d.get("ZeroDivisionError"),"divided by 0"):a.$__coerced__("**",e)}()}),e.defn(_,"$abs",function(){var e=this;return e.$Rational(e.num.$abs(),e.den.$abs())}),e.defn(_,"$ceil",function(e){var t=this;return null==e&&(e=0),e["$=="](0)?n(t.num["$-@"](),t.den)["$-@"]().$ceil():t.$with_precision("ceil",e)}),e.alias(_,"divide","/"),e.defn(_,"$floor",function(e){var t=this;return null==e&&(e=0),e["$=="](0)?n(t.num["$-@"](),t.den)["$-@"]().$floor():t.$with_precision("floor",e)}),e.defn(_,"$hash",function(){var e=this;return"Rational:"+e.num+":"+e.den}),e.defn(_,"$inspect",function(){var e=this;return"("+e.$to_s()+")"}),e.alias(_,"quo","/"),e.defn(_,"$rationalize",function(e){var t=this;if(arguments.length>1&&t.$raise(d.get("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),null==e)return t;for(var a,$,s,c,u,l=e.$abs(),_=r(t,l),p=o(t,l),f=0,g=1,h=1,m=0;;){if(s=_.$ceil(),i(s,p))break;c=s-1,a=c*g+f,$=c*m+h,u=n(1,r(p,c)),p=n(1,r(_,c)),_=u,f=g,h=m,g=a,m=$}return t.$Rational(s*g+f,s*m+h)}),e.defn(_,"$round",function(e){var r=this,$=u,i=u,s=u;return null==e&&(e=0),e["$=="](0)?r.num["$=="](0)?0:r.den["$=="](1)?r.num:($=o(a(r.num.$abs(),2),r.den),i=a(r.den,2),s=n($,i).$truncate(),t(r.num,0)?s["$-@"]():s):r.$with_precision("round",e)}),e.defn(_,"$to_f",function(){var e=this;return n(e.num,e.den)}),e.defn(_,"$to_i",function(){var e=this;return e.$truncate()}),e.defn(_,"$to_r",function(){var e=this;return e}),e.defn(_,"$to_s",function(){var e=this;return""+e.num+"/"+e.den}),e.defn(_,"$truncate",function(e){var n=this;return null==e&&(e=0),e["$=="](0)?t(n.num,0)?n.$ceil():n.$floor():n.$with_precision("truncate",e)}),e.defn(_,"$with_precision",function(e,r){var o,$=this,i=u,s=u;return((o=d.get("Integer")["$==="](r))===u||o.$$is_boolean&&1!=o)&&$.$raise(d.get("TypeError"),"not an Integer"),i=10["$**"](r),s=a($,i),t(r,1)?n(s.$send(e),i).$to_i():$.$Rational(s.$send(e),i)}),u&&"with_precision"}(c.base,c.get("Numeric")),function(t){var n,r=n=_(t,"Kernel"),a=(r.$$proto,r.$$scope);e.defn(r,"$Rational",function(e,t){return null==t&&(t=1),a.get("Rational").$convert(e,t)})}(c.base)},Opal.modules["corelib/time"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function a(e,t){return"number"==typeof e&&"number"==typeof t?e/t:e["$/"](t)}function o(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function $(e,t){return"number"==typeof e&&"number"==typeof t?t>=e:e["$<="](t)}e.dynamic_require_severity="ignore";var i=e.top,s=e,c=e.nil,u=(e.breaker,e.slice),l=e.klass,_=e.range;return e.add_stubs(["$require","$include","$===","$raise","$coerce_to!","$respond_to?","$to_str","$to_i","$new","$<=>","$to_f","$nil?","$>","$<","$strftime","$year","$month","$day","$+","$round","$/","$-","$copy_instance_variables","$initialize_dup","$is_a?","$zero?","$wday","$utc?","$mon","$yday","$hour","$min","$sec","$rjust","$ljust","$zone","$to_s","$[]","$cweek_cyear","$isdst","$<=","$!=","$==","$ceil"]),i.$require("corelib/comparable"),function(i,$super){function s(){}function p(e,t,n,r,a,o){if(e=e.$$is_string?parseInt(e,10):f.get("Opal")["$coerce_to!"](e,f.get("Integer"),"to_int"),t===c)t=1;else if(!t.$$is_number)if(t["$respond_to?"]("to_str"))switch(t=t.$to_str(),t.toLowerCase()){case"jan":t=1;break;case"feb":t=2;break;case"mar":t=3;break;case"apr":t=4;break;case"may":t=5;break;case"jun":t=6;break;case"jul":t=7;break;case"aug":t=8;break;case"sep":t=9;break;case"oct":t=10;break;case"nov":t=11;break;case"dec":t=12;break;default:t=t.$to_i()}else t=f.get("Opal")["$coerce_to!"](t,f.get("Integer"),"to_int");return(1>t||t>12)&&d.$raise(f.get("ArgumentError"),"month out of range: "+t),t-=1,n=n===c?1:n.$$is_string?parseInt(n,10):f.get("Opal")["$coerce_to!"](n,f.get("Integer"),"to_int"),(1>n||n>31)&&d.$raise(f.get("ArgumentError"),"day out of range: "+n),r=r===c?0:r.$$is_string?parseInt(r,10):f.get("Opal")["$coerce_to!"](r,f.get("Integer"),"to_int"),(0>r||r>24)&&d.$raise(f.get("ArgumentError"),"hour out of range: "+r),a=a===c?0:a.$$is_string?parseInt(a,10):f.get("Opal")["$coerce_to!"](a,f.get("Integer"),"to_int"),(0>a||a>59)&&d.$raise(f.get("ArgumentError"),"min out of range: "+a),o===c?o=0:o.$$is_number||(o=o.$$is_string?parseInt(o,10):f.get("Opal")["$coerce_to!"](o,f.get("Integer"),"to_int")),(0>o||o>60)&&d.$raise(f.get("ArgumentError"),"sec out of range: "+o),[e,t,n,r,a,o]}var d=s=l(i,$super,"Time",s),f=(d.$$proto,d.$$scope);d.$include(f.get("Comparable"));var g=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],h=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],m=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],v=["January","February","March","April","May","June","July","August","September","October","November","December"];
return e.defs(d,"$at",function(e,t){var n,r=this;return f.get("Time")["$==="](e)?(void 0!==t&&r.$raise(f.get("TypeError"),"can't convert Time into an exact number"),n=new Date(e.getTime()),n.is_utc=e.is_utc,n):(e.$$is_number||(e=f.get("Opal")["$coerce_to!"](e,f.get("Integer"),"to_int")),void 0===t?new Date(1e3*e):(t.$$is_number||(t=f.get("Opal")["$coerce_to!"](t,f.get("Integer"),"to_int")),new Date(1e3*e+t/1e3)))}),e.defs(d,"$new",function(e,t,n,r,a,o,$){var i=this;null==t&&(t=c),null==n&&(n=c),null==r&&(r=c),null==a&&(a=c),null==o&&(o=c),null==$&&($=c);var s,u;return void 0===e?new Date:($!==c&&i.$raise(f.get("ArgumentError"),"Opal does not support explicitly specifying UTC offset for Time"),s=p(e,t,n,r,a,o),e=s[0],t=s[1],n=s[2],r=s[3],a=s[4],o=s[5],u=new Date(e,t,n,r,a,0,1e3*o),100>e&&u.setFullYear(e),u)}),e.defs(d,"$local",function(e,t,n,r,a,o,$,i,s,l){null==t&&(t=c),null==n&&(n=c),null==r&&(r=c),null==a&&(a=c),null==o&&(o=c),null==$&&($=c),null==i&&(i=c),null==s&&(s=c),null==l&&(l=c);var _,d;return 10===arguments.length&&(_=u.call(arguments),e=_[5],t=_[4],n=_[3],r=_[2],a=_[1],o=_[0]),_=p(e,t,n,r,a,o),e=_[0],t=_[1],n=_[2],r=_[3],a=_[4],o=_[5],d=new Date(e,t,n,r,a,0,1e3*o),100>e&&d.setFullYear(e),d}),e.defs(d,"$gm",function(e,t,n,r,a,o,$,i,s,l){null==t&&(t=c),null==n&&(n=c),null==r&&(r=c),null==a&&(a=c),null==o&&(o=c),null==$&&($=c),null==i&&(i=c),null==s&&(s=c),null==l&&(l=c);var _,d;return 10===arguments.length&&(_=u.call(arguments),e=_[5],t=_[4],n=_[3],r=_[2],a=_[1],o=_[0]),_=p(e,t,n,r,a,o),e=_[0],t=_[1],n=_[2],r=_[3],a=_[4],o=_[5],d=new Date(Date.UTC(e,t,n,r,a,0,1e3*o)),100>e&&d.setUTCFullYear(e),d.is_utc=!0,d}),function(t){t.$$scope,t.$$proto;return e.alias(t,"mktime","local"),e.alias(t,"utc","gm")}(e.get_singleton_class(d)),e.defs(d,"$now",function(){var e=this;return e.$new()}),e.defn(d,"$+",function(e){var t,n=this;(t=f.get("Time")["$==="](e))===c||t.$$is_boolean&&1!=t||n.$raise(f.get("TypeError"),"time + time?"),e.$$is_number||(e=f.get("Opal")["$coerce_to!"](e,f.get("Integer"),"to_int"));var r=new Date(n.getTime()+1e3*e);return r.is_utc=n.is_utc,r}),e.defn(d,"$-",function(e){var t,n=this;if((t=f.get("Time")["$==="](e))!==c&&(!t.$$is_boolean||1==t))return(n.getTime()-e.getTime())/1e3;e.$$is_number||(e=f.get("Opal")["$coerce_to!"](e,f.get("Integer"),"to_int"));var r=new Date(n.getTime()-1e3*e);return r.is_utc=n.is_utc,r}),e.defn(d,"$<=>",function(e){var r,a=this,o=c;return(r=f.get("Time")["$==="](e))===c||r.$$is_boolean&&1!=r?(o=e["$<=>"](a),(r=o["$nil?"]())===c||r.$$is_boolean&&1!=r?t(o,0)?-1:n(o,0)?1:0:c):a.$to_f()["$<=>"](e.$to_f())}),e.defn(d,"$==",function(e){var t=this;return t.$to_f()===e.$to_f()}),e.defn(d,"$asctime",function(){var e=this;return e.$strftime("%a %b %e %H:%M:%S %Y")}),e.alias(d,"ctime","asctime"),e.defn(d,"$day",function(){var e=this;return e.is_utc?e.getUTCDate():e.getDate()}),e.defn(d,"$yday",function(){var e=this,t=c,n=c,$=c;return t=f.get("Time").$new(e.$year()).$to_i(),n=f.get("Time").$new(e.$year(),e.$month(),e.$day()).$to_i(),$=86400,r(a(o(n,t),$).$round(),1)}),e.defn(d,"$isdst",function(){var e=this,t=new Date(e.getFullYear(),0,1),n=new Date(e.getFullYear(),6,1);return e.getTimezoneOffset()<Math.max(t.getTimezoneOffset(),n.getTimezoneOffset())}),e.alias(d,"dst?","isdst"),e.defn(d,"$dup",function(){var e=this,t=c;return t=new Date(e.getTime()),t.$copy_instance_variables(e),t.$initialize_dup(e),t}),e.defn(d,"$eql?",function(e){var t,n=this;return t=e["$is_a?"](f.get("Time")),t!==!1&&t!==c?n["$<=>"](e)["$zero?"]():t}),e.defn(d,"$friday?",function(){var e=this;return 5==e.$wday()}),e.defn(d,"$hash",function(){var e=this;return"Time:"+e.getTime()}),e.defn(d,"$hour",function(){var e=this;return e.is_utc?e.getUTCHours():e.getHours()}),e.defn(d,"$inspect",function(){var e,t=this;return(e=t["$utc?"]())===c||e.$$is_boolean&&1!=e?t.$strftime("%Y-%m-%d %H:%M:%S %z"):t.$strftime("%Y-%m-%d %H:%M:%S UTC")}),e.alias(d,"mday","day"),e.defn(d,"$min",function(){var e=this;return e.is_utc?e.getUTCMinutes():e.getMinutes()}),e.defn(d,"$mon",function(){var e=this;return(e.is_utc?e.getUTCMonth():e.getMonth())+1}),e.defn(d,"$monday?",function(){var e=this;return 1==e.$wday()}),e.alias(d,"month","mon"),e.defn(d,"$saturday?",function(){var e=this;return 6==e.$wday()}),e.defn(d,"$sec",function(){var e=this;return e.is_utc?e.getUTCSeconds():e.getSeconds()}),e.defn(d,"$succ",function(){var e=this,t=new Date(e.getTime()+1e3);return t.is_utc=e.is_utc,t}),e.defn(d,"$usec",function(){var e=this;return 1e3*e.getMilliseconds()}),e.defn(d,"$zone",function(){var e,t=this,n=t.toString();return e=-1==n.indexOf("(")?n.match(/[A-Z]{3,4}/)[0]:n.match(/\([^)]+\)/)[0].match(/[A-Z]/g).join(""),"GMT"==e&&/(GMT\W*\d{4})/.test(n)?RegExp.$1:e}),e.defn(d,"$getgm",function(){var e=this,t=new Date(e.getTime());return t.is_utc=!0,t}),e.alias(d,"getutc","getgm"),e.defn(d,"$gmtime",function(){var e=this;return e.is_utc=!0,e}),e.alias(d,"utc","gmtime"),e.defn(d,"$gmt?",function(){var e=this;return e.is_utc===!0}),e.defn(d,"$gmt_offset",function(){var e=this;return 60*-e.getTimezoneOffset()}),e.defn(d,"$strftime",function(e){var t=this;return e.replace(/%([\-_#^0]*:{0,2})(\d+)?([EO]*)(.)/g,function(e,n,r,a,o){var $="",i=-1!==n.indexOf("0"),s=-1===n.indexOf("-"),c=-1!==n.indexOf("_"),u=-1!==n.indexOf("^"),l=-1!==n.indexOf("#"),p=(n.match(":")||[]).length;switch(r=parseInt(r,10),i&&c&&(n.indexOf("0")<n.indexOf("_")?i=!1:c=!1),o){case"Y":$+=t.$year();break;case"C":i=!c,$+=Math.round(t.$year()/100);break;case"y":i=!c,$+=t.$year()%100;break;case"m":i=!c,$+=t.$mon();break;case"B":$+=v[t.$mon()-1];break;case"b":case"h":c=!i,$+=m[t.$mon()-1];break;case"d":i=!c,$+=t.$day();break;case"e":c=!i,$+=t.$day();break;case"j":$+=t.$yday();break;case"H":i=!c,$+=t.$hour();break;case"k":c=!i,$+=t.$hour();break;case"I":i=!c,$+=t.$hour()%12||12;break;case"l":c=!i,$+=t.$hour()%12||12;break;case"P":$+=t.$hour()>=12?"pm":"am";break;case"p":$+=t.$hour()>=12?"PM":"AM";break;case"M":i=!c,$+=t.$min();break;case"S":i=!c,$+=t.$sec();break;case"L":i=!c,r=isNaN(r)?3:r,$+=t.getMilliseconds();break;case"N":r=isNaN(r)?9:r,$+=t.getMilliseconds().toString().$rjust(3,"0"),$=$.$ljust(r,"0");break;case"z":var d=t.getTimezoneOffset(),f=Math.floor(Math.abs(d)/60),b=Math.abs(d)%60;$+=0>d?"+":"-",$+=10>f?"0":"",$+=f,p>0&&($+=":"),$+=10>b?"0":"",$+=b,p>1&&($+=":00");break;case"Z":$+=t.$zone();break;case"A":$+=g[t.$wday()];break;case"a":$+=h[t.$wday()];break;case"u":$+=t.$wday()+1;break;case"w":$+=t.$wday();break;case"V":$+=t.$cweek_cyear()["$[]"](0).$to_s().$rjust(2,"0");break;case"G":$+=t.$cweek_cyear()["$[]"](1);break;case"g":$+=t.$cweek_cyear()["$[]"](1)["$[]"](_(-2,-1,!1));break;case"s":$+=t.$to_i();break;case"n":$+="\n";break;case"t":$+="	";break;case"%":$+="%";break;case"c":$+=t.$strftime("%a %b %e %T %Y");break;case"D":case"x":$+=t.$strftime("%m/%d/%y");break;case"F":$+=t.$strftime("%Y-%m-%d");break;case"v":$+=t.$strftime("%e-%^b-%4Y");break;case"r":$+=t.$strftime("%I:%M:%S %p");break;case"R":$+=t.$strftime("%H:%M");break;case"T":case"X":$+=t.$strftime("%H:%M:%S");break;default:return e}return u&&($=$.toUpperCase()),l&&($=$.replace(/[A-Z]/,function(e){e.toLowerCase()}).replace(/[a-z]/,function(e){e.toUpperCase()})),s&&(i||c)&&($=$.$rjust(isNaN(r)?2:r,c?" ":"0")),$})}),e.defn(d,"$sunday?",function(){var e=this;return 0==e.$wday()}),e.defn(d,"$thursday?",function(){var e=this;return 4==e.$wday()}),e.defn(d,"$to_a",function(){var e=this;return[e.$sec(),e.$min(),e.$hour(),e.$day(),e.$month(),e.$year(),e.$wday(),e.$yday(),e.$isdst(),e.$zone()]}),e.defn(d,"$to_f",function(){var e=this;return e.getTime()/1e3}),e.defn(d,"$to_i",function(){var e=this;return parseInt(e.getTime()/1e3,10)}),e.alias(d,"to_s","inspect"),e.defn(d,"$tuesday?",function(){var e=this;return 2==e.$wday()}),e.alias(d,"tv_sec","sec"),e.alias(d,"tv_usec","usec"),e.alias(d,"utc?","gmt?"),e.alias(d,"gmtoff","gmt_offset"),e.alias(d,"utc_offset","gmt_offset"),e.defn(d,"$wday",function(){var e=this;return e.is_utc?e.getUTCDay():e.getDay()}),e.defn(d,"$wednesday?",function(){var e=this;return 3==e.$wday()}),e.defn(d,"$year",function(){var e=this;return e.is_utc?e.getUTCFullYear():e.getFullYear()}),e.defn(d,"$cweek_cyear",function(){var e,t,n=this,i=c,s=c,u=c,l=c,_=c,p=c,d=c,g=c;return i=f.get("Time").$new(n.$year(),1,1),s=i.$wday(),u=0,l=n.$year(),(e=(t=$(s,4))?s["$!="](0):$(s,4))===c||e.$$is_boolean&&1!=e?(_=o(o(s,7),1),_["$=="](-8)&&(_=-1)):_=o(s,1),p=a(r(n.$yday(),_),7).$ceil(),$(p,0)?f.get("Time").$new(o(n.$year(),1),12,31).$cweek_cyear():(p["$=="](53)&&(d=f.get("Time").$new(n.$year(),12,31),g=d.$wday(),(e=(t=$(g,3))?g["$!="](0):$(g,3))===c||e.$$is_boolean&&1!=e||(p=1,l=r(l,1))),[p,l])}),c&&"cweek_cyear"}(s.base,Date)},Opal.modules["corelib/struct"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>=t:e["$>="](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="ignore";var a=e.top,o=e,$=e.nil,i=e.breaker,s=(e.slice,e.klass),c=e.hash2;return e.add_stubs(["$require","$include","$==","$[]","$upcase","$const_set","$new","$unshift","$each","$define_struct_attribute","$class_eval","$to_proc","$allocate","$initialize","$raise","$<<","$members","$define_method","$instance_eval","$each_with_index","$[]=","$class","$hash","$===","$<","$-@","$size","$>=","$coerce_to!","$include?","$to_sym","$instance_of?","$__id__","$eql?","$enum_for","$length","$map","$+","$join","$inspect","$each_pair","$inject","$flatten","$to_a"]),a.$require("corelib/enumerable"),function(a,$super){function o(){}var u,l,_,p=o=s(a,$super,"Struct",o),d=(p.$$proto,p.$$scope);return p.$include(d.get("Enumerable")),e.defs(p,"$new",u=function(t){var n,r,a,i,s=this,c=u.$$p,l=c||$,_=$,p=$,f=$,g=arguments.length-1;0>g&&(g=0);var h=new Array(g);for(_=0;g>_;_++)h[_]=arguments[_+1];for(u.$$p=null,p=[],f=0;f<arguments.length;f++)p[f]=arguments[f];return s["$=="](d.get("Struct"))?t["$[]"](0)["$=="](t["$[]"](0).$upcase())?d.get("Struct").$const_set(t,(n=s).$new.apply(n,e.to_a(h))):(h.$unshift(t),(r=(a=d.get("Class")).$new,r.$$p=(i=function(){var t,n,r,a,o=i.$$s||this;return(t=(n=h).$each,t.$$p=(r=function(e){var t=r.$$s||this;return null==e&&(e=$),t.$define_struct_attribute(e)},r.$$s=o,r),t).call(n),l!==!1&&l!==$&&(t=(a=o).$class_eval,t.$$p=l.$to_proc(),t).call(a),function(t){t.$$scope,t.$$proto;return e.defn(t,"$new",function(){var t,n=this,r=$,a=$,o=arguments.length-0;0>o&&(o=0);var i=new Array(o);for(a=0;o>a;a++)i[a]=arguments[a+0];return r=n.$allocate(),r.$$data={},(t=r).$initialize.apply(t,e.to_a(i)),r}),e.alias(t,"[]","new")}(e.get_singleton_class(o))},i.$$s=s,i),r).call(a,s)):e.find_super_dispatcher(s,"new",u,c,o).apply(s,p)}),e.defs(p,"$define_struct_attribute",function(e){var t,n,r,a,o,i=this;return i["$=="](d.get("Struct"))&&i.$raise(d.get("ArgumentError"),"you cannot define attributes to the Struct class"),i.$members()["$<<"](e),(t=(n=i).$define_method,t.$$p=(r=function(){var t=r.$$s||this;return t.$$data[e]},r.$$s=i,r),t).call(n,e),(t=(a=i).$define_method,t.$$p=(o=function(t){var n=o.$$s||this;return null==t&&(t=$),n.$$data[e]=t},o.$$s=i,o),t).call(a,""+e+"=")}),e.defs(p,"$members",function(){var e,t=this;return null==t.members&&(t.members=$),t["$=="](d.get("Struct"))&&t.$raise(d.get("ArgumentError"),"the Struct class has no members"),(e=t.members)!==!1&&e!==$?e:t.members=[]}),e.defs(p,"$inherited",function(e){var t,n,r,a=this,o=$;return null==a.members&&(a.members=$),o=a.members,(t=(n=e).$instance_eval,t.$$p=(r=function(){var e=r.$$s||this;return e.members=o},r.$$s=a,r),t).call(n)}),e.defn(p,"$initialize",function(){var e,t,n,r=this,a=$,o=arguments.length-0;0>o&&(o=0);var i=new Array(o);for(a=0;o>a;a++)i[a]=arguments[a+0];return(e=(t=r.$members()).$each_with_index,e.$$p=(n=function(e,t){var r=n.$$s||this;return null==e&&(e=$),null==t&&(t=$),r["$[]="](e,i["$[]"](t))},n.$$s=r,n),e).call(t)}),e.defn(p,"$members",function(){var e=this;return e.$class().$members()}),e.defn(p,"$hash",function(){var e=this;return d.get("Hash").$new(e.$$data).$hash()}),e.defn(p,"$[]",function(e){var r,a=this;return(r=d.get("Integer")["$==="](e))===$||r.$$is_boolean&&1!=r?(r=d.get("String")["$==="](e))===$||r.$$is_boolean&&1!=r?a.$raise(d.get("TypeError"),"no implicit conversion of "+e.$class()+" into Integer"):a.$$data.hasOwnProperty(e)||a.$raise(d.get("NameError").$new("no member '"+e+"' in struct",e)):(t(e,a.$members().$size()["$-@"]())&&a.$raise(d.get("IndexError"),"offset "+e+" too small for struct(size:"+a.$members().$size()+")"),n(e,a.$members().$size())&&a.$raise(d.get("IndexError"),"offset "+e+" too large for struct(size:"+a.$members().$size()+")"),e=a.$members()["$[]"](e)),e=d.get("Opal")["$coerce_to!"](e,d.get("String"),"to_str"),a.$$data[e]}),e.defn(p,"$[]=",function(e,r){var a,o=this;return(a=d.get("Integer")["$==="](e))===$||a.$$is_boolean&&1!=a?(a=d.get("String")["$==="](e))===$||a.$$is_boolean&&1!=a?o.$raise(d.get("TypeError"),"no implicit conversion of "+e.$class()+" into Integer"):((a=o.$members()["$include?"](e.$to_sym()))===$||a.$$is_boolean&&1!=a)&&o.$raise(d.get("NameError").$new("no member '"+e+"' in struct",e)):(t(e,o.$members().$size()["$-@"]())&&o.$raise(d.get("IndexError"),"offset "+e+" too small for struct(size:"+o.$members().$size()+")"),n(e,o.$members().$size())&&o.$raise(d.get("IndexError"),"offset "+e+" too large for struct(size:"+o.$members().$size()+")"),e=o.$members()["$[]"](e)),e=d.get("Opal")["$coerce_to!"](e,d.get("String"),"to_str"),o.$$data[e]=r}),e.defn(p,"$==",function(e){function t(e,n){var r,$,i;a[e.$__id__()]=!0,o[n.$__id__()]=!0;for(r in e.$$data)if($=e.$$data[r],i=n.$$data[r],d.get("Struct")["$==="]($)){if(!(a.hasOwnProperty($.$__id__())&&o.hasOwnProperty(i.$__id__())||t($,i)))return!1}else if(!$["$=="](i))return!1;return!0}var n,r=this;if((n=e["$instance_of?"](r.$class()))===$||n.$$is_boolean&&1!=n)return!1;var a={},o={};return t(r,e)}),e.defn(p,"$eql?",function(e){function t(e,n){var r,$,i;a[e.$__id__()]=!0,o[n.$__id__()]=!0;for(r in e.$$data)if($=e.$$data[r],i=n.$$data[r],d.get("Struct")["$==="]($)){if(!(a.hasOwnProperty($.$__id__())&&o.hasOwnProperty(i.$__id__())||t($,i)))return!1}else if(!$["$eql?"](i))return!1;return!0}var n,r=this;if((n=e["$instance_of?"](r.$class()))===$||n.$$is_boolean&&1!=n)return!1;var a={},o={};return t(r,e)}),e.defn(p,"$each",l=function(){var t,n,r,a,o,s=this,c=l.$$p,u=c||$;return l.$$p=null,u===$?(t=(n=s).$enum_for,t.$$p=(r=function(){var e=r.$$s||this;return e.$size()},r.$$s=s,r),t).call(n,"each"):((t=(a=s.$members()).$each,t.$$p=(o=function(t){var n,r=o.$$s||this;return null==t&&(t=$),n=e.yield1(u,r["$[]"](t)),n===i?n:n},o.$$s=s,o),t).call(a),s)}),e.defn(p,"$each_pair",_=function(){var t,n,r,a,o,s=this,c=_.$$p,u=c||$;return _.$$p=null,u===$?(t=(n=s).$enum_for,t.$$p=(r=function(){var e=r.$$s||this;return e.$size()},r.$$s=s,r),t).call(n,"each_pair"):((t=(a=s.$members()).$each,t.$$p=(o=function(t){var n,r=o.$$s||this;return null==t&&(t=$),n=e.yield1(u,[t,r["$[]"](t)]),n===i?n:n},o.$$s=s,o),t).call(a),s)}),e.defn(p,"$length",function(){var e=this;return e.$members().$length()}),e.alias(p,"size","length"),e.defn(p,"$to_a",function(){var e,t,n,r=this;return(e=(t=r.$members()).$map,e.$$p=(n=function(e){var t=n.$$s||this;return null==e&&(e=$),t["$[]"](e)},n.$$s=r,n),e).call(t)}),e.alias(p,"values","to_a"),e.defn(p,"$inspect",function(){var e,t,n,a=this,o=$;return o="#<struct ",a.$class()["$=="](d.get("Struct"))&&(o=r(o,""+a.$class()+" ")),o=r(o,(e=(t=a.$each_pair()).$map,e.$$p=(n=function(e,t){n.$$s||this;return null==e&&(e=$),null==t&&(t=$),""+e+"="+t.$inspect()},n.$$s=a,n),e).call(t).$join(", ")),o=r(o,">")}),e.alias(p,"to_s","inspect"),e.defn(p,"$to_h",function(){var e,t,n,r=this;return(e=(t=r.$members()).$inject,e.$$p=(n=function(e,t){var r=n.$$s||this;return null==e&&(e=$),null==t&&(t=$),e["$[]="](t,r["$[]"](t)),e},n.$$s=r,n),e).call(t,c([],{}))}),e.defn(p,"$values_at",function(){var e,t,n,r=this,a=$,o=arguments.length-0;0>o&&(o=0);var i=new Array(o);for(a=0;o>a;a++)i[a]=arguments[a+0];i=(e=(t=i).$map,e.$$p=(n=function(e){n.$$s||this;return null==e&&(e=$),e.$$is_range?e.$to_a():e},n.$$s=r,n),e).call(t).$flatten();for(var s=[],c=0,u=i.length;u>c;c++)i[c].$$is_number||r.$raise(d.get("TypeError"),"no implicit conversion of "+i[c].$class()+" into Integer"),s.push(r["$[]"](i[c]));return s}),$&&"values_at"}(o.base,null)},Opal.modules["corelib/io"]=function(e){e.dynamic_require_severity="ignore";var t,n,r=(e.top,e),a=e.nil,o=(e.breaker,e.slice,e.klass),$=e.module,i=e.gvars;return e.add_stubs(["$attr_accessor","$size","$write","$join","$map","$String","$empty?","$concat","$chomp","$getbyte","$getc","$raise","$new","$write_proc=","$extend"]),function(t,$super){function n(){}var r=n=o(t,$super,"IO",n),s=r.$$proto,c=r.$$scope;return s.tty=s.closed=a,e.cdecl(c,"SEEK_SET",0),e.cdecl(c,"SEEK_CUR",1),e.cdecl(c,"SEEK_END",2),e.defn(r,"$tty?",function(){var e=this;return e.tty}),e.defn(r,"$closed?",function(){var e=this;return e.closed}),r.$attr_accessor("write_proc"),e.defn(r,"$write",function(e){var t=this;return t.write_proc(e),e.$size()}),r.$attr_accessor("sync","tty"),e.defn(r,"$flush",function(){return a}),function(t){var n,r=n=$(t,"Writable");r.$$proto,r.$$scope;e.defn(r,"$<<",function(e){var t=this;return t.$write(e),t}),e.defn(r,"$print",function(){var e,t,n,r=this,o=a;null==i[","]&&(i[","]=a);var $=arguments.length-0;0>$&&($=0);var s=new Array($);for(o=0;$>o;o++)s[o]=arguments[o+0];return r.$write((e=(t=s).$map,e.$$p=(n=function(e){var t=n.$$s||this;return null==e&&(e=a),t.$String(e)},n.$$s=r,n),e).call(t).$join(i[","])),a}),e.defn(r,"$puts",function(){var e,t,n,r=this,o=a,$=a;null==i["/"]&&(i["/"]=a);var s=arguments.length-0;0>s&&(s=0);var c=new Array(s);for($=0;s>$;$++)c[$]=arguments[$+0];return o=i["/"],(e=c["$empty?"]())===a||e.$$is_boolean&&1!=e?r.$write((e=(t=c).$map,e.$$p=(n=function(e){var t=n.$$s||this;return null==e&&(e=a),t.$String(e).$chomp()},n.$$s=r,n),e).call(t).$concat([a]).$join(o)):r.$write(i["/"]),a})}(c.base),function(t){var n,r=n=$(t,"Readable"),o=(r.$$proto,r.$$scope);e.defn(r,"$readbyte",function(){var e=this;return e.$getbyte()}),e.defn(r,"$readchar",function(){var e=this;return e.$getc()}),e.defn(r,"$readline",function(e){var t=this;return null==i["/"]&&(i["/"]=a),null==e&&(e=i["/"]),t.$raise(o.get("NotImplementedError"))}),e.defn(r,"$readpartial",function(e,t){var n=this;return null==t&&(t=a),n.$raise(o.get("NotImplementedError"))})}(c.base)}(r.base,null),e.cdecl(r,"STDERR",i.stderr=r.get("IO").$new()),e.cdecl(r,"STDIN",i.stdin=r.get("IO").$new()),e.cdecl(r,"STDOUT",i.stdout=r.get("IO").$new()),t=["object"==typeof process?function(e){process.stdout.write(e)}:function(e){console.log(e)}],n=r.get("STDOUT"),n["$write_proc="].apply(n,t),t[t.length-1],t=["object"==typeof process?function(e){process.stderr.write(e)}:function(e){console.warn(e)}],n=r.get("STDERR"),n["$write_proc="].apply(n,t),t[t.length-1],r.get("STDOUT").$extend(r.get("IO").$$scope.get("Writable")),r.get("STDERR").$extend(r.get("IO").$$scope.get("Writable"))},Opal.modules["corelib/main"]=function(e){e.dynamic_require_severity="ignore";var t=e.top,n=e,r=e.nil;e.breaker,e.slice;return e.add_stubs(["$include"]),e.defs(t,"$to_s",function(){return"main"}),e.defs(t,"$include",function(e){return n.get("Object").$include(e)}),r&&"include"},Opal.modules["corelib/dir"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=e.breaker,a=(e.slice,e.klass);return e.add_stubs(["$[]"]),function(t,$super){function o(){}var $=o=a(t,$super,"Dir",o);$.$$proto,$.$$scope;return function(t){var a,o=t.$$scope;t.$$proto;return e.defn(t,"$chdir",a=function(t){var o,$=a.$$p,i=$||n,s=n;a.$$p=null;try{return s=e.current_dir,e.current_dir=t,o=e.yieldX(i,[]),o===r?o:o}finally{e.current_dir=s}}),e.defn(t,"$pwd",function(){return e.current_dir||"."}),e.alias(t,"getwd","pwd"),e.defn(t,"$home",function(){var e;return(e=o.get("ENV")["$[]"]("HOME"))!==!1&&e!==n?e:"."}),n&&"home"}(e.get_singleton_class($))}(t.base,null)},Opal.modules["corelib/file"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.klass),a=e.range;return e.add_stubs(["$join","$compact","$split","$==","$first","$[]=","$home","$each","$pop","$<<","$[]","$gsub","$find","$=~"]),function(t,$super){function o(){}var $=o=r(t,$super,"File",o),i=($.$$proto,$.$$scope);return e.cdecl(i,"Separator",e.cdecl(i,"SEPARATOR","/")),e.cdecl(i,"ALT_SEPARATOR",n),e.cdecl(i,"PATH_SEPARATOR",":"),function(t){var r=t.$$scope;t.$$proto;return e.defn(t,"$expand_path",function(e,t){var a,o,$,i=this,s=n,c=n;return null==t&&(t=n),e=[t,e].$compact().$join(r.get("SEPARATOR")),s=e.$split(r.get("SEPARATOR")),c=[],s.$first()["$=="]("~")&&s["$[]="](0,r.get("Dir").$home()),(a=(o=s).$each,a.$$p=($=function(e){$.$$s||this;return null==e&&(e=n),e["$=="]("..")?c.$pop():c["$<<"](e)},$.$$s=i,$),a).call(o),c.$join(r.get("SEPARATOR"))}),e.alias(t,"realpath","expand_path"),e.defn(t,"$dirname",function(e){var t=this;return t.$split(e)["$[]"](a(0,-2,!1))}),e.defn(t,"$basename",function(e){var t=this;return t.$split(e)["$[]"](-1)}),e.defn(t,"$exist?",function(t){return null!=e.modules[t]}),e.alias(t,"exists?","exist?"),e.defn(t,"$directory?",function(t){var a,o,$,i=this,s=n,c=n;s=[];for(var u in e.modules)s.push(u);return t=t.$gsub(new RegExp("(^."+r.get("SEPARATOR")+"+|"+r.get("SEPARATOR")+"+$)")),c=(a=(o=s).$find,a.$$p=($=function(e){$.$$s||this;return null==e&&(e=n),e["$=~"](new RegExp("^"+t))},$.$$s=i,$),a).call(o)}),e.defn(t,"$join",function(){var e=n,t=arguments.length-0;0>t&&(t=0);var a=new Array(t);for(e=0;t>e;e++)a[e]=arguments[e+0];return a.$join(r.get("SEPARATOR")).$gsub(new RegExp(""+r.get("SEPARATOR")+"+"),r.get("SEPARATOR"))}),e.defn(t,"$split",function(e){return e.$split(r.get("SEPARATOR"))}),n&&"split"}(e.get_singleton_class($))}(t.base,t.get("IO"))},Opal.modules["corelib/process"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.klass);return e.add_stubs(["$to_f","$now","$new"]),function(t,$super){function a(){}var o=a=r(t,$super,"Process",a),$=(o.$$proto,o.$$scope);return e.cdecl($,"CLOCK_REALTIME",0),e.cdecl($,"CLOCK_MONOTONIC",1),e.defs(o,"$pid",function(){return 0}),e.defs(o,"$times",function(){var e=n;return e=$.get("Time").$now().$to_f(),$.get("Benchmark").$$scope.get("Tms").$new(e,e,e,e,e)}),e.defs(o,"$clock_gettime",function(e,t){return null==t&&(t=n),$.get("Time").$now().$to_f()}),n&&"clock_gettime"}(t.base,null),function(t,$super){function a(){}var o=a=r(t,$super,"Signal",a);o.$$proto,o.$$scope;return e.defs(o,"$trap",function(){return n}),n&&"trap"}(t.base,null),function(t,$super){function a(){}var o=a=r(t,$super,"GC",a);o.$$proto,o.$$scope;return e.defs(o,"$start",function(){return n}),n&&"start"}(t.base,null)},Opal.modules["corelib/unsupported"]=function(e){function t(e){s[e]||(s[e]=!0,r.$warn(e))}e.dynamic_require_severity="ignore";var n={method_missing:!0,arity_check:!1,freezing:!0,tainting:!0},r=e.top,a=e,o=e.nil,$=(e.breaker,e.slice,e.klass),i=e.module;e.add_stubs(["$warn","$raise","$%","$module_function"]);var s={};return function(t,$super){function n(){}var r=n=$(t,$super,"String",n),a=(r.$$proto,r.$$scope),i="String#%s not supported. Mutable String methods are not supported in Opal.";return e.defn(r,"$<<",function(){var e=this;return e.$raise(a.get("NotImplementedError"),i["$%"]("<<"))}),e.defn(r,"$capitalize!",function(){var e=this;return e.$raise(a.get("NotImplementedError"),i["$%"]("capitalize!"))}),e.defn(r,"$chomp!",function(){var e=this;return e.$raise(a.get("NotImplementedError"),i["$%"]("chomp!"))}),e.defn(r,"$chop!",function(){var e=this;return e.$raise(a.get("NotImplementedError"),i["$%"]("chop!"))}),e.defn(r,"$downcase!",function(){var e=this;return e.$raise(a.get("NotImplementedError"),i["$%"]("downcase!"))}),e.defn(r,"$gsub!",function(){var e=this;return e.$raise(a.get("NotImplementedError"),i["$%"]("gsub!"))}),e.defn(r,"$lstrip!",function(){var e=this;return e.$raise(a.get("NotImplementedError"),i["$%"]("lstrip!"))}),e.defn(r,"$next!",function(){var e=this;return e.$raise(a.get("NotImplementedError"),i["$%"]("next!"))}),e.defn(r,"$reverse!",function(){var e=this;return e.$raise(a.get("NotImplementedError"),i["$%"]("reverse!"))}),e.defn(r,"$slice!",function(){var e=this;return e.$raise(a.get("NotImplementedError"),i["$%"]("slice!"))}),e.defn(r,"$squeeze!",function(){var e=this;return e.$raise(a.get("NotImplementedError"),i["$%"]("squeeze!"))}),e.defn(r,"$strip!",function(){var e=this;return e.$raise(a.get("NotImplementedError"),i["$%"]("strip!"))}),e.defn(r,"$sub!",function(){var e=this;return e.$raise(a.get("NotImplementedError"),i["$%"]("sub!"))}),e.defn(r,"$succ!",function(){var e=this;return e.$raise(a.get("NotImplementedError"),i["$%"]("succ!"))}),e.defn(r,"$swapcase!",function(){var e=this;return e.$raise(a.get("NotImplementedError"),i["$%"]("swapcase!"))}),e.defn(r,"$tr!",function(){var e=this;return e.$raise(a.get("NotImplementedError"),i["$%"]("tr!"))}),e.defn(r,"$tr_s!",function(){var e=this;return e.$raise(a.get("NotImplementedError"),i["$%"]("tr_s!"))}),e.defn(r,"$upcase!",function(){var e=this;return e.$raise(a.get("NotImplementedError"),i["$%"]("upcase!"))}),o&&"upcase!"}(a.base,null),function(r){var a,$=a=i(r,"Kernel"),s=($.$$proto,$.$$scope),c="Object freezing is not supported by Opal";e.defn($,"$freeze",function(){var e,r=this;return(e=n.freezing)===o||e.$$is_boolean&&1!=e?r.$raise(s.get("NotImplementedError"),c):t(c),r}),e.defn($,"$frozen?",function(){var e,r=this;return(e=n.freezing)===o||e.$$is_boolean&&1!=e?r.$raise(s.get("NotImplementedError"),c):t(c),!1})}(a.base),function(r){var a,$=a=i(r,"Kernel"),s=($.$$proto,$.$$scope),c="Object tainting is not supported by Opal";e.defn($,"$taint",function(){var e,r=this;return(e=n.tainting)===o||e.$$is_boolean&&1!=e?r.$raise(s.get("NotImplementedError"),c):t(c),r}),e.defn($,"$untaint",function(){var e,r=this;return(e=n.tainting)===o||e.$$is_boolean&&1!=e?r.$raise(s.get("NotImplementedError"),c):t(c),r}),e.defn($,"$tainted?",function(){var e,r=this;return(e=n.tainting)===o||e.$$is_boolean&&1!=e?r.$raise(s.get("NotImplementedError"),c):t(c),!1})}(a.base),function(t){var n,r=n=i(t,"Marshal"),a=(r.$$proto,r.$$scope),o="Marshalling is not supported by Opal";r.$module_function(),e.defn(r,"$dump",function(){var e=this;return e.$raise(a.get("NotImplementedError"),o)}),e.defn(r,"$load",function(){var e=this;return e.$raise(a.get("NotImplementedError"),o)}),e.defn(r,"$restore",function(){var e=this;return e.$raise(a.get("NotImplementedError"),o)})}(a.base),function(t,$super){function n(){}var r=n=$(t,$super,"Module",n);r.$$proto,r.$$scope;return e.defn(r,"$public",function(){var e=this,t=o,n=arguments.length-0;0>n&&(n=0);var r=new Array(n);for(t=0;n>t;t++)r[t]=arguments[t+0];return 0===r.length&&(e.$$module_function=!1),o}),e.alias(r,"private","public"),e.alias(r,"protected","public"),e.alias(r,"nesting","public"),e.defn(r,"$private_class_method",function(){var e=this;return e}),e.alias(r,"public_class_method","private_class_method"),e.defn(r,"$private_method_defined?",function(e){return!1}),e.defn(r,"$private_constant",function(){return o}),e.alias(r,"protected_method_defined?","private_method_defined?"),e.alias(r,"public_instance_methods","instance_methods"),e.alias(r,"public_method_defined?","method_defined?")}(a.base,null),function(t){var n,r=n=i(t,"Kernel");r.$$proto,r.$$scope;e.defn(r,"$private_methods",function(){return[]}),e.alias(r,"private_instance_methods","private_methods")}(a.base),function(t){var n,r=n=i(t,"Kernel"),a=(r.$$proto,r.$$scope);e.defn(r,"$eval",function(){var e=this;return e.$raise(a.get("NotImplementedError"),"To use Kernel#eval, you must first require 'opal-parser'. "+("See https://github.com/opal/opal/blob/"+a.get("RUBY_ENGINE_VERSION")+"/docs/opal_parser.md for details."))})}(a.base)},function(e){e.dynamic_require_severity="ignore";var t=e.top;e.nil,e.breaker,e.slice;return e.add_stubs(["$require"]),t.$require("opal/base"),t.$require("opal/mini"),t.$require("corelib/array/inheritance"),t.$require("corelib/string/inheritance"),t.$require("corelib/string/encoding"),t.$require("corelib/math"),t.$require("corelib/complex"),t.$require("corelib/rational"),t.$require("corelib/time"),t.$require("corelib/struct"),t.$require("corelib/io"),t.$require("corelib/main"),t.$require("corelib/dir"),t.$require("corelib/file"),t.$require("corelib/process"),t.$require("corelib/unsupported")}(Opal),Opal.modules.stringio=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>=t:e["$>="](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function a(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.dynamic_require_severity="ignore";var o=(e.top,e),$=e.nil,i=(e.breaker,e.slice,e.klass),s=e.range;return e.add_stubs(["$include","$new","$call","$close","$attr_accessor","$length","$include?","$!","$check_readable","$==","$===","$>=","$raise","$>","$+","$-","$seek","$enum_for","$eof?","$ord","$[]","$check_writable","$String","$write","$closed_write?","$closed_read?"]),function(o,$super){function c(){}var u,l,_,p=c=i(o,$super,"StringIO",c),d=p.$$proto,f=p.$$scope;return d.position=d.string=d.closed=$,p.$include(f.get("IO").$$scope.get("Readable")),p.$include(f.get("IO").$$scope.get("Writable")),e.defs(p,"$open",u=function(e,t){var n=this,r=u.$$p,a=r||$,o=$,i=$;return null==e&&(e=""),null==t&&(t=$),u.$$p=null,o=n.$new(e,t),i=a.$call(o),o.$close(),i}),p.$attr_accessor("string"),e.defn(p,"$initialize",function(e,t){var n,r,a=this;return null==e&&(e=""),null==t&&(t="rw"),a.string=e,a.position=e.$length(),r=t["$include?"]("r"),(n=r!==!1&&r!==$?t["$include?"]("w")["$!"]():r)===$||n.$$is_boolean&&1!=n?(r=t["$include?"]("w"),(n=r!==!1&&r!==$?t["$include?"]("r")["$!"]():r)===$||n.$$is_boolean&&1!=n?$:a.closed="read"):a.closed="write"}),e.defn(p,"$eof?",function(){var e=this;return e.$check_readable(),e.position["$=="](e.string.$length())}),e.alias(p,"eof","eof?"),e.defn(p,"$seek",function(e,o){var i=this,s=$;return null==o&&(o=f.get("IO").$$scope.get("SEEK_SET")),s=o,f.get("IO").$$scope.get("SEEK_SET")["$==="](s)?(t(e,0)||i.$raise(f.get("Errno").$$scope.get("EINVAL")),i.position=e):f.get("IO").$$scope.get("SEEK_CUR")["$==="](s)?n(r(i.position,e),i.string.$length())?i.position=i.string.$length():i.position=r(i.position,e):f.get("IO").$$scope.get("SEEK_END")["$==="](s)&&(n(e,i.string.$length())?i.position=0:i.position=a(i.position,e)),0}),e.defn(p,"$tell",function(){var e=this;return e.position}),e.alias(p,"pos","tell"),e.alias(p,"pos=","seek"),e.defn(p,"$rewind",function(){var e=this;return e.$seek(0)}),e.defn(p,"$each_byte",l=function(){var e,t=this,n=l.$$p,a=n||$,o=$;if(l.$$p=null,a===!1||a===$)return t.$enum_for("each_byte");for(t.$check_readable(),o=t.position;(e=t["$eof?"]())===$||e.$$is_boolean&&1!=e;)a.$call(t.string["$[]"](o).$ord()),o=r(o,1);return t}),e.defn(p,"$each_char",_=function(){var e,t=this,n=_.$$p,a=n||$,o=$;if(_.$$p=null,a===!1||a===$)return t.$enum_for("each_char");for(t.$check_readable(),o=t.position;(e=t["$eof?"]())===$||e.$$is_boolean&&1!=e;)a.$call(t.string["$[]"](o)),o=r(o,1);return t}),e.defn(p,"$write",function(e){var t=this,n=$,o=$;return t.$check_writable(),e=t.$String(e),t.string.$length()["$=="](t.position)?(t.string=r(t.string,e),t.position=r(t.position,e.$length())):(n=t.string["$[]"](s(0,a(t.position,1),!1)),o=t.string["$[]"](s(r(t.position,e.$length()),-1,!1)),t.string=r(r(n,e),o),t.position=r(t.position,e.$length()))}),e.defn(p,"$read",function(e,t){var n,a=this,o=$,i=$;return null==e&&(e=$),null==t&&(t=$),a.$check_readable(),(n=a["$eof?"]())===$||n.$$is_boolean&&1!=n?(o=function(){return e!==!1&&e!==$?(i=a.string["$[]"](a.position,e),a.position=r(a.position,e),i):(i=a.string["$[]"](s(a.position,-1,!1)),a.position=a.string.$length(),i)}(),t!==!1&&t!==$?t.$write(o):o):$}),e.defn(p,"$close",function(){var e=this;return e.closed="both"}),e.defn(p,"$close_read",function(){var e=this;return e.closed["$=="]("write")?e.closed="both":e.closed="read"}),e.defn(p,"$close_write",function(){var e=this;return e.closed["$=="]("read")?e.closed="both":e.closed="write"}),e.defn(p,"$closed?",function(){var e=this;return e.closed["$=="]("both")}),e.defn(p,"$closed_read?",function(){var e,t=this;return(e=t.closed["$=="]("read"))!==!1&&e!==$?e:t.closed["$=="]("both")}),e.defn(p,"$closed_write?",function(){var e,t=this;return(e=t.closed["$=="]("write"))!==!1&&e!==$?e:t.closed["$=="]("both")}),e.defn(p,"$check_writable",function(){var e,t=this;return(e=t["$closed_write?"]())===$||e.$$is_boolean&&1!=e?$:t.$raise(f.get("IOError"),"not opened for writing")}),e.defn(p,"$check_readable",function(){
var e,t=this;return(e=t["$closed_read?"]())===$||e.$$is_boolean&&1!=e?$:t.$raise(f.get("IOError"),"not opened for reading")}),$&&"check_readable"}(o.base,o.get("IO"))},Opal.modules.pp=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?t>=e:e["$<="](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="ignore";var r=(e.top,e),a=e.nil,o=(e.breaker,e.slice,e.module),$=e.klass,i=e.gvars;return e.add_stubs(["$inspect","$each","$pp","$<=","$size","$first","$module_function","$p","$args","$===","$+","$<<"]),function(n){var r,$=r=o(n,"Kernel"),i=($.$$proto,$.$$scope);e.defn($,"$pretty_inspect",function(){var e=this;return e.$inspect()}),e.defn($,"$pp",function(){var e,n,r,o=this,$=a,s=arguments.length-0;0>s&&(s=0);var c=new Array(s);for($=0;s>$;$++)c[$]=arguments[$+0];return(e=(n=c).$each,e.$$p=(r=function(e){r.$$s||this;return null==e&&(e=a),i.get("PP").$pp(e)},r.$$s=o,r),e).call(n),t(c.$size(),1)?c.$first():c}),$.$module_function("pp")}(r.base),function(t,$super){function r(){}var o=r=$(t,$super,"PP",r);o.$$proto,o.$$scope;return function(t){var r,o=t.$$scope;t.$$proto;return(r="undefined"==typeof console||"undefined"==typeof console.log)===a||r.$$is_boolean&&1!=r?e.defn(t,"$pp",function(e,t,r){var $;return null==i.stdout&&(i.stdout=a),null==t&&(t=i.stdout),null==r&&(r=79),($=o.get("String")["$==="](t))===a||$.$$is_boolean&&1!=$?t["$<<"](n(e.$inspect(),"\n")):n(n(t,e.$inspect()),"\n")}):e.defn(t,"$pp",function(t,n,r){var o,$=this;return null==i.stdout&&(i.stdout=a),null==n&&(n=i.stdout),null==r&&(r=79),(o=$).$p.apply(o,e.to_a($.$args()))}),e.alias(t,"singleline_pp","pp")}(e.get_singleton_class(o))}(r.base,null)},Opal.modules.set=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?t>=e:e["$<="](t)}e.dynamic_require_severity="ignore";var r=(e.top,e),a=e.nil,o=e.breaker,$=(e.slice,e.klass),i=e.module;return e.add_stubs(["$include","$new","$nil?","$===","$raise","$each","$add","$call","$merge","$class","$respond_to?","$subtract","$dup","$join","$to_a","$equal?","$instance_of?","$==","$instance_variable_get","$is_a?","$size","$all?","$include?","$[]=","$enum_for","$[]","$<<","$replace","$delete","$select","$each_key","$to_proc","$empty?","$eql?","$instance_eval","$clear","$<","$<=","$keys"]),function(r,$super){function i(){}var s,c,u,l,_,p=i=$(r,$super,"Set",i),d=p.$$proto,f=p.$$scope;return d.hash=a,p.$include(f.get("Enumerable")),e.defs(p,"$[]",function(){var e=this,t=a,n=arguments.length-0;0>n&&(n=0);var r=new Array(n);for(t=0;n>t;t++)r[t]=arguments[t+0];return e.$new(r)}),e.defn(p,"$initialize",s=function(e){var t,n,r,o=this,$=s.$$p,i=$||a;return null==e&&(e=a),s.$$p=null,o.hash=f.get("Hash").$new(),(t=e["$nil?"]())===a||t.$$is_boolean&&1!=t?(((t=f.get("Enumerable")["$==="](e))===a||t.$$is_boolean&&1!=t)&&o.$raise(f.get("ArgumentError"),"value must be enumerable"),i!==!1&&i!==a?(t=(n=e).$each,t.$$p=(r=function(e){var t=r.$$s||this;return null==e&&(e=a),t.$add(i.$call(e))},r.$$s=o,r),t).call(n):o.$merge(e)):a}),e.defn(p,"$dup",function(){var e=this,t=a;return t=e.$class().$new(),t.$merge(e)}),e.defn(p,"$-",function(e){var t,n=this;return((t=e["$respond_to?"]("each"))===a||t.$$is_boolean&&1!=t)&&n.$raise(f.get("ArgumentError"),"value must be enumerable"),n.$dup().$subtract(e)}),e.alias(p,"difference","-"),e.defn(p,"$inspect",function(){var e=this;return"#<Set: {"+e.$to_a().$join(",")+"}>"}),e.defn(p,"$==",function(e){var t,n,r,o=this;return(t=o["$equal?"](e))===a||t.$$is_boolean&&1!=t?(t=e["$instance_of?"](o.$class()))===a||t.$$is_boolean&&1!=t?(n=e["$is_a?"](f.get("Set")),(t=n!==!1&&n!==a?o.$size()["$=="](e.$size()):n)===a||t.$$is_boolean&&1!=t?!1:(t=(n=e)["$all?"],t.$$p=(r=function(e){var t=r.$$s||this;return null==t.hash&&(t.hash=a),null==e&&(e=a),t.hash["$include?"](e)},r.$$s=o,r),t).call(n)):o.hash["$=="](e.$instance_variable_get("@hash")):!0}),e.defn(p,"$add",function(e){var t=this;return t.hash["$[]="](e,!0),t}),e.alias(p,"<<","add"),e.defn(p,"$classify",c=function(){var t,n,r,$,i,s=this,u=c.$$p,l=u||a,_=a;return c.$$p=null,l===a?s.$enum_for("classify"):(_=(t=(n=f.get("Hash")).$new,t.$$p=(r=function(e,t){var n=r.$$s||this;return null==e&&(e=a),null==t&&(t=a),e["$[]="](t,n.$class().$new())},r.$$s=s,r),t).call(n),(t=($=s).$each,t.$$p=(i=function(t){var n;i.$$s||this;return null==t&&(t=a),_["$[]"]((n=e.yield1(l,t))===o?o.$v:n).$add(t)},i.$$s=s,i),t).call($),_)}),e.defn(p,"$collect!",u=function(){var t,n,r,$=this,i=u.$$p,s=i||a,c=a;return u.$$p=null,s===a?$.$enum_for("collect!"):(c=$.$class().$new(),(t=(n=$).$each,t.$$p=(r=function(t){var n;r.$$s||this;return null==t&&(t=a),c["$<<"]((n=e.yield1(s,t))===o?o.$v:n)},r.$$s=$,r),t).call(n),$.$replace(c))}),e.alias(p,"map!","collect!"),e.defn(p,"$delete",function(e){var t=this;return t.hash.$delete(e),t}),e.defn(p,"$delete?",function(e){var t,n=this;return(t=n["$include?"](e))===a||t.$$is_boolean&&1!=t?a:(n.$delete(e),n)}),e.defn(p,"$delete_if",l=function(){try{var t,n,r,$,i,s,c=this,u=l.$$p,_=u||a;return l.$$p=null,(t=_!==a)!=!1&&t!==a?t:e.ret(c.$enum_for("delete_if")),(t=(n=($=(i=c).$select,$.$$p=(s=function(t){var n;s.$$s||this;return null==t&&(t=a),n=e.yield1(_,t),n===o?n:n},s.$$s=c,s),$).call(i)).$each,t.$$p=(r=function(e){var t=r.$$s||this;return null==t.hash&&(t.hash=a),null==e&&(e=a),t.hash.$delete(e)},r.$$s=c,r),t).call(n),c}catch(p){if(p===e.returner)return p.$v;throw p}}),e.defn(p,"$add?",function(e){var t,n=this;return(t=n["$include?"](e))===a||t.$$is_boolean&&1!=t?n.$add(e):a}),e.defn(p,"$each",_=function(){var e,t,n=this,r=_.$$p,o=r||a;return _.$$p=null,o===a?n.$enum_for("each"):((e=(t=n.hash).$each_key,e.$$p=o.$to_proc(),e).call(t),n)}),e.defn(p,"$empty?",function(){var e=this;return e.hash["$empty?"]()}),e.defn(p,"$eql?",function(e){var t,n,r,o=this;return o.hash["$eql?"]((t=(n=e).$instance_eval,t.$$p=(r=function(){var e=r.$$s||this;return null==e.hash&&(e.hash=a),e.hash},r.$$s=o,r),t).call(n))}),e.defn(p,"$clear",function(){var e=this;return e.hash.$clear(),e}),e.defn(p,"$include?",function(e){var t=this;return t.hash["$include?"](e)}),e.alias(p,"member?","include?"),e.defn(p,"$merge",function(e){var t,n,r,o=this;return(t=(n=e).$each,t.$$p=(r=function(e){var t=r.$$s||this;return null==e&&(e=a),t.$add(e)},r.$$s=o,r),t).call(n),o}),e.defn(p,"$replace",function(e){var t=this;return t.$clear(),t.$merge(e),t}),e.defn(p,"$size",function(){var e=this;return e.hash.$size()}),e.alias(p,"length","size"),e.defn(p,"$subtract",function(e){var t,n,r,o=this;return(t=(n=e).$each,t.$$p=(r=function(e){var t=r.$$s||this;return null==e&&(e=a),t.$delete(e)},r.$$s=o,r),t).call(n),o}),e.defn(p,"$|",function(e){var t,n=this;return((t=e["$respond_to?"]("each"))===a||t.$$is_boolean&&1!=t)&&n.$raise(f.get("ArgumentError"),"value must be enumerable"),n.$dup().$merge(e)}),e.defn(p,"$superset?",function(e){var n,r,o,$=this;return(n=e["$is_a?"](f.get("Set")))!==!1&&n!==a?n:$.$raise(f.get("ArgumentError"),"value must be a set"),t($.$size(),e.$size())?!1:(n=(r=e)["$all?"],n.$$p=(o=function(e){var t=o.$$s||this;return null==e&&(e=a),t["$include?"](e)},o.$$s=$,o),n).call(r)}),e.alias(p,">=","superset?"),e.defn(p,"$proper_superset?",function(e){var t,r,o,$=this;return(t=e["$is_a?"](f.get("Set")))!==!1&&t!==a?t:$.$raise(f.get("ArgumentError"),"value must be a set"),n($.$size(),e.$size())?!1:(t=(r=e)["$all?"],t.$$p=(o=function(e){var t=o.$$s||this;return null==e&&(e=a),t["$include?"](e)},o.$$s=$,o),t).call(r)}),e.alias(p,">","proper_superset?"),e.defn(p,"$subset?",function(e){var n,r,o,$=this;return(n=e["$is_a?"](f.get("Set")))!==!1&&n!==a?n:$.$raise(f.get("ArgumentError"),"value must be a set"),t(e.$size(),$.$size())?!1:(n=(r=$)["$all?"],n.$$p=(o=function(t){o.$$s||this;return null==t&&(t=a),e["$include?"](t)},o.$$s=$,o),n).call(r)}),e.alias(p,"<=","subset?"),e.defn(p,"$proper_subset?",function(e){var t,r,o,$=this;return(t=e["$is_a?"](f.get("Set")))!==!1&&t!==a?t:$.$raise(f.get("ArgumentError"),"value must be a set"),n(e.$size(),$.$size())?!1:(t=(r=$)["$all?"],t.$$p=(o=function(t){o.$$s||this;return null==t&&(t=a),e["$include?"](t)},o.$$s=$,o),t).call(r)}),e.alias(p,"<","proper_subset?"),e.alias(p,"+","|"),e.alias(p,"union","|"),e.defn(p,"$to_a",function(){var e=this;return e.hash.$keys()}),a&&"to_a"}(r.base,null),function(t){var n,r,o=n=i(t,"Enumerable"),$=(o.$$proto,o.$$scope);e.defn(o,"$to_set",r=function(t){var n,o,i=this,s=r.$$p,c=s||a,u=a,l=arguments.length-1;0>l&&(l=0);var _=new Array(l);for(u=0;l>u;u++)_[u]=arguments[u+1];return null==t&&(t=$.get("Set")),r.$$p=null,(n=(o=t).$new,n.$$p=c.$to_proc(),n).apply(o,[i].concat(e.to_a(_)))})}(r.base)},Opal.modules.ostruct=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="ignore";var r=(e.top,e),a=e.nil,o=e.breaker,$=(e.slice,e.klass),i=e.hash2,s=e.range;return e.add_stubs(["$each_pair","$[]=","$new_ostruct_member","$[]","$to_sym","$>","$length","$raise","$new","$end_with?","$!=","$enum_for","$is_a?","$==","$instance_variable_get","$===","$eql?","$dup","$to_n","$hash","$attr_reader","$__send__","$singleton_class","$delete","$respond_to?","$define_singleton_method","$__id__","$class","$any?","$+","$join","$map","$inspect"]),function(r,$super){function c(){}var u,l=c=$(r,$super,"OpenStruct",c),_=l.$$proto,p=l.$$scope;_.table=a,e.defn(l,"$initialize",function(e){var t,n,r,o=this;return null==e&&(e=a),o.table=i([],{}),e!==!1&&e!==a?(t=(n=e).$each_pair,t.$$p=(r=function(e,t){var n=r.$$s||this;return null==n.table&&(n.table=a),null==e&&(e=a),null==t&&(t=a),n.table["$[]="](n.$new_ostruct_member(e),t)},r.$$s=o,r),t).call(n):a}),e.defn(l,"$[]",function(e){var t=this;return t.table["$[]"](e.$to_sym())}),e.defn(l,"$[]=",function(e,t){var n=this;return n.table["$[]="](n.$new_ostruct_member(e),t)}),e.defn(l,"$method_missing",function(e){var n,r=this,o=a,$=arguments.length-1;0>$&&($=0);var i=new Array($);for(o=0;$>o;o++)i[o]=arguments[o+1];return t(i.$length(),2)&&r.$raise(p.get("NoMethodError").$new("undefined method `"+e+"' for #<OpenStruct>",e)),(n=e["$end_with?"]("="))===a||n.$$is_boolean&&1!=n?r.table["$[]"](e.$to_sym()):((n=i.$length()["$!="](1))===a||n.$$is_boolean&&1!=n||r.$raise(p.get("ArgumentError").$new("wrong number of arguments (0 for 1)")),r.table["$[]="](r.$new_ostruct_member(e["$[]"](s(0,-2,!1))),i["$[]"](0)))}),e.defn(l,"$each_pair",u=function(){var t,n,r,$=this,i=u.$$p,s=i||a;return u.$$p=null,s===a?$.$enum_for("each_pair"):(t=(n=$.table).$each_pair,t.$$p=(r=function(t){var n;r.$$s||this;return null==t&&(t=a),n=e.yield1(s,t),n===o?n:n},r.$$s=$,r),t).call(n)}),e.defn(l,"$==",function(e){var t,n=this;return(t=e["$is_a?"](p.get("OpenStruct")))===a||t.$$is_boolean&&1!=t?!1:n.table["$=="](e.$instance_variable_get("@table"))}),e.defn(l,"$===",function(e){var t,n=this;return(t=e["$is_a?"](p.get("OpenStruct")))===a||t.$$is_boolean&&1!=t?!1:n.table["$==="](e.$instance_variable_get("@table"))}),e.defn(l,"$eql?",function(e){var t,n=this;return(t=e["$is_a?"](p.get("OpenStruct")))===a||t.$$is_boolean&&1!=t?!1:n.table["$eql?"](e.$instance_variable_get("@table"))}),e.defn(l,"$to_h",function(){var e=this;return e.table.$dup()}),e.defn(l,"$to_n",function(){var e=this;return e.table.$to_n()}),e.defn(l,"$hash",function(){var e=this;return e.table.$hash()}),l.$attr_reader("table"),e.defn(l,"$delete_field",function(t){var n=this,r=a;r=t.$to_sym();try{n.$singleton_class().$__send__("remove_method",r,""+r+"=")}catch(o){if(!e.rescue(o,[p.get("NameError")]))throw o;try{}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}return n.table.$delete(r)}),e.defn(l,"$new_ostruct_member",function(e){var t,n,r,o,$,i=this;return e=e.$to_sym(),((t=i["$respond_to?"](e))===a||t.$$is_boolean&&1!=t)&&((t=(n=i).$define_singleton_method,t.$$p=(r=function(){var t=r.$$s||this;return null==t.table&&(t.table=a),t.table["$[]"](e)},r.$$s=i,r),t).call(n,e),(t=(o=i).$define_singleton_method,t.$$p=($=function(t){var n=$.$$s||this;return null==n.table&&(n.table=a),null==t&&(t=a),n.table["$[]="](e,t)},$.$$s=i,$),t).call(o,""+e+"=")),e});var d;return e.defn(l,"$inspect",function(){var e,t,r,o=this,$=a,i=void 0===d,s=o.$__id__();try{return $="#<"+o.$class(),i&&(d={}),d.hasOwnProperty(s)?$+" ...>":(d[s]=!0,(e=o.table["$any?"]())===a||e.$$is_boolean&&1!=e||($=n($," ")),$=n($,(e=(t=o.$each_pair()).$map,e.$$p=(r=function(e,t){r.$$s||this;return null==e&&(e=a),null==t&&(t=a),""+e+"="+t.$inspect()},r.$$s=o,r),e).call(t).$join(", ")),$=n($,">"))}finally{i&&(d=void 0)}}),e.alias(l,"to_s","inspect")}(r.base,null)},Opal.modules["opal/rspec/fixes/opal/compatibility"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}e.dynamic_require_severity="ignore";var n=(e.top,e),r=e.nil,a=(e.breaker,e.slice,e.module),o=e.gvars,$=e.klass,i=e.hash2;return e.add_stubs(["$new","$clone","$respond_to?","$==","$special","$require","$pp","$string","$to_s","$constants","$!","$<","$[]","$splat","$fail","$is_a?","$const_defined?","$does_class_exist?","$class_exec","$to_a","$match","$options","$===","$inspect","$exception","$include","$kind_of?","$stuff","$lambda"]),function(n){var s,c=s=a(n,"Opal"),u=(c.$$proto,c.$$scope);!function(n){var s,c=s=a(n,"RSpec"),u=(c.$$proto,c.$$scope);!function(n){var s,c,u,l,_=s=a(n,"Compatibility"),p=(_.$$proto,_.$$scope);e.defs(_,"$clones_singleton_methods?",function(){var t,n=r,a=r;return n=p.get("Object").$new(),e.defs(n,"$special",function(){return"the_one"}),a=n.$clone(),t=a["$respond_to?"]("special"),t!==!1&&t!==r?a.$special()["$=="]("the_one"):t}),e.defs(_,"$pp_uses_stdout_default?",function(){var e=this,t=r,n=r;null==o.stdout&&(o.stdout=r);try{return e.$require("stringio"),e.$require("pp"),t=o.stdout,o.stdout=p.get("StringIO").$new(),n="opal-rspec - checking pp/pretty print features",p.get("PP").$pp(n),o.stdout.$string()["$=="]('"'+n+'"\n')}finally{o.stdout=t}}),e.defs(_,"$full_class_names?",function(){return p.get("Opal").$$scope.get("RSpec").$$scope.get("Compatibility").$to_s()["$=="]("Opal::RSpec::Compatibility")}),e.defs(_,"$is_struct_hash_correct?",function(){var e=r;return e=p.get("Struct").$new("id"),e.$new(1)["$=="](e.$new(1))}),e.defs(_,"$is_constants_a_clone?",function(){var e=r;return e=p.get("Opal").$$scope.get("RSpec").$$scope.get("Compatibility"),e.$constants()!==e.$constants()}),e.defs(_,"$class_descendant_of_self_fixed?",function(){return t(p.get("String"),p.get("String"))["$!"]()}),e.defs(_,"$and_works_with_lhs_nil?",function(){var e,t=r;return t=r,((e=t!==!1&&t!==r)?r:t)["$=="](r)}),e.defs(_,"$is_set_coerced_to_array?",function(){var t,n=this,a=r;return n.$require("set"),a=p.get("Object").$new(),e.defs(a,"$splat",function(){var e=r,t=arguments.length-0;0>t&&(t=0);var n=new Array(t);for(e=0;t>e;e++)n[e]=arguments[e+0];return n["$[]"](0)}),(t=a).$splat.apply(t,e.to_a(p.get("Set").$new(p.get("Set").$new(["foo","bar"]))))["$=="]("foo")}),e.defs(_,"$fail_raise_matches_mri?",function(){var e=this,t=r;t=r;try{e.$fail()}catch(n){t=n}return t["$is_a?"](p.get("RuntimeError"))}),e.cdecl(p,"TEST_CLASS",(c=(u=p.get("Class")).$new,c.$$p=(l=function(){var t=l.$$s||this;return function(e,$super){function t(){}var n=t=$(e,$super,"ClassWithinClassNewWorks",t);n.$$proto,n.$$scope;return r}(p.base,null),e.defs(t,"$does_class_exist?",function(){return p.get("Compatibility")["$const_defined?"]("ClassWithinClassNewWorks")}),r&&"does_class_exist?"},l.$$s=_,l),c).call(u)),e.defs(_,"$class_within_class_new_works?",function(){return p.get("TEST_CLASS")["$does_class_exist?"]()}),e.defs(_,"$undef_within_exec_works?",function(){var t,n,a,o,$,i=this,s=r;return s=(t=(n=p.get("Class")).$new,t.$$p=(a=function(){var t=a.$$s||this;return e.def(t,"$bar",function(){return r}),r&&"bar"},a.$$s=i,a),t).call(n),(t=(o=s).$class_exec,t.$$p=($=function(){var t=$.$$s||this;return e.udef(t,"$bar")},$.$$s=i,$),t).call(o),s.$new()["$respond_to?"]("bar")["$!"]()}),e.defs(_,"$multiline_regex_works?",function(){return/foo.bar/m.$match("foo\nbar").$to_a()["$=="](["foo\nbar"])}),e.defs(_,"$empty_regex_works?",function(){var t,n=r;n=/(?:)/;try{return(t=n.$options()["$=="](0))?n.$match("foo").$to_s()["$=="](""):n.$options()["$=="](0)}catch(a){try{return!1}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}),e.defs(_,"$regex_case_compare_works?",function(){var t;try{return(t=/abc/["$==="](r)["$=="](!1))?/abc/["$==="](/abc/)["$=="](!1):/abc/["$==="](r)["$=="](!1)}catch(n){try{return!1}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}),function(e,$super){function t(){}var n=t=$(e,$super,"ConstTest",t);n.$$proto,n.$$scope;return r}(p.base,null),function(e){var t,n=t=a(e,"ModuleConstTest");n.$$proto,n.$$scope}(p.base),e.defs(_,"$constant_resolution_works_right?",function(){try{return p.get("ModuleConstTest").$$scope.get("ConstTest").$new(),!1}catch(t){try{return!0}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}),e.defs(_,"$exception_inspect_matches?",function(){return p.get("Exception").$new().$inspect()["$=="]("#<Exception: Exception>")}),e.defs(_,"$exception_exception_method_works?",function(){var e;return e=p.get("Exception")["$respond_to?"]("exception"),e!==!1&&e!==r?p.get("Exception").$exception()["$is_a?"](p.get("Exception")):e}),e.defs(_,"$ostruct_works_right?",function(){var e=this,t=r;return e.$require("ostruct"),t=p.get("OpenStruct").$new(i(["exist?"],{"exist?":!0})),t["$respond_to?"]("exist?")}),function(e){var t,n=t=a(e,"ModuleCase");n.$$proto,n.$$scope}(p.base),function(e){var t,n=t=a(e,"ModuleCase2"),r=(n.$$proto,n.$$scope);n.$include(r.get("ModuleCase"))}(p.base),function(e,$super){function t(){}var n=t=$(e,$super,"ModuleCase3",t),r=(n.$$proto,n.$$scope);return n.$include(r.get("ModuleCase2"))}(p.base,null),e.defs(_,"$module_case_works_right?",function(){var e,t=r;return t=p.get("ModuleCase3").$new(),e=p.get("ModuleCase")["$==="](t),e!==!1&&e!==r?t["$kind_of?"](p.get("ModuleCase")):e}),function(t){var n,r=n=a(t,"MultModSuper1");r.$$proto,r.$$scope;e.defn(r,"$stuff",function(){return"howdy"})}(p.base),function(t){var n,o,$=n=a(t,"MultModSuper2");$.$$proto,$.$$scope;e.defn($,"$stuff",o=function(){var t=this,n=o.$$p,a=r,$=r;for(o.$$p=null,a=[],$=0;$<arguments.length;$++)a[$]=arguments[$];return e.find_super_dispatcher(t,"stuff",o,n).apply(t,a)})}(p.base),function(e){var t,n=t=a(e,"MultModSuper3"),r=(n.$$proto,n.$$scope);n.$include(r.get("MultModSuper1")),n.$include(r.get("MultModSuper2"))}(p.base),function(e,$super){function t(){}var n=t=$(e,$super,"MultModSuperClass",t),r=(n.$$proto,n.$$scope);return n.$include(r.get("MultModSuper3"))}(p.base,null),e.defs(_,"$multiple_module_include_super_works_right?",function(){try{return p.get("MultModSuperClass").$new().$stuff()["$=="]("howdy")}catch(t){try{return!1}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}),e.defs(_,"$set_has_superset?",function(){var e=this;return e.$require("set"),p.get("Set").$new()["$respond_to?"]("superset?")}),e.defs(_,"$lambda_zero_arg_throws_arg_error?",function(){var t,n,r,a,o,$=this;try{return(t=(n=$).$lambda,t.$$p=(r=function(){r.$$s||this;return 3},r.$$s=$,r),t).call(n)["$==="]((t=(a=$).$lambda,t.$$p=(o=function(){o.$$s||this;return 4},o.$$s=$,o),t).call(a))["$!"]()}catch(i){try{return!0}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}})}(u.base)}(u.base)}(n.base)},Opal.modules["native"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>=t:e["$>="](t)}e.dynamic_require_severity="ignore";var r=e.top,a=e,o=e.nil,$=e.breaker,i=e.slice,s=e.module,c=e.range,u=e.hash2,l=e.klass,_=e.gvars;return e.add_stubs(["$try_convert","$native?","$respond_to?","$to_n","$raise","$inspect","$Native","$proc","$map!","$end_with?","$define_method","$[]","$convert","$call","$to_proc","$new","$each","$native_reader","$native_writer","$extend","$is_a?","$map","$alias_method","$to_a","$_Array","$include","$method_missing","$bind","$instance_method","$[]=","$slice","$-","$length","$enum_for","$===","$>=","$<<","$each_pair","$_initialize","$name","$exiting_mid","$native_module"]),function(t){var n,r,a,$=n=s(t,"Native"),l=($.$$proto,$.$$scope);e.defs($,"$is_a?",function(e,t){var n=this;try{return e instanceof n.$try_convert(t)}catch(r){return!1}}),e.defs($,"$try_convert",function(e){var t=this;return t["$native?"](e)?e:e["$respond_to?"]("to_n")?e.$to_n():o}),e.defs($,"$convert",function(e){var t=this;return t["$native?"](e)?e:e["$respond_to?"]("to_n")?e.$to_n():void t.$raise(l.get("ArgumentError"),""+e.$inspect()+" isn't native")}),e.defs($,"$call",r=function(e,t){var n=this,a=r.$$p,$=a||o,i=o,s=arguments.length-2;0>s&&(s=0);var c=new Array(s);for(i=0;s>i;i++)c[i]=arguments[i+2];r.$$p=null;var u=e[t];if(u instanceof Function){for(var l=new Array(c.length),_=0,p=c.length;p>_;_++){var d=c[_],f=n.$try_convert(d);l[_]=f===o?d:f}return $!==o&&l.push($),n.$Native(u.apply(e,l))}return n.$Native(u)}),e.defs($,"$proc",a=function(){var t,n,r,$=this,s=a.$$p,c=s||o;return a.$$p=null,c!==!1&&c!==o||$.$raise(l.get("LocalJumpError"),"no block given"),(t=(n=l.get("Kernel")).$proc,t.$$p=(r=function(t){var n,a,$,s=r.$$s||this,u=o;if(t=i.call(arguments,0),(n=(a=t)["$map!"],n.$$p=($=function(e){var t=$.$$s||this;return null==e&&(e=o),t.$Native(e)},$.$$s=s,$),n).call(a),u=s.$Native(this),this===e.global)return c.apply(s,t);var l=c.$$s;c.$$s=null;try{return c.apply(u,t)}finally{c.$$s=l}},r.$$s=$,r),t).call(n)}),function(t){var n,r=n=s(t,"Helpers"),a=(r.$$proto,r.$$scope);e.defn(r,"$alias_native",function(t,n,r){var $,s,l,_,p,d,f,g=this,h=o;if(null==n&&(n=t),null==n?r=u([],{}):n.$$is_hash?(r=n,n=t):null==r&&(r=u([],{})),!r.$$is_hash)throw e.ArgumentError.$new("expecting keyword args");return null==(h=r.$$smap.as)&&(h=o),($=n["$end_with?"]("="))===o||$.$$is_boolean&&1!=$?h!==!1&&h!==o?($=(_=g).$define_method,$.$$p=(p=function(t){var r,$,s,c,u=p.$$s||this,l=o;return null==u["native"]&&(u["native"]=o),t=i.call(arguments,0),r=p.$$p||o,p.$$p=null,($=l=(s=(c=a.get("Native")).$call,s.$$p=r.$to_proc(),s).apply(c,[u["native"],n].concat(e.to_a(t))))===o||$.$$is_boolean&&1!=$?o:h.$new(l.$to_n())},p.$$s=g,p),$).call(_,t):($=(d=g).$define_method,$.$$p=(f=function(t){var r,$,s,c=f.$$s||this;return null==c["native"]&&(c["native"]=o),t=i.call(arguments,0),r=f.$$p||o,f.$$p=null,($=(s=a.get("Native")).$call,$.$$p=r.$to_proc(),$).apply(s,[c["native"],n].concat(e.to_a(t)))},f.$$s=g,f),$).call(d,t):($=(s=g).$define_method,$.$$p=(l=function(e){var t=l.$$s||this;return null==t["native"]&&(t["native"]=o),null==e&&(e=o),t["native"][n["$[]"](c(0,-2,!1))]=a.get("Native").$convert(e),e},l.$$s=g,l),$).call(s,t)}),e.defn(r,"$native_reader",function(){var e,t,n,r=this,a=o,$=arguments.length-0;0>$&&($=0);var i=new Array($);for(a=0;$>a;a++)i[a]=arguments[a+0];return(e=(t=i).$each,e.$$p=(n=function(e){var t,r,a,$=n.$$s||this;return null==e&&(e=o),(t=(r=$).$define_method,t.$$p=(a=function(){var t=a.$$s||this;return null==t["native"]&&(t["native"]=o),t.$Native(t["native"][e])},a.$$s=$,a),t).call(r,e)},n.$$s=r,n),e).call(t)}),e.defn(r,"$native_writer",function(){var e,t,n,r=this,a=o,$=arguments.length-0;0>$&&($=0);var i=new Array($);for(a=0;$>a;a++)i[a]=arguments[a+0];return(e=(t=i).$each,e.$$p=(n=function(e){var t,r,a,$=n.$$s||this;return null==e&&(e=o),(t=(r=$).$define_method,t.$$p=(a=function(t){var n=a.$$s||this;return null==n["native"]&&(n["native"]=o),null==t&&(t=o),n.$Native(n["native"][e]=t)},a.$$s=$,a),t).call(r,""+e+"=")},n.$$s=r,n),e).call(t)}),e.defn(r,"$native_accessor",function(){var t,n,r=this,a=o,$=arguments.length-0;0>$&&($=0);var i=new Array($);for(a=0;$>a;a++)i[a]=arguments[a+0];return(t=r).$native_reader.apply(t,e.to_a(i)),(n=r).$native_writer.apply(n,e.to_a(i))})}(l.base),e.defs($,"$included",function(e){return e.$extend(l.get("Helpers"))}),e.defn($,"$initialize",function(e){var t,n=this;return((t=l.get("Kernel")["$native?"](e))===o||t.$$is_boolean&&1!=t)&&l.get("Kernel").$raise(l.get("ArgumentError"),""+e.$inspect()+" isn't native"),n["native"]=e}),e.defn($,"$to_n",function(){var e=this;return null==e["native"]&&(e["native"]=o),e["native"]})}(a.base),function(t){var n,r,a=n=s(t,"Kernel"),$=(a.$$proto,a.$$scope);e.defn(a,"$native?",function(e){return null==e||!e.$$class}),e.defn(a,"$Native",function(t){var n,r,a,s,c,u=this;return(n=null==t)===o||n.$$is_boolean&&1!=n?(n=u["$native?"](t))===o||n.$$is_boolean&&1!=n?(n=t["$is_a?"]($.get("Array")))===o||n.$$is_boolean&&1!=n?(n=t["$is_a?"]($.get("Proc")))===o||n.$$is_boolean&&1!=n?t:(n=(s=u).$proc,n.$$p=(c=function(n){var r,a,$,s=c.$$s||this;return n=i.call(arguments,0),r=c.$$p||o,c.$$p=null,s.$Native((a=($=t).$call,a.$$p=r.$to_proc(),a).apply($,e.to_a(n)))},c.$$s=u,c),n).call(s):(n=(r=t).$map,n.$$p=(a=function(e){var t=a.$$s||this;return null==e&&(e=o),t.$Native(e)},a.$$s=u,a),n).call(r):$.get("Native").$$scope.get("Object").$new(t):o}),a.$alias_method("_Array","Array"),e.defn(a,"$Array",r=function(t){var n,a,i=this,s=r.$$p,c=s||o,u=o,l=arguments.length-1;0>l&&(l=0);var _=new Array(l);for(u=0;l>u;u++)_[u]=arguments[u+1];return r.$$p=null,(n=i["$native?"](t))===o||n.$$is_boolean&&1!=n?i.$_Array(t):(n=(a=$.get("Native").$$scope.get("Array")).$new,n.$$p=c.$to_proc(),n).apply(a,[t].concat(e.to_a(_))).$to_a()})}(a.base),function(n,$super){function r(){}var a,i,s,c=r=l(n,$super,"Object",r),_=c.$$proto,p=c.$$scope;return _["native"]=o,c.$include(e.get("Native")),e.defn(c,"$==",function(e){var t=this;return t["native"]===p.get("Native").$try_convert(e)}),e.defn(c,"$has_key?",function(t){var n=this;return e.hasOwnProperty.call(n["native"],t)}),e.alias(c,"key?","has_key?"),e.alias(c,"include?","has_key?"),e.alias(c,"member?","has_key?"),e.defn(c,"$each",a=function(){var t,n=this,r=a.$$p,i=r||o,s=o,c=arguments.length-0;0>c&&(c=0);var u=new Array(c);for(s=0;c>s;s++)u[s]=arguments[s+0];if(a.$$p=null,i!==o){for(var l in n["native"])(t=e.yieldX(i,[l,n["native"][l]]))===$?$.$v:t;return n}return(t=n).$method_missing.apply(t,["each"].concat(e.to_a(u)))}),e.defn(c,"$[]",function(t){var n=this,r=n["native"][t];return r instanceof Function?r:e.get("Native").$call(n["native"],t)}),e.defn(c,"$[]=",function(e,t){var n,r=this,a=o;return a=p.get("Native").$try_convert(t),(n=a===o)===o||n.$$is_boolean&&1!=n?r["native"][e]=a:r["native"][e]=t}),e.defn(c,"$merge!",function(e){var t=this;e=p.get("Native").$convert(e);for(var n in e)t["native"][n]=e[n];return t}),e.defn(c,"$respond_to?",function(e,t){var n=this;return null==t&&(t=!1),p.get("Kernel").$instance_method("respond_to?").$bind(n).$call(e,t)}),e.defn(c,"$respond_to_missing?",function(t,n){var r=this;return null==n&&(n=!1),e.hasOwnProperty.call(r["native"],t)}),e.defn(c,"$method_missing",i=function(n){var r,a,$=this,s=i.$$p,c=s||o,u=o,l=arguments.length-1;0>l&&(l=0);var _=new Array(l);for(u=0;l>u;u++)_[u]=arguments[u+1];return i.$$p=null,"="===n.charAt(n.length-1)?$["$[]="](n.$slice(0,t(n.$length(),1)),_["$[]"](0)):(r=(a=e.get("Native")).$call,r.$$p=c.$to_proc(),r).apply(a,[$["native"],n].concat(e.to_a(_)))}),e.defn(c,"$nil?",function(){return!1}),e.defn(c,"$is_a?",function(t){var n=this;return e.is_a(n,t)}),e.alias(c,"kind_of?","is_a?"),e.defn(c,"$instance_of?",function(e){var t=this;return t.$$class===e}),e.defn(c,"$class",function(){var e=this;return e.$$class}),e.defn(c,"$to_a",s=function(e){var t,n,r=this,a=s.$$p,$=a||o;return null==e&&(e=u([],{})),s.$$p=null,(t=(n=p.get("Native").$$scope.get("Array")).$new,t.$$p=$.$to_proc(),t).call(n,r["native"],e).$to_a()}),e.defn(c,"$inspect",function(){var e=this;return"#<Native:"+String(e["native"])+">"}),o&&"inspect"}(a.get("Native"),a.get("BasicObject")),function(r,$super){function a(){}var i,s,c=a=l(r,$super,"Array",a),_=c.$$proto,p=c.$$scope;return _.named=_["native"]=_.get=_.block=_.set=_.length=o,c.$include(p.get("Native")),c.$include(p.get("Enumerable")),e.defn(c,"$initialize",i=function(t,n){var r,a=this,$=i.$$p,s=$||o;return null==n&&(n=u([],{})),i.$$p=null,e.find_super_dispatcher(a,"initialize",i,null).apply(a,[t]),a.get=(r=n["$[]"]("get"))!==!1&&r!==o?r:n["$[]"]("access"),a.named=n["$[]"]("named"),a.set=(r=n["$[]"]("set"))!==!1&&r!==o?r:n["$[]"]("access"),a.length=(r=n["$[]"]("length"))!==!1&&r!==o?r:"length",a.block=s,(r=null==a.$length())===o||r.$$is_boolean&&1!=r?o:a.$raise(p.get("ArgumentError"),"no length found on the array-like object")}),e.defn(c,"$each",s=function(){var t=this,n=s.$$p,r=n||o;if(s.$$p=null,r===!1||r===o)return t.$enum_for("each");for(var a=0,i=t.$length();i>a;a++){var c=e.yield1(r,t["$[]"](a));if(c===$)return $.$v}return t}),e.defn(c,"$[]",function(e){var t,n=this,r=o,a=o;return r=function(){return a=e,p.get("String")["$==="](a)||p.get("Symbol")["$==="](a)?(t=n.named)===o||t.$$is_boolean&&1!=t?n["native"][e]:n["native"][n.named](e):p.get("Integer")["$==="](a)?(t=n.get)===o||t.$$is_boolean&&1!=t?n["native"][e]:n["native"][n.get](e):o}(),r!==!1&&r!==o?(t=n.block)===o||t.$$is_boolean&&1!=t?n.$Native(r):n.block.$call(r):o}),e.defn(c,"$[]=",function(e,t){var n,r=this;return(n=r.set)===o||n.$$is_boolean&&1!=n?r["native"][e]=p.get("Native").$convert(t):r["native"][r.set](e,p.get("Native").$convert(t))}),e.defn(c,"$last",function(e){var r=this,a=o,$=o;if(null==e&&(e=o),e!==!1&&e!==o){for(a=t(r.$length(),1),$=[];n(a,0);)$["$<<"](r["$[]"](a)),a=t(a,1);return $}return r["$[]"](t(r.$length(),1))}),e.defn(c,"$length",function(){var e=this;return e["native"][e.length]}),e.alias(c,"to_ary","to_a"),e.defn(c,"$inspect",function(){var e=this;return e.$to_a().$inspect()}),o&&"inspect"}(a.get("Native"),null),function(t,$super){function n(){}var r=n=l(t,$super,"Numeric",n);r.$$proto,r.$$scope;return e.defn(r,"$to_n",function(){var e=this;return e.valueOf()}),o&&"to_n"}(a.base,null),function(t,$super){function n(){}var r=n=l(t,$super,"Proc",n);r.$$proto,r.$$scope;return e.defn(r,"$to_n",function(){var e=this;return e}),o&&"to_n"}(a.base,null),function(t,$super){function n(){}var r=n=l(t,$super,"String",n);r.$$proto,r.$$scope;return e.defn(r,"$to_n",function(){var e=this;return e.valueOf()}),o&&"to_n"}(a.base,null),function(t,$super){function n(){}var r=n=l(t,$super,"Regexp",n);r.$$proto,r.$$scope;return e.defn(r,"$to_n",function(){var e=this;return e.valueOf()}),o&&"to_n"}(a.base,null),function(t,$super){function n(){}var r=n=l(t,$super,"MatchData",n),a=r.$$proto;r.$$scope;return a.matches=o,e.defn(r,"$to_n",function(){var e=this;return e.matches}),o&&"to_n"}(a.base,null),function(t,$super){function n(){}var r=n=l(t,$super,"Struct",n),a=(r.$$proto,r.$$scope);return e.defn(r,"$to_n",function(){var e,t,n,r=this,$=o;return $={},(e=(t=r).$each_pair,e.$$p=(n=function(e,t){n.$$s||this;return null==e&&(e=o),null==t&&(t=o),$[e]=a.get("Native").$try_convert(t)},n.$$s=r,n),e).call(t),$}),o&&"to_n"}(a.base,null),function(t,$super){function n(){}var r=n=l(t,$super,"Array",n),a=(r.$$proto,r.$$scope);return e.defn(r,"$to_n",function(){for(var e=this,t=[],n=0,r=e.length;r>n;n++){var o=e[n];t.push(a.get("Native").$try_convert(o))}return t}),o&&"to_n"}(a.base,null),function(t,$super){function n(){}var r=n=l(t,$super,"Boolean",n);r.$$proto,r.$$scope;return e.defn(r,"$to_n",function(){var e=this;return e.valueOf()}),o&&"to_n"}(a.base,null),function(t,$super){function n(){}var r=n=l(t,$super,"Time",n);r.$$proto,r.$$scope;return e.defn(r,"$to_n",function(){var e=this;return e}),o&&"to_n"}(a.base,null),function(t,$super){function n(){}var r=n=l(t,$super,"NilClass",n);r.$$proto,r.$$scope;return e.defn(r,"$to_n",function(){return null}),o&&"to_n"}(a.base,null),function(t,$super){function n(){}var r,a=n=l(t,$super,"Hash",n),$=(a.$$proto,a.$$scope);return a.$alias_method("_initialize","initialize"),e.defn(a,"$initialize",r=function(e){var t,n,a=this,i=r.$$p,s=i||o;if(r.$$p=null,void 0!==e&&e.constructor===Object){var c,u,l=a.$$smap,_=a.$$keys;for(c in e)u=e[c],u&&u.constructor===Object?l[c]=$.get("Hash").$new(u):u&&u.$$is_array?(u=u.map(function(e){return e&&e.constructor===Object?$.get("Hash").$new(e):e}),l[c]=u):l[c]=a.$Native(u),_.push(c);return a}return(t=(n=a).$_initialize,t.$$p=s.$to_proc(),t).call(n,e)}),e.defn(a,"$to_n",function(){for(var e,t,n=this,r={},a=n.$$keys,o=n.$$smap,i=0,s=a.length;s>i;i++)e=a[i],e.$$is_string?t=o[e]:(e=e.key,t=e.value),r[e]=$.get("Native").$try_convert(t);return r}),o&&"to_n"}(a.base,null),function(t,$super){function n(){}var r=n=l(t,$super,"Module",n);r.$$proto,r.$$scope;return e.defn(r,"$native_module",function(){var t=this;return e.global[t.$name()]=t}),o&&"native_module"}(a.base,null),function(t,$super){function n(){}var r=n=l(t,$super,"Class",n),a=(r.$$proto,r.$$scope);return e.defn(r,"$native_alias",function(e,t){var n=this,r=n.$$proto["$"+t];r||n.$raise(a.get("NameError").$new("undefined method `"+t+"' for class `"+n.$inspect()+"'",n.$exiting_mid())),
n.$$proto[e]=r}),e.defn(r,"$native_class",function(){var e=this;e.$native_module(),e["new"]=e.$new}),o&&"native_class"}(a.base,null),_.$=_.global=r.$Native(e.global)},Opal.modules["opal/rspec/fixes/opal/corelib/struct"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>=t:e["$>="](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="ignore";var a,o=e.top,$=e,i=e.nil,s=e.breaker,c=(e.slice,e.module),u=e.klass,l=e.hash2;return e.add_stubs(["$is_struct_hash_correct?","$coerce_to!","$require","$include","$==","$[]","$upcase","$const_set","$new","$unshift","$each","$define_struct_attribute","$instance_eval","$to_proc","$allocate","$initialize","$raise","$<<","$members","$define_method","$[]=","$each_with_index","$class","$===","$<","$-@","$size","$>=","$include?","$to_sym","$instance_of?","$__id__","$hash","$eql?","$enum_for","$length","$map","$+","$join","$inspect","$each_pair","$inject","$flatten","$to_a"]),(a=$.get("Opal").$$scope.get("RSpec").$$scope.get("Compatibility")["$is_struct_hash_correct?"]())===i||a.$$is_boolean&&1!=a?(function(t){var n,r=n=c(t,"Opal"),a=(r.$$proto,r.$$scope);e.defs(r,"$valid_method_name?",function(e){return e=a.get("Opal")["$coerce_to!"](e,a.get("String"),"to_str"),/^[a-zA-Z_][a-zA-Z0-9_]*?$/.test(e)})}($.base),o.$require("native"),function(a,$super){function o(){}var $,c,_,p=o=u(a,$super,"Struct",o),d=(p.$$proto,p.$$scope);return p.$include(d.get("Enumerable")),e.defs(p,"$new",$=function(t){var n,r,a,s,c=this,u=$.$$p,l=u||i,_=i,p=i,f=i,g=arguments.length-1;0>g&&(g=0);var h=new Array(g);for(_=0;g>_;_++)h[_]=arguments[_+1];for($.$$p=null,p=[],f=0;f<arguments.length;f++)p[f]=arguments[f];return c["$=="](d.get("Struct"))?t["$[]"](0)["$=="](t["$[]"](0).$upcase())?d.get("Struct").$const_set(t,(n=c).$new.apply(n,e.to_a(h))):(h.$unshift(t),(r=(a=d.get("Class")).$new,r.$$p=(s=function(){var t,n,r,a,o=s.$$s||this;return(t=(n=h).$each,t.$$p=(r=function(e){var t=r.$$s||this;return null==e&&(e=i),t.$define_struct_attribute(e)},r.$$s=o,r),t).call(n),l!==!1&&l!==i&&(t=(a=o).$instance_eval,t.$$p=l.$to_proc(),t).call(a),function(t){t.$$scope,t.$$proto;return e.defn(t,"$new",function(){var t,n=this,r=i,a=i,o=arguments.length-0;0>o&&(o=0);var $=new Array(o);for(a=0;o>a;a++)$[a]=arguments[a+0];return r=n.$allocate(),r.$$data={},(t=r).$initialize.apply(t,e.to_a($)),r}),e.alias(t,"[]","new")}(e.get_singleton_class(o))},s.$$s=c,s),r).call(a,c)):e.find_super_dispatcher(c,"new",$,u,o).apply(c,p)}),e.defs(p,"$define_struct_attribute",function(e){var t,n,r,a,o,$=this;return $["$=="](d.get("Struct"))&&$.$raise(d.get("ArgumentError"),"you cannot define attributes to the Struct class"),$.$members()["$<<"](e),(t=(n=$).$define_method,t.$$p=(r=function(){var t=r.$$s||this;return t["$[]"](e)},r.$$s=$,r),t).call(n,e),(t=(a=$).$define_method,t.$$p=(o=function(t){var n=o.$$s||this;return null==t&&(t=i),n["$[]="](e,t)},o.$$s=$,o),t).call(a,""+e+"=")}),e.defs(p,"$members",function(){var e,t=this;return null==t.members&&(t.members=i),t["$=="](d.get("Struct"))&&t.$raise(d.get("ArgumentError"),"the Struct class has no members"),(e=t.members)!==!1&&e!==i?e:t.members=[]}),e.defs(p,"$inherited",function(e){var t,n,r,a=this,o=i;return null==a.members&&(a.members=i),o=a.members,(t=(n=e).$instance_eval,t.$$p=(r=function(){var e=r.$$s||this;return e.members=o},r.$$s=a,r),t).call(n)}),e.defn(p,"$initialize",function(){var e,t,n,r=this,a=i,o=arguments.length-0;0>o&&(o=0);var $=new Array(o);for(a=0;o>a;a++)$[a]=arguments[a+0];return(e=(t=r.$members()).$each_with_index,e.$$p=(n=function(e,t){var r=n.$$s||this;return null==e&&(e=i),null==t&&(t=i),r["$[]="](e,$["$[]"](t))},n.$$s=r,n),e).call(t)}),e.defn(p,"$members",function(){var e=this;return e.$class().$members()}),e.defn(p,"$[]",function(e){var r,a=this;return(r=d.get("Integer")["$==="](e))===i||r.$$is_boolean&&1!=r?(r=d.get("String")["$==="](e))===i||r.$$is_boolean&&1!=r?a.$raise(d.get("TypeError"),"no implicit conversion of "+e.$class()+" into Integer"):((r=a.$members()["$include?"](e.$to_sym()))===i||r.$$is_boolean&&1!=r)&&a.$raise(d.get("NameError"),"no member '"+e+"' in struct"):(t(e,a.$members().$size()["$-@"]())&&a.$raise(d.get("IndexError"),"offset "+e+" too small for struct(size:"+a.$members().$size()+")"),n(e,a.$members().$size())&&a.$raise(d.get("IndexError"),"offset "+e+" too large for struct(size:"+a.$members().$size()+")"),e=a.$members()["$[]"](e)),e=d.get("Opal")["$coerce_to!"](e,d.get("String"),"to_str"),a.$$data[e]}),e.defn(p,"$[]=",function(e,r){var a,o=this;return(a=d.get("Integer")["$==="](e))===i||a.$$is_boolean&&1!=a?(a=d.get("String")["$==="](e))===i||a.$$is_boolean&&1!=a?o.$raise(d.get("TypeError"),"no implicit conversion of "+e.$class()+" into Integer"):((a=o.$members()["$include?"](e.$to_sym()))===i||a.$$is_boolean&&1!=a)&&o.$raise(d.get("NameError"),"no member '"+e+"' in struct"):(t(e,o.$members().$size()["$-@"]())&&o.$raise(d.get("IndexError"),"offset "+e+" too small for struct(size:"+o.$members().$size()+")"),n(e,o.$members().$size())&&o.$raise(d.get("IndexError"),"offset "+e+" too large for struct(size:"+o.$members().$size()+")"),e=o.$members()["$[]"](e)),e=d.get("Opal")["$coerce_to!"](e,d.get("String"),"to_str"),o.$$data[e]=r}),e.defn(p,"$==",function(e){function t(e,n){var r,$,i;a[e.$__id__()]=!0,o[n.$__id__()]=!0;for(r in e.$$data)if($=e.$$data[r],i=n.$$data[r],d.get("Struct")["$==="]($)){if(!(a.hasOwnProperty($.$__id__())&&o.hasOwnProperty(i.$__id__())||t($,i)))return!1}else if(!$["$=="](i))return!1;return!0}var n,r=this;if((n=e["$instance_of?"](r.$class()))===i||n.$$is_boolean&&1!=n)return!1;var a={},o={};return t(r,e)}),e.defn(p,"$hash",function(){var e=this;return d.get("Hash").$new(e.$$data).$hash()}),e.defn(p,"$eql?",function(e){function t(e,n){var r,$,i;a[e.$__id__()]=!0,o[n.$__id__()]=!0;for(r in e.$$data)if($=e.$$data[r],i=n.$$data[r],d.get("Struct")["$==="]($)){if(!(a.hasOwnProperty($.$__id__())&&o.hasOwnProperty(i.$__id__())||t($,i)))return!1}else if(!$["$eql?"](i))return!1;return!0}var n,r=this;if((n=e["$instance_of?"](r.$class()))===i||n.$$is_boolean&&1!=n)return!1;var a={},o={};return t(r,e)}),e.defn(p,"$each",c=function(){var t,n,r,a,o,$=this,u=c.$$p,l=u||i;return c.$$p=null,l===i?(t=(n=$).$enum_for,t.$$p=(r=function(){var e=r.$$s||this;return e.$size()},r.$$s=$,r),t).call(n,"each"):((t=(a=$.$members()).$each,t.$$p=(o=function(t){var n,r=o.$$s||this;return null==t&&(t=i),n=e.yield1(l,r["$[]"](t)),n===s?n:n},o.$$s=$,o),t).call(a),$)}),e.defn(p,"$each_pair",_=function(){var t,n,r,a,o,$=this,c=_.$$p,u=c||i;return _.$$p=null,u===i?(t=(n=$).$enum_for,t.$$p=(r=function(){var e=r.$$s||this;return e.$size()},r.$$s=$,r),t).call(n,"each_pair"):((t=(a=$.$members()).$each,t.$$p=(o=function(t){var n,r=o.$$s||this;return null==t&&(t=i),n=e.yield1(u,[t,r["$[]"](t)]),n===s?n:n},o.$$s=$,o),t).call(a),$)}),e.defn(p,"$length",function(){var e=this;return e.$members().$length()}),e.alias(p,"size","length"),e.defn(p,"$to_a",function(){var e,t,n,r=this;return(e=(t=r.$members()).$map,e.$$p=(n=function(e){var t=n.$$s||this;return null==e&&(e=i),t["$[]"](e)},n.$$s=r,n),e).call(t)}),e.alias(p,"values","to_a"),e.defn(p,"$inspect",function(){var e,t,n,a=this,o=i;return o="#<struct ",a.$class()["$=="](d.get("Struct"))&&(o=r(o,""+a.$class()+" ")),o=r(o,(e=(t=a.$each_pair()).$map,e.$$p=(n=function(e,t){n.$$s||this;return null==e&&(e=i),null==t&&(t=i),""+e+"="+t.$inspect()},n.$$s=a,n),e).call(t).$join(", ")),o=r(o,">")}),e.alias(p,"to_s","inspect"),e.defn(p,"$to_h",function(){var e,t,n,r=this;return(e=(t=r.$members()).$inject,e.$$p=(n=function(e,t){var r=n.$$s||this;return null==e&&(e=i),null==t&&(t=i),e["$[]="](t,r["$[]"](t)),e},n.$$s=r,n),e).call(t,l([],{}))}),e.defn(p,"$values_at",function(){var e,t,n,r=this,a=i,o=arguments.length-0;0>o&&(o=0);var $=new Array(o);for(a=0;o>a;a++)$[a]=arguments[a+0];$=(e=(t=$).$map,e.$$p=(n=function(e){n.$$s||this;return null==e&&(e=i),e.$$is_range?e.$to_a():e},n.$$s=r,n),e).call(t).$flatten();for(var s=[],c=0,u=$.length;u>c;c++)$[c].$$is_number||r.$raise(d.get("TypeError"),"no implicit conversion of "+$[c].$class()+" into Integer"),s.push(r["$[]"]($[c]));return s}),i&&"values_at"}($.base,null)):i},Opal.modules["rspec/support/ruby_features"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>=t:e["$>="](t)}e.dynamic_require_severity="ignore";var n=(e.top,e),r=e.nil,a=(e.breaker,e.slice,e.module);return e.add_stubs(["$==","$module_function","$method_defined?","$>=","$!=","$private_method_defined?","$to_i"]),function(n){var o,$=o=a(n,"RSpec"),i=($.$$proto,$.$$scope);!function(n){var o,$=o=a(n,"Support"),i=($.$$proto,$.$$scope);!function(t){var n,r=n=a(t,"Ruby"),o=(r.$$proto,r.$$scope);e.defn(r,"$jruby?",function(){return o.get("RUBY_PLATFORM")["$=="]("java")}),r.$module_function("jruby?")}(i.base),function(n){var o,$=o=a(n,"RubyFeatures"),i=($.$$proto,$.$$scope);e.defn($,"$optional_and_splat_args_supported?",function(){return i.get("Method")["$method_defined?"]("parameters")}),$.$module_function("optional_and_splat_args_supported?"),e.defn($,"$kw_args_supported?",function(){var e,n;return e=(n=t(i.get("RUBY_VERSION"),"2.0.0"))?i.get("RUBY_ENGINE")["$!="]("rbx"):t(i.get("RUBY_VERSION"),"2.0.0"),e!==!1&&e!==r?i.get("RUBY_ENGINE")["$!="]("jruby"):e}),$.$module_function("kw_args_supported?"),e.defn($,"$required_kw_args_supported?",function(){var e,n;return e=(n=t(i.get("RUBY_VERSION"),"2.1.0"))?i.get("RUBY_ENGINE")["$!="]("rbx"):t(i.get("RUBY_VERSION"),"2.1.0"),e!==!1&&e!==r?i.get("RUBY_ENGINE")["$!="]("jruby"):e}),$.$module_function("required_kw_args_supported?"),e.defn($,"$module_prepends_supported?",function(){var e;return(e=i.get("Module")["$method_defined?"]("prepend"))!==!1&&e!==r?e:i.get("Module")["$private_method_defined?"]("prepend")}),$.$module_function("module_prepends_supported?"),e.defn($,"$supports_rebinding_module_methods?",function(){var e,n;return e=(n=t(i.get("RUBY_VERSION").$to_i(),2))?i.get("RUBY_ENGINE")["$!="]("rbx"):t(i.get("RUBY_VERSION").$to_i(),2),e!==!1&&e!==r?i.get("RUBY_ENGINE")["$!="]("jruby"):e}),$.$module_function("supports_rebinding_module_methods?")}(i.base)}(i.base)}(n.base)},Opal.modules["opal/rspec/fixes/rspec/support/ruby_features"]=function(e){e.dynamic_require_severity="ignore";var t=e.top,n=(e.nil,e.breaker,e.slice,e.module);return e.add_stubs(["$require"]),t.$require("rspec/support/ruby_features"),function(t){var r,a=r=n(t,"RubyFeatures");a.$$proto,a.$$scope;e.defn(a,"$required_kw_args_supported?",function(){return!1})}(e.get("RSpec").$$scope.get("Support"))},Opal.modules["opal/rspec/pre_require_fixes"]=function(e){e.dynamic_require_severity="ignore";var t,n=e.top,r=e,a=e.nil,o=(e.breaker,e.slice,e.klass);return((t=null!=r.RUBY_DESCRIPTION)===a||t.$$is_boolean&&1!=t)&&e.cdecl(r,"RUBY_DESCRIPTION",r.get("RUBY_VERSION")),((t=null!=r.SecurityError)===a||t.$$is_boolean&&1!=t)&&!function(e,$super){function t(){}var n=t=o(e,$super,"SecurityError",t);n.$$proto,n.$$scope;return a}(r.base,r.get("Exception")),n.$require("opal/rspec/pre_require_fixes/../fixes/opal/compatibility"),n.$require("opal/rspec/pre_require_fixes/../fixes/opal/corelib/struct"),n.$require("opal/rspec/pre_require_fixes/../fixes/rspec/support/ruby_features")},Opal.modules.template=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.klass),a=e.hash2;return e.add_stubs(["$[]","$[]=","$keys","$attr_reader","$instance_exec","$to_proc","$new","$<<","$join"]),function(t,$super){function o(){}var $,i=o=r(t,$super,"Template",o),s=i.$$proto,c=i.$$scope;return s.name=s.body=n,i._cache=a([],{}),e.defs(i,"$[]",function(e){var t,r=this;return null==r._cache&&(r._cache=n),(t=r._cache["$[]"](e))!==!1&&t!==n?t:r._cache["$[]"]("templates/"+e)}),e.defs(i,"$[]=",function(e,t){var r=this;return null==r._cache&&(r._cache=n),r._cache["$[]="](e,t)}),e.defs(i,"$paths",function(){var e=this;return null==e._cache&&(e._cache=n),e._cache.$keys()}),i.$attr_reader("body"),e.defn(i,"$initialize",$=function(e){var t,r=this,a=$.$$p,o=a||n;return $.$$p=null,t=[e,o],r.name=t[0],r.body=t[1],t,c.get("Template")["$[]="](e,r)}),e.defn(i,"$inspect",function(){var e=this;return"#<Template: '"+e.name+"'>"}),e.defn(i,"$render",function(e){var t,n,r=this;return null==e&&(e=r),(t=(n=e).$instance_exec,t.$$p=r.body.$to_proc(),t).call(n,c.get("OutputBuffer").$new())}),function(t,$super){function a(){}var o=a=r(t,$super,"OutputBuffer",a),$=o.$$proto;o.$$scope;return $.buffer=n,e.defn(o,"$initialize",function(){var e=this;return e.buffer=[]}),e.defn(o,"$append",function(e){var t=this;return t.buffer["$<<"](e)}),e.alias(o,"append=","append"),e.defn(o,"$join",function(){var e=this;return e.buffer.$join()}),n&&"join"}(c.base,null)}(t.base,null)},Opal.modules.erb=function(e){e.dynamic_require_severity="ignore";var t=e.top,n=e,r=(e.nil,e.breaker,e.slice,e.klass),a=e.module;return e.add_stubs(["$require","$module_function"]),t.$require("template"),function(t,$super){function n(){}var o=n=r(t,$super,"ERB",n),$=(o.$$proto,o.$$scope);return function(t){var n,r=n=a(t,"Util"),o=(r.$$proto,r.$$scope,{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),$=/[&<>"']/g;e.defn(r,"$html_escape",function(e){return(""+e).replace($,function(e){return o[e]})}),e.alias(r,"h","html_escape"),r.$module_function("h"),r.$module_function("html_escape")}($.base)}(n.base,null)},Opal.modules.json=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.hash2,o=e.klass;return e.add_stubs(["$new","$push","$[]=","$[]","$create_id","$json_create","$attr_accessor","$create_id=","$===","$parse","$generate","$from_object","$merge","$to_json","$responds_to?","$to_io","$write","$to_s","$to_a","$strftime"]),function(t){function o(t,r){var a,$,i,s,c,l;switch(typeof t){case"string":return t;case"number":return t;case"boolean":return!!t;case"null":return n;case"object":if(!t)return n;if(t.$$is_array){for($=r.array_class.$new(),s=0,c=t.length;c>s;s++)$.$push(o(t[s],r));return $}i=r.object_class.$new();for(l in t)_.call(t,l)&&i["$[]="](l,o(t[l],r));return r.parse||(a=i["$[]"](u.get("JSON").$create_id()))==n?i:(a=e.get(a),a.$json_create(i))}}var $,i,s,c=$=r(t,"JSON"),u=(c.$$proto,c.$$scope),l=JSON.parse,_=e.hasOwnProperty;!function(e){e.$$scope,e.$$proto;return e.$attr_accessor("create_id")}(e.get_singleton_class(c)),i=["json_class"],s=c,s["$create_id="].apply(s,i),i[i.length-1],e.defs(c,"$[]",function(e,t){var r,o=this;return null==t&&(t=a([],{})),(r=u.get("String")["$==="](e))===n||r.$$is_boolean&&1!=r?o.$generate(e,t):o.$parse(e,t)}),e.defs(c,"$parse",function(e,t){var n=this;return null==t&&(t=a([],{})),n.$from_object(l(e),t.$merge(a(["parse"],{parse:!0})))}),e.defs(c,"$parse!",function(e,t){var n=this;return null==t&&(t=a([],{})),n.$parse(e,t)}),e.defs(c,"$load",function(e,t){var n=this;return null==t&&(t=a([],{})),n.$from_object(l(e),t)}),e.defs(c,"$from_object",function(e,t){var r,$,i;return null==t&&(t=a([],{})),r="object_class",$=t,(i=$["$[]"](r))!==!1&&i!==n?i:$["$[]="](r,u.get("Hash")),r="array_class",$=t,(i=$["$[]"](r))!==!1&&i!==n?i:$["$[]="](r,u.get("Array")),o(e,t.$$smap)}),e.defs(c,"$generate",function(e,t){return null==t&&(t=a([],{})),e.$to_json(t)}),e.defs(c,"$dump",function(e,t,r){var a,o=this,$=n;return null==t&&(t=n),null==r&&(r=n),$=o.$generate(e),t!==!1&&t!==n?((a=t["$responds_to?"]("to_io"))===n||a.$$is_boolean&&1!=a||(t=t.$to_io()),t.$write($),t):$})}(t.base),function(t,$super){function r(){}var a=r=o(t,$super,"Object",r);a.$$proto,a.$$scope;return e.defn(a,"$to_json",function(){var e=this;return e.$to_s().$to_json()}),n&&"to_json"}(t.base,null),function(t){var n,a=n=r(t,"Enumerable");a.$$proto,a.$$scope;e.defn(a,"$to_json",function(){var e=this;return e.$to_a().$to_json()})}(t.base),function(t,$super){function r(){}var a=r=o(t,$super,"Array",r);a.$$proto,a.$$scope;return e.defn(a,"$to_json",function(){for(var e=this,t=[],n=0,r=e.length;r>n;n++)t.push(e[n].$to_json());return"["+t.join(", ")+"]"}),n&&"to_json"}(t.base,null),function(t,$super){function r(){}var a=r=o(t,$super,"Boolean",r);a.$$proto,a.$$scope;return e.defn(a,"$to_json",function(){var e=this;return 1==e?"true":"false"}),n&&"to_json"}(t.base,null),function(t,$super){function r(){}var a=r=o(t,$super,"Hash",r);a.$$proto,a.$$scope;return e.defn(a,"$to_json",function(){for(var e,t,n=this,r=[],a=0,o=n.$$keys,$=o.length;$>a;a++)e=o[a],e.$$is_string?t=n.$$smap[e]:(t=e.value,e=e.key),r.push(e.$to_s().$to_json()+":"+t.$to_json());return"{"+r.join(", ")+"}"}),n&&"to_json"}(t.base,null),function(t,$super){function r(){}var a=r=o(t,$super,"NilClass",r);a.$$proto,a.$$scope;return e.defn(a,"$to_json",function(){return"null"}),n&&"to_json"}(t.base,null),function(t,$super){function r(){}var a=r=o(t,$super,"Numeric",r);a.$$proto,a.$$scope;return e.defn(a,"$to_json",function(){var e=this;return e.toString()}),n&&"to_json"}(t.base,null),function(t,$super){function n(){}var r=n=o(t,$super,"String",n);r.$$proto,r.$$scope;return e.alias(r,"to_json","inspect")}(t.base,null),function(t,$super){function r(){}var a=r=o(t,$super,"Time",r);a.$$proto,a.$$scope;return e.defn(a,"$to_json",function(){var e=this;return e.$strftime("%FT%T%z").$to_json()}),n&&"to_json"}(t.base,null),function(t,$super){function r(){}var a=r=o(t,$super,"Date",r);a.$$proto,a.$$scope;return e.defn(a,"$to_json",function(){var e=this;return e.$to_s().$to_json()}),e.defn(a,"$as_json",function(){var e=this;return e.$to_s()}),n&&"as_json"}(t.base,null)},Opal.modules.pathname=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.klass),a=e.module;return e.add_stubs(["$==","$raise","$attr_reader","$path","$start_with?","$!","$absolute?","$sub","$new"]),function(t,$super){function a(){}var o=a=r(t,$super,"Pathname",a),$=o.$$proto,i=o.$$scope;return $.path=n,e.defn(o,"$initialize",function(e){var t=this;return e["$=="]("\x00")&&t.$raise(i.get("ArgumentError")),t.path=e}),o.$attr_reader("path"),e.defn(o,"$==",function(e){var t=this;return e.$path()["$=="](t.path)}),e.defn(o,"$absolute?",function(){var e=this;return e.path["$start_with?"]("/")}),e.defn(o,"$relative?",function(){var e=this;return e["$absolute?"]()["$!"]()}),e.defn(o,"$root?",function(){var e=this;return e.path["$=="]("/")}),e.defn(o,"$parent",function(){var e,t=this,r=n;return r=t.path.$sub(/\/([^\/]+\/?$)/,""),r["$=="]("")&&(r=function(){return(e=t["$absolute?"]())===n||e.$$is_boolean&&1!=e?".":"/"}()),i.get("Pathname").$new(r)}),e.defn(o,"$sub",function(){var t,r=this,a=n,o=arguments.length-0;0>o&&(o=0);var $=new Array(o);for(a=0;o>a;a++)$[a]=arguments[a+0];return i.get("Pathname").$new((t=r.path).$sub.apply(t,e.to_a($)))}),e.defn(o,"$cleanpath",function(){var t=this;return e.normalize_loadable_path(t.path)}),e.defn(o,"$to_path",function(){var e=this;return e.path}),e.defn(o,"$hash",function(){var e=this;return e.path}),e.alias(o,"to_str","to_path"),e.alias(o,"to_s","to_path")}(t.base,null),function(t){var n,r=n=a(t,"Kernel"),o=(r.$$proto,r.$$scope);e.defn(r,"$Pathname",function(e){return o.get("Pathname").$new(e)})}(t.base)},Opal.modules.rbconfig=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.hash2;return e.add_stubs(["$split","$[]"]),function(t){var o,$=o=r(t,"RbConfig"),i=($.$$proto,$.$$scope),s=n;s=i.get("RUBY_VERSION").$split("."),e.cdecl(i,"CONFIG",a(["ruby_version","MAJOR","MINOR","TEENY","RUBY","RUBY_INSTALL_NAME","RUBY_SO_NAME","target_os","host_os","PATH_SEPARATOR"],{ruby_version:i.get("RUBY_VERSION"),MAJOR:s["$[]"](0),MINOR:s["$[]"](1),TEENY:s["$[]"](2),RUBY:i.get("RUBY_ENGINE"),RUBY_INSTALL_NAME:i.get("RUBY_ENGINE"),RUBY_SO_NAME:i.get("RUBY_ENGINE"),target_os:"ECMA-262",host_os:"ECMA-262",PATH_SEPARATOR:":"}))}(t.base),e.cdecl(t,"RUBY_EXE","bundle exec bin/opal")},Opal.modules["rspec/support"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module);return e.add_stubs(["$respond_to?","$__send__","$call","$require","$define_optimized_require_for_rspec","$require_rspec_support","$instance_method","$supports_rebinding_module_methods?","$bind","$method","$is_a?","$raise","$==="]),function(t){var a,o=a=r(t,"RSpec"),$=(o.$$proto,o.$$scope);!function(t){var a,o,$,i,s,c=a=r(t,"Support"),u=(c.$$proto,c.$$scope);e.defs(c,"$define_optimized_require_for_rspec",o=function(t){var r,a,$,i,s,c=this,l=o.$$p,_=l||n,p=n;return o.$$p=null,p="require_rspec_"+t,(r=u.get("Kernel")["$respond_to?"]("require_relative"))===n||r.$$is_boolean&&1!=r?(r=(i=function(e){e.$$scope,e.$$proto;return e}(e.get_singleton_class(c))).$__send__,r.$$p=(s=function(e){var r=s.$$s||this;return null==e&&(e=n),r.$require("rspec/"+t+"/"+e)},s.$$s=c,s),r).call(i,"define_method",p):(r=(a=function(e){e.$$scope,e.$$proto;return e}(e.get_singleton_class(c))).$__send__,r.$$p=($=function(e){$.$$s||this;return null==e&&(e=n),_.$call(""+t+"/"+e)},$.$$s=c,$),r).call(a,"define_method",p)}),($=(i=c).$define_optimized_require_for_rspec,$.$$p=(s=function(e){var t=s.$$s||this;return null==e&&(e=n),t.$require("rspec/support/../"+e)},s.$$s=c,s),$).call(i,"support"),c.$require_rspec_support("version"),c.$require_rspec_support("ruby_features"),e.cdecl(u,"KERNEL_METHOD_METHOD",e.get("Kernel").$instance_method("method")),($=u.get("RubyFeatures")["$supports_rebinding_module_methods?"]())===n||$.$$is_boolean&&1!=$?e.defs(c,"$method_handle_for",function(t,r){var a,o=this,$=n,i=n;try{return(a=e.get("Kernel")["$==="](t))===n||a.$$is_boolean&&1!=a?t.$method(r):u.get("KERNEL_METHOD_METHOD").$bind(t).$call(r)}catch(s){if(!e.rescue(s,[u.get("NameError")]))throw s;$=s;try{try{return i=t.$method(r),((a=i["$is_a?"](u.get("Method")))===n||a.$$is_boolean&&1!=a)&&o.$raise($),i}catch(s){if(!e.rescue(s,[u.get("Exception")]))throw s;try{return o.$raise($)}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}):e.defs(c,"$method_handle_for",function(t,r){var a,o=this,$=n,i=n;try{return u.get("KERNEL_METHOD_METHOD").$bind(t).$call(r)}catch(s){if(!e.rescue(s,[u.get("NameError")]))throw s;$=s;try{try{return i=t.$method(r),((a=i["$is_a?"](u.get("Method")))===n||a.$$is_boolean&&1!=a)&&o.$raise($),i}catch(s){if(!e.rescue(s,[u.get("Exception")]))throw s;try{return o.$raise($)}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}})}($.base)}(t.base)},Opal.modules["rspec/core/shared_context"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="ignore";var n=(e.top,e),r=e.nil,a=(e.breaker,e.slice),o=e.module;return e.add_stubs(["$each","$playback_onto","$__shared_context_recordings","$new","$__send__","$to_proc","$block","$method_name","$args","$define_method","$<<","$record","$+","$instance_methods"]),function(n){var $,i=$=o(n,"RSpec"),s=(i.$$proto,i.$$scope);!function(n){var $,i=$=o(n,"Core"),s=(i.$$proto,i.$$scope);!function(n){var $,i,s,c,u=$=o(n,"SharedContext"),l=(u.$$proto,u.$$scope);e.defn(u,"$included",function(e){var t,n,a,o=this;return(t=(n=o.$__shared_context_recordings()).$each,t.$$p=(a=function(t){a.$$s||this;return null==t&&(t=r),t.$playback_onto(e)},a.$$s=o,a),t).call(n)}),e.defn(u,"$__shared_context_recordings",function(){var e,t=this;return null==t.__shared_context_recordings&&(t.__shared_context_recordings=r),(e=t.__shared_context_recordings)!==!1&&e!==r?e:t.__shared_context_recordings=[]}),e.cdecl(l,"Recording",(i=(s=l.get("Struct")).$new,i.$$p=(c=function(){var t=c.$$s||this;return e.def(t,"$playback_onto",function(t){var n,r,a=this;return(n=(r=t).$__send__,n.$$p=a.$block().$to_proc(),n).apply(r,[a.$method_name()].concat(e.to_a(a.$args())))}),r&&"playback_onto"},c.$$s=u,c),i).call(s,"method_name","args","block")),e.defs(u,"$record",function(e){var t,n,o,$=this;return(t=(n=e).$each,t.$$p=(o=function(e){var t,n,$,i=o.$$s||this;return null==e&&(e=r),(t=(n=i).$define_method,t.$$p=($=function(t){var n,o=$.$$s||this;return t=a.call(arguments,0),n=$.$$p||r,$.$$p=null,o.$__shared_context_recordings()["$<<"](l.get("Recording").$new(e,t,n))},$.$$s=i,$),t).call(n,e)},o.$$s=$,o),t).call(n)}),u.$record(t(t(["describe","context"],l.get("Hooks").$instance_methods(!1)),l.get("MemoizedHelpers").$$scope.get("ClassMethods").$instance_methods(!1)))}(s.base)}(s.base),e.cdecl(s,"SharedContext",s.get("Core").$$scope.get("SharedContext"))}(n.base)},Opal.modules["rspec/core"]=function(e){e.dynamic_require_severity="ignore";var t,n,r,a,o,$=e.top,i=e,s=e.nil,c=e.breaker,u=e.slice,l=e.gvars,_=e.module,p=e.hash2,d=e.klass;return e.add_stubs(["$now","$require","$require_rspec_support","$define_optimized_require_for_rspec","$each","$require_rspec_core","$autoload","$extend","$new","$expose_dsl_globally=","$configuration","$[]","$thread_local_metadata","$[]=","$current","$define_method","$to_proc","$method","$expand_path","$fetch","$const_get"]),l._rspec_core_load_started_at=i.get("Time").$now(),$.$require("rbconfig"),$.$require("rspec/support"),i.get("RSpec").$$scope.get("Support").$require_rspec_support("caller_filter"),(t=(n=i.get("RSpec").$$scope.get("Support")).$define_optimized_require_for_rspec,t.$$p=(r=function(e){var t=r.$$s||this;return null==e&&(e=s),t.$require("rspec/core/../"+e)},r.$$s=$,r),t).call(n,"core"),(t=(a=["version","warnings","flat_map","filter_manager","dsl","notifications","reporter","hooks","memoized_helpers","metadata","metadata_filter","pending","formatters","ordering","world","configuration","option_parser","configuration_options","runner","example","shared_example_group","example_group"]).$each,t.$$p=(o=function(e){o.$$s||this;return null==e&&(e=s),i.get("RSpec").$$scope.get("Support").$require_rspec_core(e)},o.$$s=$,o),t).call(a),function(t){var n,r,a,o=n=_(t,"RSpec"),$=(o.$$proto,o.$$scope);o.$autoload("SharedContext","rspec/core/shared_context"),o.$extend($.get("RSpec").$$scope.get("Core").$$scope.get("Warnings")),e.defs(o,"$reset",function(){var e=this;return e.world=s,e.configuration=s}),e.defs(o,"$configuration",function(){var e,t,n,r=this,a=s;return null==r.configuration&&(r.configuration=s),(e=r.configuration)!==!1&&e!==s?e:r.configuration=function(){return a=$.get("RSpec").$$scope.get("Core").$$scope.get("Configuration").$new(),t=[!0],n=a,n["$expose_dsl_globally="].apply(n,t),t[t.length-1],a}()}),e.defs(o,"$configure",r=function(){var t,n=this,a=r.$$p,o=a||s;return r.$$p=null,o!==s?(t=e.yield1(o,n.$configuration()),t===c?t:t):s}),e.defs(o,"$current_example",function(){var e=this;return e.$thread_local_metadata()["$[]"]("current_example")}),e.defs(o,"$current_example=",function(e){var t=this;return t.$thread_local_metadata()["$[]="]("current_example",e)}),e.defs(o,"$thread_local_metadata",function(){var e,t,n;return e="_rspec",t=$.get("Thread").$current(),(n=t["$[]"](e))!==!1&&n!==s?n:t["$[]="](e,p([],{}))}),e.defs(o,"$world",function(){var e,t=this;return null==t.world&&(t.world=s),(e=t.world)!==!1&&e!==s?e:t.world=$.get("RSpec").$$scope.get("Core").$$scope.get("World").$new()}),function(t){var n,r=n=_(t,"Core"),a=(r.$$proto,r.$$scope);!function(t,$super){function n(){}var r=n=d(t,$super,"Time",n);r.$$proto,r.$$scope;return function(t){var n,r;t.$$scope,t.$$proto;return(n=(r=t).$define_method,n.$$p=e.get("Time").$method("now").$to_proc(),n).call(r,"now")}(e.get_singleton_class(r))}(a.base,null),e.defs(r,"$path_to_executable",function(){var e,t=this;return null==t.path_to_executable&&(t.path_to_executable=s),(e=t.path_to_executable)!==!1&&e!==s?e:t.path_to_executable=a.get("File").$expand_path("../../../exe/rspec","rspec/core")})}($.base),e.cdecl($,"MODULES_TO_AUTOLOAD",p(["Matchers","Expectations","Mocks"],{Matchers:"rspec/expectations",Expectations:"rspec/expectations",Mocks:"rspec/mocks"})),e.defs(o,"$const_missing",a=function(t){try{var n,r,o,i=this;a.$$p;return a.$$p=null,i.$require((n=(r=$.get("MODULES_TO_AUTOLOAD")).$fetch,n.$$p=(o=function(){var t=o.$$s||this;e.ret(e.find_iter_super_dispatcher(t,"const_missing",o.$$def||a,null).apply(t,u.call(arguments)))},o.$$s=i,o),n).call(r,t)),e.get("RSpec").$const_get(t)}catch(s){if(s===e.returner)return s.$v;throw s}})}(i.base)},Opal.modules["rspec/version"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=(e.nil,e.breaker,e.slice,e.module);return function(t){var r,a=r=n(t,"RSpec"),o=(a.$$proto,a.$$scope);!function(t){var r,a=r=n(t,"Version"),o=(a.$$proto,a.$$scope);e.cdecl(o,"STRING","3.1.0")}(o.base)}(t.base)},Opal.modules.rspec=function(e){e.dynamic_require_severity="ignore";var t=e.top;e.nil,e.breaker,e.slice;return e.add_stubs(["$require"]),t.$require("rspec/core"),t.$require("rspec/version")},Opal.modules["rspec/core/backport_random"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}function a(e,t){return"number"==typeof e&&"number"==typeof t?e>=t:e["$>="](t)}function o(e,t){return"number"==typeof e&&"number"==typeof t?e/t:e["$/"](t)}function $(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function i(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}function s(e,t){return"number"==typeof e&&"number"==typeof t?t>=e:e["$<="](t)}e.dynamic_require_severity="ignore";var c=(e.top,e),u=e.nil,l=e.breaker,_=(e.slice,e.module),p=e.klass,d=e.range;return e.add_stubs(["$kind_of?","$__send__","$raise","$inspect","$message","$class","$coerce_to","$new","$-","$seed=","$times","$|","$&","$[]","$+","$[]=","$^","$>>","$odd?","$===","$each","$*","$>=","$size","$max","$next_state","$<<","$/","$random_32_bits","$>","$mask_32_bits","$<","$map","$pack","$each_with_index","$state_as_bignum","$left","$abs","$==","$pop","$first","$convert_seed","$private","$attr_reader","$seed_rand","$coerce_to_int","$nonzero?","$new_seed","$random_float","$<=","$_rand_range","$random_integer","$random_bytes","$is_a?","$seed","$send","$state","$marshal_dump","$allocate","$marshal_load","$end","$begin","$!","$respond_to?","$exclude_end?","$loop","$**","$rand","$include"]),function(c){var f,g=f=_(c,"RSpec"),h=(g.$$proto,g.$$scope);!function(c){var f,g=f=_(c,"Core"),h=(g.$$proto,g.$$scope);!function(c){var f,g=f=_(c,"Backports"),h=(g.$$proto,g.$$scope);e.defs(g,"$coerce_to",function(t,n,r){var a,o=this,$=u,i=u;if((a=t["$kind_of?"](n))!==u&&(!a.$$is_boolean||1==a))return t;try{$=t.$__send__(r)}catch(s){if(!e.rescue(s,[h.get("Exception")]))throw s;i=s;try{o.$raise(h.get("TypeError"),"Coercion error: "+t.$inspect()+"."+r+" => "+n+" failed:\n"+("("+i.$message()+")"))}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}return((a=$["$kind_of?"](n))===u||a.$$is_boolean&&1!=a)&&o.$raise(h.get("TypeError"),"Coercion error: obj."+r+" did NOT return a "+n+" (was "+$.$class()+")"),$}),e.defs(g,"$coerce_to_int",function(e){var t=this;return t.$coerce_to(e,h.get("Integer"),"to_int")}),e.cdecl(h,"Undefined",h.get("Object").$new()),function(c,$super){function f(){}var g=f=p(c,$super,"Random",f),h=(g.$$proto,g.$$scope);return function(s,$super){function c(){}var l=c=p(s,$super,"MT19937",c),_=l.$$proto,f=l.$$scope;return _.state=_.last_read=u,e.cdecl(f,"STATE_SIZE",624),e.cdecl(f,"LAST_STATE",t(f.get("STATE_SIZE"),1)),e.cdecl(f,"PAD_32_BITS",4294967295),e.defn(l,"$initialize",function(e){var t,n,r=this;return t=[e],n=r,n["$seed="].apply(n,t),t[t.length-1]}),e.cdecl(f,"LAST_31_BITS",2147483647),e.cdecl(f,"OFFSET",397),e.defn(l,"$next_state",function(){var e,r,a,o=this;return(e=(r=f.get("STATE_SIZE")).$times,e.$$p=(a=function(e){var r,o,$=a.$$s||this,i=u;return null==$.state&&($.state=u),null==e&&(e=u),i=$.state["$[]"](e)["$&"](2147483648)["$|"]($.state["$[]"](t(n(e,1),f.get("STATE_SIZE")))["$&"](2147483647)),$.state["$[]="](e,$.state["$[]"](t(n(e,f.get("OFFSET")),f.get("STATE_SIZE")))["$^"](i["$>>"](1))),(r=i["$odd?"]())===u||r.$$is_boolean&&1!=r?u:(r=e,o=$.state,o["$[]="](r,o["$[]"](r)["$^"](2567483615)))},a.$$s=o,a),e).call(r),o.last_read=-1}),e.defn(l,"$seed=",function(e){var o,$,i,s,c,l,_,p=this,g=u,h=u,m=u;return function(){return g=e,f.get("Integer")["$==="](g)?(p.state=f.get("Array").$new(f.get("STATE_SIZE")),p.state["$[]="](0,e["$&"](f.get("PAD_32_BITS"))),(o=($=d(1,f.get("LAST_STATE"),!1)).$each,o.$$p=(i=function(e){var a=i.$$s||this;return null==a.state&&(a.state=u),null==e&&(e=u),a.state["$[]="](e,n(r(1812433253,a.state["$[]"](t(e,1))["$^"](a.state["$[]"](t(e,1))["$>>"](30))),e)["$&"](f.get("PAD_32_BITS")))},i.$$s=p,i),o).call($),p.last_read=f.get("LAST_STATE")):f.get("Array")["$==="](g)?(o=[19650218],s=p,s["$seed="].apply(s,o),o[o.length-1],h=1,m=0,(o=(s=[f.get("STATE_SIZE"),e.$size()].$max()).$times,o.$$p=(c=function(){var o=c.$$s||this;
return null==o.state&&(o.state=u),o.state["$[]="](h,n(n(o.state["$[]"](h)["$^"](r(o.state["$[]"](t(h,1))["$^"](o.state["$[]"](t(h,1))["$>>"](30)),1664525)),m),e["$[]"](m))["$&"](f.get("PAD_32_BITS"))),a(h=n(h,1),f.get("STATE_SIZE"))&&(o.state["$[]="](0,o.state["$[]"](-1)),h=1),a(m=n(m,1),e.$size())?m=0:u},c.$$s=p,c),o).call(s),(o=(l=t(f.get("STATE_SIZE"),1)).$times,o.$$p=(_=function(){var e=_.$$s||this;return null==e.state&&(e.state=u),e.state["$[]="](h,t(e.state["$[]"](h)["$^"](r(e.state["$[]"](t(h,1))["$^"](e.state["$[]"](t(h,1))["$>>"](30)),1566083941)),h)["$&"](f.get("PAD_32_BITS"))),a(h=n(h,1),f.get("STATE_SIZE"))?(e.state["$[]="](0,e.state["$[]"](-1)),h=1):u},_.$$s=p,_),o).call(l),p.state["$[]="](0,2147483648)):p.$raise(f.get("ArgumentError"),"Seed must be an Integer or an Array")}()}),e.defn(l,"$random_32_bits",function(){var e=this,t=u;return a(e.last_read,f.get("LAST_STATE"))&&e.$next_state(),e.last_read=n(e.last_read,1),t=e.state["$[]"](e.last_read),t=t["$^"](t["$>>"](11)),t=t["$^"](t["$<<"](7)["$&"](2636928640)),t=t["$^"](t["$<<"](15)["$&"](4022730752)),t=t["$^"](t["$>>"](18))}),e.cdecl(f,"FLOAT_FACTOR",o(1,9007199254740992)),e.defn(l,"$random_float",function(){var e=this;return r(n(r(e.$random_32_bits()["$>>"](5),67108864),e.$random_32_bits()["$>>"](6)),f.get("FLOAT_FACTOR"))}),e.defn(l,"$random_integer",function(e){var r,a,o,s=this,c=u,l=u,_=u,p=u;for(c=t(e,1),l=0;$(c,f.get("PAD_32_BITS"));)c=c["$>>"](32),l=n(l,1);for(_=s.$mask_32_bits(c);!i(p,e);)p=s.$random_32_bits()["$&"](_),(r=(a=l).$times,r.$$p=(o=function(){var e=o.$$s||this;return p=p["$<<"](32),p=p["$|"](e.$random_32_bits())},o.$$s=s,o),r).call(a);return p}),e.defn(l,"$random_bytes",function(e){var t,a,$,i=this,s=u,c=u;return s=o(n(e,3),4),c=(t=(a=s.$times()).$map,t.$$p=($=function(){var e=$.$$s||this;return e.$random_32_bits()},$.$$s=i,$),t).call(a),c.$pack(r("L",s))["$[]"](0,e)}),e.defn(l,"$state_as_bignum",function(){var e,t,n,a=this,o=u;return o=0,(e=(t=a.state).$each_with_index,e.$$p=(n=function(e,t){n.$$s||this;return null==e&&(e=u),null==t&&(t=u),o=o["$|"](e["$<<"](r(32,t)))},n.$$s=a,n),e).call(t),o}),e.defn(l,"$left",function(){var e=this;return t(f.get("MT19937").$$scope.get("STATE_SIZE"),e.last_read)}),e.defn(l,"$marshal_dump",function(){var e=this;return[e.$state_as_bignum(),e.$left()]}),e.defn(l,"$marshal_load",function(n){var r,a,o,$=this,i=u,s=u;return a=n,r=e.to_ary(a),i=null==r[0]?u:r[0],s=null==r[1]?u:r[1],a,$.last_read=t(f.get("MT19937").$$scope.get("STATE_SIZE"),s),$.state=f.get("Array").$new(f.get("STATE_SIZE")),(r=(a=f.get("STATE_SIZE")).$times,r.$$p=(o=function(e){var t=o.$$s||this;return null==t.state&&(t.state=u),null==e&&(e=u),t.state["$[]="](e,i["$&"](f.get("PAD_32_BITS"))),i=i["$>>"](32)},o.$$s=$,o),r).call(a)}),e.defs(l,"$convert_seed",function(e){var t,n,r=u;for(e=e.$abs(),r=[];!e["$=="](0);)r["$<<"](e["$&"](f.get("PAD_32_BITS"))),e=e["$>>"](32);return(t=(n=r["$[]"](-1)["$=="](1))?$(r.$size(),1):r["$[]"](-1)["$=="](1))===u||t.$$is_boolean&&1!=t||r.$pop(),$(r.$size(),1)?r:r.$first()}),e.defs(l,"$[]",function(e){var t=this;return t.$new(t.$convert_seed(e))}),l.$private(),e.cdecl(f,"MASK_BY",[1,2,4,8,16]),e.defn(l,"$mask_32_bits",function(e){var t,n,r,a=this;return(t=(n=f.get("MASK_BY")).$each,t.$$p=(r=function(t){r.$$s||this;return null==t&&(t=u),e=e["$|"](e["$>>"](t))},r.$$s=a,r),t).call(n),e}),u&&"mask_32_bits"}(h.base,null),function(a){var o,c,p=o=_(a,"Implementation"),d=(p.$$proto,p.$$scope);p.$attr_reader("seed"),e.defn(p,"$initialize",c=function(t){var n=this;c.$$p;return null==t&&(t=0),c.$$p=null,e.find_super_dispatcher(n,"initialize",c,null).apply(n,[]),n.$seed_rand(t)}),e.defn(p,"$seed_rand",function(e){var t,n,r=this,a=u;return null==r.seed&&(r.seed=u),null==e&&(e=0),e=d.get("Backports").$coerce_to_int(e),n=r.seed,((t=null!=n&&n!==u?"instance-variable":u)===u||t.$$is_boolean&&1!=t)&&(r.seed=u),t=[r.seed,(n=e["$nonzero?"]())!==!1&&n!==u?n:d.get("Random").$new_seed()],a=t[0],r.seed=t[1],t,r.mt=d.get("MT19937")["$[]"](r.seed),a}),e.defn(p,"$rand",function(e){var t,n=this,a=u;return null==n.mt&&(n.mt=u),null==e&&(e=d.get("Backports").$$scope.get("Undefined")),(t=function(){return a=e,d.get("Backports").$$scope.get("Undefined")["$==="](a)?n.mt.$random_float():d.get("Float")["$==="](a)?s(e,0)?u:r(e,n.mt.$random_float()):d.get("Range")["$==="](a)?n.$_rand_range(e):(e=d.get("Backports").$coerce_to_int(e),s(e,0)?u:n.mt.$random_integer(e))}())!==!1&&t!==u?t:n.$raise(d.get("ArgumentError"),"invalid argument "+e)}),e.defn(p,"$bytes",function(e){var t=this;return null==t.mt&&(t.mt=u),e=d.get("Backports").$coerce_to_int(e),i(e,0)&&t.$raise(d.get("ArgumentError"),"negative size"),t.mt.$random_bytes(e)}),e.defn(p,"$==",function(e){var t,n,r,a=this;return r=e["$is_a?"](d.get("Random")),n=r!==!1&&r!==u?a.$seed()["$=="](e.$seed()):r,t=n!==!1&&n!==u?a.$left()["$=="](e.$send("left")):n,t!==!1&&t!==u?a.$state()["$=="](e.$send("state")):t}),e.defn(p,"$marshal_dump",function(){var e=this;return null==e.mt&&(e.mt=u),null==e.seed&&(e.seed=u),e.mt.$marshal_dump()["$<<"](e.seed)}),e.defn(p,"$marshal_load",function(e){var t=this;return null==t.mt&&(t.mt=u),t.seed=e.$pop(),t.mt=d.get("MT19937").$allocate(),t.mt.$marshal_load(e)}),p.$private(),e.defn(p,"$state",function(){var e=this;return null==e.mt&&(e.mt=u),e.mt.$state_as_bignum()}),e.defn(p,"$left",function(){var e=this;return null==e.mt&&(e.mt=u),e.mt.$left()}),e.defn(p,"$_rand_range",function(e){var a,o,c,_,p=this,f=u;return null==p.mt&&(p.mt=u),f=t(e.$end(),e.$begin()),c=f["$is_a?"](d.get("Float"))["$!"](),o=c!==!1&&c!==u?f["$respond_to?"]("to_int"):c,(a=o!==!1&&o!==u?f=d.get("Backports").$coerce_to_int(f):o)===u||a.$$is_boolean&&1!=a?(a=f=d.get("Backports").$coerce_to(f,d.get("Float"),"to_f"))===u||a.$$is_boolean&&1!=a?u:i(f,0)?u:(a=e["$exclude_end?"]())===u||a.$$is_boolean&&1!=a?(a=(o=p).$loop,a.$$p=(_=function(){var t=_.$$s||this,a=u;return null==t.mt&&(t.mt=u),a=r(r(t.mt.$random_float(),f),1.0001),$(a,f)?u:(l.$v=n(e.$begin(),a),l)},_.$$s=p,_),a).call(o):s(f,0)?u:n(e.$begin(),r(p.mt.$random_float(),f)):(((a=e["$exclude_end?"]())===u||a.$$is_boolean&&1!=a)&&(f=n(f,1)),s(f,0)?u:n(e.$begin(),p.mt.$random_integer(f)))})}(h.base),e.defs(g,"$new_seed",function(){return n(2["$**"](62),h.get("Kernel").$rand(2["$**"](62)))}),u&&"new_seed"}(h.base,null),function(t,$super){function n(){}var r=n=p(t,$super,"Random",n),a=(r.$$proto,r.$$scope);return r.$include(a.get("Implementation")),function(e){var t=e.$$scope;e.$$proto;return e.$include(t.get("Implementation"))}(e.get_singleton_class(r))}(h.base,null)}(h.base)}(h.base)}(c.base)},Opal.modules["rspec/core/backtrace_formatter"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,o=e.hash2;return e.add_stubs(["$attr_accessor","$==","$<<","$map!","$new","$gsub","$union","$matches?","$join","$getwd","$inclusion_patterns","$attr_writer","$empty?","$exclusion_patterns","$[]","$tap","$concat","$compact","$map","$backtrace_line","$exclude?","$relative_path","$!","$private","$any?","$=~"]),function(t){var $,i=$=r(t,"RSpec"),s=(i.$$proto,i.$$scope);!function(t){var $,i=$=r(t,"Core"),s=(i.$$proto,i.$$scope);!function(t,$super){function r(){}var $=r=a(t,$super,"BacktraceFormatter",r),i=$.$$proto,s=$.$$scope;return i.exclusion_patterns=i.full_backtrace=n,$.$attr_accessor("exclusion_patterns","inclusion_patterns"),e.defn($,"$initialize",function(){var t,r,a,o,$=this,i=n;return $.full_backtrace=!1,i=["/lib\\d*/ruby/","bin/","exe/rspec"],s.get("RUBY_PLATFORM")["$=="]("java")&&i["$<<"]("org/jruby/"),(t=(r=i)["$map!"],t.$$p=(a=function(e){a.$$s||this;return null==e&&(e=n),s.get("Regexp").$new(e.$gsub("/",s.get("File").$$scope.get("SEPARATOR")))},a.$$s=$,a),t).call(r),$.exclusion_patterns=[(t=s.get("Regexp")).$union.apply(t,[s.get("RSpec").$$scope.get("CallerFilter").$$scope.get("IGNORE_REGEX")].concat(e.to_a(i)))],$.inclusion_patterns=[],(o=$["$matches?"]($.exclusion_patterns,s.get("File").$join(s.get("Dir").$getwd(),"lib","foo.rb:13")))===n||o.$$is_boolean&&1!=o?n:$.$inclusion_patterns()["$<<"](s.get("Regexp").$new(s.get("Dir").$getwd()))}),$.$attr_writer("full_backtrace"),e.defn($,"$full_backtrace?",function(){var e,t=this;return(e=t.full_backtrace)!==!1&&e!==n?e:t.$exclusion_patterns()["$empty?"]()}),e.defn($,"$filter_gem",function(e){var t=this,r=n;return r=s.get("File").$$scope.get("SEPARATOR"),t.$exclusion_patterns()["$<<"](new RegExp(""+r+e+"(-[^"+r+"]+)?"+r))}),e.defn($,"$format_backtrace",function(e,t){var r,a,$,i,s,c,u=this;return null==t&&(t=o([],{})),(r=t["$[]"]("full_backtrace"))===n||r.$$is_boolean&&1!=r?(r=(a=(i=(s=e).$map,i.$$p=(c=function(e){var t=c.$$s||this;return null==e&&(e=n),t.$backtrace_line(e)},c.$$s=u,c),i).call(s).$compact()).$tap,r.$$p=($=function(t){var r;$.$$s||this;return null==t&&(t=n),(r=t["$empty?"]())===n||r.$$is_boolean&&1!=r?n:(t.$concat(e),t["$<<"](""),t["$<<"]("  Showing full backtrace because every line was filtered out."),t["$<<"]("  See docs for RSpec::Configuration#backtrace_exclusion_patterns and"),t["$<<"]("  RSpec::Configuration#backtrace_inclusion_patterns for more information."))},$.$$s=u,$),r).call(a):e}),e.defn($,"$backtrace_line",function(t){var r,a=this;try{return(r=a["$exclude?"](t))===n||r.$$is_boolean&&1!=r?s.get("Metadata").$relative_path(t):n}catch(o){if(!e.rescue(o,[s.get("SecurityError")]))throw o;try{return n}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}),e.defn($,"$exclude?",function(e){var t,r=this;return(t=r.full_backtrace)===n||t.$$is_boolean&&1!=t?(t=r["$matches?"](r.$exclusion_patterns(),e),t!==!1&&t!==n?r["$matches?"](r.$inclusion_patterns(),e)["$!"]():t):!1}),$.$private(),e.defn($,"$matches?",function(e,t){var r,a,o,$=this;return(r=(a=e)["$any?"],r.$$p=(o=function(e){o.$$s||this;return null==e&&(e=n),t["$=~"](e)},o.$$s=$,o),r).call(a)}),n&&"matches?"}(s.base,null)}(s.base)}(t.base)},Opal.modules["rspec/matchers"]=function(e){e.dynamic_require_severity="ignore";var t,n,r,a,o,$=e.top,i=e,s=e.nil,c=(e.breaker,e.slice),u=e.module,l=e.hash2;return e.add_stubs(["$require","$require_rspec_support","$define_optimized_require_for_rspec","$each","$require_rspec_matchers","$lambda","$gsub","$split_words","$fetch","$define_method","$__send__","$to_proc","$new","$alias_matcher","$empty?","$equal","$be_a_kind_of","$alias_method","$contain_exactly","$sub","$configuration","$private","$to_s","$===","$respond_to?","$register_matcher_definition","$is_a_matcher?"]),$.$require("rspec/support"),i.get("RSpec").$$scope.get("Support").$require_rspec_support("matcher_definition"),(t=(n=i.get("RSpec").$$scope.get("Support")).$define_optimized_require_for_rspec,t.$$p=(r=function(e){var t=r.$$s||this;return null==e&&(e=s),t.$require("rspec/matchers/../"+e)},r.$$s=$,r),t).call(n,"matchers"),(t=(a=["pretty","composable","built_in","generated_descriptions","dsl","matcher_delegator","aliased_matcher"]).$each,t.$$p=(o=function(e){o.$$s||this;return null==e&&(e=s),i.get("RSpec").$$scope.get("Support").$require_rspec_matchers(e)},o.$$s=$,o),t).call(a),function(t){var n,r=n=u(t,"RSpec"),a=(r.$$proto,r.$$scope);!function(t){var n,r,a,o,$,i,_,p,d,f,g,h,m,v,b,y,x,w,k=n=u(t,"Matchers"),S=(k.$$proto,k.$$scope);e.defs(k,"$alias_matcher",r=function(t,n,a){var o,$,i,u,_,p,d,f=this,g=r.$$p,h=g||s,m=s;return null==a&&(a=l([],{})),r.$$p=null,(o=h)!==!1&&o!==s?o:h=($=(i=f).$lambda,$.$$p=(u=function(e){u.$$s||this;return null==e&&(e=s),e.$gsub(S.get("Pretty").$split_words(n),S.get("Pretty").$split_words(t))},u.$$s=f,u),$).call(i),m=(o=($=a).$fetch,o.$$p=(_=function(){_.$$s||this;return S.get("AliasedMatcher")},_.$$s=f,_),o).call($,"klass"),(o=(p=f).$define_method,o.$$p=(d=function(t){var r,a,o,$=d.$$s||this,i=s;return t=c.call(arguments,0),r=d.$$p||s,d.$$p=null,i=(a=(o=$).$__send__,a.$$p=r.$to_proc(),a).apply(o,[n].concat(e.to_a(t))),m.$new(i,h)},d.$$s=f,d),o).call(p,t)}),e.defs(k,"$define_negated_matcher",a=function(e,t){var n,r,o=this,$=a.$$p,i=$||s;return a.$$p=null,(n=(r=o).$alias_matcher,n.$$p=i.$to_proc(),n).call(r,e,t,l(["klass"],{klass:S.get("AliasedNegatedMatcher")}))}),e.defn(k,"$be_truthy",function(){return S.get("BuiltIn").$$scope.get("BeTruthy").$new()}),k.$alias_matcher("a_truthy_value","be_truthy"),e.defn(k,"$be_falsey",function(){return S.get("BuiltIn").$$scope.get("BeFalsey").$new()}),k.$alias_matcher("be_falsy","be_falsey"),k.$alias_matcher("a_falsey_value","be_falsey"),k.$alias_matcher("a_falsy_value","be_falsey"),e.defn(k,"$be_nil",function(){return S.get("BuiltIn").$$scope.get("BeNil").$new()}),k.$alias_matcher("a_nil_value","be_nil"),e.defn(k,"$be",function(){var t,n=this,r=s,a=arguments.length-0;0>a&&(a=0);var o=new Array(a);for(r=0;a>r;r++)o[r]=arguments[r+0];return(t=o["$empty?"]())===s||t.$$is_boolean&&1!=t?(t=n).$equal.apply(t,e.to_a(o)):S.get("Matchers").$$scope.get("BuiltIn").$$scope.get("Be").$new()}),k.$alias_matcher("a_value","be",l(["klass"],{klass:S.get("AliasedMatcherWithOperatorSupport")})),e.defn(k,"$be_a",function(e){var t=this;return t.$be_a_kind_of(e)}),k.$alias_method("be_an","be_a"),e.defn(k,"$be_an_instance_of",function(e){return S.get("BuiltIn").$$scope.get("BeAnInstanceOf").$new(e)}),k.$alias_method("be_instance_of","be_an_instance_of"),k.$alias_matcher("an_instance_of","be_an_instance_of"),e.defn(k,"$be_a_kind_of",function(e){return S.get("BuiltIn").$$scope.get("BeAKindOf").$new(e)}),k.$alias_method("be_kind_of","be_a_kind_of"),k.$alias_matcher("a_kind_of","be_a_kind_of"),e.defn(k,"$be_between",function(e,t){return S.get("BuiltIn").$$scope.get("BeBetween").$new(e,t)}),k.$alias_matcher("a_value_between","be_between"),e.defn(k,"$be_within",function(e){return S.get("BuiltIn").$$scope.get("BeWithin").$new(e)}),k.$alias_matcher("a_value_within","be_within"),k.$alias_matcher("within","be_within"),e.defn(k,"$change",o=function(e,t){var n,r,a=o.$$p,$=a||s;return null==e&&(e=s),null==t&&(t=s),o.$$p=null,(n=(r=S.get("BuiltIn").$$scope.get("Change")).$new,n.$$p=$.$to_proc(),n).call(r,e,t)}),k.$alias_matcher("a_block_changing","change"),k.$alias_matcher("changing","change"),e.defn(k,"$contain_exactly",function(){var e=s,t=arguments.length-0;0>t&&(t=0);var n=new Array(t);for(e=0;t>e;e++)n[e]=arguments[e+0];return S.get("BuiltIn").$$scope.get("ContainExactly").$new(n)}),k.$alias_matcher("a_collection_containing_exactly","contain_exactly"),k.$alias_matcher("containing_exactly","contain_exactly"),e.defn(k,"$cover",function(){var t,n=s,r=arguments.length-0;0>r&&(r=0);var a=new Array(r);for(n=0;r>n;n++)a[n]=arguments[n+0];return(t=S.get("BuiltIn").$$scope.get("Cover")).$new.apply(t,e.to_a(a))}),k.$alias_matcher("a_range_covering","cover"),k.$alias_matcher("covering","cover"),e.defn(k,"$end_with",function(){var t,n=s,r=arguments.length-0;0>r&&(r=0);var a=new Array(r);for(n=0;r>n;n++)a[n]=arguments[n+0];return(t=S.get("BuiltIn").$$scope.get("EndWith")).$new.apply(t,e.to_a(a))}),k.$alias_matcher("a_collection_ending_with","end_with"),k.$alias_matcher("a_string_ending_with","end_with"),k.$alias_matcher("ending_with","end_with"),e.defn(k,"$eq",function(e){return S.get("BuiltIn").$$scope.get("Eq").$new(e)}),k.$alias_matcher("an_object_eq_to","eq"),k.$alias_matcher("eq_to","eq"),e.defn(k,"$eql",function(e){return S.get("BuiltIn").$$scope.get("Eql").$new(e)}),k.$alias_matcher("an_object_eql_to","eql"),k.$alias_matcher("eql_to","eql"),e.defn(k,"$equal",function(e){return S.get("BuiltIn").$$scope.get("Equal").$new(e)}),k.$alias_matcher("an_object_equal_to","equal"),k.$alias_matcher("equal_to","equal"),e.defn(k,"$exist",function(){var t,n=s,r=arguments.length-0;0>r&&(r=0);var a=new Array(r);for(n=0;r>n;n++)a[n]=arguments[n+0];return(t=S.get("BuiltIn").$$scope.get("Exist")).$new.apply(t,e.to_a(a))}),k.$alias_matcher("an_object_existing","exist"),k.$alias_matcher("existing","exist"),e.defn(k,"$have_attributes",function(e){return S.get("BuiltIn").$$scope.get("HaveAttributes").$new(e)}),k.$alias_matcher("an_object_having_attributes","have_attributes"),e.defn(k,"$include",function(){var t,n=s,r=arguments.length-0;0>r&&(r=0);var a=new Array(r);for(n=0;r>n;n++)a[n]=arguments[n+0];return(t=S.get("BuiltIn").$$scope.get("Include")).$new.apply(t,e.to_a(a))}),k.$alias_matcher("a_collection_including","include"),k.$alias_matcher("a_string_including","include"),k.$alias_matcher("a_hash_including","include"),k.$alias_matcher("including","include"),e.defn(k,"$all",function(e){return S.get("BuiltIn").$$scope.get("All").$new(e)}),e.defn(k,"$match",function(e){return S.get("BuiltIn").$$scope.get("Match").$new(e)}),k.$alias_matcher("match_regex","match"),k.$alias_matcher("an_object_matching","match"),k.$alias_matcher("a_string_matching","match"),k.$alias_matcher("matching","match"),e.defn(k,"$match_array",function(t){var n,r=this;return(n=r).$contain_exactly.apply(n,e.to_a(t))}),e.defn(k,"$output",function(e){return null==e&&(e=s),S.get("BuiltIn").$$scope.get("Output").$new(e)}),k.$alias_matcher("a_block_outputting","output"),e.defn(k,"$raise_error",$=function(e,t){var n,r,a=$.$$p,o=a||s;return null==e&&(e=S.get("Exception")),null==t&&(t=s),$.$$p=null,(n=(r=S.get("BuiltIn").$$scope.get("RaiseError")).$new,n.$$p=o.$to_proc(),n).call(r,e,t)}),k.$alias_method("raise_exception","raise_error"),(i=(_=k).$alias_matcher,i.$$p=(p=function(e){p.$$s||this;return null==e&&(e=s),e.$sub("raise","a block raising")},p.$$s=k,p),i).call(_,"a_block_raising","raise_error"),(i=(d=k).$alias_matcher,i.$$p=(f=function(e){f.$$s||this;return null==e&&(e=s),e.$sub("raise","raising")},f.$$s=k,f),i).call(d,"raising","raise_error"),e.defn(k,"$respond_to",function(){var t,n=s,r=arguments.length-0;0>r&&(r=0);var a=new Array(r);for(n=0;r>n;n++)a[n]=arguments[n+0];return(t=S.get("BuiltIn").$$scope.get("RespondTo")).$new.apply(t,e.to_a(a))}),k.$alias_matcher("an_object_responding_to","respond_to"),k.$alias_matcher("responding_to","respond_to"),e.defn(k,"$satisfy",g=function(){var e,t,n=g.$$p,r=n||s;return g.$$p=null,(e=(t=S.get("BuiltIn").$$scope.get("Satisfy")).$new,e.$$p=r.$to_proc(),e).call(t)}),k.$alias_matcher("an_object_satisfying","satisfy"),k.$alias_matcher("satisfying","satisfy"),e.defn(k,"$start_with",function(){var t,n=s,r=arguments.length-0;0>r&&(r=0);var a=new Array(r);for(n=0;r>n;n++)a[n]=arguments[n+0];return(t=S.get("BuiltIn").$$scope.get("StartWith")).$new.apply(t,e.to_a(a))}),k.$alias_matcher("a_collection_starting_with","start_with"),k.$alias_matcher("a_string_starting_with","start_with"),k.$alias_matcher("starting_with","start_with"),e.defn(k,"$throw_symbol",function(e,t){return null==e&&(e=s),null==t&&(t=s),S.get("BuiltIn").$$scope.get("ThrowSymbol").$new(e,t)}),(i=(h=k).$alias_matcher,i.$$p=(m=function(e){m.$$s||this;return null==e&&(e=s),e.$sub("throw","a block throwing")},m.$$s=k,m),i).call(h,"a_block_throwing","throw_symbol"),(i=(v=k).$alias_matcher,i.$$p=(b=function(e){b.$$s||this;return null==e&&(e=s),e.$sub("throw","throwing")},b.$$s=k,b),i).call(v,"throwing","throw_symbol"),e.defn(k,"$yield_control",function(){return S.get("BuiltIn").$$scope.get("YieldControl").$new()}),k.$alias_matcher("a_block_yielding_control","yield_control"),k.$alias_matcher("yielding_control","yield_control"),e.defn(k,"$yield_with_no_args",function(){return S.get("BuiltIn").$$scope.get("YieldWithNoArgs").$new()}),k.$alias_matcher("a_block_yielding_with_no_args","yield_with_no_args"),k.$alias_matcher("yielding_with_no_args","yield_with_no_args"),e.defn(k,"$yield_with_args",function(){var t,n=s,r=arguments.length-0;0>r&&(r=0);var a=new Array(r);for(n=0;r>n;n++)a[n]=arguments[n+0];return(t=S.get("BuiltIn").$$scope.get("YieldWithArgs")).$new.apply(t,e.to_a(a))}),k.$alias_matcher("a_block_yielding_with_args","yield_with_args"),k.$alias_matcher("yielding_with_args","yield_with_args"),e.defn(k,"$yield_successive_args",function(){var t,n=s,r=arguments.length-0;0>r&&(r=0);var a=new Array(r);for(n=0;r>n;n++)a[n]=arguments[n+0];return(t=S.get("BuiltIn").$$scope.get("YieldSuccessiveArgs")).$new.apply(t,e.to_a(a))}),k.$alias_matcher("a_block_yielding_successive_args","yield_successive_args"),k.$alias_matcher("yielding_successive_args","yield_successive_args"),e.defs(k,"$configuration",function(){return S.get("Expectations").$configuration()}),k.$private(),e.cdecl(S,"BE_PREDICATE_REGEX",/^(be_(?:an?_)?)(.*)/),e.cdecl(S,"HAS_REGEX",/^(?:have_)(.*)/),e.defn(k,"$method_missing",y=function(t){var n,r,a,o=this,$=y.$$p,i=$||s,c=s,u=s,l=s,_=s,p=arguments.length-1;0>p&&(p=0);var d=new Array(p);for(u=0;p>u;u++)d[u]=arguments[u+1];for(y.$$p=null,l=[],_=0;_<arguments.length;_++)l[_]=arguments[_];return function(){return c=t.$to_s(),S.get("BE_PREDICATE_REGEX")["$==="](c)?(n=(r=S.get("BuiltIn").$$scope.get("BePredicate")).$new,n.$$p=i.$to_proc(),n).apply(r,[t].concat(e.to_a(d))):S.get("HAS_REGEX")["$==="](c)?(n=(a=S.get("BuiltIn").$$scope.get("Has")).$new,n.$$p=i.$to_proc(),n).apply(a,[t].concat(e.to_a(d))):e.find_super_dispatcher(o,"method_missing",y,$).apply(o,l)}()}),e.defs(k,"$is_a_matcher?",function(t){var n;if((n=e.get("RSpec").$$scope.get("Matchers").$$scope.get("BuiltIn").$$scope.get("BaseMatcher")["$==="](t))!==s&&(!n.$$is_boolean||1==n))return!0;try{if((n=t["$respond_to?"]("i_respond_to_everything_so_im_not_really_a_matcher"))!==s&&(!n.$$is_boolean||1==n))return!1}catch(r){if(!e.rescue(r,[S.get("NoMethodError")]))throw r;try{return!1}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}return(n=t["$respond_to?"]("matches?"))===s||n.$$is_boolean&&1!=n?!1:(n=t["$respond_to?"]("failure_message"))!==!1&&n!==s?n:t["$respond_to?"]("failure_message_for_should")}),(i=(x=e.get("RSpec").$$scope.get("Support")).$register_matcher_definition,i.$$p=(w=function(e){var t=w.$$s||this;return null==e&&(e=s),t["$is_a_matcher?"](e)},w.$$s=k,w),i).call(x),e.defs(k,"$is_a_describable_matcher?",function(e){var t,n=this;return t=n["$is_a_matcher?"](e),t!==!1&&t!==s?e["$respond_to?"]("description"):t})}(a.base)}(i.base)},Opal.modules["rspec/expectations"]=function(e){e.dynamic_require_severity="ignore";var t,n,r,a,o,$=e.top,i=e,s=e.nil,c=(e.breaker,e.slice,e.module);return e.add_stubs(["$require","$require_rspec_support","$define_optimized_require_for_rspec","$each","$require_rspec_expectations","$new"]),$.$require("rspec/support"),i.get("RSpec").$$scope.get("Support").$require_rspec_support("caller_filter"),i.get("RSpec").$$scope.get("Support").$require_rspec_support("warnings"),$.$require("rspec/matchers"),(t=(n=i.get("RSpec").$$scope.get("Support")).$define_optimized_require_for_rspec,t.$$p=(r=function(e){var t=r.$$s||this;return null==e&&(e=s),t.$require("rspec/expectations/../"+e)},r.$$s=$,r),t).call(n,"expectations"),(t=(a=["expectation_target","configuration","fail_with","handler","version"]).$each,t.$$p=(o=function(e){o.$$s||this;return null==e&&(e=s),i.get("RSpec").$$scope.get("Support").$require_rspec_expectations(e)},o.$$s=$,o),t).call(a),function(t){var n,r=n=c(t,"RSpec"),a=(r.$$proto,r.$$scope);!function(t){var n,r=n=c(t,"Expectations"),a=(r.$$proto,r.$$scope);e.cdecl(a,"ExpectationNotMetError",a.get("Class").$new(e.get("Exception")))}(a.base)}(i.base)},Opal.modules["rspec/core/minitest_assertions_adapter"]=function(e){e.dynamic_require_severity="ignore";var t=e.top,n=e,r=e.nil,a=(e.breaker,e.slice,e.module);e.add_stubs(["$require","$include","$attr_writer"]);try{t.$require("minitest"),t.$require("minitest/assertions")}catch(o){if(!e.rescue(o,[n.get("LoadError")]))throw o;try{t.$require("minitest/unit"),e.cdecl(n,"Minitest",n.get("MiniTest"))}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}return function(t){var n,o=n=a(t,"RSpec"),$=(o.$$proto,o.$$scope);!function(t){var n,o=n=a(t,"Core"),$=(o.$$proto,o.$$scope);!function(t){var n,o=n=a(t,"MinitestAssertionsAdapter");o.$$proto,o.$$scope;o.$include(e.get("Minitest").$$scope.get("Assertions")),o.$attr_writer("assertions"),e.defn(o,"$assertions",function(){var e,t=this;return null==t.assertions&&(t.assertions=r),(e=t.assertions)!==!1&&e!==r?e:t.assertions=0})}($.base)}($.base)}(n.base)},Opal.modules["rspec/core/test_unit_assertions_adapter"]=function(e){e.dynamic_require_severity="ignore";var t=e.top,n=e,r=e.nil,a=(e.breaker,e.slice,e.module);return e.add_stubs(["$require","$include","$include?","$ancestors"]),t.$require("test/unit/assertions"),function(t){var n,o=n=a(t,"RSpec"),$=(o.$$proto,o.$$scope);!function(t){var n,o=n=a(t,"Core"),$=(o.$$proto,o.$$scope);!function(t){var n,o,$=n=a(t,"TestUnitAssertionsAdapter"),i=($.$$proto,$.$$scope);$.$include(e.get("Test").$$scope.get("Unit").$$scope.get("Assertions"));try{(o=$.$ancestors()["$include?"](e.get("Minitest").$$scope.get("Assertions")))===r||o.$$is_boolean&&1!=o||($.$require("rspec/core/minitest_assertions_adapter"),$.$include(e.get("RSpec").$$scope.get("Core").$$scope.get("MinitestAssertionsAdapter")))}catch(s){if(!e.rescue(s,[i.get("NameError")]))throw s;try{}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}($.base)}($.base)}(n.base)},Opal.modules["rspec/core/configuration"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}function a(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function o(e,t){return"number"==typeof e&&"number"==typeof t?e>=t:e["$>="](t)}e.dynamic_require_severity="ignore";var $=(e.top,e),i=e.nil,s=e.breaker,c=e.slice,u=e.module,l=e.klass,_=e.hash2,p=e.gvars,d=e.range;return e.add_stubs(["$require_rspec_core","$include","$define_method","$instance_variable_defined?","$instance_variable_get","$value_for","$alias_method","$define_predicate_for","$each","$key?","$raise","$attr_writer","$add_read_only_setting","$define_aliases","$Array","$[]","$define_reader","$add_setting","$exposed_globally?","$expose_globally!","$remove_globally!","$!","$equal?","$warn","$inspect","$deprecation_stream","$first_non_rspec_line","$output_stream","$update_pattern_attr","$deprecate","$attr_accessor","$attr_reader","$now","$new","$force","$ordering_manager","$merge!","$delete","$class_exec","$__send__","$nil?","$mock_with","$exclusion_patterns","$exclusion_patterns=","$inclusion_patterns","$inclusion_patterns=","$filter_gem","$is_a?","$fetch","$keys","$downcase","$to_s","$const_get","$map","$respond_to?","$framework_name","$==","$assert_no_example_groups_defined","$configuration","$empty?","$expect_with","$===","$require","$expecting_with_rspec=","$any?","$-","$>","$length","$first","$push","$full_backtrace?","$full_backtrace=","$output_to_tty?","$color","$windows_os?","$world","$warning","$unshift","$filter_run","$union","$filter","$<<","$add","$formatter_loader","$default_formatter","$default_formatter=","$dup","$formatters","$deprecation","$setup_default","$play_onto","$reporter","$flatten","$command","$running_in_drb?","$default_path","$get_files_to_run","$build_hash_from","$define_example_method","$define_example_group_method","$define_nested_shared_group_method","$include_with_low_priority","$filter_manager","$include_only","$inclusions","$exclude_with_low_priority","$exclude_only","$exclusions","$include_or_extend_modules","$any_apply?","$<","$select","$directory?","$add_to_load_path","$+","$>=","$to_f","$singleton_class","$extend","$include?","$included_modules","$mock_framework","$conditionally_disable_mocks_monkey_patching","$expectation_frameworks","$conditionally_disable_expectations_monkey_patching","$load","$expand_path","$uniq","$files_to_run","$lambda","$to_proc","$delegate_to_ordering_manager","$module_exec","$let","$deprecation_stream=","$expose_dsl_globally=","$disable_monkey_patching=","$call","$private","$sort","$flat_map","$gsub","$gather_directories","$extract_location","$paths_to_check","$pattern_might_load_specs_from_vendored_dirs?","$split","$pattern","$get_matching_files","$exclude_pattern","$file_glob_from","$=~","$escape","$absolute_pattern?","$join","$windows?","$windows_absolute_network_path?","$start_with?","$match","$captures","$to_i","$add_location","$last","$example_groups","$tty?","$disable_monkey_patching","$rspec_mocks_loaded?","$tap","$syntax=","$patch_marshal_to_support_partial_doubles=","$rspec_expectations_loaded?","$instance_variable_set"]),$.get("RSpec").$$scope.get("Support").$require_rspec_core("backtrace_formatter"),$.get("RSpec").$$scope.get("Support").$require_rspec_core("ruby_project"),$.get("RSpec").$$scope.get("Support").$require_rspec_core("formatters/deprecation_formatter"),function($){var f,g=f=u($,"RSpec"),h=(g.$$proto,g.$$scope);!function($){var f,g=f=u($,"Core"),h=(g.$$proto,g.$$scope);!function($,$super){function f(){}var g,h,m,v,b,y,x,w=f=l($,$super,"Configuration",f),k=w.$$proto,S=w.$$scope;return k.reporter=k.deprecation_stream=k.output_stream=k.preferred_options=k.mock_framework=k.backtrace_formatter=k.expectation_frameworks=k.color=k.formatter_loader=k.reporter_buffer=k.profile_examples=k.files_to_run=k.files_or_directories_to_run=k.requires=k.format_docstrings_block=k.derived_metadata_blocks=k.spec_files_loaded=i,w.$include(S.get("RSpec").$$scope.get("Core").$$scope.get("Hooks")),function(e,$super){function t(){}var n=t=l(e,$super,"MustBeConfiguredBeforeExampleGroupsError",t);n.$$proto,n.$$scope;return i}(S.base,S.get("StandardError")),e.defs(w,"$define_reader",function(e){var t,n,r,a=this;return(t=(n=a).$define_method,t.$$p=(r=function(){var t,n=r.$$s||this,a=i;return a=function(){return(t=n["$instance_variable_defined?"]("@"+e))===i||t.$$is_boolean&&1!=t?i:n.$instance_variable_get("@"+e)}(),n.$value_for(e,a)},r.$$s=a,r),t).call(n,e)}),e.defs(w,"$define_aliases",function(e,t){var n=this;return n.$alias_method(t,e),n.$alias_method(""+t+"=",""+e+"="),n.$define_predicate_for(t)}),e.defs(w,"$define_predicate_for",function(){var e,t,n,r=this,a=i,o=arguments.length-0;0>o&&(o=0);var $=new Array(o);for(a=0;o>a;a++)$[a]=arguments[a+0];return(e=(t=$).$each,e.$$p=(n=function(e){var t=n.$$s||this;return null==e&&(e=i),t.$alias_method(""+e+"?",e)},n.$$s=r,n),e).call(t)}),e.defs(w,"$add_setting",function(e,t){var n,r,a,o=this;return null==t&&(t=_([],{})),(n=t["$key?"]("default"))===i||n.$$is_boolean&&1!=n||o.$raise("Use the instance add_setting method if you want to set a default"),o.$attr_writer(e),o.$add_read_only_setting(e),(n=(r=o.$Array(t["$[]"]("alias_with"))).$each,n.$$p=(a=function(t){var n=a.$$s||this;return null==t&&(t=i),n.$define_aliases(e,t)},a.$$s=o,a),n).call(r)}),e.defs(w,"$add_read_only_setting",function(e,t){var n,r=this;return null==t&&(t=_([],{})),(n=t["$key?"]("default"))===i||n.$$is_boolean&&1!=n||r.$raise("Use the instance add_setting method if you want to set a default"),r.$define_reader(e),r.$define_predicate_for(e)}),w.$add_setting("default_path"),w.$add_setting("drb"),w.$add_setting("drb_port"),w.$add_setting("error_stream"),e.defn(w,"$expose_dsl_globally?",function(){return S.get("Core").$$scope.get("DSL")["$exposed_globally?"]()}),e.defn(w,"$expose_dsl_globally=",function(e){return e!==!1&&e!==i?(S.get("Core").$$scope.get("DSL")["$expose_globally!"](),S.get("Core").$$scope.get("SharedExampleGroup").$$scope.get("TopLevelDSL")["$expose_globally!"]()):(S.get("Core").$$scope.get("DSL")["$remove_globally!"](),S.get("Core").$$scope.get("SharedExampleGroup").$$scope.get("TopLevelDSL")["$remove_globally!"]())}),w.$define_reader("deprecation_stream"),e.defn(w,"$deprecation_stream=",function(e){var t,n,r=this;return n=r.reporter,(t=n!==!1&&n!==i?e["$equal?"](r.deprecation_stream)["$!"]():n)===i||t.$$is_boolean&&1!=t?r.deprecation_stream=e:r.$warn("RSpec's reporter has already been initialized with "+(""+r.$deprecation_stream().$inspect()+" as the deprecation stream, so your change to ")+"`deprecation_stream` will be ignored. You should configure it earlier for it to take effect, or use the `--deprecation-out` CLI option. "+("(Called from "+S.get("CallerFilter").$first_non_rspec_line()+")"))}),w.$add_setting("fail_fast"),w.$add_setting("dry_run"),w.$add_setting("failure_exit_code"),w.$define_reader("requires"),w.$define_reader("libs"),w.$define_reader("output_stream"),e.defn(w,"$output_stream=",function(e){var t,n,r=this;return n=r.reporter,(t=n!==!1&&n!==i?e["$equal?"](r.output_stream)["$!"]():n)===i||t.$$is_boolean&&1!=t?r.output_stream=e:r.$warn("RSpec's reporter has already been initialized with "+(""+r.$output_stream().$inspect()+" as the output stream, so your change to ")+"`output_stream` will be ignored. You should configure it earlier for "+("it to take effect. (Called from "+S.get("CallerFilter").$first_non_rspec_line()+")"))}),w.$define_reader("pattern"),e.defn(w,"$pattern=",function(e){var t=this;return t.$update_pattern_attr("pattern",e)}),w.$define_reader("exclude_pattern"),e.defn(w,"$exclude_pattern=",function(e){var t=this;return t.$update_pattern_attr("exclude_pattern",e)}),w.$add_setting("profile_examples"),w.$add_setting("run_all_when_everything_filtered"),w.$add_setting("success_color"),
w.$add_setting("pending_color"),w.$add_setting("failure_color"),w.$add_setting("default_color"),w.$add_setting("fixed_color"),w.$add_setting("detail_color"),e.defn(w,"$treat_symbols_as_metadata_keys_with_true_values=",function(e){return S.get("RSpec").$deprecate("RSpec::Core::Configuration#treat_symbols_as_metadata_keys_with_true_values=",_(["message"],{message:"RSpec::Core::Configuration#treat_symbols_as_metadata_keys_with_true_values= is deprecated, it is now set to true as default and setting it to false has no effect."}))}),w.$add_setting("start_time"),w.$add_setting("tty"),w.$add_setting("include_or_extend_modules"),w.$attr_writer("files_to_run"),w.$add_setting("expecting_with_rspec"),w.$attr_accessor("filter_manager"),w.$attr_reader("backtrace_formatter","ordering_manager"),e.defn(w,"$initialize",function(){var t,n=this;return null==p._rspec_core_load_started_at&&(p._rspec_core_load_started_at=i),null==p.stderr&&(p.stderr=i),null==p.stdout&&(p.stdout=i),n.start_time=(t=p._rspec_core_load_started_at)!==!1&&t!==i?t:e.get("RSpec").$$scope.get("Core").$$scope.get("Time").$now(),n.expectation_frameworks=[],n.include_or_extend_modules=[],n.mock_framework=i,n.files_or_directories_to_run=[],n.color=!1,n.pattern="**{,/*/**}/*_spec.rb",n.exclude_pattern="",n.failure_exit_code=1,n.spec_files_loaded=!1,n.backtrace_formatter=S.get("BacktraceFormatter").$new(),n.default_path="spec",n.deprecation_stream=p.stderr,n.output_stream=p.stdout,n.reporter=i,n.reporter_buffer=i,n.filter_manager=S.get("FilterManager").$new(),n.ordering_manager=S.get("Ordering").$$scope.get("ConfigurationManager").$new(),n.preferred_options=_([],{}),n.failure_color="red",n.success_color="green",n.pending_color="yellow",n.default_color="white",n.fixed_color="blue",n.detail_color="cyan",n.profile_examples=!1,n.requires=[],n.libs=[],n.derived_metadata_blocks=[]}),e.defn(w,"$force",function(e){var t=this;return t.$ordering_manager().$force(e),t.preferred_options["$merge!"](e)}),e.defn(w,"$reset",function(){var e=this;return e.spec_files_loaded=!1,e.reporter=i,e.formatter_loader=i}),e.defn(w,"$add_setting",function(t,n){var r,a,o,$=this,s=i;return null==n&&(n=_([],{})),s=n.$delete("default"),(r=(a=function(e){e.$$scope,e.$$proto;return e}(e.get_singleton_class($))).$class_exec,r.$$p=(o=function(){var e=o.$$s||this;return e.$add_setting(t,n)},o.$$s=$,o),r).call(a),s!==!1&&s!==i?$.$__send__(""+t+"=",s):i}),e.defn(w,"$mock_framework",function(){var t,n=this;if((t=n.mock_framework["$nil?"]())!==i&&(!t.$$is_boolean||1==t))try{n.$mock_with("rspec")}catch(r){if(!e.rescue(r,[S.get("LoadError")]))throw r;try{n.$mock_with("nothing")}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}return n.mock_framework}),e.defn(w,"$mock_framework=",function(e){var t=this;return t.$mock_with(e)}),e.defn(w,"$backtrace_exclusion_patterns",function(){var e=this;return e.backtrace_formatter.$exclusion_patterns()}),e.defn(w,"$backtrace_exclusion_patterns=",function(e){var t,n,r=this;return t=[e],n=r.backtrace_formatter,n["$exclusion_patterns="].apply(n,t),t[t.length-1]}),e.defn(w,"$backtrace_inclusion_patterns",function(){var e=this;return e.backtrace_formatter.$inclusion_patterns()}),e.defn(w,"$backtrace_inclusion_patterns=",function(e){var t,n,r=this;return t=[e],n=r.backtrace_formatter,n["$inclusion_patterns="].apply(n,t),t[t.length-1]}),e.defn(w,"$filter_gems_from_backtrace",function(){var e,t,n,r=this,a=i,o=arguments.length-0;0>o&&(o=0);var $=new Array(o);for(a=0;o>a;a++)$[a]=arguments[a+0];return(e=(t=$).$each,e.$$p=(n=function(e){var t=n.$$s||this;return null==t.backtrace_formatter&&(t.backtrace_formatter=i),null==e&&(e=i),t.backtrace_formatter.$filter_gem(e)},n.$$s=r,n),e).call(t)}),e.cdecl(S,"MOCKING_ADAPTERS",_(["rspec","flexmock","rr","mocha","nothing"],{rspec:"RSpec",flexmock:"Flexmock",rr:"RR",mocha:"Mocha",nothing:"Null"})),e.defn(w,"$mock_with",g=function(t){var n,r,a,o,$,c,u,l=this,_=g.$$p,p=_||i,d=i,f=i,h=i,m=i;return g.$$p=null,d=function(){return(n=t["$is_a?"](S.get("Module")))===i||n.$$is_boolean&&1!=n?(f=(n=(r=S.get("MOCKING_ADAPTERS")).$fetch,n.$$p=(a=function(){var e=a.$$s||this;return e.$raise(S.get("ArgumentError"),"Unknown mocking framework: "+t.$inspect()+". Pass a module or one of "+S.get("MOCKING_ADAPTERS").$keys().$inspect())},a.$$s=l,a),n).call(r,t),S.get("RSpec").$$scope.get("Support").$require_rspec_core("mocking_adapters/"+f.$to_s().$downcase()),S.get("RSpec").$$scope.get("Core").$$scope.get("MockingAdapters").$const_get(f)):t}(),o=($=(c=[d,l.mock_framework]).$map,$.$$p=(u=function(e){var t;u.$$s||this;return null==e&&(e=i),(t=e["$respond_to?"]("framework_name"))===i||t.$$is_boolean&&1!=t?"unnamed":e.$framework_name()},u.$$s=l,u),$).call(c),n=e.to_ary(o),h=null==n[0]?i:n[0],m=null==n[1]?i:n[1],o,h["$=="](m)||l.$assert_no_example_groups_defined("mock_framework"),p!==i&&(((n=d["$respond_to?"]("configuration"))===i||n.$$is_boolean&&1!=n)&&l.$raise(""+d+" must respond to `configuration` so that mock_with can yield it."),e.yield1(p,d.$configuration())===s)?s.$v:l.mock_framework=d}),e.defn(w,"$expectation_frameworks",function(){var t,n=this;if((t=n.expectation_frameworks["$empty?"]())!==i&&(!t.$$is_boolean||1==t))try{n.$expect_with("rspec")}catch(r){if(!e.rescue(r,[S.get("LoadError")]))throw r;try{n.$expect_with(S.get("Module").$new())}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}return n.expectation_frameworks}),e.defn(w,"$expectation_framework=",function(e){var t=this;return t.$expect_with(e)}),e.defn(w,"$expect_with",h=function(){var r,a,o,$=this,c=h.$$p,u=c||i,l=i,_=i,p=arguments.length-0;0>p&&(p=0);var d=new Array(p);for(_=0;p>_;_++)d[_]=arguments[_+0];return h.$$p=null,l=(r=(a=d).$map,r.$$p=(o=function(t){var n,r,a=o.$$s||this,$=i;return null==t&&(t=i),function(){return $=t,S.get("Module")["$==="]($)?t:"rspec"["$==="]($)?(a.$require("rspec/expectations"),n=[!0],r=a,r["$expecting_with_rspec="].apply(r,n),n[n.length-1],e.get("RSpec").$$scope.get("Matchers")):"test_unit"["$==="]($)?(a.$require("rspec/core/test_unit_assertions_adapter"),e.get("RSpec").$$scope.get("Core").$$scope.get("TestUnitAssertionsAdapter")):"minitest"["$==="]($)?(a.$require("rspec/core/minitest_assertions_adapter"),e.get("RSpec").$$scope.get("Core").$$scope.get("MinitestAssertionsAdapter")):a.$raise(S.get("ArgumentError"),""+t.$inspect()+" is not supported")}()},o.$$s=$,o),r).call(a),(r=t(l,$.expectation_frameworks)["$any?"]())===i||r.$$is_boolean&&1!=r||$.$assert_no_example_groups_defined("expect_with"),u!==i&&(n(l.$length(),1)&&$.$raise("expect_with only accepts a block with a single argument. Call expect_with "+l.$length()+" times, once with each argument, instead."),((r=l.$first()["$respond_to?"]("configuration"))===i||r.$$is_boolean&&1!=r)&&$.$raise(""+l.$first()+" must respond to `configuration` so that expect_with can yield it."),e.yield1(u,l.$first().$configuration())===s)?s.$v:(r=$.expectation_frameworks).$push.apply(r,e.to_a(l))}),e.defn(w,"$full_backtrace?",function(){var e=this;return e.backtrace_formatter["$full_backtrace?"]()}),e.defn(w,"$full_backtrace=",function(e){var t,n,r=this;return t=[e],n=r.backtrace_formatter,n["$full_backtrace="].apply(n,t),t[t.length-1]}),e.defn(w,"$color",function(){var e=this;return e.$value_for("color",e.color)}),e.defn(w,"$color_enabled?",function(e){var t,n=this;return null==e&&(e=n.$output_stream()),t=n["$output_to_tty?"](e),t!==!1&&t!==i?n.$color():t}),e.defn(w,"$color=",function(e){var t,n,r=this;return e===!1||e===i?i:(n=S.get("RSpec").$world()["$windows_os?"](),(t=n!==!1&&n!==i?S.get("ENV")["$[]"]("ANSICON")["$!"]():n)===i||t.$$is_boolean&&1!=t?r.color=!0:(S.get("RSpec").$warning("You must use ANSICON 1.31 or later (http://adoxa.3eeweb.com/ansicon/) to use colour on Windows"),r.color=!1))}),e.defn(w,"$libs=",function(e){var t,n,r,a=this;return(t=(n=e).$map,t.$$p=(r=function(e){var t=r.$$s||this;return null==t.libs&&(t.libs=i),null==p.LOAD_PATH&&(p.LOAD_PATH=i),null==e&&(e=i),t.libs.$unshift(e),p.LOAD_PATH.$unshift(e)},r.$$s=a,r),t).call(n)}),e.defn(w,"$full_description=",function(t){var n,r,a,o,$=this;return $.$filter_run(_(["full_description"],{full_description:(n=S.get("Regexp")).$union.apply(n,e.to_a((r=(a=$.$Array(t)).$map,r.$$p=(o=function(e){o.$$s||this;return null==e&&(e=i),S.get("Regexp").$new(e)},o.$$s=$,o),r).call(a)))}))}),e.defn(w,"$full_description",function(){var e=this;return e.$filter().$fetch("full_description",i)}),e.defn(w,"$add_formatter",function(t){var n,r=this,a=i,o=arguments.length-1;0>o&&(o=0);var $=new Array(o);for(a=0;o>a;a++)$[a]=arguments[a+1];return(n=$["$empty?"]())===i||n.$$is_boolean&&1!=n||$["$<<"](r.$output_stream()),(n=r.$formatter_loader()).$add.apply(n,[t].concat(e.to_a($)))}),w.$alias_method("formatter=","add_formatter"),e.defn(w,"$default_formatter",function(){var e=this;return e.$formatter_loader().$default_formatter()}),e.defn(w,"$default_formatter=",function(e){var t,n,r=this;return t=[e],n=r.$formatter_loader(),n["$default_formatter="].apply(n,t),t[t.length-1]}),e.defn(w,"$formatters",function(){var e=this;return e.$formatter_loader().$formatters().$dup()}),e.defn(w,"$formatter_loader",function(){var e,t=this;return(e=t.formatter_loader)!==!1&&e!==i?e:t.formatter_loader=S.get("Formatters").$$scope.get("Loader").$new(S.get("Reporter").$new(t))}),function(t,$super){function n(){}var r=n=l(t,$super,"DeprecationReporterBuffer",n),a=r.$$proto;r.$$scope;return a.calls=i,e.defn(r,"$initialize",function(){var e=this;return e.calls=[]}),e.defn(r,"$deprecation",function(){var e=this,t=i,n=arguments.length-0;0>n&&(n=0);var r=new Array(n);for(t=0;n>t;t++)r[t]=arguments[t+0];return e.calls["$<<"](r)}),e.defn(r,"$play_onto",function(t){var n,r,a,o=this;return(n=(r=o.calls).$each,n.$$p=(a=function(n){var r;a.$$s||this;return null==n&&(n=i),(r=t).$deprecation.apply(r,e.to_a(n))},a.$$s=o,a),n).call(r)}),i&&"play_onto"}(S.base,null),e.defn(w,"$reporter",function(){var e,t,n=this;return(e=n.reporter_buffer)!==!1&&e!==i?e:(t=n.reporter)!==!1&&t!==i?t:n.reporter=function(){return n.reporter_buffer=S.get("DeprecationReporterBuffer").$new(),n.$formatter_loader().$setup_default(n.$output_stream(),n.$deprecation_stream()),n.reporter_buffer.$play_onto(n.$formatter_loader().$reporter()),n.reporter_buffer=i,n.$formatter_loader().$reporter()}()}),e.defn(w,"$profile_examples",function(){var e,t,n=this,r=i;return r=n.$value_for("profile_examples",n.profile_examples),(e=(t=r!==!1&&r!==i)?r["$is_a?"](S.get("Integer"))["$!"]():r)===i||e.$$is_boolean&&1!=e?r:10}),e.defn(w,"$files_or_directories_to_run=",function(){var e,t,n,r,a=this,o=i,$=arguments.length-0;0>$&&($=0);var s=new Array($);for(o=0;$>o;o++)s[o]=arguments[o+0];return s=s.$flatten(),n=(r=a.$command()["$=="]("rspec"))!==!1&&r!==i?r:S.get("Runner")["$running_in_drb?"](),t=n!==!1&&n!==i?a.$default_path():n,(e=t!==!1&&t!==i?s["$empty?"]():t)===i||e.$$is_boolean&&1!=e||s["$<<"](a.$default_path()),a.files_or_directories_to_run=s,a.files_to_run=i}),e.defn(w,"$files_to_run",function(){var e,t=this;return(e=t.files_to_run)!==!1&&e!==i?e:t.files_to_run=t.$get_files_to_run(t.files_or_directories_to_run)}),e.defn(w,"$alias_example_to",function(e){var t=i,n=i,r=arguments.length-1;0>r&&(r=0);var a=new Array(r);for(n=0;r>n;n++)a[n]=arguments[n+1];return t=S.get("Metadata").$build_hash_from(a),S.get("RSpec").$$scope.get("Core").$$scope.get("ExampleGroup").$define_example_method(e,t)}),e.defn(w,"$alias_example_group_to",function(e){var t=i,n=i,r=arguments.length-1;0>r&&(r=0);var a=new Array(r);for(n=0;r>n;n++)a[n]=arguments[n+1];return t=S.get("Metadata").$build_hash_from(a),S.get("RSpec").$$scope.get("Core").$$scope.get("ExampleGroup").$define_example_group_method(e,t)}),e.defn(w,"$alias_it_behaves_like_to",function(e,t){return null==t&&(t=""),S.get("RSpec").$$scope.get("Core").$$scope.get("ExampleGroup").$define_nested_shared_group_method(e,t)}),w.$alias_method("alias_it_should_behave_like_to","alias_it_behaves_like_to"),e.defn(w,"$filter_run_including",function(){var e=this,t=i,n=i,r=arguments.length-0;0>r&&(r=0);var a=new Array(r);for(n=0;r>n;n++)a[n]=arguments[n+0];return t=S.get("Metadata").$build_hash_from(a,"warn_about_example_group_filtering"),e.$filter_manager().$include_with_low_priority(t)}),w.$alias_method("filter_run","filter_run_including"),e.defn(w,"$inclusion_filter=",function(e){var t=this,n=i;return n=S.get("Metadata").$build_hash_from([e],"warn_about_example_group_filtering"),t.$filter_manager().$include_only(n)}),w.$alias_method("filter=","inclusion_filter="),e.defn(w,"$inclusion_filter",function(){var e=this;return e.$filter_manager().$inclusions()}),w.$alias_method("filter","inclusion_filter"),e.defn(w,"$filter_run_excluding",function(){var e=this,t=i,n=i,r=arguments.length-0;0>r&&(r=0);var a=new Array(r);for(n=0;r>n;n++)a[n]=arguments[n+0];return t=S.get("Metadata").$build_hash_from(a,"warn_about_example_group_filtering"),e.$filter_manager().$exclude_with_low_priority(t)}),e.defn(w,"$exclusion_filter=",function(e){var t=this,n=i;return n=S.get("Metadata").$build_hash_from([e],"warn_about_example_group_filtering"),t.$filter_manager().$exclude_only(n)}),e.defn(w,"$exclusion_filter",function(){var e=this;return e.$filter_manager().$exclusions()}),e.defn(w,"$include",function(e){var t=this,n=i,r=i,a=arguments.length-1;0>a&&(a=0);var o=new Array(a);for(r=0;a>r;r++)o[r]=arguments[r+1];return n=S.get("Metadata").$build_hash_from(o,"warn_about_example_group_filtering"),t.$include_or_extend_modules()["$<<"](["include",e,n])}),e.defn(w,"$extend",function(e){var t=this,n=i,r=i,a=arguments.length-1;0>a&&(a=0);var o=new Array(a);for(r=0;a>r;r++)o[r]=arguments[r+1];return n=S.get("Metadata").$build_hash_from(o,"warn_about_example_group_filtering"),t.$include_or_extend_modules()["$<<"](["extend",e,n])}),e.defn(w,"$configure_group",function(e){var t,n,r,a=this;return(t=(n=a.$include_or_extend_modules()).$each,t.$$p=(r=function(t,n,a){var o,$,s=r.$$s||this;return null==t&&(t=i),null==n&&(n=i),null==a&&(a=i),(o=($=a["$empty?"]())!==!1&&$!==i?$:e["$any_apply?"](a))===i||o.$$is_boolean&&1!=o?i:s.$__send__("safe_"+t,n,e)},r.$$s=a,r),t).call(n)}),e.defn(w,"$safe_include",function(e,t){return r(t,e)?i:t.$__send__("include",e)}),e.defn(w,"$requires=",function(t){var n,r,o,$,s,c,u=this,l=i;return l=(n=(r=["lib",u.$default_path()]).$select,n.$$p=(o=function(e){o.$$s||this;return null==e&&(e=i),S.get("File")["$directory?"](e)},o.$$s=u,o),n).call(r),(n=S.get("RSpec").$$scope.get("Core").$$scope.get("RubyProject")).$add_to_load_path.apply(n,e.to_a(l)),($=(s=t).$each,$.$$p=(c=function(e){var t=c.$$s||this;return null==e&&(e=i),t.$require(e)},c.$$s=u,c),$).call(s),u.requires=a(u.requires,t)}),o(S.get("RUBY_VERSION").$to_f(),1.9)?e.defn(w,"$safe_extend",function(e,t){return r(t.$singleton_class(),e)?i:t.$extend(e)}):e.defn(w,"$safe_extend",function(t,n){var r;return(r=function(e){e.$$scope,e.$$proto;return e}(e.get_singleton_class(n)).$included_modules()["$include?"](t))===i||r.$$is_boolean&&1!=r?n.$extend(t):i}),e.defn(w,"$configure_mock_framework",function(){var e=this;return S.get("RSpec").$$scope.get("Core").$$scope.get("ExampleGroup").$__send__("include",e.$mock_framework()),e.$conditionally_disable_mocks_monkey_patching()}),e.defn(w,"$configure_expectation_framework",function(){var e,t,n,r=this;return(e=(t=r.$expectation_frameworks()).$each,e.$$p=(n=function(e){n.$$s||this;return null==e&&(e=i),S.get("RSpec").$$scope.get("Core").$$scope.get("ExampleGroup").$__send__("include",e)},n.$$s=r,n),e).call(t),r.$conditionally_disable_expectations_monkey_patching()}),e.defn(w,"$load_spec_files",function(){var e,t,n,r=this;return(e=(t=r.$files_to_run().$uniq()).$each,e.$$p=(n=function(e){var t=n.$$s||this;return null==e&&(e=i),t.$load(S.get("File").$expand_path(e))},n.$$s=r,n),e).call(t),r.spec_files_loaded=!0}),e.cdecl(S,"DEFAULT_FORMATTER",(m=(v=w).$lambda,m.$$p=(b=function(e){b.$$s||this;return null==e&&(e=i),e},b.$$s=w,b),m).call(v)),e.defn(w,"$format_docstrings",y=function(){var e=this,t=y.$$p,n=t||i;return y.$$p=null,e.format_docstrings_block=function(){return n!==i?n:S.get("DEFAULT_FORMATTER")}()}),e.defn(w,"$format_docstrings_block",function(){var e,t=this;return(e=t.format_docstrings_block)!==!1&&e!==i?e:t.format_docstrings_block=S.get("DEFAULT_FORMATTER")}),e.defs(w,"$delegate_to_ordering_manager",function(){var t,n,r,a=this,o=i,$=arguments.length-0;0>$&&($=0);var s=new Array($);for(o=0;$>o;o++)s[o]=arguments[o+0];return(t=(n=s).$each,t.$$p=(r=function(t){var n,a,o,$=r.$$s||this;return null==t&&(t=i),(n=(a=$).$define_method,n.$$p=(o=function(n){var r,a,$,s=o.$$s||this;return n=c.call(arguments,0),r=o.$$p||i,o.$$p=null,(a=($=s.$ordering_manager()).$__send__,a.$$p=r.$to_proc(),a).apply($,[t].concat(e.to_a(n)))},o.$$s=$,o),n).call(a,t)},r.$$s=a,r),t).call(n)}),w.$delegate_to_ordering_manager("seed="),w.$delegate_to_ordering_manager("seed"),w.$delegate_to_ordering_manager("order="),w.$delegate_to_ordering_manager("register_ordering"),w.$delegate_to_ordering_manager("seed_used?","ordering_registry"),e.defn(w,"$warnings=",function(e){return p.VERBOSE=e["$!"]()["$!"]()}),e.defn(w,"$warnings?",function(){return null==p.VERBOSE&&(p.VERBOSE=i),p.VERBOSE}),e.defn(w,"$expose_current_running_example_as",function(e){var t,n,r,a=this;return(t=(n=S.get("ExposeCurrentExample")).$module_exec,t.$$p=(r=function(){var t,n,a,o=r.$$s||this;return o.$extend(S.get("RSpec").$$scope.get("SharedContext")),(t=(n=o).$let,t.$$p=(a=function(e){a.$$s||this;return null==e&&(e=i),e},a.$$s=o,a),t).call(n,e)},r.$$s=a,r),t).call(n),a.$include(S.get("ExposeCurrentExample"))}),function(e){var t,n=t=u(e,"ExposeCurrentExample");n.$$proto,n.$$scope}(S.base),e.defn(w,"$raise_errors_for_deprecations!",function(){var e,t,n=this;return e=[S.get("Formatters").$$scope.get("DeprecationFormatter").$$scope.get("RaiseErrorStream").$new()],t=n,t["$deprecation_stream="].apply(t,e),e[e.length-1]}),e.defn(w,"$disable_monkey_patching!",function(){var e,t,n=this;return e=[!1],t=n,t["$expose_dsl_globally="].apply(t,e),e[e.length-1],e=[!0],t=n,t["$disable_monkey_patching="].apply(t,e),e[e.length-1],n.$conditionally_disable_mocks_monkey_patching(),n.$conditionally_disable_expectations_monkey_patching()}),w.$attr_accessor("disable_monkey_patching"),e.defn(w,"$define_derived_metadata",x=function(){var e=this,t=x.$$p,n=t||i,r=i,a=i,o=arguments.length-0;0>o&&(o=0);var $=new Array(o);for(a=0;o>a;a++)$[a]=arguments[a+0];return x.$$p=null,r=S.get("Metadata").$build_hash_from($,"warn_about_example_group_filtering"),e.derived_metadata_blocks["$<<"]([r,n])}),e.defn(w,"$apply_derived_metadata_to",function(e){var t,n,r,a=this;return(t=(n=a.derived_metadata_blocks).$each,t.$$p=(r=function(t,n){var a,o;r.$$s||this;return null==t&&(t=i),null==n&&(n=i),(a=(o=t["$empty?"]())!==!1&&o!==i?o:S.get("MetadataFilter")["$any_apply?"](t,e))===i||a.$$is_boolean&&1!=a?i:n.$call(e)},r.$$s=a,r),t).call(n)}),w.$private(),e.defn(w,"$get_files_to_run",function(e){var t,n,r,a=this;return(t=(n=S.get("FlatMap")).$flat_map,t.$$p=(r=function(e){var t,n=r.$$s||this;return null==e&&(e=i),(t=S.get("File").$$scope.get("ALT_SEPARATOR"))===i||t.$$is_boolean&&1!=t||(e=e.$gsub(S.get("File").$$scope.get("ALT_SEPARATOR"),S.get("File").$$scope.get("SEPARATOR"))),(t=S.get("File")["$directory?"](e))===i||t.$$is_boolean&&1!=t?n.$extract_location(e):n.$gather_directories(e)},r.$$s=a,r),t).call(n,a.$paths_to_check(e)).$sort().$uniq()}),e.defn(w,"$paths_to_check",function(e){var t,n=this;return(t=n["$pattern_might_load_specs_from_vendored_dirs?"]())===i||t.$$is_boolean&&1!=t?a(e,["."]):e}),e.defn(w,"$pattern_might_load_specs_from_vendored_dirs?",function(){var e=this;return e.$pattern().$split(S.get("File").$$scope.get("SEPARATOR")).$first()["$include?"]("**")}),e.defn(w,"$gather_directories",function(e){var n=this,r=i,a=i;return r=n.$get_matching_files(e,n.$pattern()),a=n.$get_matching_files(e,n.$exclude_pattern()),t(r,a).$sort().$uniq()}),e.defn(w,"$get_matching_files",function(e,t){var n,r,a,o=this;return(n=(r=S.get("Dir")["$[]"](o.$file_glob_from(e,t))).$map,n.$$p=(a=function(e){a.$$s||this;return null==e&&(e=i),S.get("File").$expand_path(e)},a.$$s=o,a),n).call(r)}),e.defn(w,"$file_glob_from",function(e,t){var n,r,a=this,o=i;return o="{"+t.$gsub(/\s*,\s*/,",")+"}",(n=(r=t["$=~"](new RegExp("^(\\.\\/)?"+S.get("Regexp").$escape(e))))!==!1&&r!==i?r:a["$absolute_pattern?"](t))===i||n.$$is_boolean&&1!=n?S.get("File").$join(e,o):o}),(m=S.get("RSpec").$$scope.get("Support").$$scope.get("OS")["$windows?"]())===i||m.$$is_boolean&&1!=m?e.defn(w,"$absolute_pattern?",function(e){return e["$start_with?"](S.get("File").$$scope.get("Separator"))}):(e.defn(w,"$absolute_pattern?",function(e){var t,n=this;return(t=e["$=~"](/\A[A-Z]:\\/))!==!1&&t!==i?t:n["$windows_absolute_network_path?"](e)}),e.defn(w,"$windows_absolute_network_path?",function(t){var n;return(n=e.get("File").$$scope.get("ALT_SEPARATOR"))===i||n.$$is_boolean&&1!=n?!1:t["$start_with?"](a(e.get("File").$$scope.get("ALT_SEPARATOR"),e.get("File").$$scope.get("ALT_SEPARATOR")))})),e.defn(w,"$extract_location",function(e){var t,n,r,a,o=this,$=i,s=i,c=i;return $=/^(.*?)((?:\:\d+)+)$/.$match(e),$!==!1&&$!==i&&(s=$.$captures(),t=[s["$[]"](0),(n=(r=s["$[]"](1)["$[]"](d(1,-1,!1)).$split(":")).$map,n.$$p=(a=function(e){a.$$s||this;return null==e&&(e=i),e.$to_i()},a.$$s=o,a),n).call(r)],e=t[0],c=t[1],t,o.$filter_manager().$add_location(e,c)),e["$=="](o.$default_path())?[]:e}),e.defn(w,"$command",function(){return null==p[0]&&(p[0]=i),p[0].$split(S.get("File").$$scope.get("SEPARATOR")).$last()}),e.defn(w,"$value_for",function(e,t){var n,r=this;return null==t&&(t=i),(n=r.preferred_options["$key?"](e))===i||n.$$is_boolean&&1!=n?t:r.preferred_options["$[]"](e)}),e.defn(w,"$assert_no_example_groups_defined",function(e){var t,n=this;return(t=S.get("RSpec").$world().$example_groups()["$any?"]())===i||t.$$is_boolean&&1!=t?i:n.$raise(S.get("MustBeConfiguredBeforeExampleGroupsError").$new("RSpec's "+e+" configuration option must be configured before any example groups are defined, but you have already defined a group."))}),e.defn(w,"$output_to_tty?",function(e){var t,n,r=this;return null==e&&(e=r.$output_stream()),(t=r["$tty?"]())!==!1&&t!==i?t:(n=e["$respond_to?"]("tty?"),n!==!1&&n!==i?e["$tty?"]():n)}),e.defn(w,"$conditionally_disable_mocks_monkey_patching",function(){var e,t,n,r=this;return t=r.$disable_monkey_patching(),(e=t!==!1&&t!==i?r["$rspec_mocks_loaded?"]():t)===i||e.$$is_boolean&&1!=e?i:(e=(t=S.get("RSpec").$$scope.get("Mocks").$configuration()).$tap,e.$$p=(n=function(e){var t,r;n.$$s||this;return null==e&&(e=i),t=["expect"],r=e,r["$syntax="].apply(r,t),t[t.length-1],t=[!1],r=e,r["$patch_marshal_to_support_partial_doubles="].apply(r,t),t[t.length-1]},n.$$s=r,n),e).call(t)}),e.defn(w,"$conditionally_disable_expectations_monkey_patching",function(){var e,t,n=this;return t=n.$disable_monkey_patching(),(e=t!==!1&&t!==i?n["$rspec_expectations_loaded?"]():t)===i||e.$$is_boolean&&1!=e?i:(e=["expect"],t=S.get("RSpec").$$scope.get("Expectations").$configuration(),t["$syntax="].apply(t,e),e[e.length-1])}),e.defn(w,"$rspec_mocks_loaded?",function(){var e;return(e=S.get("RSpec").$$scope.get("Mocks").$configuration)&&!e.$$stub||S.get("RSpec").$$scope.get("Mocks")["$respond_to_missing?"]("configuration")?"method":i}),e.defn(w,"$rspec_expectations_loaded?",function(){var e;return(e=S.get("RSpec").$$scope.get("Expectations").$configuration)&&!e.$$stub||S.get("RSpec").$$scope.get("Expectations")["$respond_to_missing?"]("configuration")?"method":i}),e.defn(w,"$update_pattern_attr",function(e,t){var n,r=this;return(n=r.spec_files_loaded)===i||n.$$is_boolean&&1!=n||S.get("RSpec").$warning("Configuring `"+e+"` to "+t+" has no effect since RSpec has already loaded the spec files."),r.$instance_variable_set("@"+e.$to_s(),t),r.files_to_run=i}),i&&"update_pattern_attr"}(h.base,null)}(h.base)}($.base)},Opal.modules["rspec/core/configuration_options"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="ignore";var n=e.top,r=e,a=e.nil,o=(e.breaker,e.slice,e.module),$=e.klass,i=e.hash2,s=e.hash;return e.add_stubs(["$require","$dup","$organize_options","$process_options_into","$configure_filter_manager","$filter_manager","$load_formatters_into","$each","$__send__","$attr_reader","$private","$key?","$<<","$delete","$file_options","$command_line_options","$env_options","$inject","$merge","$include?","$+","$to_set","$!","$unshift","$reverse","$reject","$options","$force?","$force","$[]","$order","$keys","$add_formatter","$custom_options_file","$custom_options","$global_options","$project_options","$local_options","$parse","$split","$options_from","$local_options_file","$project_options_file","$global_options_file","$args_from_options_file","$exist?","$options_file_as_erb_string","$flat_map","$to_proc","$result","$new","$read","$binding","$join","$expand_path","$warning"]),n.$require("erb"),n.$require("shellwords"),n.$require("set"),function(n){var r,c=r=o(n,"RSpec"),u=(c.$$proto,c.$$scope);!function(n){var r,c=r=o(n,"Core"),u=(c.$$proto,c.$$scope);!function(n,$super){function r(){}var o=r=$(n,$super,"ConfigurationOptions",r),c=o.$$proto,u=o.$$scope;return c.filter_manager_options=c.options=c.command_line_options=c.args=c.local_options=c.project_options=c.global_options=a,e.defn(o,"$initialize",function(e){var t=this;return t.args=e.$dup(),t.$organize_options()}),e.defn(o,"$configure",function(e){var t=this;return t.$process_options_into(e),t.$configure_filter_manager(e.$filter_manager()),t.$load_formatters_into(e)}),e.defn(o,"$configure_filter_manager",function(e){var t,n,r,o=this;return(t=(n=o.filter_manager_options).$each,t.$$p=(r=function(t,n){r.$$s||this;return null==t&&(t=a),null==n&&(n=a),e.$__send__(t,n)},r.$$s=o,r),t).call(n)}),o.$attr_reader("options"),o.$private(),e.defn(o,"$organize_options",function(){var e,n,r,o,$,s=this;return s.filter_manager_options=[],s.options=(e=(n=s.$file_options()["$<<"](s.$command_line_options())["$<<"](s.$env_options())).$each,e.$$p=(r=function(e){var t,n=r.$$s||this;return null==n.filter_manager_options&&(n.filter_manager_options=a),null==e&&(e=a),(t=e["$key?"]("inclusion_filter"))===a||t.$$is_boolean&&1!=t||n.filter_manager_options["$<<"](["include",e.$delete("inclusion_filter")]),(t=e["$key?"]("exclusion_filter"))===a||t.$$is_boolean&&1!=t?a:n.filter_manager_options["$<<"](["exclude",e.$delete("exclusion_filter")])},r.$$s=s,r),e).call(n),s.options=(e=(o=s.options).$inject,e.$$p=($=function(e,n){var r,o,i,s=$.$$s||this;return null==e&&(e=a),null==n&&(n=a),(r=(o=e).$merge,r.$$p=(i=function(e,n,r){var o;i.$$s||this;return null==e&&(e=a),null==n&&(n=a),null==r&&(r=a),(o=["libs","requires"]["$include?"](e))===a||o.$$is_boolean&&1!=o?r:t(n,r)},i.$$s=s,i),r).call(o,n)},$.$$s=s,$),e).call(o,i(["libs","requires"],{libs:[],requires:[]}))}),e.cdecl(u,"UNFORCED_OPTIONS",["requires","profile","drb","libs","files_or_directories_to_run","full_description","full_backtrace","tty"].$to_set()),e.cdecl(u,"UNPROCESSABLE_OPTIONS",["formatters"].$to_set()),e.defn(o,"$force?",function(e){return u.get("UNFORCED_OPTIONS")["$include?"](e)["$!"]()}),e.defn(o,"$order",function(e){var t,n,r,o=this;return(t=(n=u.get("OPTIONS_ORDER").$reverse()).$each,t.$$p=(r=function(t){var n;r.$$s||this;return null==t&&(t=a),(n=e.$delete(t))===a||n.$$is_boolean&&1!=n?a:e.$unshift(t)},r.$$s=o,r),t).call(n),e}),e.cdecl(u,"OPTIONS_ORDER",["deprecation_stream","libs","default_path","files_or_directories_to_run","pattern","exclude_pattern","requires"]),e.defn(o,"$process_options_into",function(e){var t,n,r,o,$,i=this,c=a;return c=(t=(n=i.$options()).$reject,t.$$p=(r=function(e,t){r.$$s||this;return null==e&&(e=a),null==t&&(t=a),u.get("UNPROCESSABLE_OPTIONS")["$include?"](e)},r.$$s=i,r),t).call(n),(t=(o=i.$order(c.$keys())).$each,t.$$p=($=function(t){var n,r=$.$$s||this;return null==t&&(t=a),(n=r["$force?"](t))===a||n.$$is_boolean&&1!=n?e.$__send__(""+t+"=",c["$[]"](t)):e.$force(s(t,c["$[]"](t)))},$.$$s=i,$),t).call(o)}),e.defn(o,"$load_formatters_into",function(t){var n,r,o,$=this;return(n=$.$options()["$[]"]("formatters"))===a||n.$$is_boolean&&1!=n?a:(n=(r=$.$options()["$[]"]("formatters")).$each,n.$$p=(o=function(n){var r;o.$$s||this;return null==n&&(n=a),(r=t).$add_formatter.apply(r,e.to_a(n))},o.$$s=$,o),n).call(r)}),e.defn(o,"$file_options",function(){var e,t=this;return(e=t.$custom_options_file())===a||e.$$is_boolean&&1!=e?[t.$global_options(),t.$project_options(),t.$local_options()]:[t.$custom_options()]}),e.defn(o,"$env_options",function(){var e;return(e=u.get("ENV")["$[]"]("SPEC_OPTS"))===a||e.$$is_boolean&&1!=e?i([],{}):u.get("Parser").$parse(u.get("Shellwords").$split(u.get("ENV")["$[]"]("SPEC_OPTS")))}),e.defn(o,"$command_line_options",function(){var e,t=this;return(e=t.command_line_options)!==!1&&e!==a?e:t.command_line_options=u.get("Parser").$parse(t.args).$merge(i(["files_or_directories_to_run"],{files_or_directories_to_run:t.args}))}),e.defn(o,"$custom_options",function(){var e=this;return e.$options_from(e.$custom_options_file())}),e.defn(o,"$local_options",function(){var e,t=this;return(e=t.local_options)!==!1&&e!==a?e:t.local_options=t.$options_from(t.$local_options_file())}),e.defn(o,"$project_options",function(){var e,t=this;return(e=t.project_options)!==!1&&e!==a?e:t.project_options=t.$options_from(t.$project_options_file())}),e.defn(o,"$global_options",function(){var e,t=this;return(e=t.global_options)!==!1&&e!==a?e:t.global_options=t.$options_from(t.$global_options_file())}),e.defn(o,"$options_from",function(e){var t=this;return u.get("Parser").$parse(t.$args_from_options_file(e))}),e.defn(o,"$args_from_options_file",function(e){var t,n,r=this,o=a;return(t=(n=e!==!1&&e!==a)?u.get("File")["$exist?"](e):e)===a||t.$$is_boolean&&1!=t?[]:(o=r.$options_file_as_erb_string(e),(t=(n=u.get("FlatMap")).$flat_map,t.$$p="shellsplit".$to_proc(),t).call(n,o.$split(/\n+/)))}),e.defn(o,"$options_file_as_erb_string",function(e){var t=this;return u.get("ERB").$new(u.get("File").$read(e),a,"-").$result(t.$binding())}),e.defn(o,"$custom_options_file",function(){var e=this;return e.$command_line_options()["$[]"]("custom_options_file")}),e.defn(o,"$project_options_file",function(){return".rspec"}),e.defn(o,"$local_options_file",function(){return".rspec-local"}),e.defn(o,"$global_options_file",function(){try{return u.get("File").$join(u.get("File").$expand_path("~"),".rspec")}catch(t){if(!e.rescue(t,[u.get("ArgumentError")]))throw t;try{return u.get("RSpec").$warning("Unable to find ~/.rspec because the HOME environment variable is not set"),a}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}),a&&"global_options_file"}(u.base,null)}(u.base)}(r.base)},Opal.modules["rspec/core/dsl"]=function(e){e.dynamic_require_severity="ignore";var t,n,r=e.top,a=e,o=e.nil,$=(e.breaker,e.slice),i=e.module;return e.add_stubs(["$<<","$example_group_aliases","$__send__","$register","$world","$to_proc","$exposed_globally?","$expose_example_group_alias_globally","$attr_accessor","$each","$change_global_dsl","$undef_method","$define_method","$class_exec","$top_level","$top_level="]),function(t){var n,r=n=i(t,"RSpec"),a=(r.$$proto,r.$$scope);!function(t){var n,r=n=i(t,"Core"),a=(r.$$proto,r.$$scope);!function(t){var n,r,a=n=i(t,"DSL"),s=(a.$$proto,a.$$scope);e.defs(a,"$example_group_aliases",function(){var e,t=this;return null==t.example_group_aliases&&(t.example_group_aliases=o),(e=t.example_group_aliases)!==!1&&e!==o?e:t.example_group_aliases=[]}),e.defs(a,"$exposed_globally?",function(){var e,t=this;return null==t.exposed_globally&&(t.exposed_globally=o),(e=t.exposed_globally)!==!1&&e!==o?e:t.exposed_globally=!1}),e.defs(a,"$expose_example_group_alias",function(t){var n,r,a,i=this;return i.$example_group_aliases()["$<<"](t),(n=(r=function(e){e.$$scope,e.$$proto;return e}(e.get_singleton_class(s.get("RSpec")))).$__send__,n.$$p=(a=function(n){var r,i,c;a.$$s||this;return n=$.call(arguments,0),r=a.$$p||o,a.$$p=null,s.get("RSpec").$world().$register((i=(c=s.get("RSpec").$$scope.get("Core").$$scope.get("ExampleGroup")).$__send__,i.$$p=r.$to_proc(),i).apply(c,[t].concat(e.to_a(n))))},a.$$s=i,a),n).call(r,"define_method",t),(n=i["$exposed_globally?"]())===o||n.$$is_boolean&&1!=n?o:i.$expose_example_group_alias_globally(t)}),function(e){e.$$scope,e.$$proto;return e.$attr_accessor("top_level")}(e.get_singleton_class(a)),e.defs(a,"$expose_globally!",function(){var e,t,n,r=this;return(e=r["$exposed_globally?"]())===o||e.$$is_boolean&&1!=e?((e=(t=r.$example_group_aliases()).$each,e.$$p=(n=function(e){var t=n.$$s||this;return null==e&&(e=o),t.$expose_example_group_alias_globally(e)},n.$$s=r,n),e).call(t),r.exposed_globally=!0):o}),e.defs(a,"$remove_globally!",function(){var e,t,n,r=this;return(e=r["$exposed_globally?"]())===o||e.$$is_boolean&&1!=e?o:((e=(t=r.$example_group_aliases()).$each,
e.$$p=(n=function(e){var t,r,a,$=n.$$s||this;return null==e&&(e=o),(t=(r=$).$change_global_dsl,t.$$p=(a=function(){var t=a.$$s||this;return t.$undef_method(e)},a.$$s=$,a),t).call(r)},n.$$s=r,n),e).call(t),r.exposed_globally=!1)}),e.defs(a,"$expose_example_group_alias_globally",function(t){var n,r,a,i=this;return(n=(r=i).$change_global_dsl,n.$$p=(a=function(){var n,r,i,s=a.$$s||this;return(n=(r=s).$define_method,n.$$p=(i=function(n){var r,a,s;i.$$s||this;return n=$.call(arguments,0),r=i.$$p||o,i.$$p=null,(a=(s=e.get("RSpec")).$__send__,a.$$p=r.$to_proc(),a).apply(s,[t].concat(e.to_a(n)))},i.$$s=s,i),n).call(r,t)},a.$$s=i,a),n).call(r)}),e.defs(a,"$change_global_dsl",r=function(){var t,n,a,$=this,i=r.$$p,c=i||o;return r.$$p=null,(t=(n=function(e){e.$$scope,e.$$proto;return e}(e.get_singleton_class($.$top_level()))).$class_exec,t.$$p=c.$to_proc(),t).call(n),(t=(a=s.get("Module")).$class_exec,t.$$p=c.$to_proc(),t).call(a)})}(a.base)}(a.base)}(a.base),t=[r],n=e.get("RSpec").$$scope.get("Core").$$scope.get("DSL"),n["$top_level="].apply(n,t),t[t.length-1]},Opal.modules["rspec/core/example"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.dynamic_require_severity="ignore";var n=(e.top,e),r=e.nil,a=e.breaker,o=e.slice,$=e.module,i=e.klass,s=e.hash2;return e.add_stubs(["$define_method","$[]","$delegate_to_metadata","$empty?","$to_s","$metadata","$location","$call","$format_docstrings_block","$configuration","$attr_reader","$attr_accessor","$create","$alias_method","$current_example=","$start","$pending?","$mark_pending!","$pending","$skipped?","$skip","$!","$dry_run?","$with_around_example_hooks","$run_before_example","$instance_exec","$to_proc","$mark_fixed!","$raise","$set_exception","$run_after_example","$each","$instance_variable_set","$instance_variables","$finish","$==","$to_sym","$__send__","$public_instance_methods","$method","$new","$class","$example","$gsub","$inspect","$any_apply?","$all_apply?","$around_example_hooks_for","$hooks","$example_group","$===","$pending_exception=","$execution_result","$message","$first","$backtrace","$reporter","$mark_skipped!","$argument","$private","$around_example_hooks","$run","$example_started","$started_at=","$now","$clock","$pending_message","$record_finished","$exception=","$example_failed","$pending_message=","$example_pending","$example_passed","$setup_mocks_for_rspec","$verify_mocks","$expecting_with_rspec?","$assign_generated_description","$teardown_mocks_for_rspec","$mocks_need_verification?","$verify_mocks_for_rspec","$pending_fixed=","$nil?","$exception","$pending_fixed?","$generated_description","$[]=","$<<","$clear_generated_description","$include","$status=","$finished_at=","$run_time=","$to_f","$-","$started_at","$tap","$status","$deprecate"]),function(n){var c,u=c=$(n,"RSpec"),l=(u.$$proto,u.$$scope);!function(n){var c,u=c=$(n,"Core"),l=(u.$$proto,u.$$scope);!function(n,$super){function $(){}var c,u,l,_=$=i(n,$super,"Example",$),p=_.$$proto,d=_.$$scope;return p.example_group_class=p.example_group_instance=p.around_example_hooks=p.exception=r,e.defs(_,"$delegate_to_metadata",function(e){var t,n,a,o=this;return(t=(n=o).$define_method,t.$$p=(a=function(){var t=a.$$s||this;return null==t.metadata&&(t.metadata=r),t.metadata["$[]"](e)},a.$$s=o,a),t).call(n,e)}),_.$delegate_to_metadata("execution_result"),_.$delegate_to_metadata("file_path"),_.$delegate_to_metadata("full_description"),_.$delegate_to_metadata("location"),_.$delegate_to_metadata("pending"),_.$delegate_to_metadata("skip"),e.defn(_,"$description",function(){var e,t=this,n=r;return n=function(){return(e=t.$metadata()["$[]"]("description").$to_s()["$empty?"]())===r||e.$$is_boolean&&1!=e?t.$metadata()["$[]"]("description"):"example at "+t.$location()}(),d.get("RSpec").$configuration().$format_docstrings_block().$call(n)}),_.$attr_reader("exception"),_.$attr_reader("metadata"),_.$attr_reader("example_group_instance"),_.$attr_accessor("clock"),e.defn(_,"$initialize",function(e,t,n,a){var o=this;return null==a&&(a=r),o.example_group_class=e,o.example_block=a,o.metadata=d.get("Metadata").$$scope.get("ExampleHash").$create(o.example_group_class.$metadata(),n,t,a),o.example_group_instance=o.exception=r,o.clock=d.get("RSpec").$$scope.get("Core").$$scope.get("Time")}),e.defn(_,"$example_group",function(){var e=this;return e.example_group_class}),_.$alias_method("pending?","pending"),_.$alias_method("skipped?","skip"),e.defn(_,"$run",function(t,n){var a,o,$,i,s,c,u=this,l=r;try{u.example_group_instance=t,a=[u],o=d.get("RSpec"),o["$current_example="].apply(o,a),a[a.length-1],u.$start(n),(a=u["$pending?"]())===r||a.$$is_boolean&&1!=a||d.get("Pending")["$mark_pending!"](u,u.$pending());try{try{(a=u["$skipped?"]())===r||a.$$is_boolean&&1!=a?(a=d.get("RSpec").$configuration()["$dry_run?"]()["$!"]())===r||a.$$is_boolean&&1!=a||(a=(o=u).$with_around_example_hooks,a.$$p=($=function(){var t,n,a=$.$$s||this,o=r;null==a.example_block&&(a.example_block=r),null==a.example_group_instance&&(a.example_group_instance=r);try{try{return a.$run_before_example(),(t=(n=a.example_group_instance).$instance_exec,t.$$p=a.example_block.$to_proc(),t).call(n,a),(t=a["$pending?"]())===r||t.$$is_boolean&&1!=t?r:(d.get("Pending")["$mark_fixed!"](a),a.$raise(d.get("Pending").$$scope.get("PendingExampleFixedError"),"Expected example to fail since it is pending, but it passed.",[a.$location()]))}catch(i){if(e.rescue(i,[d.get("Pending").$$scope.get("SkipDeclaredInExample")]))try{return r}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}else{if(!e.rescue(i,[d.get("Exception")]))throw i;o=i;try{a.$set_exception(o)}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}}finally{a.$run_after_example()}},$.$$s=u,$),a).call(o):d.get("Pending")["$mark_pending!"](u,u.$skip())}catch(_){if(!e.rescue(_,[d.get("Exception")]))throw _;l=_;try{u.$set_exception(l)}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}finally{(a=(i=u.example_group_instance.$instance_variables()).$each,a.$$p=(s=function(e){var t=s.$$s||this;return null==t.example_group_instance&&(t.example_group_instance=r),null==e&&(e=r),t.example_group_instance.$instance_variable_set(e,r)},s.$$s=u,s),a).call(i),u.example_group_instance=r}return u.$finish(n)}finally{a=[r],c=d.get("RSpec"),c["$current_example="].apply(c,a),a[a.length-1]}}),function(t,$super){function n(){}var a,$,s,c,u,l,_,p,d=n=i(t,$super,"Procsy",n),f=d.$$proto,g=d.$$scope;return f.proc=f.executed=f.example=r,d.$attr_reader("example"),(a=($=g.get("Example").$public_instance_methods(!1)).$each,a.$$p=(s=function(t){var n,a,$,i=s.$$s||this;return null==t&&(t=r),(n=(a=t.$to_sym()["$=="]("run"))!==!1&&a!==r?a:t.$to_sym()["$=="]("inspect"))===r||n.$$is_boolean&&1!=n?(n=(a=i).$define_method,n.$$p=($=function(n){var a,i,s,c=$.$$s||this;return null==c.example&&(c.example=r),n=o.call(arguments,0),a=$.$$p||r,$.$$p=null,(i=(s=c.example).$__send__,i.$$p=a.$to_proc(),i).apply(s,[t].concat(e.to_a(n)))},$.$$s=i,$),n).call(a,t):r},s.$$s=d,s),a).call($),(a=(c=g.get("Proc").$public_instance_methods(!1)).$each,a.$$p=(u=function(t){var n,a,$,i,s=u.$$s||this;return null==t&&(t=r),(n=(a=($=t.$to_sym()["$=="]("call"))!==!1&&$!==r?$:t.$to_sym()["$=="]("inspect"))!==!1&&a!==r?a:t.$to_sym()["$=="]("to_proc"))===r||n.$$is_boolean&&1!=n?(n=(a=s).$define_method,n.$$p=(i=function(n){var a,$,s,c=i.$$s||this;return null==c.proc&&(c.proc=r),n=o.call(arguments,0),a=i.$$p||r,i.$$p=null,($=(s=c.proc).$__send__,$.$$p=a.$to_proc(),$).apply(s,[t].concat(e.to_a(n)))},i.$$s=s,i),n).call(a,t):r},u.$$s=d,u),a).call(c),e.defn(d,"$call",l=function(){var t,n,a=this,o=l.$$p,$=o||r,i=r,s=arguments.length-0;0>s&&(s=0);var c=new Array(s);for(i=0;s>i;i++)c[i]=arguments[i+0];return l.$$p=null,a.executed=!0,(t=(n=a.proc).$call,t.$$p=$.$to_proc(),t).apply(n,e.to_a(c))}),e.alias(d,"run","call"),e.defn(d,"$to_proc",function(){var e=this;return e.$method("call").$to_proc()}),e.defn(d,"$initialize",_=function(e){var t=this,n=_.$$p,a=n||r;return _.$$p=null,t.example=e,t.proc=a,t.executed=!1}),e.defn(d,"$wrap",p=function(){var e,t,n=this,a=p.$$p,o=a||r;return p.$$p=null,(e=(t=n.$class()).$new,e.$$p=o.$to_proc(),e).call(t,n.$example())}),e.defn(d,"$executed?",function(){var e=this;return e.executed}),e.defn(d,"$inspect",function(){var e=this;return e.example.$inspect().$gsub("Example","ExampleProcsy")}),r&&"inspect"}(d.base,null),e.defn(_,"$any_apply?",function(e){var t=this;return d.get("MetadataFilter")["$any_apply?"](e,t.$metadata())}),e.defn(_,"$all_apply?",function(e){var t,n=this;return(t=d.get("MetadataFilter")["$all_apply?"](e,n.$metadata()))!==!1&&t!==r?t:n.example_group_class["$all_apply?"](e)}),e.defn(_,"$around_example_hooks",function(){var e,t=this;return(e=t.around_example_hooks)!==!1&&e!==r?e:t.around_example_hooks=t.$example_group().$hooks().$around_example_hooks_for(t)}),e.defn(_,"$set_exception",function(e,t){var n,a,o=this,$=r;return null==t&&(t=r),a=o["$pending?"](),(n=a!==!1&&a!==r?d.get("Pending").$$scope.get("PendingExampleFixedError")["$==="](e)["$!"]():a)===r||n.$$is_boolean&&1!=n?((n=o.exception)===r||n.$$is_boolean&&1!=n||($="\n  An error occurred "+t+"\n    "+e.$class()+": "+e.$message()+"\n    occurred at "+e.$backtrace().$first()+"\n\n",d.get("RSpec").$configuration().$reporter().$message($)),(n=o.exception)!==!1&&n!==r?n:o.exception=e):(n=[e],a=o.$execution_result(),a["$pending_exception="].apply(a,n),n[n.length-1])}),e.defn(_,"$fail_with_exception",function(e,t){var n=this;return n.$start(e),n.$set_exception(t),n.$finish(e)}),e.defn(_,"$skip_with_exception",function(e,t){var n=this;return n.$start(e),d.get("Pending")["$mark_skipped!"](n,t.$argument()),n.$finish(e)}),e.defn(_,"$instance_exec_with_rescue",c=function(t){var n,a,o=this,$=c.$$p,i=$||r,s=r;c.$$p=null;try{return(n=(a=o.example_group_instance).$instance_exec,n.$$p=i.$to_proc(),n).call(a,o)}catch(u){if(!e.rescue(u,[d.get("Exception")]))throw u;s=u;try{return o.$set_exception(s,t)}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}),e.defn(_,"$instance_exec",u=function(){var t,n,a=this,o=u.$$p,$=o||r,i=r,s=arguments.length-0;0>s&&(s=0);var c=new Array(s);for(i=0;s>i;i++)c[i]=arguments[i+0];return u.$$p=null,(t=(n=a.example_group_instance).$instance_exec,t.$$p=$.$to_proc(),t).apply(n,e.to_a(c))}),_.$private(),e.defn(_,"$with_around_example_hooks",l=function(){var t,n,o=this,$=l.$$p,i=$||r,s=r;l.$$p=null;try{return(t=o.$around_example_hooks()["$empty?"]())===r||t.$$is_boolean&&1!=t?o.example_group_class.$hooks().$run("around","example",o,(t=(n=d.get("Procsy")).$new,t.$$p=i.$to_proc(),t).call(n,o)):(t=e.yieldX(i,[]),t===a?t:t)}catch(c){if(!e.rescue(c,[d.get("Exception")]))throw c;s=c;try{return o.$set_exception(s,"in an `around(:example)` hook")}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}),e.defn(_,"$start",function(e){var t,n,r=this;return e.$example_started(r),t=[r.$clock().$now()],n=r.$execution_result(),n["$started_at="].apply(n,t),t[t.length-1]}),e.defn(_,"$finish",function(e){var t,n,a=this,o=r;return o=a.$execution_result().$pending_message(),(t=a.exception)===r||t.$$is_boolean&&1!=t?o!==!1&&o!==r?(a.$record_finished("pending"),t=[o],n=a.$execution_result(),n["$pending_message="].apply(n,t),t[t.length-1],e.$example_pending(a),!0):(a.$record_finished("passed"),e.$example_passed(a),!0):(a.$record_finished("failed"),t=[a.exception],n=a.$execution_result(),n["$exception="].apply(n,t),t[t.length-1],e.$example_failed(a),!1)}),e.defn(_,"$record_finished",function(e){var t=this;return t.$execution_result().$record_finished(e,t.$clock().$now())}),e.defn(_,"$run_before_example",function(){var e=this;return e.example_group_instance.$setup_mocks_for_rspec(),e.example_group_class.$hooks().$run("before","example",e)}),e.defn(_,"$run_after_example",function(){var t,n=this,a=r;try{try{return n.example_group_class.$hooks().$run("after","example",n),n.$verify_mocks(),(t=d.get("RSpec").$configuration()["$expecting_with_rspec?"]())===r||t.$$is_boolean&&1!=t?r:n.$assign_generated_description()}catch(o){if(!e.rescue(o,[d.get("Exception")]))throw o;a=o;try{return n.$set_exception(a,"in an `after(:example)` hook")}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}finally{n.example_group_instance.$teardown_mocks_for_rspec()}}),e.defn(_,"$verify_mocks",function(){var t,n,a=this,o=r;try{return(t=a["$mocks_need_verification?"]())===r||t.$$is_boolean&&1!=t?r:a.example_group_instance.$verify_mocks_for_rspec()}catch($){if(!e.rescue($,[d.get("Exception")]))throw $;o=$;try{return(t=a["$pending?"]())===r||t.$$is_boolean&&1!=t?a.$set_exception(o):(t=[!1],n=a.$execution_result(),n["$pending_fixed="].apply(n,t),t[t.length-1],a.exception=r)}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}),e.defn(_,"$mocks_need_verification?",function(){var e,t=this;return(e=t.$exception()["$nil?"]())!==!1&&e!==r?e:t.$execution_result()["$pending_fixed?"]()}),e.defn(_,"$assign_generated_description",function(){var t,n,a=this,o=r,$=r;try{try{return n=a.$metadata()["$[]"]("description")["$empty?"](),(t=n!==!1&&n!==r?o=d.get("RSpec").$$scope.get("Matchers").$generated_description():n)===r||t.$$is_boolean&&1!=t?r:(a.$metadata()["$[]="]("description",o),a.$metadata()["$[]"]("full_description")["$<<"](o))}catch(i){if(!e.rescue(i,[d.get("Exception")]))throw i;$=i;try{return a.$set_exception($,"while assigning the example description")}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}finally{d.get("RSpec").$$scope.get("Matchers").$clear_generated_description()}}),e.defn(_,"$skip_message",function(){var e,t=this;return(e=d.get("String")["$==="](t.$skip()))===r||e.$$is_boolean&&1!=e?d.get("Pending").$$scope.get("NO_REASON_GIVEN"):t.$skip()}),function(n,$super){function a(){}var o,$,c,u=a=i(n,$super,"ExecutionResult",a),l=(u.$$proto,u.$$scope);return u.$include(l.get("HashImitatable")),u.$attr_accessor("status"),u.$attr_accessor("exception"),u.$attr_accessor("started_at"),u.$attr_accessor("finished_at"),u.$attr_accessor("run_time"),u.$attr_accessor("pending_message"),u.$attr_accessor("pending_exception"),u.$attr_accessor("pending_fixed"),e.alias(u,"pending_fixed?","pending_fixed"),e.defn(u,"$record_finished",function(e,n){var r,a,o=this;return r=[e],a=o,a["$status="].apply(a,r),r[r.length-1],r=[n],a=o,a["$finished_at="].apply(a,r),r[r.length-1],r=[t(n,o.$started_at()).$to_f()],a=o,a["$run_time="].apply(a,r),r[r.length-1]}),u.$private(),e.defn(u,"$hash_for_delegation",o=function(){var t,n,a,$=this,i=o.$$p,s=r,c=r;for(o.$$p=null,s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];return(t=(n=e.find_super_dispatcher($,"hash_for_delegation",o,i).apply($,s)).$tap,t.$$p=(a=function(e){var t,n,o,$=a.$$s||this;return null==e&&(e=r),t="status",n=e,o=n["$[]"](t),o!==!1&&o!==r?n["$[]="](t,$.$status().$to_s()):o},a.$$s=$,a),t).call(n)}),e.defn(u,"$set_value",$=function(t,n){var a,o=this;$.$$p;return $.$$p=null,t["$=="]("status")&&((a=n!==!1&&n!==r)?n=n.$to_sym():n),e.find_super_dispatcher(o,"set_value",$,null).apply(o,[t,n])}),e.defn(u,"$get_value",c=function(t){var n,a=this,o=c.$$p,$=r,i=r;for(c.$$p=null,$=[],i=0;i<arguments.length;i++)$[i]=arguments[i];return t["$=="]("status")?(n=a.$status())===r||n.$$is_boolean&&1!=n?r:a.$status().$to_s():e.find_super_dispatcher(a,"get_value",c,o).apply(a,$)}),e.defn(u,"$issue_deprecation",function(e){var t=r,n=arguments.length-1;0>n&&(n=0);var a=new Array(n);for(t=0;n>t;t++)a[t]=arguments[t+1];return l.get("RSpec").$deprecate("Treating `metadata[:execution_result]` as a hash",s(["replacement"],{replacement:"the attributes methods to access the data"}))}),r&&"issue_deprecation"}(d.base,null)}(l.base,null),function(t,$super){function n(){}var a,o=n=i(t,$super,"SuiteHookContext",n),$=(o.$$proto,o.$$scope);return e.defn(o,"$initialize",a=function(){var t=this;a.$$p;return a.$$p=null,e.find_super_dispatcher(t,"initialize",a,null).apply(t,[$.get("AnonymousExampleGroup"),"",s([],{})])}),e.defn(o,"$set_exception",function(e,t){var n=this;return null==t&&(t=r),n.$raise(e)}),r&&"set_exception"}(l.base,l.get("Example"))}(l.base)}(n.base)},Opal.modules["rspec/core/example_group"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}e.dynamic_require_severity="ignore";var r=(e.top,e),a=e.nil,o=(e.breaker,e.slice),$=e.module,i=e.klass,s=e.hash2;return e.add_stubs(["$require_rspec_support","$extend","$include","$respond_to?","$__send__","$to_proc","$superclass","$metadata","$each","$define_singleton_method","$fetch","$delegate_to_metadata","$[]","$call","$format_docstrings_block","$configuration","$described_class","$class","$build_hash_from","$update","$<<","$examples","$new","$last","$define_example_method","$thread_local_metadata","$==","$raise","$[]=","$shift","$dup","$is_a?","$merge!","$pop","$tap","$children","$subclass","$delete","$expose_example_group_alias","$define_example_group_method","$example_group","$find_and_eval_shared","$caller","$define_nested_shared_group_method","$find","$shared_example_group_registry","$world","$parent_groups","$inspect","$module_exec","$set_it_up","$assign_const","$define_helpers_on","$ensure_example_groups_are_configured","$unshift","$create","$superclass_metadata","$register_globals","$hooks","$configure_group","$filtered_examples","$+","$inject","$descendant_filtered_examples","$descendants","$select","$<","$ancestors","$configure_mock_framework","$configure_expectation_framework","$empty?","$instance_variables","$before_context_ivars","$instance_variable_get","$set_ivars","$isolate_for_context_hook","$run","$store_before_context_ivars","$wants_to_quit","$top_level?","$clear_remaining_example_groups","$example_group_started","$run_before_context_hooks","$run_examples","$all?","$map","$order","$ordering_strategy","$for_filtered_examples","$skip_with_exception","$fail_fast?","$wants_to_quit=","$fail_with_exception","$run_after_context_hooks","$clear","$example_group_finished","$ordering_registry","$warn","$gsub","$location","$!","$any_apply?","$all_apply?","$declaration_line_numbers","$description","$instance_variable_set","$base_name_for","$constant_scope_for","$disambiguate","$const_set","$gsub!","$upcase","$last_match","$lstrip!","$_base_name_for","$private_class_method","$const_defined_on?","$next!"]),r.get("RSpec").$$scope.get("Support").$require_rspec_support("recursive_const_methods"),function(r){var c,u=c=$(r,"RSpec"),l=(u.$$proto,u.$$scope);!function(r){var c,u=c=$(r,"Core"),l=(u.$$proto,u.$$scope);!function(r,$super){function $(){}var c,u,l,_,p,d,f,g,h=$=i(r,$super,"ExampleGroup",$),m=(h.$$proto,h.$$scope);return h.$extend(m.get("Hooks")),h.$include(m.get("MemoizedHelpers")),h.$extend(m.get("MemoizedHelpers").$$scope.get("ClassMethods")),h.$include(m.get("Pending")),h.$extend(m.get("SharedExampleGroup")),((c=h["$respond_to?"]("define_singleton_method"))===a||c.$$is_boolean&&1!=c)&&e.defs(h,"$define_singleton_method",u=function(){var t,n,r=this,o=u.$$p,$=o||a,i=a,s=arguments.length-0;0>s&&(s=0);var c=new Array(s);for(i=0;s>i;i++)c[i]=arguments[i+0];return u.$$p=null,(t=(n=function(e){e.$$scope,e.$$proto;return e}(e.get_singleton_class(r))).$__send__,t.$$p=$.$to_proc(),t).apply(n,["define_method"].concat(e.to_a(c)))}),e.defs(h,"$metadata",function(){var e,t,n=this;return null==n.metadata&&(n.metadata=a),t=n.metadata,(e=null!=t&&t!==a?"instance-variable":a)===a||e.$$is_boolean&&1!=e?a:n.metadata}),e.defs(h,"$superclass_metadata",function(){var e,t,n=this;return null==n.superclass_metadata&&(n.superclass_metadata=a),(e=n.superclass_metadata)!==!1&&e!==a?e:n.superclass_metadata=function(){return(t=n.$superclass()["$respond_to?"]("metadata"))===a||t.$$is_boolean&&1!=t?a:n.$superclass().$metadata()}()}),e.defs(h,"$delegate_to_metadata",function(){var e,t,n,r=this,o=a,$=arguments.length-0;0>$&&($=0);var i=new Array($);for(o=0;$>o;o++)i[o]=arguments[o+0];return(e=(t=i).$each,e.$$p=(n=function(e){var t,r,o,$=n.$$s||this;return null==e&&(e=a),(t=(r=$).$define_singleton_method,t.$$p=(o=function(){var t=o.$$s||this;return t.$metadata().$fetch(e)},o.$$s=$,o),t).call(r,e)},n.$$s=r,n),e).call(t)}),h.$delegate_to_metadata("described_class","file_path","location"),e.defs(h,"$description",function(){var e=this,t=a;return t=e.$metadata()["$[]"]("description"),m.get("RSpec").$configuration().$format_docstrings_block().$call(t)}),e.defn(h,"$described_class",function(){var e=this;return e.$class().$described_class()}),e.defs(h,"$define_example_method",function(t,n){var r,$,i,c=this;return null==n&&(n=s([],{})),(r=($=c).$define_singleton_method,r.$$p=(i=function(t){var r,$,c=i.$$s||this,u=a,l=a,_=a;return t=o.call(arguments,0),r=i.$$p||a,i.$$p=null,$=e.to_a(t),u=null==$[0]?a:$[0],l=o.call($,1),$,_=m.get("Metadata").$build_hash_from(l),r!==!1&&r!==a||_.$update(s(["skip"],{skip:m.get("RSpec").$$scope.get("Core").$$scope.get("Pending").$$scope.get("NOT_YET_IMPLEMENTED")})),_.$update(n),c.$examples()["$<<"](m.get("RSpec").$$scope.get("Core").$$scope.get("Example").$new(c,u,_,r)),c.$examples().$last()},i.$$s=c,i),r).call($,t)}),h.$define_example_method("example"),h.$define_example_method("it"),h.$define_example_method("specify"),h.$define_example_method("focus",s(["focus"],{focus:!0})),h.$define_example_method("fexample",s(["focus"],{focus:!0})),h.$define_example_method("fit",s(["focus"],{focus:!0})),h.$define_example_method("fspecify",s(["focus"],{focus:!0})),h.$define_example_method("xexample",s(["skip"],{skip:"Temporarily skipped with xexample"})),h.$define_example_method("xit",s(["skip"],{skip:"Temporarily skipped with xit"})),h.$define_example_method("xspecify",s(["skip"],{skip:"Temporarily skipped with xspecify"})),h.$define_example_method("skip",s(["skip"],{skip:!0})),h.$define_example_method("pending",s(["pending"],{pending:!0})),e.defs(h,"$define_example_group_method",function(e,t){var n,r,$,i=this;return null==t&&(t=s([],{})),(n=(r=i).$define_singleton_method,n.$$p=($=function(n){var r,i,s,c,u,l,_=$.$$s||this,p=a,d=a,f=a,g=a;n=o.call(arguments,0),r=$.$$p||a,$.$$p=null,p=m.get("RSpec").$thread_local_metadata(),d=_["$=="](m.get("ExampleGroup")),d!==!1&&d!==a&&((i=p["$[]"]("in_example_group"))===a||i.$$is_boolean&&1!=i||_.$raise("Creating an isolated context from within a context is "+("not allowed. Change `RSpec."+e+"` to `"+e+"` or ")+"move this to a top-level scope."),p["$[]="]("in_example_group",!0));try{return f=n.$shift(),g=t.$dup(),(i=n.$last()["$is_a?"](m.get("Hash")))===a||i.$$is_boolean&&1!=i||g["$merge!"](n.$pop()),n["$<<"](g),(i=(s=(u=(l=_).$subclass,u.$$p=r.$to_proc(),u).call(l,_,f,n)).$tap,i.$$p=(c=function(e){var t=c.$$s||this;return null==e&&(e=a),t.$children()["$<<"](e)},c.$$s=_,c),i).call(s)}finally{d!==!1&&d!==a&&p.$delete("in_example_group")}},$.$$s=i,$),n).call(r,e),m.get("RSpec").$$scope.get("Core").$$scope.get("DSL").$expose_example_group_alias(e)}),h.$define_example_group_method("example_group"),h.$define_example_group_method("describe"),h.$define_example_group_method("context"),h.$define_example_group_method("xdescribe",s(["skip"],{skip:"Temporarily skipped with xdescribe"})),h.$define_example_group_method("xcontext",s(["skip"],{skip:"Temporarily skipped with xcontext"})),h.$define_example_group_method("fdescribe",s(["focus"],{focus:!0})),h.$define_example_group_method("fcontext",s(["focus"],{focus:!0})),e.defs(h,"$define_nested_shared_group_method",function(t,n){var r,$,i,c=this;return null==n&&(n="it should behave like"),(r=($=c).$define_singleton_method,r.$$p=(i=function(t,r){var $,c,u,l,_=i.$$s||this,p=a;return null==t&&(t=a),r=o.call(arguments,1),$=i.$$p||a,i.$$p=null,p=(c=(u=_).$example_group,c.$$p=(l=function(){var n,a,o=l.$$s||this;return(n=(a=o).$find_and_eval_shared,n.$$p=$.$to_proc(),n).apply(a,["examples",t].concat(e.to_a(r)))},l.$$s=_,l),c).call(u,""+n+" "+t,s(["caller"],{caller:_.$caller()})),p.$metadata()["$[]="]("shared_group_name",t),p},i.$$s=c,i),r).call($,t)}),h.$define_nested_shared_group_method("it_behaves_like","behaves like"),h.$define_nested_shared_group_method("it_should_behave_like"),e.defs(h,"$include_context",l=function(t){var n,r,o=this,$=l.$$p,i=$||a,s=a,c=arguments.length-1;0>c&&(c=0);var u=new Array(c);for(s=0;c>s;s++)u[s]=arguments[s+1];return l.$$p=null,(n=(r=o).$find_and_eval_shared,n.$$p=i.$to_proc(),n).apply(r,["context",t].concat(e.to_a(u)))}),e.defs(h,"$include_examples",_=function(t){var n,r,o=this,$=_.$$p,i=$||a,s=a,c=arguments.length-1;0>c&&(c=0);var u=new Array(c);for(s=0;c>s;s++)u[s]=arguments[s+1];return _.$$p=null,(n=(r=o).$find_and_eval_shared,n.$$p=i.$to_proc(),n).apply(r,["examples",t].concat(e.to_a(u)))}),e.defs(h,"$find_and_eval_shared",p=function(t,n){var r,o,$,i=this,s=p.$$p,c=s||a,u=a,l=a,_=arguments.length-2;0>_&&(_=0);var d=new Array(_);for(l=0;_>l;l++)d[l]=arguments[l+2];return p.$$p=null,u=m.get("RSpec").$world().$shared_example_group_registry().$find(i.$parent_groups(),n),u!==!1&&u!==a||i.$raise(m.get("ArgumentError"),"Could not find shared "+t+" "+n.$inspect()),(r=(o=i).$module_exec,r.$$p=u.$to_proc(),r).apply(o,e.to_a(d)),c!==!1&&c!==a?(r=($=i).$module_exec,r.$$p=c.$to_proc(),r).call($):a}),e.defs(h,"$subclass",d=function(t,n,r){var o,$,i,s=d.$$p,c=s||a,u=a;return d.$$p=null,u=m.get("Class").$new(t),(o=($=u).$set_it_up,o.$$p=c.$to_proc(),o).apply($,[n].concat(e.to_a(r))),m.get("ExampleGroups").$assign_const(u),c!==!1&&c!==a&&(o=(i=u).$module_exec,o.$$p=c.$to_proc(),o).call(i),m.get("MemoizedHelpers").$define_helpers_on(u),u}),e.defs(h,"$set_it_up",f=function(){var t,n,r=this,o=f.$$p,$=o||a,i=a,s=a,c=a,u=arguments.length-0;0>u&&(u=0);var l=new Array(u);for(c=0;u>c;c++)l[c]=arguments[c+0];return f.$$p=null,r.$ensure_example_groups_are_configured(),i=l.$shift(),s=m.get("Metadata").$build_hash_from(l),l.$unshift(i),r.metadata=(t=(n=m.get("Metadata").$$scope.get("ExampleGroupHash")).$create,t.$$p=$.$to_proc(),t).apply(n,[r.$superclass_metadata(),s].concat(e.to_a(l))),r.$hooks().$register_globals(r,m.get("RSpec").$configuration().$hooks()),m.get("RSpec").$world().$configure_group(r)}),e.defs(h,"$examples",function(){var e,t=this;return null==t.examples&&(t.examples=a),(e=t.examples)!==!1&&e!==a?e:t.examples=[]}),e.defs(h,"$filtered_examples",function(){var e=this;return m.get("RSpec").$world().$filtered_examples()["$[]"](e)}),e.defs(h,"$descendant_filtered_examples",function(){var e,n,r,o,$=this;return null==$.descendant_filtered_examples&&($.descendant_filtered_examples=a),(e=$.descendant_filtered_examples)!==!1&&e!==a?e:$.descendant_filtered_examples=t($.$filtered_examples(),(n=(r=$.$children()).$inject,n.$$p=(o=function(e,n){o.$$s||this;return null==e&&(e=a),null==n&&(n=a),t(e,n.$descendant_filtered_examples())},o.$$s=$,o),n).call(r,[]))}),e.defs(h,"$children",function(){var e,t=this;return null==t.children&&(t.children=a),(e=t.children)!==!1&&e!==a?e:t.children=[]}),e.defs(h,"$descendants",function(){var e,n,r,o,$=this;return null==$._descendants&&($._descendants=a),(e=$._descendants)!==!1&&e!==a?e:$._descendants=t([$],(n=(r=$.$children()).$inject,n.$$p=(o=function(e,n){o.$$s||this;return null==e&&(e=a),null==n&&(n=a),t(e,n.$descendants())},o.$$s=$,o),n).call(r,[]))}),e.defs(h,"$parent_groups",function(){var e,t,r,o,$=this;return null==$.parent_groups&&($.parent_groups=a),(e=$.parent_groups)!==!1&&e!==a?e:$.parent_groups=(t=(r=$.$ancestors()).$select,t.$$p=(o=function(e){o.$$s||this;return null==e&&(e=a),n(e,m.get("RSpec").$$scope.get("Core").$$scope.get("ExampleGroup"))},o.$$s=$,o),t).call(r)}),e.defs(h,"$top_level?",function(){var e,t=this;return null==t.top_level&&(t.top_level=a),(e=t.top_level)!==!1&&e!==a?e:t.top_level=t.$superclass()["$=="](m.get("ExampleGroup"))}),e.defs(h,"$ensure_example_groups_are_configured",function(){var t;return(t=null!=e.cvars["@@example_groups_configured"]?"class variable":a)===a||t.$$is_boolean&&1!=t?(m.get("RSpec").$configuration().$configure_mock_framework(),m.get("RSpec").$configuration().$configure_expectation_framework(),e.cvars["@@example_groups_configured"]=!0):a}),e.defs(h,"$before_context_ivars",function(){var e,t=this;return null==t.before_context_ivars&&(t.before_context_ivars=a),(e=t.before_context_ivars)!==!1&&e!==a?e:t.before_context_ivars=s([],{})}),e.defs(h,"$store_before_context_ivars",function(e){var t,n,r,o=this;return(t=e.$instance_variables()["$empty?"]())===a||t.$$is_boolean&&1!=t?(t=(n=e.$instance_variables()).$each,t.$$p=(r=function(t){var n=r.$$s||this;return null==t&&(t=a),n.$before_context_ivars()["$[]="](t,e.$instance_variable_get(t))},r.$$s=o,r),t).call(n):a}),e.defs(h,"$run_before_context_hooks",function(e){var t,n,r,o=this;if((t=o.$descendant_filtered_examples()["$empty?"]())!==a&&(!t.$$is_boolean||1==t))return a;try{return o.$set_ivars(e,o.$superclass().$before_context_ivars()),(t=(n=m.get("ContextHookMemoizedHash").$$scope.get("Before")).$isolate_for_context_hook,t.$$p=(r=function(){var t=r.$$s||this;return t.$hooks().$run("before","context",e)},r.$$s=o,r),t).call(n,e)}finally{o.$store_before_context_ivars(e)}}),e.defs(h,"$run_after_context_hooks",function(e){var t,n,r,o=this;return(t=o.$descendant_filtered_examples()["$empty?"]())===a||t.$$is_boolean&&1!=t?(o.$set_ivars(e,o.$before_context_ivars()),(t=(n=m.get("ContextHookMemoizedHash").$$scope.get("After")).$isolate_for_context_hook,t.$$p=(r=function(){var t=r.$$s||this;return t.$hooks().$run("after","context",e)},r.$$s=o,r),t).call(n,e)):a}),e.defs(h,"$run",function(t){var n,r,o,$,i,s,c,u=this,l=a,_=a,p=a;if((n=m.get("RSpec").$world().$wants_to_quit())!==a&&(!n.$$is_boolean||1==n))return(n=u["$top_level?"]())===a||n.$$is_boolean&&1!=n||m.get("RSpec").$world().$clear_remaining_example_groups(),a;t.$example_group_started(u);try{try{return u.$run_before_context_hooks(u.$new()),l=u.$run_examples(t),_=(n=(r=u.$ordering_strategy().$order(u.$children())).$map,n.$$p=(o=function(e){o.$$s||this;return null==e&&(e=a),e.$run(t)},o.$$s=u,o),n).call(r)["$all?"](),(n=l!==!1&&l!==a)?_:l}catch(d){if(e.rescue(d,[m.get("Pending").$$scope.get("SkipDeclaredInExample")])){p=d;try{return(n=($=u).$for_filtered_examples,n.$$p=(i=function(e){i.$$s||this;return null==e&&(e=a),e.$skip_with_exception(t,p)},i.$$s=u,i),n).call($,t)}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}else{if(!e.rescue(d,[m.get("Exception")]))throw d;p=d;try{(n=u["$fail_fast?"]())===a||n.$$is_boolean&&1!=n||(n=[!0],s=m.get("RSpec").$world(),s["$wants_to_quit="].apply(s,n),n[n.length-1]),(n=(s=u).$for_filtered_examples,n.$$p=(c=function(e){c.$$s||this;return null==e&&(e=a),e.$fail_with_exception(t,p)},c.$$s=u,c),n).call(s,t)}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}}finally{u.$run_after_context_hooks(u.$new()),u.$before_context_ivars().$clear(),t.$example_group_finished(u)}}),e.defs(h,"$ordering_strategy",function(){var e,t,n,r=this,o=a,$=a;return o=r.$metadata().$fetch("order","global"),$=m.get("RSpec").$configuration().$ordering_registry(),(e=(t=$).$fetch,e.$$p=(n=function(){var e=n.$$s||this;return e.$warn(("            |WARNING: Ignoring unknown ordering specified using `:order => "+o.$inspect()+"` metadata.\n            |         Falling back to configured global ordering.\n            |         Unrecognized ordering specified at: "+e.$location()+"\n").$gsub(/^ +\|/,"")),$.$fetch("global")},n.$$s=r,n),e).call(t,o)}),e.defs(h,"$run_examples",function(e){var t,n,r,o=this;return(t=(n=o.$ordering_strategy().$order(o.$filtered_examples())).$map,t.$$p=(r=function(t){var n,o,$=r.$$s||this,i=a,s=a;return null==t&&(t=a),(n=m.get("RSpec").$world().$wants_to_quit())===a||n.$$is_boolean&&1!=n?(i=$.$new(),$.$set_ivars(i,$.$before_context_ivars()),s=t.$run(i,e),o=$["$fail_fast?"](),(n=o!==!1&&o!==a?s["$!"]():o)===a||n.$$is_boolean&&1!=n||(n=[!0],o=m.get("RSpec").$world(),o["$wants_to_quit="].apply(o,n),n[n.length-1]),s):a},r.$$s=o,r),t).call(n)["$all?"]()}),e.defs(h,"$for_filtered_examples",g=function(e){var t,n,r,o,$=this,i=g.$$p,s=i||a;return g.$$p=null,(t=(n=$.$filtered_examples()).$each,t.$$p=s.$to_proc(),t).call(n),(t=(r=$.$children()).$each,t.$$p=(o=function(t){var n,r;o.$$s||this;return null==t&&(t=a),e.$example_group_started(t),(n=(r=t).$for_filtered_examples,n.$$p=s.$to_proc(),n).call(r,e),e.$example_group_finished(t)},o.$$s=$,o),t).call(r),!1}),e.defs(h,"$fail_fast?",function(){return m.get("RSpec").$configuration()["$fail_fast?"]()}),e.defs(h,"$any_apply?",function(e){var t=this;return m.get("MetadataFilter")["$any_apply?"](e,t.$metadata())}),e.defs(h,"$all_apply?",function(e){var t=this;return m.get("MetadataFilter")["$all_apply?"](e,t.$metadata())}),e.defs(h,"$declaration_line_numbers",function(){var e,n,r,o,$,i,s=this;return null==s.declaration_line_numbers&&(s.declaration_line_numbers=a),(e=s.declaration_line_numbers)!==!1&&e!==a?e:s.declaration_line_numbers=t(t([s.$metadata()["$[]"]("line_number")],(n=(r=s.$examples()).$map,n.$$p=(o=function(e){o.$$s||this;return null==e&&(e=a),e.$metadata()["$[]"]("line_number")},o.$$s=s,o),n).call(r)),(n=($=s.$children()).$inject,
n.$$p=(i=function(e,n){i.$$s||this;return null==e&&(e=a),null==n&&(n=a),t(e,n.$declaration_line_numbers())},i.$$s=s,i),n).call($,[]))}),e.defs(h,"$top_level_description",function(){var e=this;return e.$parent_groups().$last().$description()}),e.defs(h,"$set_ivars",function(e,t){var n,r,o,$=this;return(n=(r=t).$each,n.$$p=(o=function(t,n){o.$$s||this;return null==t&&(t=a),null==n&&(n=a),e.$instance_variable_set(t,n)},o.$$s=$,o),n).call(r)}),a&&"set_ivars"}(l.base,null),function(t,$super){function n(){}var r=n=i(t,$super,"AnonymousExampleGroup",n);r.$$proto,r.$$scope;return e.defs(r,"$metadata",function(){return s([],{})}),a&&"metadata"}(l.base,l.get("ExampleGroup"))}(l.base),function(n){var r,o=r=$(n,"ExampleGroups"),i=(o.$$proto,o.$$scope);o.$extend(i.get("Support").$$scope.get("RecursiveConstMethods")),e.defs(o,"$assign_const",function(e){var t=this,n=a,r=a,o=a;return n=t.$base_name_for(e),r=t.$constant_scope_for(e),o=t.$disambiguate(n,r),r.$const_set(o,e)}),e.defs(o,"$constant_scope_for",function(t){var n=this,r=a;return r=t.$superclass(),r["$=="](e.get("RSpec").$$scope.get("Core").$$scope.get("ExampleGroup"))&&(r=n),r}),e.defs(o,"$base_name_for",function(e){var n,r,o,$=this,s=a;return(n=e.$description()["$empty?"]())===a||n.$$is_boolean&&1!=n?(s=t(" ",e.$description()),(n=(r=s)["$gsub!"],n.$$p=(o=function(){o.$$s||this;return i.get("Regexp").$last_match()["$[]"](1).$upcase()},o.$$s=$,o),n).call(r,/[^0-9a-zA-Z]+([0-9a-zA-Z])/),s["$lstrip!"](),s["$gsub!"](/\W/,""),s["$gsub!"](/\A([^A-Z]|\z)/,"Nested\\1"),s):"Anonymous"}),i.get("RUBY_VERSION")["$=="]("1.9.2")&&(!function(n){n.$$scope,n.$$proto;return e.alias(n,"_base_name_for","base_name_for"),e.defn(n,"$base_name_for",function(e){var n=this;return t(n.$_base_name_for(e),"_")}),a&&"base_name_for"}(e.get_singleton_class(o)),o.$private_class_method("_base_name_for")),e.defs(o,"$disambiguate",function(e,t){var n,r,o=this;if((n=o["$const_defined_on?"](t,e))===a||n.$$is_boolean&&1!=n)return e;for(e["$<<"]("_2");(r=o["$const_defined_on?"](t,e))!==a&&(!r.$$is_boolean||1==r);)e["$next!"]();return e})}(l.base)}(r.base)},Opal.modules["rspec/core/filter_manager"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,o=e.hash2;return e.add_stubs(["$attr_reader","$build","$delete","$inclusions","$new","$[]=","$push","$[]","$expand_path","$add_location","$empty?","$exclusions","$standalone?","$select","$!","$include_example?","$include?","$exclude?","$add","$last","$use_only","$add_with_low_priority","$attr_accessor","$opposite=","$to_proc","$each_key","$opposite","$merge!","$merge","$each_pair","$==","$replace","$clear","$fetch","$rules","$gsub","$inspect","$replace_filters","$apply_standalone_filter","$any_apply?","$is_standalone_filter?","$private","$any?","$key?","$freeze","$lambda"]),function(t){var $,i=$=r(t,"RSpec"),s=(i.$$proto,i.$$scope);!function(t){var $,i=$=r(t,"Core"),s=(i.$$proto,i.$$scope);!function(t,$super){function r(){}var o=r=a(t,$super,"FilterManager",r),$=(o.$$proto,o.$$scope);return o.$attr_reader("exclusions","inclusions"),e.defn(o,"$initialize",function(){var t,r,a=this;return r=$.get("FilterRules").$build(),t=e.to_ary(r),a.exclusions=null==t[0]?n:t[0],a.inclusions=null==t[1]?n:t[1],r}),e.defn(o,"$add_location",function(t,r){var a,o,i,s,c=this,u=n;return u=(a=c.$inclusions().$delete("locations"))!==!1&&a!==n?a:(o=(i=$.get("Hash")).$new,o.$$p=(s=function(e,t){s.$$s||this;return null==e&&(e=n),null==t&&(t=n),e["$[]="](t,[])},s.$$s=c,s),o).call(i),(a=u["$[]"]($.get("File").$expand_path(t))).$push.apply(a,e.to_a(r)),c.$inclusions().$add_location(u)}),e.defn(o,"$empty?",function(){var e,t=this;return e=t.$inclusions()["$empty?"](),e!==!1&&e!==n?t.$exclusions()["$empty?"]():e}),e.defn(o,"$prune",function(e){var t,r,a,o,i,s=this,c=n;return(t=s.$inclusions()["$standalone?"]())===n||t.$$is_boolean&&1!=t?(t=(o=e).$select,t.$$p=(i=function(e){var t,r=i.$$s||this;return null==e&&(e=n),t=r["$exclude?"](e)["$!"](),t!==!1&&t!==n?r["$include?"](e):t},i.$$s=s,i),t).call(o):(c=$.get("ExclusionRules").$new(),(t=(r=e).$select,t.$$p=(a=function(e){var t,r=a.$$s||this;return null==e&&(e=n),t=c["$include_example?"](e)["$!"](),t!==!1&&t!==n?r["$include?"](e):t},a.$$s=s,a),t).call(r))}),e.defn(o,"$exclude",function(){var e=this,t=n,r=arguments.length-0;0>r&&(r=0);var a=new Array(r);for(t=0;r>t;t++)a[t]=arguments[t+0];return e.$exclusions().$add(a.$last())}),e.defn(o,"$exclude_only",function(){var e=this,t=n,r=arguments.length-0;0>r&&(r=0);var a=new Array(r);for(t=0;r>t;t++)a[t]=arguments[t+0];return e.$exclusions().$use_only(a.$last())}),e.defn(o,"$exclude_with_low_priority",function(){var e=this,t=n,r=arguments.length-0;0>r&&(r=0);var a=new Array(r);for(t=0;r>t;t++)a[t]=arguments[t+0];return e.$exclusions().$add_with_low_priority(a.$last())}),e.defn(o,"$exclude?",function(e){var t=this;return t.$exclusions()["$include_example?"](e)}),e.defn(o,"$include",function(){var e=this,t=n,r=arguments.length-0;0>r&&(r=0);var a=new Array(r);for(t=0;r>t;t++)a[t]=arguments[t+0];return e.$inclusions().$add(a.$last())}),e.defn(o,"$include_only",function(){var e=this,t=n,r=arguments.length-0;0>r&&(r=0);var a=new Array(r);for(t=0;r>t;t++)a[t]=arguments[t+0];return e.$inclusions().$use_only(a.$last())}),e.defn(o,"$include_with_low_priority",function(){var e=this,t=n,r=arguments.length-0;0>r&&(r=0);var a=new Array(r);for(t=0;r>t;t++)a[t]=arguments[t+0];return e.$inclusions().$add_with_low_priority(a.$last())}),e.defn(o,"$include?",function(e){var t=this;return t.$inclusions()["$include_example?"](e)}),n&&"include?"}(s.base,null),function(t,$super){function r(){}var o,$,i,s=r=a(t,$super,"FilterRules",r),c=s.$$proto,u=s.$$scope;return c.rules=n,e.cdecl(u,"PROC_HEX_NUMBER",/0x[0-9a-f]+@/),e.cdecl(u,"PROJECT_DIR",u.get("File").$expand_path(".")),s.$attr_accessor("opposite"),s.$attr_reader("rules"),e.defs(s,"$build",function(){var e,t,r=n,a=n;return r=u.get("ExclusionRules").$new(),a=u.get("InclusionRules").$new(),e=[a],t=r,t["$opposite="].apply(t,e),e[e.length-1],e=[r],t=a,t["$opposite="].apply(t,e),e[e.length-1],[r,a]}),e.defn(s,"$initialize",o=function(){var t,r,a=this,$=o.$$p,i=$||n,s=n,c=arguments.length-0;0>c&&(c=0);var l=new Array(c);for(s=0;c>s;s++)l[s]=arguments[s+0];return o.$$p=null,a.rules=(t=(r=u.get("Hash")).$new,t.$$p=i.$to_proc(),t).apply(r,e.to_a(l))}),e.defn(s,"$add",function(e){var t,r,a,o=this;return(t=(r=o.rules["$merge!"](e)).$each_key,t.$$p=(a=function(e){var t=a.$$s||this;return null==e&&(e=n),t.$opposite().$delete(e)},a.$$s=o,a),t).call(r)}),e.defn(s,"$add_with_low_priority",function(e){var t,r,a,o=this;return e=e.$merge(o.rules),(t=(r=o.$opposite()).$each_pair,t.$$p=(a=function(t,r){a.$$s||this;return null==t&&(t=n),null==r&&(r=n),e["$[]"](t)["$=="](r)?e.$delete(t):n},a.$$s=o,a),t).call(r),o.rules.$replace(e)}),e.defn(s,"$use_only",function(e){var t,r,a,o=this;return(t=(r=e).$each_key,t.$$p=(a=function(e){var t=a.$$s||this;return null==e&&(e=n),t.$opposite().$delete(e)},a.$$s=o,a),t).call(r),o.rules.$replace(e)}),e.defn(s,"$clear",function(){var e=this;return e.rules.$clear()}),e.defn(s,"$delete",function(e){var t=this;return t.rules.$delete(e)}),e.defn(s,"$fetch",$=function(){var t,r,a=this,o=$.$$p,i=o||n,s=n,c=arguments.length-0;0>c&&(c=0);var u=new Array(c);for(s=0;c>s;s++)u[s]=arguments[s+0];return $.$$p=null,(t=(r=a.rules).$fetch,t.$$p=i.$to_proc(),t).apply(r,e.to_a(u))}),e.defn(s,"$[]",function(e){var t=this;return t.rules["$[]"](e)}),e.defn(s,"$empty?",function(){var e=this;return e.$rules()["$empty?"]()}),e.defn(s,"$each_pair",i=function(){var e,t,r=this,a=i.$$p,o=a||n;return i.$$p=null,(e=(t=r.rules).$each_pair,e.$$p=o.$to_proc(),e).call(t)}),e.defn(s,"$description",function(){var e=this;return e.$rules().$inspect().$gsub(u.get("PROC_HEX_NUMBER"),"").$gsub(u.get("PROJECT_DIR"),".").$gsub(" (lambda)","")}),n&&"description"}(s.base,null),function(t,$super){function r(){}var $,i,s,c=r=a(t,$super,"InclusionRules",r),u=c.$$proto,l=c.$$scope;return u.rules=n,e.cdecl(l,"STANDALONE_FILTERS",["locations","full_description"]),e.defn(c,"$add_location",function(e){var t=this;return t.$replace_filters(o(["locations"],{locations:e}))}),e.defn(c,"$add",$=function(){var t,r,a=this,o=$.$$p,i=n,s=n,c=n,u=arguments.length-0;0>u&&(u=0);var l=new Array(u);for(i=0;u>i;i++)l[i]=arguments[i+0];for($.$$p=null,s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];return(t=(r=a).$apply_standalone_filter.apply(r,e.to_a(l)))!==!1&&t!==n?t:e.find_super_dispatcher(a,"add",$,o).apply(a,s)}),e.defn(c,"$add_with_low_priority",i=function(){var t,r,a=this,o=i.$$p,$=n,s=n,c=n,u=arguments.length-0;0>u&&(u=0);var l=new Array(u);for($=0;u>$;$++)l[$]=arguments[$+0];for(i.$$p=null,s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];return(t=(r=a).$apply_standalone_filter.apply(r,e.to_a(l)))!==!1&&t!==n?t:e.find_super_dispatcher(a,"add_with_low_priority",i,o).apply(a,s)}),e.defn(c,"$use",s=function(){var t,r,a=this,o=s.$$p,$=n,i=n,c=n,u=arguments.length-0;0>u&&(u=0);var l=new Array(u);for($=0;u>$;$++)l[$]=arguments[$+0];for(s.$$p=null,i=[],c=0;c<arguments.length;c++)i[c]=arguments[c];return(t=(r=a).$apply_standalone_filter.apply(r,e.to_a(l)))!==!1&&t!==n?t:e.find_super_dispatcher(a,"use",s,o).apply(a,i)}),e.defn(c,"$include_example?",function(e){var t,r=this;return(t=r.rules["$empty?"]())===n||t.$$is_boolean&&1!=t?e["$any_apply?"](r.rules):!0}),e.defn(c,"$standalone?",function(){var e=this;return e["$is_standalone_filter?"](e.rules)}),c.$private(),e.defn(c,"$apply_standalone_filter",function(e){var t,r=this;return(t=r["$standalone?"]())===n||t.$$is_boolean&&1!=t?(t=r["$is_standalone_filter?"](e))===n||t.$$is_boolean&&1!=t?n:(r.$replace_filters(e),!0):!0}),e.defn(c,"$replace_filters",function(e){var t=this;return t.rules.$replace(e),t.$opposite().$clear()}),e.defn(c,"$is_standalone_filter?",function(e){var t,r,a,o=this;return(t=(r=l.get("STANDALONE_FILTERS"))["$any?"],t.$$p=(a=function(t){a.$$s||this;return null==t&&(t=n),e["$key?"](t)},a.$$s=o,a),t).call(r)}),n&&"is_standalone_filter?"}(s.base,s.get("FilterRules")),function(t,$super){function r(){}var $,i,s,c,u,l=r=a(t,$super,"ExclusionRules",r),_=l.$$proto,p=l.$$scope;return _.rules=n,e.cdecl(p,"CONDITIONAL_FILTERS",o(["if","unless"],{"if":($=(i=l).$lambda,$.$$p=(s=function(e){s.$$s||this;return null==e&&(e=n),e["$!"]()},s.$$s=l,s),$).call(i),unless:($=(c=l).$lambda,$.$$p=(u=function(e){u.$$s||this;return null==e&&(e=n),e},u.$$s=l,u),$).call(c)}).$freeze()),e.defn(l,"$include_example?",function(e){var t,r=this;return(t=e["$any_apply?"](r.rules))!==!1&&t!==n?t:e["$any_apply?"](p.get("CONDITIONAL_FILTERS"))}),n&&"include_example?"}(s.base,s.get("FilterRules"))}(s.base)}(t.base)},Opal.modules["rspec/core/flat_map"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=e.breaker,a=(e.slice,e.module);return e.add_stubs(["$respond_to?","$flat_map","$flatten","$map","$module_function"]),function(t){var o,$=o=a(t,"RSpec"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=a(t,"Core"),i=($.$$proto,$.$$scope);!function(t){var o,$,i,s,c=o=a(t,"FlatMap");c.$$proto,c.$$scope;($=[]["$respond_to?"]("flat_map"))===n||$.$$is_boolean&&1!=$?e.defn(c,"$flat_map",s=function(t){var a,o,$,i=this,c=s.$$p,u=c||n;return s.$$p=null,(a=(o=t).$map,a.$$p=($=function(t){var a;$.$$s||this;return null==t&&(t=n),a=e.yield1(u,t),a===r?a:a},$.$$s=i,$),a).call(o).$flatten()}):e.defn(c,"$flat_map",i=function(t){var a,o,$,s=this,c=i.$$p,u=c||n;return i.$$p=null,(a=(o=t).$flat_map,a.$$p=($=function(t){var a;$.$$s||this;return null==t&&(t=n),a=e.yield1(u,t),a===r?a:a},$.$$s=s,$),a).call(o)}),c.$module_function("flat_map")}(i.base)}(i.base)}(t.base)},Opal.modules["rspec/core/formatters/documentation_formatter"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}e.dynamic_require_severity="ignore";var a=(e.top,e),o=e.nil,$=(e.breaker,e.slice,e.module),i=e.klass;return e.add_stubs(["$require_rspec_core","$register","$==","$puts","$output","$current_indentation","$strip","$description","$group","$+","$-","$passed_output","$example","$pending_output","$pending_message","$execution_result","$failure_output","$exception","$private","$wrap","$next_failure_index","$*","$reverse","$parent_groups","$example_group"]),a.get("RSpec").$$scope.get("Support").$require_rspec_core("formatters/base_text_formatter"),function(a){var s,c=s=$(a,"RSpec"),u=(c.$$proto,c.$$scope);!function(a){var s,c=s=$(a,"Core"),u=(c.$$proto,c.$$scope);!function(a){var s,c=s=$(a,"Formatters"),u=(c.$$proto,c.$$scope);!function(a,$super){function $(){}var s,c=$=i(a,$super,"DocumentationFormatter",$),u=c.$$proto,l=c.$$scope;return u.group_level=u.next_failure_index=o,l.get("Formatters").$register(c,"example_group_started","example_group_finished","example_passed","example_pending","example_failed"),e.defn(c,"$initialize",s=function(t){var n=this,r=s.$$p,a=o,$=o;for(s.$$p=null,a=[],$=0;$<arguments.length;$++)a[$]=arguments[$];return e.find_super_dispatcher(n,"initialize",s,r).apply(n,a),n.group_level=0}),e.defn(c,"$example_group_started",function(e){var n=this;return n.group_level["$=="](0)&&n.$output().$puts(),n.$output().$puts(""+n.$current_indentation()+e.$group().$description().$strip()),n.group_level=t(n.group_level,1)}),e.defn(c,"$example_group_finished",function(e){var t=this;return t.group_level=n(t.group_level,1)}),e.defn(c,"$example_passed",function(e){var t=this;return t.$output().$puts(t.$passed_output(e.$example()))}),e.defn(c,"$example_pending",function(e){var t=this;return t.$output().$puts(t.$pending_output(e.$example(),e.$example().$execution_result().$pending_message()))}),e.defn(c,"$example_failed",function(e){var t=this;return t.$output().$puts(t.$failure_output(e.$example(),e.$example().$execution_result().$exception()))}),c.$private(),e.defn(c,"$passed_output",function(e){var t=this;return l.get("ConsoleCodes").$wrap(""+t.$current_indentation()+e.$description().$strip(),"success")}),e.defn(c,"$pending_output",function(e,t){var n=this;return l.get("ConsoleCodes").$wrap(""+n.$current_indentation()+e.$description().$strip()+" (PENDING: "+t+")","pending")}),e.defn(c,"$failure_output",function(e,t){var n=this;return l.get("ConsoleCodes").$wrap(""+n.$current_indentation()+e.$description().$strip()+" (FAILED - "+n.$next_failure_index()+")","failure")}),e.defn(c,"$next_failure_index",function(){var e,n=this;return(e=n.next_failure_index)!==!1&&e!==o?e:n.next_failure_index=0,n.next_failure_index=t(n.next_failure_index,1)}),e.defn(c,"$current_indentation",function(){var e=this;return r("  ",e.group_level)}),e.defn(c,"$example_group_chain",function(){var e=this;return e.$example_group().$parent_groups().$reverse()}),o&&"example_group_chain"}(u.base,u.get("BaseTextFormatter"))}(u.base)}(u.base)}(a.base)},Opal.modules["rspec/core/formatters/html_formatter"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e/t:e["$/"](t)}function a(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}e.dynamic_require_severity="ignore";var o=(e.top,e),$=e.nil,i=(e.breaker,e.slice,e.module),s=e.klass,c=e.hash2;return e.add_stubs(["$require_rspec_core","$register","$new","$print_html_start","$flush","$+","$==","$example_group_number","$print_example_group_end","$print_example_group_start","$description","$group","$size","$parent_groups","$move_progress","$percent_done","$print_example_passed","$example","$run_time","$execution_result","$<<","$make_header_red","$make_example_group_header_red","$exception","$message","$join","$formatted_backtrace","$extra_failure_content","$print_example_failed","$pending_fixed","$make_header_yellow","$make_example_group_header_yellow","$print_example_pending","$pending_message","$print_summary","$duration","$example_count","$failure_count","$pending_count","$private","$>","$to_f","$/","$to_i","$*","$example_number","$map","$backtrace_line","$backtrace_formatter","$configuration","$backtrace","$compact!","$snippet"]),o.get("RSpec").$$scope.get("Support").$require_rspec_core("formatters/base_text_formatter"),o.get("RSpec").$$scope.get("Support").$require_rspec_core("formatters/html_printer"),function(o){var u,l=u=i(o,"RSpec"),_=(l.$$proto,l.$$scope);!function(o){var u,l=u=i(o,"Core"),_=(l.$$proto,l.$$scope);!function(o){var u,l=u=i(o,"Formatters"),_=(l.$$proto,l.$$scope);!function(o,$super){function i(){}var u,l,_,p=i=s(o,$super,"HtmlFormatter",i),d=p.$$proto,f=p.$$scope;return d.printer=d.example_group_number=d.example_number=d.failed_examples=d.header_red=d.example_group_red=d.example_count=d.snippet_extractor=$,f.get("Formatters").$register(p,"start","example_group_started","start_dump","example_started","example_passed","example_failed","example_pending","dump_summary"),e.defn(p,"$initialize",u=function(t){var n=this;u.$$p;return u.$$p=null,e.find_super_dispatcher(n,"initialize",u,null).apply(n,[t]),n.failed_examples=[],n.example_group_number=0,n.example_number=0,n.header_red=$,n.printer=f.get("HtmlPrinter").$new(t)}),e.defn(p,"$start",l=function(t){var n=this,r=l.$$p,a=$,o=$;for(l.$$p=null,a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return e.find_super_dispatcher(n,"start",l,r).apply(n,a),n.printer.$print_html_start(),n.printer.$flush()}),e.defn(p,"$example_group_started",_=function(n){var r=this,a=_.$$p,o=$,i=$;for(_.$$p=null,o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return e.find_super_dispatcher(r,"example_group_started",_,a).apply(r,o),r.example_group_red=!1,r.example_group_number=t(r.example_group_number,1),r.$example_group_number()["$=="](1)||r.printer.$print_example_group_end(),r.printer.$print_example_group_start(r.$example_group_number(),n.$group().$description(),n.$group().$parent_groups().$size()),r.printer.$flush()}),e.defn(p,"$start_dump",function(e){var t=this;return t.printer.$print_example_group_end(),t.printer.$flush()}),e.defn(p,"$example_started",function(e){var n=this;return n.example_number=t(n.example_number,1)}),e.defn(p,"$example_passed",function(e){var t=this;return t.printer.$move_progress(t.$percent_done()),t.printer.$print_example_passed(e.$example().$description(),e.$example().$execution_result().$run_time()),t.printer.$flush()}),e.defn(p,"$example_failed",function(e){var t,n=this,r=$,a=$,o=$,i=$;return n.failed_examples["$<<"](e.$example()),((t=n.header_red)===$||t.$$is_boolean&&1!=t)&&(n.header_red=!0,n.printer.$make_header_red()),((t=n.example_group_red)===$||t.$$is_boolean&&1!=t)&&(n.example_group_red=!0,n.printer.$make_example_group_header_red(n.$example_group_number())),n.printer.$move_progress(n.$percent_done()),r=e.$example(),a=e.$exception(),o=function(){return a!==!1&&a!==$?c(["message","backtrace"],{message:a.$message(),backtrace:e.$formatted_backtrace().$join("\n")}):!1}(),i=n.$extra_failure_content(e),n.printer.$print_example_failed(r.$execution_result().$pending_fixed(),r.$description(),r.$execution_result().$run_time(),n.failed_examples.$size(),o,function(){return(t=i["$=="](""))===$||t.$$is_boolean&&1!=t?i:!1}(),!0),n.printer.$flush()}),e.defn(p,"$example_pending",function(e){var t,n=this,r=$;return r=e.$example(),((t=n.header_red)===$||t.$$is_boolean&&1!=t)&&n.printer.$make_header_yellow(),((t=n.example_group_red)===$||t.$$is_boolean&&1!=t)&&n.printer.$make_example_group_header_yellow(n.$example_group_number()),n.printer.$move_progress(n.$percent_done()),n.printer.$print_example_pending(r.$description(),r.$execution_result().$pending_message()),n.printer.$flush()}),e.defn(p,"$dump_summary",function(e){var t=this;return t.printer.$print_summary(e.$duration(),e.$example_count(),e.$failure_count(),e.$pending_count()),t.printer.$flush()}),p.$private(),e.defn(p,"$example_group_number",function(){var e=this;return e.example_group_number}),e.defn(p,"$example_number",function(){var e=this;return e.example_number}),e.defn(p,"$percent_done",function(){var e=this,t=$;return t=100,n(e.example_count,0)&&(t=r(a(r(e.$example_number().$to_f(),e.example_count.$to_f()),1e3).$to_i(),10).$to_f()),t}),e.defn(p,"$extra_failure_content",function(e){var t,n,r,a=this,o=$;return f.get("RSpec").$$scope.get("Support").$require_rspec_core("formatters/snippet_extractor"),o=(t=(n=e.$exception().$backtrace()).$map,t.$$p=(r=function(e){r.$$s||this;return null==e&&(e=$),f.get("RSpec").$configuration().$backtrace_formatter().$backtrace_line(e)},r.$$s=a,r),t).call(n),o["$compact!"](),(t=a.snippet_extractor)!==!1&&t!==$?t:a.snippet_extractor=f.get("SnippetExtractor").$new(),'    <pre class="ruby"><code>'+a.snippet_extractor.$snippet(o)+"</code></pre>"}),$&&"extra_failure_content"}(_.base,_.get("BaseFormatter"))}(_.base)}(_.base)}(o.base)},Opal.modules["rspec/core/formatters/progress_formatter"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass;return e.add_stubs(["$require_rspec_core","$register","$print","$output","$wrap","$puts"]),t.get("RSpec").$$scope.get("Support").$require_rspec_core("formatters/base_text_formatter"),function(t){var o,$=o=r(t,"RSpec"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"Core"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"Formatters"),i=($.$$proto,$.$$scope);!function(t,$super){function r(){}var o=r=a(t,$super,"ProgressFormatter",r),$=(o.$$proto,o.$$scope);return $.get("Formatters").$register(o,"example_passed","example_pending","example_failed","start_dump"),e.defn(o,"$example_passed",function(e){var t=this;return t.$output().$print($.get("ConsoleCodes").$wrap(".","success"))}),e.defn(o,"$example_pending",function(e){var t=this;return t.$output().$print($.get("ConsoleCodes").$wrap("*","pending"))}),e.defn(o,"$example_failed",function(e){var t=this;return t.$output().$print($.get("ConsoleCodes").$wrap("F","failure"))}),e.defn(o,"$start_dump",function(e){var t=this;return t.$output().$puts()}),n&&"start_dump"}(i.base,i.get("BaseTextFormatter"))}(i.base)}(i.base)}(t.base)},Opal.modules["rspec/core/formatters/profile_formatter"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass;return e.add_stubs(["$require_rspec_core","$register","$attr_reader","$dump_profile_slowest_examples","$dump_profile_slowest_example_groups","$private","$puts","$size","$slowest_examples","$format_seconds","$slow_duration","$percentage","$each","$full_description","$bold","$run_time","$execution_result","$format_caller","$location","$empty?","$slowest_groups","$[]","$pluralize","$backtrace_line","$backtrace_formatter","$configuration","$first","$split","$to_s","$wrap"]),t.get("RSpec").$$scope.get("Support").$require_rspec_core("formatters/console_codes"),function(t){var o,$=o=r(t,"RSpec"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"Core"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"Formatters"),i=($.$$proto,$.$$scope);!function(t,$super){function r(){}var o=r=a(t,$super,"ProfileFormatter",r),$=o.$$proto,i=o.$$scope;return $.output=n,i.get("Formatters").$register(o,"dump_profile"),e.defn(o,"$initialize",function(e){var t=this;return t.output=e}),o.$attr_reader("output"),e.defn(o,"$dump_profile",function(e){var t=this;return t.$dump_profile_slowest_examples(e),t.$dump_profile_slowest_example_groups(e)}),o.$private(),e.defn(o,"$dump_profile_slowest_examples",function(e){var t,r,a,o=this;return o.output.$puts("\nTop "+e.$slowest_examples().$size()+" slowest examples ("+i.get("Helpers").$format_seconds(e.$slow_duration())+" seconds, "+e.$percentage()+"% of total time):\n"),(t=(r=e.$slowest_examples()).$each,t.$$p=(a=function(e){var t=a.$$s||this;return null==t.output&&(t.output=n),null==e&&(e=n),t.output.$puts("  "+e.$full_description()),t.output.$puts("    "+t.$bold(i.get("Helpers").$format_seconds(e.$execution_result().$run_time()))+" "+t.$bold("seconds")+" "+t.$format_caller(e.$location()))},a.$$s=o,a),t).call(r)}),e.defn(o,"$dump_profile_slowest_example_groups",function(e){var t,r,a,o=this;return(t=e.$slowest_groups()["$empty?"]())===n||t.$$is_boolean&&1!=t?(o.output.$puts("\nTop "+e.$slowest_groups().$size()+" slowest example groups:"),(t=(r=e.$slowest_groups()).$each,t.$$p=(a=function(e,t){var r=a.$$s||this,o=n,$=n,s=n;return null==r.output&&(r.output=n),null==e&&(e=n),null==t&&(t=n),o=""+r.$bold(i.get("Helpers").$format_seconds(t["$[]"]("average")))+" "+r.$bold("seconds")+" average",$=""+i.get("Helpers").$format_seconds(t["$[]"]("total_time"))+" seconds",s=i.get("Helpers").$pluralize(t["$[]"]("count"),"example"),r.output.$puts("  "+t["$[]"]("description")),r.output.$puts("    "+o+" ("+$+" / "+s+") "+e)},a.$$s=o,a),t).call(r)):n}),e.defn(o,"$format_caller",function(e){return i.get("RSpec").$configuration().$backtrace_formatter().$backtrace_line(e.$to_s().$split(":in `block").$first())}),e.defn(o,"$bold",function(e){return i.get("ConsoleCodes").$wrap(e,"bold")}),n&&"bold"}(i.base,null)}(i.base)}(i.base)}(t.base)},Opal.modules["rspec/core/formatters/json_formatter"]=function(e){e.dynamic_require_severity="ignore";var t=e.top,n=e,r=e.nil,a=(e.breaker,e.slice,e.module),o=e.klass,$=e.hash2,i=e.gvars;return e.add_stubs(["$require_rspec_core","$require","$register","$attr_reader","$<<","$[]","$[]=","$message","$duration","$example_count","$failure_count","$pending_count","$totals_line","$map","$tap","$exception","$name","$class","$backtrace","$format_example","$examples","$write","$output","$to_json","$===","$!=","$close","$dump_profile_slowest_examples","$dump_profile_slowest_example_groups","$slowest_examples","$run_time","$execution_result","$slow_duration","$update","$slowest_groups","$private","$description","$full_description","$to_s","$status","$metadata"]),n.get("RSpec").$$scope.get("Support").$require_rspec_core("formatters/base_formatter"),t.$require("json"),function(t){var n,s=n=a(t,"RSpec"),c=(s.$$proto,s.$$scope);!function(t){var n,s=n=a(t,"Core"),c=(s.$$proto,s.$$scope);!function(t){var n,s=n=a(t,"Formatters"),c=(s.$$proto,s.$$scope);!function(t,$super){function n(){}var a,s=n=o(t,$super,"JsonFormatter",n),c=s.$$proto,u=s.$$scope;return c.output_hash=r,u.get("Formatters").$register(s,"message","dump_summary","dump_profile","stop","close"),s.$attr_reader("output_hash"),e.defn(s,"$initialize",a=function(t){var n=this,o=a.$$p,i=r,s=r;for(a.$$p=null,i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return e.find_super_dispatcher(n,"initialize",a,o).apply(n,i),n.output_hash=$([],{})}),e.defn(s,"$message",function(e){var t,n,a,o=this;return(t="messages",n=o.output_hash,(a=n["$[]"](t))!==!1&&a!==r?a:n["$[]="](t,[]))["$<<"](e.$message())}),e.defn(s,"$dump_summary",function(e){var t=this;return t.output_hash["$[]="]("summary",$(["duration","example_count","failure_count","pending_count"],{duration:e.$duration(),example_count:e.$example_count(),failure_count:e.$failure_count(),pending_count:e.$pending_count()})),t.output_hash["$[]="]("summary_line",e.$totals_line())}),e.defn(s,"$stop",function(e){var t,n,a,o=this;return o.output_hash["$[]="]("examples",(t=(n=e.$examples()).$map,t.$$p=(a=function(e){var t,n,o,i=a.$$s||this;return null==e&&(e=r),(t=(n=i.$format_example(e)).$tap,t.$$p=(o=function(t){var n=(o.$$s||this,r);return null==t&&(t=r),n=e.$exception(),n!==!1&&n!==r?t["$[]="]("exception",$(["class","message","backtrace"],{"class":n.$class().$name(),message:n.$message(),backtrace:n.$backtrace()})):r},o.$$s=i,o),t).call(n)},a.$$s=o,a),t).call(n))}),e.defn(s,"$close",function(e){var t,n,a=this;return null==i.stdout&&(i.stdout=r),a.$output().$write(a.output_hash.$to_json()),n=u.get("IO")["$==="](a.$output()),(t=n!==!1&&n!==r?a.$output()["$!="](i.stdout):n)===r||t.$$is_boolean&&1!=t?r:a.$output().$close()}),e.defn(s,"$dump_profile",function(e){var t=this;return t.output_hash["$[]="]("profile",$([],{})),t.$dump_profile_slowest_examples(e),t.$dump_profile_slowest_example_groups(e)}),e.defn(s,"$dump_profile_slowest_examples",function(e){var t,n,a,o=this,i=r;return o.output_hash["$[]="]("profile",$([],{})),i=e.$slowest_examples(),o.output_hash["$[]"]("profile")["$[]="]("examples",(t=(n=i).$map,t.$$p=(a=function(e){var t,n,o,$=a.$$s||this;return null==e&&(e=r),(t=(n=$.$format_example(e)).$tap,t.$$p=(o=function(t){o.$$s||this;return null==t&&(t=r),t["$[]="]("run_time",e.$execution_result().$run_time())},o.$$s=$,o),t).call(n)},a.$$s=o,a),t).call(n)),o.output_hash["$[]"]("profile")["$[]="]("slowest",e.$slow_duration()),o.output_hash["$[]"]("profile")["$[]="]("total",e.$duration())}),e.defn(s,"$dump_profile_slowest_example_groups",function(e){var t,n,a,o,i=this;return t="profile",n=i.output_hash,(a=n["$[]"](t))!==!1&&a!==r?a:n["$[]="](t,$([],{})),i.output_hash["$[]"]("profile")["$[]="]("groups",(t=(n=e.$slowest_groups()).$map,t.$$p=(o=function(e,t){o.$$s||this;return null==e&&(e=r),null==t&&(t=r),t.$update($(["location"],{location:e}))},o.$$s=i,o),t).call(n))}),s.$private(),e.defn(s,"$format_example",function(e){return $(["description","full_description","status","file_path","line_number","run_time"],{description:e.$description(),full_description:e.$full_description(),status:e.$execution_result().$status().$to_s(),file_path:e.$metadata()["$[]"]("file_path"),line_number:e.$metadata()["$[]"]("line_number"),run_time:e.$execution_result().$run_time()})}),r&&"format_example"}(c.base,c.get("BaseFormatter"))}(c.base)}(c.base)}(n.base)},Opal.modules["rspec/core/formatters"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="ignore";var n=(e.top,e),r=e.nil,a=(e.breaker,e.slice,e.module),o=e.klass,$=e.hash2;return e.add_stubs(["$require_rspec_support","$autoload","$[]=","$formatters","$default_formatter=","$attr_reader","$attr_accessor","$empty?","$add","$default_formatter","$any?","$===","$profile_examples?","$configuration","$!","$existing_formatter_implements?","$find_formatter","$map","$respond_to?","$file_at","$nil?","$[]","$new","$register_listener","$notifications_for","$load_formatter","$notifications","$first_non_rspec_line","$warn_deprecation","$gsub","$duplicate_formatter_exists?","$<<","$private","$built_in_formatter","$custom_formatter","$raise","$class","$==","$output","$registered_listeners","$to_s","$inject","$+","$fetch","$ancestors","$string_const?","$const_get","$split","$require","$path_for","$retry","$is_a?","$=~","$underscore_with_fix_for_non_standard_rspec_naming","$sub","$underscore","$dup","$gsub!","$tr!","$downcase!","$mkdir_p","$dirname"]),n.get("RSpec").$$scope.get("Support").$require_rspec_support("directory_maker"),function(n){var i,s=i=a(n,"Formatters"),c=(s.$$proto,s.$$scope);s.$autoload("DocumentationFormatter","rspec/core/formatters/documentation_formatter"),s.$autoload("HtmlFormatter","rspec/core/formatters/html_formatter"),s.$autoload("ProgressFormatter","rspec/core/formatters/progress_formatter"),s.$autoload("ProfileFormatter","rspec/core/formatters/profile_formatter"),s.$autoload("JsonFormatter","rspec/core/formatters/json_formatter"),e.defs(s,"$register",function(e){var t=r,n=arguments.length-1;0>n&&(n=0);var a=new Array(n);for(t=0;n>t;t++)a[t]=arguments[t+1];return c.get("Loader").$formatters()["$[]="](e,a)}),function(n,$super){function a(){}var i=a=o(n,$super,"Loader",a),s=i.$$proto,c=i.$$scope;return s.formatters=s.reporter=r,e.defs(i,"$formatters",function(){var e,t=this;return null==t.formatters&&(t.formatters=r),(e=t.formatters)!==!1&&e!==r?e:t.formatters=$([],{})}),e.defn(i,"$initialize",function(e){var t,n,r=this;return r.formatters=[],r.reporter=e,t=["progress"],n=r,n["$default_formatter="].apply(n,t),t[t.length-1]}),i.$attr_reader("formatters"),i.$attr_reader("reporter"),i.$attr_accessor("default_formatter"),e.defn(i,"$setup_default",function(e,t){var n,a,o,$,i=this;return(n=i.formatters["$empty?"]())===r||n.$$is_boolean&&1!=n||i.$add(i.$default_formatter(),e),((n=(a=(o=i.formatters)["$any?"],a.$$p=($=function(e){$.$$s||this;return null==e&&(e=r),c.get("DeprecationFormatter")["$==="](e)},$.$$s=i,$),a).call(o))===r||n.$$is_boolean&&1!=n)&&i.$add(c.get("DeprecationFormatter"),t,e),a=c.get("RSpec").$configuration()["$profile_examples?"](),(n=a!==!1&&a!==r?i["$existing_formatter_implements?"]("dump_profile")["$!"]():a)===r||n.$$is_boolean&&1!=n?r:i.$add(c.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("ProfileFormatter"),e)}),e.defn(i,"$add",function(t){var n,a,o,$,i,s,u,l=this,_=r,p=r,d=r,f=r,g=r,h=r,m=arguments.length-1;0>m&&(m=0);var v=new Array(m);for(h=0;m>h;h++)v[h]=arguments[h+1];if(_=l.$find_formatter(t),p=(n=(a=v).$map,n.$$p=(o=function(e){var t,n=o.$$s||this;return null==e&&(e=r),(t=e["$respond_to?"]("puts"))===r||t.$$is_boolean&&1!=t?n.$file_at(e):e;
},o.$$s=l,o),n).call(a),(n=c.get("Loader").$formatters()["$[]"](_)["$nil?"]()["$!"]())===r||n.$$is_boolean&&1!=n){if((i=function(){try{return null!=c.get("RSpec").$$scope.get("LegacyFormatters")?"constant":r}catch(t){if(t.$$class===e.NameError)return r;throw t}}())===r||i.$$is_boolean&&1!=i)return f=e.get("RSpec").$$scope.get("CallerFilter").$first_non_rspec_line(),g=f!==!1&&f!==r?"Formatter added at: "+f:"The formatter was added via command line flag or your `.rspec` file.",c.get("RSpec").$warn_deprecation(("          |The "+_+" formatter uses the deprecated formatter\n          |interface not supported directly by RSpec 3.\n          |\n          |To continue to use this formatter you must install the\n          |`rspec-legacy_formatters` gem, which provides support\n          |for legacy formatters or upgrade the formatter to a\n          |compatible version.\n          |\n          |"+g+"\n").$gsub(/\s*\|/," ")),r;d=(i=c.get("RSpec").$$scope.get("LegacyFormatters")).$load_formatter.apply(i,[_].concat(e.to_a(p))),(s=l.reporter).$register_listener.apply(s,[d].concat(e.to_a(d.$notifications())))}else d=(n=_).$new.apply(n,e.to_a(p)),($=l.reporter).$register_listener.apply($,[d].concat(e.to_a(l.$notifications_for(_))));return((u=l["$duplicate_formatter_exists?"](d))===r||u.$$is_boolean&&1!=u)&&l.formatters["$<<"](d),d}),i.$private(),e.defn(i,"$find_formatter",function(e){var t,n,a=this;return(t=(n=a.$built_in_formatter(e))!==!1&&n!==r?n:a.$custom_formatter(e))!==!1&&t!==r?t:a.$raise(c.get("ArgumentError"),"Formatter '"+e+"' unknown - maybe you meant 'documentation' or 'progress'?.")}),e.defn(i,"$duplicate_formatter_exists?",function(e){var t,n,a,o=this;return(t=(n=o.formatters)["$any?"],t.$$p=(a=function(t){var n;a.$$s||this;return null==t&&(t=r),n=t.$class()["$==="](e),n!==!1&&n!==r?t.$output()["$=="](e.$output()):n},a.$$s=o,a),t).call(n)}),e.defn(i,"$existing_formatter_implements?",function(e){var t=this;return t.reporter.$registered_listeners(e)["$any?"]()}),e.defn(i,"$built_in_formatter",function(e){var t=r;return function(){return t=e.$to_s(),"d"["$==="](t)||"doc"["$==="](t)||"documentation"["$==="](t)?c.get("DocumentationFormatter"):"h"["$==="](t)||"html"["$==="](t)?c.get("HtmlFormatter"):"p"["$==="](t)||"progress"["$==="](t)?c.get("ProgressFormatter"):"j"["$==="](t)||"json"["$==="](t)?c.get("JsonFormatter"):r}()}),e.defn(i,"$notifications_for",function(e){var n,a,o,$=this;return(n=(a=e.$ancestors()).$inject,n.$$p=(o=function(e,n){var a,$,i,s=o.$$s||this;return null==e&&(e=r),null==n&&(n=r),t(e,(a=($=c.get("Loader").$formatters()).$fetch,a.$$p=(i=function(){i.$$s||this;return c.get("Set").$new()},i.$$s=s,i),a).call($,n))},o.$$s=$,o),n).call(a,c.get("Set").$new())}),e.defn(i,"$custom_formatter",function(t){var n,a,o,$=this;if(!((n=c.get("Class")["$==="](t))===r||n.$$is_boolean&&1!=n))return t;if((n=$["$string_const?"](t))===r||n.$$is_boolean&&1!=n)return r;try{return(n=(a=t.$gsub(/^::/,"").$split("::")).$inject,n.$$p=(o=function(e,t){o.$$s||this;return null==e&&(e=r),null==t&&(t=r),e.$const_get(t)},o.$$s=$,o),n).call(a,c.get("Object"))}catch(i){if(!e.rescue(i,[c.get("NameError")]))throw i;try{return(n=$.$require($.$path_for(t)))===r||n.$$is_boolean&&1!=n?$.$raise():$.$retry()}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}),e.defn(i,"$string_const?",function(e){var t;return t=e["$is_a?"](c.get("String")),t!==!1&&t!==r?/\A[A-Z][a-zA-Z0-9_:]*\z/["$=~"](e):t}),e.defn(i,"$path_for",function(e){var t=this;return t.$underscore_with_fix_for_non_standard_rspec_naming(e)}),e.defn(i,"$underscore_with_fix_for_non_standard_rspec_naming",function(e){var t=this;return t.$underscore(e).$sub(/(^|\/)r_spec($|\/)/,"\\1rspec\\2")}),e.defn(i,"$underscore",function(e){var t=r;return t=e.$to_s().$dup(),t["$gsub!"](/::/,"/"),t["$gsub!"](/([A-Z]+)([A-Z][a-z])/,"\\1_\\2"),t["$gsub!"](/([a-z\d])([A-Z])/,"\\1_\\2"),t["$tr!"]("-","_"),t["$downcase!"](),t}),e.defn(i,"$file_at",function(e){return c.get("RSpec").$$scope.get("Support").$$scope.get("DirectoryMaker").$mkdir_p(c.get("File").$dirname(e)),c.get("File").$new(e,"w")}),r&&"file_at"}(c.base,null)}(n.get("RSpec").$$scope.get("Core"))},Opal.modules["rspec/core/formatters/base_formatter"]=function(e){e.dynamic_require_severity="ignore";var t=e.top,n=e,r=e.nil,a=(e.breaker,e.slice,e.module),o=e.klass;return e.add_stubs(["$require_rspec_core","$require","$register","$attr_accessor","$attr_reader","$new","$start_sync_output","$count","$group","$restore_sync_output","$private","$output_supports_sync","$sync","$output","$sync=","$!","$closed?","$respond_to?"]),n.get("RSpec").$$scope.get("Support").$require_rspec_core("formatters/helpers"),t.$require("stringio"),function(t){var n,$=n=a(t,"RSpec"),i=($.$$proto,$.$$scope);!function(t){var n,$=n=a(t,"Core"),i=($.$$proto,$.$$scope);!function(t){var n,$=n=a(t,"Formatters"),i=($.$$proto,$.$$scope);!function(t,$super){function n(){}var a=n=o(t,$super,"BaseFormatter",n),$=a.$$proto,i=a.$$scope;return $.old_sync=r,i.get("Formatters").$register(a,"start","example_group_started","close"),a.$attr_accessor("example_group"),a.$attr_reader("output"),e.defn(a,"$initialize",function(e){var t,n=this;return n.output=(t=e)!==!1&&t!==r?t:i.get("StringIO").$new(),n.example_group=r}),e.defn(a,"$start",function(e){var t=this;return t.$start_sync_output(),t.example_count=e.$count()}),e.defn(a,"$example_group_started",function(e){var t=this;return t.example_group=e.$group()}),e.defn(a,"$close",function(e){var t=this;return t.$restore_sync_output()}),a.$private(),e.defn(a,"$start_sync_output",function(){var e,t=this;return(e=t.$output_supports_sync())===r||e.$$is_boolean&&1!=e?r:(e=[t.$output().$sync(),!0],t.old_sync=e[0],t.$output()["$sync="](e[1]),e)}),e.defn(a,"$restore_sync_output",function(){var e,t,n=this;return t=n.$output_supports_sync(),(e=t!==!1&&t!==r?n.$output()["$closed?"]()["$!"]():t)===r||e.$$is_boolean&&1!=e?r:(e=[n.old_sync],t=n.$output(),t["$sync="].apply(t,e),e[e.length-1])}),e.defn(a,"$output_supports_sync",function(){var e=this;return e.$output()["$respond_to?"]("sync=")}),r&&"output_supports_sync"}(i.base,null)}(i.base)}(i.base)}(n.base)},Opal.modules["rspec/core/formatters/base_text_formatter"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,o=e.gvars;return e.add_stubs(["$require_rspec_core","$register","$puts","$output","$message","$empty?","$failure_notifications","$fully_formatted_failed_examples","$fully_formatted","$pending_examples","$fully_formatted_pending_examples","$seed_used?","$===","$closed?","$==","$close"]),t.get("RSpec").$$scope.get("Support").$require_rspec_core("formatters/base_formatter"),t.get("RSpec").$$scope.get("Support").$require_rspec_core("formatters/console_codes"),function(t){var $,i=$=r(t,"RSpec"),s=(i.$$proto,i.$$scope);!function(t){var $,i=$=r(t,"Core"),s=(i.$$proto,i.$$scope);!function(t){var $,i=$=r(t,"Formatters"),s=(i.$$proto,i.$$scope);!function(t,$super){function r(){}var $=r=a(t,$super,"BaseTextFormatter",r),i=($.$$proto,$.$$scope);return i.get("Formatters").$register($,"message","dump_summary","dump_failures","dump_pending","seed"),e.defn($,"$message",function(e){var t=this;return t.$output().$puts(e.$message())}),e.defn($,"$dump_failures",function(e){var t,r=this;return(t=e.$failure_notifications()["$empty?"]())===n||t.$$is_boolean&&1!=t?r.$output().$puts(e.$fully_formatted_failed_examples()):n}),e.defn($,"$dump_summary",function(e){var t=this;return t.$output().$puts(e.$fully_formatted())}),e.defn($,"$dump_pending",function(e){var t,r=this;return(t=e.$pending_examples()["$empty?"]())===n||t.$$is_boolean&&1!=t?r.$output().$puts(e.$fully_formatted_pending_examples()):n}),e.defn($,"$seed",function(e){var t,r=this;return(t=e["$seed_used?"]())===n||t.$$is_boolean&&1!=t?n:r.$output().$puts(e.$fully_formatted())}),e.defn($,"$close",function(e){var t,r,a=this;return null==o.stdout&&(o.stdout=n),(t=i.get("IO")["$==="](a.$output()))===n||t.$$is_boolean&&1!=t?n:(t=(r=a.$output()["$closed?"]())!==!1&&r!==n?r:a.$output()["$=="](o.stdout))===n||t.$$is_boolean&&1!=t?a.$output().$close():n}),n&&"close"}(s.base,s.get("BaseFormatter"))}(s.base)}(s.base)}(t.base)},Opal.modules["rspec/core/formatters/console_codes"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.hash2;return e.add_stubs(["$invert","$module_function","$respond_to?","$configuration","$to_s","$console_code_for","$configuration_color","$key?","$fetch","$color_enabled?","$__send__"]),function(t){var o,$=o=r(t,"RSpec"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"Core"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"Formatters"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"ConsoleCodes"),i=($.$$proto,$.$$scope);e.cdecl(i,"VT100_CODES",a(["black","red","green","yellow","blue","magenta","cyan","white","bold"],{black:30,red:31,green:32,yellow:33,blue:34,magenta:35,cyan:36,white:37,bold:1})),e.cdecl(i,"VT100_CODE_VALUES",i.get("VT100_CODES").$invert()),$.$module_function(),e.defn($,"$console_code_for",function(e){var t,r,a,o=this;return(t=i.get("RSpec").$configuration()["$respond_to?"](""+e.$to_s()+"_color"))===n||t.$$is_boolean&&1!=t?(t=i.get("VT100_CODE_VALUES")["$key?"](e))===n||t.$$is_boolean&&1!=t?(t=(r=i.get("VT100_CODES")).$fetch,t.$$p=(a=function(){var e=a.$$s||this;return e.$console_code_for("white")},a.$$s=o,a),t).call(r,e):e:o.$console_code_for(o.$configuration_color(e))}),e.defn($,"$wrap",function(e,t){var r,a=this;return(r=i.get("RSpec").$configuration()["$color_enabled?"]())===n||r.$$is_boolean&&1!=r?e:"e["+a.$console_code_for(t)+"m"+e+"e[0m"}),e.defn($,"$configuration_color",function(e){return i.get("RSpec").$configuration().$__send__(""+e.$to_s()+"_color")})}(i.base)}(i.base)}(i.base)}(t.base)},Opal.modules["rspec/core/formatters/deprecation_formatter"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}function a(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}e.dynamic_require_severity="ignore";var o=e.top,$=e,i=e.nil,s=(e.breaker,e.slice,e.module),c=e.klass;return e.add_stubs(["$require_rspec_core","$require","$register","$attr_reader","$new","$deprecation_stream","$===","$summary_stream","$include?","$+","$print_deprecation_message","$printer","$<<","$deprecation_summary","$message","$gsub","$deprecation_type_for","$output_formatted","$private","$>","$count","$lines","$*","$chomp","$deprecated","$replacement","$call_site","$type","$deprecation_message_for","$deprecation_formatter","$puts","$to_s","$zero?","$summarize","$[]=","$[]","$stash_deprecation_message","$<","$==","$too_many_warnings_message","$any?","$print_deferred_deprecation_warnings","$pluralize","$each","$sort_by","$to_proc","$keys","$raise","$sync=","$path"]),$.get("RSpec").$$scope.get("Support").$require_rspec_core("formatters/helpers"),o.$require("set"),function(o){var $,u=$=s(o,"RSpec"),l=(u.$$proto,u.$$scope);!function(o){var $,u=$=s(o,"Core"),l=(u.$$proto,u.$$scope);!function(o){var $,u=$=s(o,"Formatters"),l=(u.$$proto,u.$$scope);!function(o,$super){function $(){}var s,u,l,_,p,d=$=c(o,$super,"DeprecationFormatter",$),f=d.$$proto,g=d.$$scope;return f.printer=f.seen_deprecations=f.count=i,g.get("Formatters").$register(d,"deprecation","deprecation_summary"),d.$attr_reader("count","deprecation_stream","summary_stream"),e.defn(d,"$initialize",function(e,t){var n=this;return n.deprecation_stream=e,n.summary_stream=t,n.seen_deprecations=g.get("Set").$new(),n.count=0}),e.alias(d,"output","deprecation_stream"),e.defn(d,"$printer",function(){var e,t=this,n=i;return(e=t.printer)!==!1&&e!==i?e:t.printer=function(){return n=t.$deprecation_stream(),g.get("File")["$==="](n)?g.get("ImmediatePrinter").$new(g.get("FileStream").$new(t.$deprecation_stream()),t.$summary_stream(),t):g.get("RaiseErrorStream")["$==="](n)?g.get("ImmediatePrinter").$new(t.$deprecation_stream(),t.$summary_stream(),t):g.get("DelayedPrinter").$new(t.$deprecation_stream(),t.$summary_stream(),t)}()}),e.defn(d,"$deprecation",function(e){var n,r=this;return(n=r.seen_deprecations["$include?"](e))===i||n.$$is_boolean&&1!=n?(r.count=t(r.count,1),r.$printer().$print_deprecation_message(e),r.seen_deprecations["$<<"](e)):i}),e.defn(d,"$deprecation_summary",function(e){var t=this;return t.$printer().$deprecation_summary()}),e.defn(d,"$deprecation_message_for",function(e){var t;return(t=e.$message())===i||t.$$is_boolean&&1!=t?g.get("GeneratedDeprecationMessage").$new(e):g.get("SpecifiedDeprecationMessage").$new(e)}),e.cdecl(g,"RAISE_ERROR_CONFIG_NOTICE","          |\n          |If you need more of the backtrace for any of these deprecations to\n          |identify where to make the necessary changes, you can configure\n          |`config.raise_errors_for_deprecations!`, and it will turn the\n          |deprecation warnings into errors, giving you the full backtrace.\n".$gsub(/^\s+\|/,"")),e.cdecl(g,"DEPRECATION_STREAM_NOTICE","Pass `--deprecation-out` or set `config.deprecation_stream` to a file for full output."),e.cdecl(g,"SpecifiedDeprecationMessage",(s=(u=g.get("Struct")).$new,s.$$p=(l=function(){var t,a=l.$$s||this;return e.def(a,"$initialize",t=function(n){var r=this;t.$$p;return t.$$p=null,r.message=n.$message(),e.find_super_dispatcher(r,"initialize",t,null).apply(r,[r.$deprecation_type_for(n)])}),e.def(a,"$to_s",function(){var e=this;return null==e.message&&(e.message=i),e.$output_formatted(e.message)}),e.def(a,"$too_many_warnings_message",function(){var e=i;return e="Too many similar deprecation messages reported, disregarding further reports. ",e["$<<"](g.get("DEPRECATION_STREAM_NOTICE")),e}),a.$private(),e.def(a,"$output_formatted",function(e){var t=i;return n(e.$lines().$count(),1)?(t=""+r("-",80),""+t+"\n"+e.$chomp()+"\n"+t):e}),e.def(a,"$deprecation_type_for",function(e){return e.$message().$gsub(/(\w+\/)+\w+\.rb:\d+/,"")}),i&&"deprecation_type_for"},l.$$s=d,l),s).call(u,"type")),e.cdecl(g,"GeneratedDeprecationMessage",(s=(_=g.get("Struct")).$new,s.$$p=(p=function(){var t,n=p.$$s||this;return e.def(n,"$initialize",t=function(n){var r=this;t.$$p;return t.$$p=null,r.data=n,e.find_super_dispatcher(r,"initialize",t,null).apply(r,[n.$deprecated()])}),e.def(n,"$to_s",function(){var e,t=this,n=i;return null==t.data&&(t.data=i),n=""+t.data.$deprecated()+" is deprecated.",(e=t.data.$replacement())===i||e.$$is_boolean&&1!=e||n["$<<"](" Use "+t.data.$replacement()+" instead."),(e=t.data.$call_site())===i||e.$$is_boolean&&1!=e||n["$<<"](" Called from "+t.data.$call_site()+"."),n}),e.def(n,"$too_many_warnings_message",function(){var e=this,t=i;return t="Too many uses of deprecated '"+e.$type()+"'. ",t["$<<"](g.get("DEPRECATION_STREAM_NOTICE")),t}),i&&"too_many_warnings_message"},p.$$s=d,p),s).call(_,"type")),function(t,$super){function n(){}var r=n=c(t,$super,"ImmediatePrinter",n);r.$$proto,r.$$scope;return r.$attr_reader("deprecation_stream","summary_stream","deprecation_formatter"),e.defn(r,"$initialize",function(e,t,n){var r=this;return r.deprecation_stream=e,r.summary_stream=t,r.deprecation_formatter=n}),e.defn(r,"$print_deprecation_message",function(e){var t=this,n=i;return n=t.$deprecation_formatter().$deprecation_message_for(e),t.$deprecation_stream().$puts(n.$to_s())}),e.defn(r,"$deprecation_summary",function(){var e,t=this;return(e=t.$deprecation_formatter().$count()["$zero?"]())===i||e.$$is_boolean&&1!=e?t.$deprecation_stream().$summarize(t.$summary_stream(),t.$deprecation_formatter().$count()):i}),i&&"deprecation_summary"}(g.base,null),function(n,$super){function r(){}var o=r=c(n,$super,"DelayedPrinter",r),$=o.$$proto,s=o.$$scope;return $.seen_deprecations=$.deprecation_messages=i,e.cdecl(s,"TOO_MANY_USES_LIMIT",4),o.$attr_reader("deprecation_stream","summary_stream","deprecation_formatter"),e.defn(o,"$initialize",function(e,t,n){var r,a,o,$,c,u=this;return u.deprecation_stream=e,u.summary_stream=t,u.deprecation_formatter=n,u.seen_deprecations=(r=(a=s.get("Hash")).$new,r.$$p=(o=function(){o.$$s||this;return 0},o.$$s=u,o),r).call(a),u.deprecation_messages=(r=($=s.get("Hash")).$new,r.$$p=(c=function(e,t){c.$$s||this;return null==e&&(e=i),null==t&&(t=i),e["$[]="](t,[])},c.$$s=u,c),r).call($)}),e.defn(o,"$print_deprecation_message",function(e){var n,r,a=this,o=i;return o=a.$deprecation_formatter().$deprecation_message_for(e),n=o,r=a.seen_deprecations,r["$[]="](n,t(r["$[]"](n),1)),a.$stash_deprecation_message(o)}),e.defn(o,"$stash_deprecation_message",function(e){var t=this;return a(t.seen_deprecations["$[]"](e),s.get("TOO_MANY_USES_LIMIT"))?t.deprecation_messages["$[]"](e)["$<<"](e.$to_s()):t.seen_deprecations["$[]"](e)["$=="](s.get("TOO_MANY_USES_LIMIT"))?t.deprecation_messages["$[]"](e)["$<<"](e.$too_many_warnings_message()):i}),e.defn(o,"$deprecation_summary",function(){var e,t=this;return(e=t.deprecation_messages["$any?"]())===i||e.$$is_boolean&&1!=e?i:(t.$print_deferred_deprecation_warnings(),t.$deprecation_stream().$puts(s.get("RAISE_ERROR_CONFIG_NOTICE")),t.$summary_stream().$puts("\n"+s.get("Helpers").$pluralize(t.$deprecation_formatter().$count(),"deprecation warning")+" total"))}),e.defn(o,"$print_deferred_deprecation_warnings",function(){var e,t,n,r,a,o=this;return o.$deprecation_stream().$puts("\nDeprecation Warnings:\n\n"),(e=(t=(r=(a=o.deprecation_messages.$keys()).$sort_by,r.$$p="type".$to_proc(),r).call(a)).$each,e.$$p=(n=function(e){var t,r,a,o=n.$$s||this,$=i;return null==o.deprecation_messages&&(o.deprecation_messages=i),null==e&&(e=i),$=o.deprecation_messages["$[]"](e),(t=(r=$).$each,t.$$p=(a=function(e){var t=a.$$s||this;return null==e&&(e=i),t.$deprecation_stream().$puts(e)},a.$$s=o,a),t).call(r),o.$deprecation_stream().$puts()},n.$$s=o,n),e).call(t)}),i&&"print_deferred_deprecation_warnings"}(g.base,null),function(t,$super){function n(){}var r=n=c(t,$super,"RaiseErrorStream",n),a=(r.$$proto,r.$$scope);return e.defn(r,"$puts",function(e){var t=this;return t.$raise(a.get("DeprecationError"),e)}),e.defn(r,"$summarize",function(e,t){return e.$puts("\n"+a.get("Helpers").$pluralize(t,"deprecation")+" found.")}),i&&"summarize"}(g.base,null),function(t,$super){function n(){}var r=n=c(t,$super,"FileStream",n),a=r.$$proto,o=r.$$scope;return a.file=i,e.defn(r,"$initialize",function(e){var t,n,r=this;return r.file=e,t=[!0],n=r.file,n["$sync="].apply(n,t),t[t.length-1]}),e.defn(r,"$puts",function(){var t,n=this,r=i,a=arguments.length-0;0>a&&(a=0);var o=new Array(a);for(r=0;a>r;r++)o[r]=arguments[r+0];return(t=n.file).$puts.apply(t,e.to_a(o))}),e.defn(r,"$summarize",function(e,t){var n=this;return e.$puts("\n"+o.get("Helpers").$pluralize(t,"deprecation")+" logged to "+n.file.$path()),n.$puts(o.get("RAISE_ERROR_CONFIG_NOTICE"))}),i&&"summarize"}(g.base,null)}(l.base,null)}(l.base),e.cdecl(l,"DeprecationError",l.get("Class").$new(l.get("StandardError")))}(l.base)}($.base)},Opal.modules["rspec/core/formatters/helpers"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e/t:e["$/"](t)}function a(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function o(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}e.dynamic_require_severity="ignore";var $=(e.top,e),i=e.nil,s=(e.breaker,e.slice,e.module);return e.add_stubs(["$<","$>","$to_i","$/","$-","$*","$pluralize","$format_seconds","$%","$strip_trailing_zeroes","$sub","$empty?","$private_class_method","$==","$to_f"]),function($){var c,u=c=s($,"RSpec"),l=(u.$$proto,u.$$scope);!function($){var c,u=c=s($,"Core"),l=(u.$$proto,u.$$scope);!function($){var c,u=c=s($,"Formatters"),l=(u.$$proto,u.$$scope);!function($){var c,u=c=s($,"Helpers"),l=(u.$$proto,u.$$scope);e.cdecl(l,"SUB_SECOND_PRECISION",5),e.cdecl(l,"DEFAULT_PRECISION",2),e.defs(u,"$format_duration",function(e){var $=this,s=i,c=i,u=i;return s=function(){return t(e,1)?l.get("SUB_SECOND_PRECISION"):t(e,120)?l.get("DEFAULT_PRECISION"):t(e,300)?1:0}(),n(e,60)?(c=r(e.$to_i(),60).$to_i(),u=a(e,o(c,60)),""+$.$pluralize(c,"minute")+" "+$.$pluralize($.$format_seconds(u,s),"second")):$.$pluralize($.$format_seconds(e,s),"second")}),e.defs(u,"$format_seconds",function(e,n){var r,a,o=this,$=i;return null==n&&(n=i),(r=n)!==!1&&r!==i?r:n=function(){return(a=t(e,1))===i||a.$$is_boolean&&1!=a?l.get("DEFAULT_PRECISION"):l.get("SUB_SECOND_PRECISION")}(),$=("%."+n+"f")["$%"](e),o.$strip_trailing_zeroes($)}),e.defs(u,"$strip_trailing_zeroes",function(e){var t,n=i;return n=e.$sub(/[^1-9]+$/,""),(t=n["$empty?"]())===i||t.$$is_boolean&&1!=t?n:"0"}),u.$private_class_method("strip_trailing_zeroes"),e.defs(u,"$pluralize",function(e,t){return""+e+" "+t+function(){return e.$to_f()["$=="](1)?i:"s"}()})}(l.base)}(l.base)}(l.base)}($.base)},Opal.modules["rspec/core/formatters/html_printer"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.dynamic_require_severity="ignore";var a=e.top,o=e,$=e.nil,i=(e.breaker,e.slice,e.module),s=e.klass;return e.add_stubs(["$require","$include","$puts","$indentation_style","$h","$%","$[]","$==","$<<","$>","$flush","$private","$*","$-"]),a.$require("erb"),function(a){var o,c=o=i(a,"RSpec"),u=(c.$$proto,c.$$scope);!function(a){var o,c=o=i(a,"Core"),u=(c.$$proto,c.$$scope);!function(a){var o,c=o=i(a,"Formatters"),u=(c.$$proto,c.$$scope);!function(a,$super){function o(){}var i=o=s(a,$super,"HtmlPrinter",o),c=i.$$proto,u=i.$$scope;return c.output=$,i.$include(u.get("ERB").$$scope.get("Util")),e.defn(i,"$initialize",function(e){var t=this;return t.output=e}),e.defn(i,"$print_html_start",function(){var e=this;return e.output.$puts(u.get("HTML_HEADER")),e.output.$puts(u.get("REPORT_HEADER"))}),e.defn(i,"$print_example_group_end",function(){var e=this;return e.output.$puts("  </dl>"),e.output.$puts("</div>")}),e.defn(i,"$print_example_group_start",function(e,t,n){var r=this;return r.output.$puts('<div id="div_group_'+e+'" class="example_group passed">'),r.output.$puts("  <dl "+r.$indentation_style(n)+">"),r.output.$puts('  <dt id="example_group_'+e+'" class="passed">'+r.$h(t)+"</dt>")}),e.defn(i,"$print_example_passed",function(e,t){var n=this,r=$;return r="%.5f"["$%"](t),n.output.$puts('    <dd class="example passed"><span class="passed_spec_name">'+n.$h(e)+"</span><span class='duration'>"+r+"s</span></dd>")}),e.defn(i,"$print_example_failed",function(e,t,n,r,a,o,i){var s=this,c=$;return null==i&&(i=!1),c="%.5f"["$%"](n),s.output.$puts('    <dd class="example '+function(){return e!==!1&&e!==$?"pending_fixed":"failed"}()+'">'),s.output.$puts('      <span class="failed_spec_name">'+s.$h(t)+"</span>"),s.output.$puts('      <span class="duration">'+c+"s</span>"),s.output.$puts('      <div class="failure" id="failure_'+r+'">'),a!==!1&&a!==$&&(s.output.$puts('        <div class="message"><pre>'+s.$h(a["$[]"]("message"))+"</pre></div>"),i!==!1&&i!==$?s.output.$puts('        <div class="backtrace"><pre>'+s.$h(a["$[]"]("backtrace"))+"</pre></div>"):s.output.$puts('        <div class="backtrace"><pre>'+a["$[]"]("backtrace")+"</pre></div>")),o!==!1&&o!==$&&s.output.$puts(o),s.output.$puts("      </div>"),s.output.$puts("    </dd>")}),e.defn(i,"$print_example_pending",function(e,t){var n=this;return n.output.$puts('    <dd class="example not_implemented"><span class="not_implemented_spec_name">'+n.$h(e)+" (PENDING: "+n.$h(t)+")</span></dd>")}),e.defn(i,"$print_summary",function(e,n,r,a){var o=this,i=$,s=$;return i=""+n+" example"+function(){return n["$=="](1)?$:"s"}()+", ",i["$<<"](""+r+" failure"+function(){return r["$=="](1)?$:"s"}()),t(a,0)&&i["$<<"](", "+a+" pending"),s="%.5f"["$%"](e),o.output.$puts('<script type="text/javascript">document.getElementById(\'duration\').innerHTML = "Finished in <strong>'+s+' seconds</strong>";</script>'),o.output.$puts('<script type="text/javascript">document.getElementById(\'totals\').innerHTML = "'+i+'";</script>'),o.output.$puts("</div>"),o.output.$puts("</div>"),o.output.$puts("</body>"),o.output.$puts("</html>")}),e.defn(i,"$flush",function(){var e=this;return e.output.$flush()}),e.defn(i,"$move_progress",function(e){var t=this;return t.output.$puts('    <script type="text/javascript">moveProgressBar(\''+e+"');</script>"),t.output.$flush()}),e.defn(i,"$make_header_red",function(){var e=this;return e.output.$puts("    <script type=\"text/javascript\">makeRed('rspec-header');</script>")}),e.defn(i,"$make_header_yellow",function(){var e=this;return e.output.$puts("    <script type=\"text/javascript\">makeYellow('rspec-header');</script>")}),e.defn(i,"$make_example_group_header_red",function(e){var t=this;return t.output.$puts('    <script type="text/javascript">makeRed(\'div_group_'+e+"');</script>"),t.output.$puts('    <script type="text/javascript">makeRed(\'example_group_'+e+"');</script>")}),e.defn(i,"$make_example_group_header_yellow",function(e){var t=this;return t.output.$puts('    <script type="text/javascript">makeYellow(\'div_group_'+e+"');</script>"),t.output.$puts('    <script type="text/javascript">makeYellow(\'example_group_'+e+"');</script>")}),i.$private(),e.defn(i,"$indentation_style",function(e){return'style="margin-left: '+n(r(e,1),15)+'px;"'}),e.cdecl(u,"REPORT_HEADER",'<div class="rspec-report">\n\n<div id="rspec-header">\n  <div id="label">\n    <h1>RSpec Code Examples</h1>\n  </div>\n\n  <div id="display-filters">\n    <input id="passed_checkbox"  name="passed_checkbox"  type="checkbox" checked="checked" onchange="apply_filters()" value="1" /> <label for="passed_checkbox">Passed</label>\n    <input id="failed_checkbox"  name="failed_checkbox"  type="checkbox" checked="checked" onchange="apply_filters()" value="2" /> <label for="failed_checkbox">Failed</label>\n    <input id="pending_checkbox" name="pending_checkbox" type="checkbox" checked="checked" onchange="apply_filters()" value="3" /> <label for="pending_checkbox">Pending</label>\n  </div>\n\n  <div id="summary">\n    <p id="totals">&#160;</p>\n    <p id="duration">&#160;</p>\n  </div>\n</div>\n\n\n<div class="results">\n'),e.cdecl(u,"GLOBAL_SCRIPTS","\nfunction addClass(element_id, classname) {\n  document.getElementById(element_id).className += (\" \" + classname);\n}\n\nfunction removeClass(element_id, classname) {\n  var elem = document.getElementById(element_id);\n  var classlist = elem.className.replace(classname,'');\n  elem.className = classlist;\n}\n\nfunction moveProgressBar(percentDone) {\n  document.getElementById(\"rspec-header\").style.width = percentDone +\"%\";\n}\n\nfunction makeRed(element_id) {\n  removeClass(element_id, 'passed');\n  removeClass(element_id, 'not_implemented');\n  addClass(element_id,'failed');\n}\n\nfunction makeYellow(element_id) {\n  var elem = document.getElementById(element_id);\n  if (elem.className.indexOf(\"failed\") == -1) {  // class doesn't includes failed\n    if (elem.className.indexOf(\"not_implemented\") == -1) { // class doesn't include not_implemented\n      removeClass(element_id, 'passed');\n      addClass(element_id,'not_implemented');\n    }\n  }\n}\n\nfunction apply_filters() {\n  var passed_filter = document.getElementById('passed_checkbox').checked;\n  var failed_filter = document.getElementById('failed_checkbox').checked;\n  var pending_filter = document.getElementById('pending_checkbox').checked;\n\n  assign_display_style(\"example passed\", passed_filter);\n  assign_display_style(\"example failed\", failed_filter);\n  assign_display_style(\"example not_implemented\", pending_filter);\n\n  assign_display_style_for_group(\"example_group passed\", passed_filter);\n  assign_display_style_for_group(\"example_group not_implemented\", pending_filter, pending_filter || passed_filter);\n  assign_display_style_for_group(\"example_group failed\", failed_filter, failed_filter || pending_filter || passed_filter);\n}\n\nfunction get_display_style(display_flag) {\n  var style_mode = 'none';\n  if (display_flag == true) {\n    style_mode = 'block';\n  }\n  return style_mode;\n}\n\nfunction assign_display_style(classname, display_flag) {\n  var style_mode = get_display_style(display_flag);\n  var elems = document.getElementsByClassName(classname)\n  for (var i=0; i<elems.length;i++) {\n    elems[i].style.display = style_mode;\n  }\n}\n\nfunction assign_display_style_for_group(classname, display_flag, subgroup_flag) {\n  var display_style_mode = get_display_style(display_flag);\n  var subgroup_style_mode = get_display_style(subgroup_flag);\n  var elems = document.getElementsByClassName(classname)\n  for (var i=0; i<elems.length;i++) {\n    var style_mode = display_style_mode;\n    if ((display_flag != subgroup_flag) && (elems[i].getElementsByTagName('dt')[0].innerHTML.indexOf(\", \") != -1)) {\n      elems[i].style.display = subgroup_style_mode;\n    } else {\n      elems[i].style.display = display_style_mode;\n    }\n  }\n}\n"),e.cdecl(u,"GLOBAL_STYLES",'#rspec-header {\n  background: #65C400; color: #fff; height: 4em;\n}\n\n.rspec-report h1 {\n  margin: 0px 10px 0px 10px;\n  padding: 10px;\n  font-family: "Lucida Grande", Helvetica, sans-serif;\n  font-size: 1.8em;\n  position: absolute;\n}\n\n#label {\n  float:left;\n}\n\n#display-filters {\n  float:left;\n  padding: 28px 0 0 40%;\n  font-family: "Lucida Grande", Helvetica, sans-serif;\n}\n\n#summary {\n  float:right;\n  padding: 5px 10px;\n  font-family: "Lucida Grande", Helvetica, sans-serif;\n  text-align: right;\n}\n\n#summary p {\n  margin: 0 0 0 2px;\n}\n\n#summary #totals {\n  font-size: 1.2em;\n}\n\n.example_group {\n  margin: 0 10px 5px;\n  background: #fff;\n}\n\ndl {\n  margin: 0; padding: 0 0 5px;\n  font: normal 11px "Lucida Grande", Helvetica, sans-serif;\n}\n\ndt {\n  padding: 3px;\n  background: #65C400;\n  color: #fff;\n  font-weight: bold;\n}\n\ndd {\n  margin: 5px 0 5px 5px;\n  padding: 3px 3px 3px 18px;\n}\n\ndd .duration {\n  padding-left: 5px;\n  text-align: right;\n  right: 0px;\n  float:right;\n}\n\ndd.example.passed {\n  border-left: 5px solid #65C400;\n  border-bottom: 1px solid #65C400;\n  background: #DBFFB4; color: #3D7700;\n}\n\ndd.example.not_implemented {\n  border-left: 5px solid #FAF834;\n  border-bottom: 1px solid #FAF834;\n  background: #FCFB98; color: #131313;\n}\n\ndd.example.pending_fixed {\n  border-left: 5px solid #0000C2;\n  border-bottom: 1px solid #0000C2;\n  color: #0000C2; background: #D3FBFF;\n}\n\ndd.example.failed {\n  border-left: 5px solid #C20000;\n  border-bottom: 1px solid #C20000;\n  color: #C20000; background: #FFFBD3;\n}\n\n\ndt.not_implemented {\n  color: #000000; background: #FAF834;\n}\n\ndt.pending_fixed {\n  color: #FFFFFF; background: #C40D0D;\n}\n\ndt.failed {\n  color: #FFFFFF; background: #C40D0D;\n}\n\n\n#rspec-header.not_implemented {\n  color: #000000; background: #FAF834;\n}\n\n#rspec-header.pending_fixed {\n  color: #FFFFFF; background: #C40D0D;\n}\n\n#rspec-header.failed {\n  color: #FFFFFF; background: #C40D0D;\n}\n\n\n.backtrace {\n  color: #000;\n  font-size: 12px;\n}\n\na {\n  color: #BE5C00;\n}\n\n/* Ruby code, style similar to vibrant ink */\n.ruby {\n  font-size: 12px;\n  font-family: monospace;\n  color: white;\n  background-color: black;\n  padding: 0.1em 0 0.2em 0;\n}\n\n.ruby .keyword { color: #FF6600; }\n.ruby .constant { color: #339999; }\n.ruby .attribute { color: white; }\n.ruby .global { color: white; }\n.ruby .module { color: white; }\n.ruby .class { color: white; }\n.ruby .string { color: #66FF00; }\n.ruby .ident { color: white; }\n.ruby .method { color: #FFCC00; }\n.ruby .number { color: white; }\n.ruby .char { color: white; }\n.ruby .comment { color: #9933CC; }\n.ruby .symbol { color: white; }\n.ruby .regex { color: #44B4CC; }\n.ruby .punct { color: white; }\n.ruby .escape { color: white; }\n.ruby .interp { color: white; }\n.ruby .expr { color: white; }\n\n.ruby .offending { background-color: gray; }\n.ruby .linenum {\n  width: 75px;\n  padding: 0.1em 1em 0.2em 0;\n  color: #000000;\n  background-color: #FFFBD3;\n}\n'),e.cdecl(u,"HTML_HEADER",'<!DOCTYPE html>\n<html lang=\'en\'>\n<head>\n  <title>RSpec results</title>\n  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />\n  <meta http-equiv="Expires" content="-1" />\n  <meta http-equiv="Pragma" content="no-cache" />\n  <style type="text/css">\n  body {\n    margin: 0;\n    padding: 0;\n    background: #fff;\n    font-size: 80%;\n  }\n  </style>\n  <script type="text/javascript">\n    // <![CDATA[\n'+u.get("GLOBAL_SCRIPTS")+'\n    // ]]>\n  </script>\n  <style type="text/css">\n'+u.get("GLOBAL_STYLES")+"\n  </style>\n</head>\n<body>\n");
}(u.base,null)}(u.base)}(u.base)}(o.base)},Opal.modules["rspec/core/hooks"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice),a=e.module,o=e.hash2,$=e.klass;return e.add_stubs(["$register","$to_proc","$hooks","$alias_method","$new","$private","$attr_reader","$all_apply?","$options","$instance_exec","$block","$instance_exec_with_rescue","$message","$reporter","$configuration","$class","$first","$backtrace","$executed?","$mark_skipped!","$hook_description","$method_defined?","$relative_path","$join","$source_location","$each","$define_method","$__send__","$public_instance_methods","$protected","$with","$select","$options_apply?","$run","$call","$inject","$wrap","$execute_with","$empty?","$shift","$[]","$process","$for","$flat_map","$parent_groups","$scope_and_options_from","$dry_run?","$find_hook","$[]=","$==","$any?","$include?","$<<","$extract_scope_from","$build_hash_from","$known_scope?","$normalized_scope_for","$is_a?","$keys","$raise","$===","$before_context_hooks_for","$after_context_hooks_for","$around_example_hooks_for","$before_example_hooks_for","$after_example_hooks_for","$reverse"]),function(t){var i,s=i=a(t,"RSpec"),c=(s.$$proto,s.$$scope);!function(t){var i,s=i=a(t,"Core"),c=(s.$$proto,s.$$scope);!function(t){var i,s,c,u,l,_,p=i=a(t,"Hooks"),d=(p.$$proto,p.$$scope);e.defn(p,"$before",s=function(){var t,r,a=this,o=s.$$p,$=o||n,i=n,c=arguments.length-0;0>c&&(c=0);var u=new Array(c);for(i=0;c>i;i++)u[i]=arguments[i+0];return s.$$p=null,(t=(r=a.$hooks()).$register,t.$$p=$.$to_proc(),t).apply(r,["append","before"].concat(e.to_a(u)))}),p.$alias_method("append_before","before"),e.defn(p,"$prepend_before",c=function(){var t,r,a=this,o=c.$$p,$=o||n,i=n,s=arguments.length-0;0>s&&(s=0);var u=new Array(s);for(i=0;s>i;i++)u[i]=arguments[i+0];return c.$$p=null,(t=(r=a.$hooks()).$register,t.$$p=$.$to_proc(),t).apply(r,["prepend","before"].concat(e.to_a(u)))}),e.defn(p,"$after",u=function(){var t,r,a=this,o=u.$$p,$=o||n,i=n,s=arguments.length-0;0>s&&(s=0);var c=new Array(s);for(i=0;s>i;i++)c[i]=arguments[i+0];return u.$$p=null,(t=(r=a.$hooks()).$register,t.$$p=$.$to_proc(),t).apply(r,["prepend","after"].concat(e.to_a(c)))}),p.$alias_method("prepend_after","after"),e.defn(p,"$append_after",l=function(){var t,r,a=this,o=l.$$p,$=o||n,i=n,s=arguments.length-0;0>s&&(s=0);var c=new Array(s);for(i=0;s>i;i++)c[i]=arguments[i+0];return l.$$p=null,(t=(r=a.$hooks()).$register,t.$$p=$.$to_proc(),t).apply(r,["append","after"].concat(e.to_a(c)))}),e.defn(p,"$around",_=function(){var t,r,a=this,o=_.$$p,$=o||n,i=n,s=arguments.length-0;0>s&&(s=0);var c=new Array(s);for(i=0;s>i;i++)c[i]=arguments[i+0];return _.$$p=null,(t=(r=a.$hooks()).$register,t.$$p=$.$to_proc(),t).apply(r,["prepend","around"].concat(e.to_a(c)))}),e.defn(p,"$hooks",function(){var e,t=this;return null==t.hooks&&(t.hooks=n),(e=t.hooks)!==!1&&e!==n?e:t.hooks=d.get("HookCollections").$new(t,o(["around","before","after"],{around:o(["example"],{example:d.get("AroundHookCollection").$new()}),before:o(["example","context","suite"],{example:d.get("HookCollection").$new(),context:d.get("HookCollection").$new(),suite:d.get("HookCollection").$new()}),after:o(["example","context","suite"],{example:d.get("HookCollection").$new(),context:d.get("HookCollection").$new(),suite:d.get("HookCollection").$new()})}))}),p.$private(),function(t,$super){function r(){}var a=r=$(t,$super,"Hook",r);a.$$proto,a.$$scope;return a.$attr_reader("block","options"),e.defn(a,"$initialize",function(e,t){var n=this;return n.block=e,n.options=t}),e.defn(a,"$options_apply?",function(e){var t=this;return e["$all_apply?"](t.$options())}),n&&"options_apply?"}(d.base,null),function(t,$super){function r(){}var a=r=$(t,$super,"BeforeHook",r);a.$$proto,a.$$scope;return e.defn(a,"$run",function(e){var t,n,r=this;return(t=(n=e).$instance_exec,t.$$p=r.$block().$to_proc(),t).call(n,e)}),n&&"run"}(d.base,d.get("Hook")),function(t,$super){function r(){}var a=r=$(t,$super,"AfterHook",r);a.$$proto,a.$$scope;return e.defn(a,"$run",function(e){var t,n,r=this;return(t=(n=e).$instance_exec_with_rescue,t.$$p=r.$block().$to_proc(),t).call(n,"in an after hook")}),n&&"run"}(d.base,d.get("Hook")),function(t,$super){function r(){}var a=r=$(t,$super,"AfterContextHook",r),o=(a.$$proto,a.$$scope);return e.defn(a,"$run",function(t){var r,a,$=this,i=n;try{return(r=(a=t).$instance_exec,r.$$p=$.$block().$to_proc(),r).call(a,t)}catch(s){if(!e.rescue(s,[o.get("Exception")]))throw s;i=s;try{return o.get("RSpec").$configuration().$reporter().$message("\nAn error occurred in an `after(:context)` hook.\n  "+i.$class()+": "+i.$message()+"\n  occurred at "+i.$backtrace().$first()+"\n\n")}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}),n&&"run"}(d.base,d.get("Hook")),function(t,$super){function r(){}var a,o=r=$(t,$super,"AroundHook",r),i=(o.$$proto,o.$$scope);return e.defn(o,"$execute_with",function(e,t){var r,a,o=this;return(r=(a=e).$instance_exec,r.$$p=o.$block().$to_proc(),r).call(a,t),(r=t["$executed?"]())===n||r.$$is_boolean&&1!=r?i.get("Pending")["$mark_skipped!"](e,""+o.$hook_description()+" did not execute the example"):n}),(a=i.get("Proc")["$method_defined?"]("source_location"))===n||a.$$is_boolean&&1!=a?(e.defn(o,"$hook_description",function(){return"around hook"}),n&&"hook_description"):(e.defn(o,"$hook_description",function(){var e=this;return"around hook at "+i.get("Metadata").$relative_path(e.$block().$source_location().$join(":"))}),n&&"hook_description")}(d.base,d.get("Hook")),function(t,$super){function a(){}var o,i,s,c=a=$(t,$super,"BaseHookCollection",a),u=(c.$$proto,c.$$scope);return(o=(i=u.get("Array").$public_instance_methods(!1)).$each,o.$$p=(s=function(t){var a,o,$,i=s.$$s||this;return null==t&&(t=n),(a=(o=i).$define_method,a.$$p=($=function(a){var o,i,s,c=$.$$s||this;return a=r.call(arguments,0),o=$.$$p||n,$.$$p=null,(i=(s=c.$hooks()).$__send__,i.$$p=o.$to_proc(),i).apply(s,[t].concat(e.to_a(a)))},$.$$s=i,$),a).call(o,t)},s.$$s=c,s),o).call(i),c.$attr_reader("hooks"),c.$protected("hooks"),e.alias(c,"append","push"),e.alias(c,"prepend","unshift"),e.defn(c,"$initialize",function(e){var t=this;return null==e&&(e=[]),t.hooks=e}),n&&"initialize"}(d.base,null),function(t,$super){function r(){}var a=r=$(t,$super,"HookCollection",r);a.$$proto,a.$$scope;return e.defn(a,"$for",function(e){var t,r,a,o=this;return o.$class().$new((t=(r=o.$hooks()).$select,t.$$p=(a=function(t){a.$$s||this;return null==t&&(t=n),t["$options_apply?"](e)},a.$$s=o,a),t).call(r)).$with(e)}),e.defn(a,"$with",function(e){var t=this;return t.example=e,t}),e.defn(a,"$run",function(){var e,t,r,a=this;return(e=(t=a.$hooks()).$each,e.$$p=(r=function(e){var t=r.$$s||this;return null==t.example&&(t.example=n),null==e&&(e=n),e.$run(t.example)},r.$$s=a,r),e).call(t)}),n&&"run"}(d.base,d.get("BaseHookCollection")),function(t,$super){function r(){}var a=r=$(t,$super,"AroundHookCollection",r),o=a.$$proto;a.$$scope;return o.initial_procsy=n,e.defn(a,"$for",function(e,t){var r,a,o,$=this;return null==t&&(t=n),$.$class().$new((r=(a=$.$hooks()).$select,r.$$p=(o=function(t){o.$$s||this;return null==t&&(t=n),t["$options_apply?"](e)},o.$$s=$,o),r).call(a)).$with(e,t)}),e.defn(a,"$with",function(e,t){var n=this;return n.example=e,n.initial_procsy=t,n}),e.defn(a,"$run",function(){var e,t,r,a=this;return(e=(t=a.$hooks()).$inject,e.$$p=(r=function(e,t){var a,o,$,i=r.$$s||this;return null==e&&(e=n),null==t&&(t=n),(a=(o=e).$wrap,a.$$p=($=function(){var r=$.$$s||this;return null==r.example&&(r.example=n),t.$execute_with(r.example,e)},$.$$s=i,$),a).call(o)},r.$$s=a,r),e).call(t,a.initial_procsy).$call()}),n&&"run"}(d.base,d.get("BaseHookCollection")),function(t,$super){function r(){}var a=r=$(t,$super,"GroupHookCollection",r),o=a.$$proto;a.$$scope;return o.group=n,e.defn(a,"$for",function(e){var t=this;return t.group=e,t}),e.defn(a,"$run",function(){var e,t=this;return function(){for(;(e=t.$hooks()["$empty?"]())===n||e.$$is_boolean&&1!=e;)t.$hooks().$shift().$run(t.group);return n}()}),n&&"run"}(d.base,d.get("BaseHookCollection")),function(t,$super){function r(){}var a,i,s,c,u,l,_,p,d=r=$(t,$super,"HookCollections",r),f=d.$$proto,g=d.$$scope;return f.data=f.owner=n,e.defn(d,"$initialize",function(e,t){var n=this;return n.owner=e,n.data=t}),e.defn(d,"$[]",function(e){var t=this;return t.data["$[]"](e)}),e.defn(d,"$register_globals",function(e,t){var n=this;return n.$process(e,t,"before","example"),n.$process(e,t,"after","example"),n.$process(e,t,"around","example"),n.$process(e,t,"before","context"),n.$process(e,t,"after","context")}),e.defn(d,"$around_example_hooks_for",function(e,t){var r,a,o,$=this;return null==t&&(t=n),g.get("AroundHookCollection").$new((r=(a=g.get("FlatMap")).$flat_map,r.$$p=(o=function(e){o.$$s||this;return null==e&&(e=n),e.$hooks()["$[]"]("around")["$[]"]("example")},o.$$s=$,o),r).call(a,$.owner.$parent_groups())).$for(e,t)}),e.defn(d,"$register",a=function(t,r){var o,$,i,s=this,c=a.$$p,u=c||n,l=n,_=n,p=n,d=arguments.length-2;0>d&&(d=0);var f=new Array(d);for(p=0;d>p;p++)f[p]=arguments[p+2];return a.$$p=null,$=(i=s).$scope_and_options_from.apply(i,e.to_a(f)),o=e.to_ary($),l=null==o[0]?n:o[0],_=null==o[1]?n:o[1],$,s["$[]"](r)["$[]"](l).$__send__(t,g.get("HOOK_TYPES")["$[]"](r)["$[]"](l).$new(u,_))}),e.defn(d,"$run",function(e,t,r,a){var o,$=this;return null==a&&(a=n),(o=g.get("RSpec").$configuration()["$dry_run?"]())===n||o.$$is_boolean&&1!=o?$.$find_hook(e,t,r,a).$run():n}),e.cdecl(g,"SCOPES",["example","context","suite"]),e.cdecl(g,"SCOPE_ALIASES",o(["each","all"],{each:"example",all:"context"})),e.cdecl(g,"HOOK_TYPES",o(["before","after","around"],{before:(i=(s=g.get("Hash")).$new,i.$$p=(c=function(){c.$$s||this;return g.get("BeforeHook")},c.$$s=d,c),i).call(s),after:(i=(u=g.get("Hash")).$new,i.$$p=(l=function(){l.$$s||this;return g.get("AfterHook")},l.$$s=d,l),i).call(u),around:(i=(_=g.get("Hash")).$new,i.$$p=(p=function(){p.$$s||this;return g.get("AroundHook")},p.$$s=d,p),i).call(_)})),g.get("HOOK_TYPES")["$[]"]("after")["$[]="]("context",g.get("AfterContextHook")),d.$private(),e.defn(d,"$process",function(e,t,r,a){var o,$,i,s=this;return(o=($=t["$[]"](r)["$[]"](a)).$each,o.$$p=(i=function(t){var o,$,s,c,u=i.$$s||this;return null==t&&(t=n),(o=($=a["$=="]("example"))!==!1&&$!==n?$:t["$options_apply?"](e))===n||o.$$is_boolean&&1!=o?n:(o=($=(s=e.$parent_groups())["$any?"],$.$$p=(c=function(e){c.$$s||this;return null==e&&(e=n),e.$hooks()["$[]"](r)["$[]"](a)["$include?"](t)},c.$$s=u,c),$).call(s))===n||o.$$is_boolean&&1!=o?u["$[]"](r)["$[]"](a)["$<<"](t):n},i.$$s=s,i),o).call($)}),e.defn(d,"$scope_and_options_from",function(){var e=this,t=n,r=n,a=n,o=arguments.length-0;0>o&&(o=0);var $=new Array(o);for(a=0;o>a;a++)$[a]=arguments[a+0];return t=e.$extract_scope_from($),r=g.get("Metadata").$build_hash_from($,"warn_about_example_group_filtering"),[t,r]}),e.defn(d,"$extract_scope_from",function(e){var t,r,a,o,$=this,i=n;return(t=$["$known_scope?"](e.$first()))===n||t.$$is_boolean&&1!=t?(t=(r=(a=e)["$any?"],r.$$p=(o=function(e){o.$$s||this;return null==e&&(e=n),e["$is_a?"](g.get("Symbol"))},o.$$s=$,o),r).call(a))===n||t.$$is_boolean&&1!=t?"example":(i="You must explicitly give a scope ("+g.get("SCOPES").$join(", ")+") or scope alias ("+g.get("SCOPE_ALIASES").$keys().$join(", ")+") when using symbols as metadata for a hook.",$.$raise(g.get("ArgumentError").$new(i))):$.$normalized_scope_for(e.$shift())}),e.defn(d,"$known_scope?",function(e){var t;return(t=g.get("SCOPES")["$include?"](e))!==!1&&t!==n?t:g.get("SCOPE_ALIASES").$keys()["$include?"](e)}),e.defn(d,"$normalized_scope_for",function(e){var t;return(t=g.get("SCOPE_ALIASES")["$[]"](e))!==!1&&t!==n?t:e}),e.defn(d,"$find_hook",function(e,t,r,a){var o=this,$=n;return function(){return $=[e,t],["before","context"]["$==="]($)?o.$before_context_hooks_for(r):["after","context"]["$==="]($)?o.$after_context_hooks_for(r):["around","example"]["$==="]($)?o.$around_example_hooks_for(r,a):["before","example"]["$==="]($)?o.$before_example_hooks_for(r):["after","example"]["$==="]($)?o.$after_example_hooks_for(r):["before","suite"]["$==="]($)||["after","suite"]["$==="]($)?o["$[]"](e)["$[]"]("suite").$with(r):n}()}),e.defn(d,"$before_context_hooks_for",function(e){var t=this;return g.get("GroupHookCollection").$new(t["$[]"]("before")["$[]"]("context")).$for(e)}),e.defn(d,"$after_context_hooks_for",function(e){var t=this;return g.get("GroupHookCollection").$new(t["$[]"]("after")["$[]"]("context")).$for(e)}),e.defn(d,"$before_example_hooks_for",function(e){var t,r,a,o=this;return g.get("HookCollection").$new((t=(r=g.get("FlatMap")).$flat_map,t.$$p=(a=function(e){a.$$s||this;return null==e&&(e=n),e.$hooks()["$[]"]("before")["$[]"]("example")},a.$$s=o,a),t).call(r,o.owner.$parent_groups().$reverse())).$for(e)}),e.defn(d,"$after_example_hooks_for",function(e){var t,r,a,o=this;return g.get("HookCollection").$new((t=(r=g.get("FlatMap")).$flat_map,t.$$p=(a=function(e){a.$$s||this;return null==e&&(e=n),e.$hooks()["$[]"]("after")["$[]"]("example")},a.$$s=o,a),t).call(r,o.owner.$parent_groups())).$for(e)}),n&&"after_example_hooks_for"}(d.base,null)}(c.base)}(c.base)}(t.base)},Opal.modules["rspec/core/memoized_helpers"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=e.breaker,a=(e.slice,e.module),o=e.hash2,$=e.klass;return e.add_stubs(["$fetch","$[]=","$__memoized","$described_class","$first","$metadata","$class","$===","$new","$handle_matcher","$subject","$expect","$private","$instance_exec","$==","$raise","$article","$hook_expression","$first_non_rspec_line","$hook_intention","$nil?","$__send__","$to_proc","$module_for","$arity","$define_method","$current_example","$let","$before","$alias_method","$get_constant_or_yield","$include","$const_set","$method","$const_defined?","$const_get"]),function(t){var i,s=i=a(t,"RSpec"),c=(s.$$proto,s.$$scope);!function(t){var i,s=i=a(t,"Core"),c=(s.$$proto,s.$$scope);!function(t){var i,s,c,u=i=a(t,"MemoizedHelpers"),l=(u.$$proto,u.$$scope);e.defn(u,"$subject",function(){var e,t,r,a=this;return(e=(t=a.$__memoized()).$fetch,e.$$p=(r=function(){var e,t=r.$$s||this,a=n;return t.$__memoized()["$[]="]("subject",function(){return a=(e=t.$described_class())!==!1&&e!==n?e:t.$class().$metadata().$fetch("description_args").$first(),(e=l.get("Class")["$==="](a))===n||e.$$is_boolean&&1!=e?a:a.$new()}())},r.$$s=a,r),e).call(t,"subject")}),e.defn(u,"$should",function(e,t){var r=this;return null==e&&(e=n),null==t&&(t=n),l.get("RSpec").$$scope.get("Expectations").$$scope.get("PositiveExpectationHandler").$handle_matcher(r.$subject(),e,t)}),e.defn(u,"$should_not",function(e,t){var r=this;return null==e&&(e=n),null==t&&(t=n),l.get("RSpec").$$scope.get("Expectations").$$scope.get("NegativeExpectationHandler").$handle_matcher(r.$subject(),e,t)}),e.defn(u,"$is_expected",function(){var e=this;return e.$expect(e.$subject())}),u.$private(),e.defn(u,"$__memoized",function(){var e,t=this;return null==t.__memoized&&(t.__memoized=n),(e=t.__memoized)!==!1&&e!==n?e:t.__memoized=o([],{})}),function(t,$super){function a(){}var o,i,s=a=$(t,$super,"ContextHookMemoizedHash",a),c=(s.$$proto,s.$$scope);return e.defs(s,"$isolate_for_context_hook",o=function(t){var a,$,i,s=this,c=o.$$p,u=c||n,l=n;return o.$$p=null,l=s,(a=($=t).$instance_exec,a.$$p=(i=function(){var t,a=i.$$s||this;a.__memoized=l;try{return t=e.yieldX(u,[]),t===r?t:t}finally{a.__memoized=n}},i.$$s=s,i),a).call($)}),e.defs(s,"$fetch",i=function(e){var t=this,r=(i.$$p,n);return i.$$p=null,r=function(){return e["$=="]("subject")?"subject":"let declaration `"+e+"`"}(),t.$raise(""+r+" accessed in "+t.$article()+" "+t.$hook_expression()+" hook at:\n  "+c.get("CallerFilter").$first_non_rspec_line()+"\n\n`let` and `subject` declarations are not intended to be called\nin "+t.$article()+" "+t.$hook_expression()+" hook, as they exist to define state that\nis reset between each example, while "+t.$hook_expression()+" exists to\n"+t.$hook_intention()+".\n")}),function(t,$super){function r(){}var a=r=$(t,$super,"Before",r);a.$$proto,a.$$scope;return e.defs(a,"$hook_expression",function(){return"`before(:context)`"}),e.defs(a,"$article",function(){return"a"}),e.defs(a,"$hook_intention",function(){return"define state that is shared across examples in an example group"}),n&&"hook_intention"}(c.base,s),function(t,$super){function r(){}var a=r=$(t,$super,"After",r);a.$$proto,a.$$scope;return e.defs(a,"$hook_expression",function(){return"`after(:context)`"}),e.defs(a,"$article",function(){return"an"}),e.defs(a,"$hook_intention",function(){return"cleanup state that is shared across examples in an example group"}),n&&"hook_intention"}(c.base,s)}(l.base,null),function(t){var r,o,$,i,s,c=r=a(t,"ClassMethods"),u=(c.$$proto,c.$$scope);e.defn(c,"$let",o=function(t){var r,a,$,i,s,c,l=this,_=o.$$p,p=_||n;return o.$$p=null,(r=p["$nil?"]())===n||r.$$is_boolean&&1!=r||l.$raise("#let or #subject called without a block"),(r=(a=u.get("MemoizedHelpers").$module_for(l)).$__send__,r.$$p=p.$to_proc(),r).call(a,"define_method",t),p.$arity()["$=="](1)?(r=($=l).$define_method,r.$$p=(i=function(){var r,a,$,s=i.$$s||this;return(r=(a=s.$__memoized()).$fetch,r.$$p=($=function(t){var r=$.$$s||this;return null==t&&(t=n),r.$__memoized()["$[]="](t,e.find_iter_super_dispatcher(r,"let",$.$$def||i.$$def||o,null).apply(r,[u.get("RSpec").$current_example(),n.$to_proc()]))},$.$$s=s,$),r).call(a,t)},i.$$s=l,i),r).call($,t):(r=(s=l).$define_method,r.$$p=(c=function(){var r,a,$,i=c.$$s||this;return(r=(a=i.$__memoized()).$fetch,r.$$p=($=function(t){var r=$.$$s||this;return null==t&&(t=n),r.$__memoized()["$[]="](t,e.find_iter_super_dispatcher(r,"let",$.$$def||c.$$def||o,null).apply(r,[n.$to_proc()]))},$.$$s=i,$),r).call(a,t)},c.$$s=l,c),r).call(s,t)}),e.defn(c,"$let!",$=function(e){var t,r,a,o,i=this,s=$.$$p,c=s||n;return $.$$p=null,(t=(r=i).$let,t.$$p=c.$to_proc(),t).call(r,e),(t=(a=i).$before,t.$$p=(o=function(){var t=o.$$s||this;return t.$__send__(e)},o.$$s=i,o),t).call(a)}),e.defn(c,"$subject",i=function(e){var t,r,a,o,$,s=this,c=i.$$p,l=c||n;return null==e&&(e=n),i.$$p=null,e!==!1&&e!==n?((t=(r=s).$let,t.$$p=l.$to_proc(),t).call(r,e),s.$alias_method("subject",e),(t=(a=s.$$scope.get("NamedSubjectPreventSuper")).$__send__,t.$$p=(o=function(){var e=o.$$s||this;return e.$raise(u.get("NotImplementedError"),"`super` in named subjects is not supported")},o.$$s=s,o),t).call(a,"define_method",e)):(t=($=s).$let,t.$$p=l.$to_proc(),t).call($,"subject")}),e.defn(c,"$subject!",s=function(e){var t,r,a,o,$=this,i=s.$$p,c=i||n;return null==e&&(e=n),s.$$p=null,(t=(r=$).$subject,t.$$p=c.$to_proc(),t).call(r,e),(t=(a=$).$before,t.$$p=(o=function(){var e=o.$$s||this;return e.$subject()},o.$$s=$,o),t).call(a)})}(l.base),e.defs(u,"$module_for",function(e){var t,r,a,o=this;return(t=(r=o).$get_constant_or_yield,t.$$p=(a=function(){var t,r,o,$=a.$$s||this,i=n;return i=(t=(r=l.get("Module")).$new,t.$$p=(o=function(){var t,n,r,a=o.$$s||this;return a.$include((t=(n=l.get("Module")).$new,t.$$p=(r=function(){var t=r.$$s||this;return e.$const_set("NamedSubjectPreventSuper",t)},r.$$s=a,r),t).call(n))},o.$$s=$,o),t).call(r),e.$const_set("LetDefinitions",i),i},a.$$s=o,a),t).call(r,e,"LetDefinitions")}),e.defs(u,"$define_helpers_on",function(e){var t=this;return e.$__send__("include",t.$module_for(e))}),l.get("Module").$method("const_defined?").$arity()["$=="](1)?e.defs(u,"$get_constant_or_yield",s=function(t,a){var o,$=s.$$p,i=$||n;return s.$$p=null,(o=t["$const_defined?"](a))===n||o.$$is_boolean&&1!=o?(o=e.yieldX(i,[]),o===r?o:o):t.$const_get(a)}):e.defs(u,"$get_constant_or_yield",c=function(t,a){var o,$=c.$$p,i=$||n,s=n;return c.$$p=null,(o=t["$const_defined?"](a,s=!1))===n||o.$$is_boolean&&1!=o?(o=e.yieldX(i,[]),o===r?o:o):t.$const_get(a,s)})}(c.base)}(c.base)}(t.base)},Opal.modules["rspec/core/metadata"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.dynamic_require_severity="ignore";var a=(e.top,e),o=e.nil,$=(e.breaker,e.slice),i=e.module,s=e.hash2,c=e.klass;return e.add_stubs(["$expand_path","$sub","$==","$is_a?","$last","$pop","$[]=","$key?","$deprecate","$respond_to?","$caller","$join","$source_location","$attr_reader","$ensure_valid_user_keys","$metadata","$new","$block","$description_args","$build_description_from","$[]","$full_description","$described_class","$populate_location_attributes","$update","$user_metadata","$apply_derived_metadata_to","$configuration","$private","$delete","$file_path_and_line_number_from","$relative_path","$to_i","$find","$!~","$first","$captures","$match","$=~","$to_s","$description_separator","$+","$each","$raise","$gsub","$*","$first_non_rspec_line","$dup","$to_proc","$backwards_compatibility_default_proc","$compact","$populate","$hash_with_backwards_compatibility_default_proc","$===","$thread_local_metadata","$call","$extend","$extra_hash_attributes","$__send__","$hash_attribute_names","$class","$include?","$to_sym","$define_method","$issue_deprecation","$hash_for_delegation","$instance_variable_defined?","$tap","$directly_supports_attribute?","$set_value","$-","$public_instance_methods","$get_value","$to_h","$concat","$include","$fetch","$merge","$!="]),function(a){var u,l=u=i(a,"RSpec"),_=(l.$$proto,l.$$scope);!function(a){var u,l=u=i(a,"Core"),_=(l.$$proto,l.$$scope);!function(r){var a,$=a=i(r,"Metadata"),u=($.$$proto,$.$$scope);e.defs($,"$relative_path",function(t){var n=o;try{return n=new RegExp("(\\A|\\s)"+u.get("File").$expand_path(".")+"("+u.get("File").$$scope.get("SEPARATOR")+"|\\s|\\Z)"),t=t.$sub(n,"\\1.\\2"),t=t.$sub(/\A([^:]+:\d+)$/,"\\1"),t["$=="]("-e:1")?o:t}catch(r){if(!e.rescue(r,[u.get("SecurityError")]))throw r;try{return o}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}),e.defs($,"$build_hash_from",function(e,t){var n,r,a=o;for(null==t&&(t=!1),a=function(){return(n=e.$last()["$is_a?"](u.get("Hash")))===o||n.$$is_boolean&&1!=n?s([],{}):e.$pop()}();(r=e.$last()["$is_a?"](u.get("Symbol")))!==o&&(!r.$$is_boolean||1==r);)a["$[]="](e.$pop(),!0);return(n=(r=t!==!1&&t!==o)?a["$key?"]("example_group"):t)===o||n.$$is_boolean&&1!=n||u.get("RSpec").$deprecate("Filtering by an `:example_group` subhash",s(["replacement"],{replacement:"the subhash to filter directly"})),a}),e.defs($,"$backtrace_from",function(e){var t,n=this;return(t=e["$respond_to?"]("source_location"))===o||t.$$is_boolean&&1!=t?n.$caller():[e.$source_location().$join(":")]}),function(r,$super){function a(){}var $=a=c(r,$super,"HashPopulator",a),i=($.$$proto,$.$$scope);return $.$attr_reader("metadata","user_metadata","description_args","block"),e.defn($,"$initialize",function(e,t,n,r){var a=this;return a.metadata=e,a.user_metadata=t,a.description_args=n,a.block=r}),e.defn($,"$populate",function(){var t,n=this;return n.$ensure_valid_user_keys(),n.$metadata()["$[]="]("execution_result",i.get("Example").$$scope.get("ExecutionResult").$new()),n.$metadata()["$[]="]("block",n.$block()),n.$metadata()["$[]="]("description_args",n.$description_args()),n.$metadata()["$[]="]("description",(t=n).$build_description_from.apply(t,e.to_a(n.$metadata()["$[]"]("description_args")))),n.$metadata()["$[]="]("full_description",n.$full_description()),n.$metadata()["$[]="]("described_class",n.$described_class()),n.$populate_location_attributes(),n.$metadata().$update(n.$user_metadata()),i.get("RSpec").$configuration().$apply_derived_metadata_to(n.$metadata())}),$.$private(),e.defn($,"$populate_location_attributes",function(){var t,n,r,a=this,$=o,s=o,c=o;return $=a.$user_metadata().$delete("caller"),n=function(){return $!==!1&&$!==o?a.$file_path_and_line_number_from($):(r=a.$block()["$respond_to?"]("source_location"))===o||r.$$is_boolean&&1!=r?a.$file_path_and_line_number_from(a.$caller()):a.$block().$source_location()}(),t=e.to_ary(n),s=null==t[0]?o:t[0],c=null==t[1]?o:t[1],n,s=i.get("Metadata").$relative_path(s),a.$metadata()["$[]="]("file_path",s),a.$metadata()["$[]="]("line_number",c.$to_i()),a.$metadata()["$[]="]("location",""+s+":"+c)}),e.defn($,"$file_path_and_line_number_from",function(e){var t,n,r,a=this,$=o;return $=(t=(n=e).$find,t.$$p=(r=function(e){r.$$s||this;return null==e&&(e=o),e["$!~"](i.get("CallerFilter").$$scope.get("LIB_REGEX"))},r.$$s=a,r),t).call(n),(t=$)!==!1&&t!==o?t:$=e.$first(),/(.+?):(\d+)(?:|:\d+)/.$match($).$captures()}),e.defn($,"$description_separator",function(e,t){var n,r;return r=e["$is_a?"](i.get("Module")),(n=r!==!1&&r!==o?t["$=~"](/^(#|::|\.)/):r)===o||n.$$is_boolean&&1!=n?" ":""}),e.defn($,"$build_description_from",function(e,n){var r=this,a=o;return null==e&&(e=o),null==n&&(n=o),n===!1||n===o?e.$to_s():(a=r.$description_separator(e,n),t(t(e.$to_s(),a),n.$to_s()))}),e.defn($,"$ensure_valid_user_keys",function(){var e,t,r,a=this;return(e=(t=i.get("RESERVED_KEYS")).$each,e.$$p=(r=function(e){var t,a=r.$$s||this;return null==e&&(e=o),(t=a.$user_metadata()["$key?"](e))===o||t.$$is_boolean&&1!=t?o:a.$raise(("              |"+n("*",50)+"\n              |:"+e+" is not allowed\n              |\n              |RSpec reserves some hash keys for its own internal use,\n              |including :"+e+", which is used on:\n              |\n              |  "+i.get("CallerFilter").$first_non_rspec_line()+".\n              |\n              |Here are all of RSpec's reserved hash keys:\n              |\n              |  "+i.get("RESERVED_KEYS").$join("\n  ")+"\n              |"+n("*",50)+"\n").$gsub(/^\s+\|/,""))},r.$$s=a,r),e).call(t)}),o&&"ensure_valid_user_keys"}(u.base,null),function(t,$super){function n(){}var r=n=c(t,$super,"ExampleHash",n),a=(r.$$proto,r.$$scope);return e.defs(r,"$create",function(e,t,n,r){var $,i,s,c,u,l=this,_=o,p=o;return _=e.$dup(),e=($=(i=a.get("Hash")).$new,$.$$p=(s=(c=a.get("ExampleGroupHash")).$backwards_compatibility_default_proc,s.$$p=(u=function(e){u.$$s||this;return null==e&&(e=o),e["$[]"]("parent_example_group")},u.$$s=l,u),s).call(c).$to_proc(),$).call(i),e.$update(_),_["$[]="]("example_group",e),_.$delete("parent_example_group"),p=l.$new(_,t,[n].$compact(),r),p.$populate(),p.$metadata()}),r.$private(),e.defn(r,"$described_class",function(){var e=this;return e.$metadata()["$[]"]("example_group")["$[]"]("described_class")}),e.defn(r,"$full_description",function(){var e=this;return e.$build_description_from(e.$metadata()["$[]"]("example_group")["$[]"]("full_description"),e.$metadata()["$[]"]("description"))}),o&&"full_description"}(u.base,u.get("HashPopulator")),function(n,$super){function r(){}var a,$,i=r=c(n,$super,"ExampleGroupHash",r),u=(i.$$proto,i.$$scope);return e.defs(i,"$create",a=function(e,t){var n=this,r=a.$$p,$=r||o,i=o,s=o,c=o,u=arguments.length-2;0>u&&(u=0);var l=new Array(u);for(c=0;u>c;c++)l[c]=arguments[c+2];return a.$$p=null,i=n.$hash_with_backwards_compatibility_default_proc(),e!==!1&&e!==o&&(i.$update(e),i["$[]="]("parent_example_group",e)),s=n.$new(i,t,l,$),s.$populate(),s.$metadata()}),e.defs(i,"$hash_with_backwards_compatibility_default_proc",function(){var e,t,n,r,a,$=this;return(e=(t=u.get("Hash")).$new,e.$$p=(n=(r=$).$backwards_compatibility_default_proc,n.$$p=(a=function(e){a.$$s||this;return null==e&&(e=o),e},a.$$s=$,a),n).call(r).$to_proc(),e).call(t)}),e.defs(i,"$backwards_compatibility_default_proc",$=function(){var e,t,n,r=this,a=$.$$p,i=a||o;return $.$$p=null,(e=(t=u.get("Proc")).$new,e.$$p=(n=function(e,t){var r,a=(n.$$s||this,o),$=o;return null==e&&(e=o),null==t&&(t=o),function(){return a=t,"example_group"["$==="](a)?(((r=u.get("RSpec").$thread_local_metadata()["$[]"]("silence_metadata_example_group_deprecations"))===o||r.$$is_boolean&&1!=r)&&u.get("RSpec").$deprecate("The `:example_group` key in an example group's metadata hash",s(["replacement"],{replacement:"the example group's hash directly for the computed keys and `:parent_example_group` to access the parent example group metadata"})),$=i.$call(e),$!==!1&&$!==o?u.get("LegacyExampleGroupHash").$new($):o):"example_group_block"["$==="](a)?(u.get("RSpec").$deprecate("`metadata[:example_group_block]`",s(["replacement"],{replacement:"`metadata[:block]`"})),e["$[]"]("block")):"describes"["$==="](a)?(u.get("RSpec").$deprecate("`metadata[:describes]`",s(["replacement"],{replacement:"`metadata[:described_class]`"})),e["$[]"]("described_class")):o}()},n.$$s=r,n),e).call(t)}),i.$private(),e.defn(i,"$described_class",function(){var e,t,n=this,r=o,a=o;return r=n.$metadata()["$[]"]("description_args").$first(),(e=(t=u.get("NilClass")["$==="](r))!==!1&&t!==o?t:u.get("String")["$==="](r))===o||e.$$is_boolean&&1!=e?r:(a=n.$metadata()["$[]"]("parent_example_group"),(e=a!==!1&&a!==o)?a["$[]"]("described_class"):a)}),e.defn(i,"$full_description",function(){var e=this,n=o,r=o,a=o,$=o;return n=e.$metadata()["$[]"]("description"),r=e.$metadata()["$[]"]("parent_example_group"),r===!1||r===o?n:(a=r["$[]"]("full_description"),$=e.$description_separator(r["$[]"]("description_args").$last(),e.$metadata()["$[]"]("description_args").$first()),t(t(a,$),n))}),o&&"full_description"}(u.base,u.get("HashPopulator")),e.cdecl(u,"RESERVED_KEYS",["description","example_group","parent_example_group","execution_result","file_path","full_description","line_number","location","block"])}(_.base),function(t){var n,a,c,u,l=n=i(t,"HashImitatable"),_=(l.$$proto,l.$$scope);e.defs(l,"$included",function(e){return e.$extend(_.get("ClassMethods"))}),e.defn(l,"$to_h",function(){var e,t,n,r=this,a=o;return a=r.$extra_hash_attributes().$dup(),(e=(t=r.$class().$hash_attribute_names()).$each,e.$$p=(n=function(e){var t=n.$$s||this;return null==e&&(e=o),a["$[]="](e,t.$__send__(e))},n.$$s=r,n),e).call(t),a}),(a=(c=r(_.get("Hash").$public_instance_methods(),_.get("Object").$public_instance_methods())).$each,a.$$p=(u=function(t){var n,r,a,i=u.$$s||this;return null==t&&(t=o),(n=["[]","[]=","to_h"]["$include?"](t.$to_sym()))===o||n.$$is_boolean&&1!=n?(n=(r=i).$define_method,n.$$p=(a=function(n){var r,i,s,c,u,l,_,p,d,f=a.$$s||this,g=o;return n=$.call(arguments,0),r=a.$$p||o,a.$$p=null,(i=f).$issue_deprecation.apply(i,[t].concat(e.to_a(n))),g=f.$hash_for_delegation(),(s=(c=f.$class().$hash_attribute_names()).$each,s.$$p=(u=function(e){var t,n=u.$$s||this;return null==e&&(e=o),(t=n["$instance_variable_defined?"]("@"+e.$to_s()))===o||t.$$is_boolean&&1!=t?g.$delete(e):o},u.$$s=f,u),s).call(c),(s=(l=(p=(d=g).$__send__,p.$$p=r.$to_proc(),p).apply(d,[t].concat(e.to_a(n)))).$tap,s.$$p=(_=function(){var e,t,n,r=_.$$s||this;return(e=(t=g).$each,e.$$p=(n=function(e,t){var r,a=n.$$s||this;return null==e&&(e=o),null==t&&(t=o),(r=a["$directly_supports_attribute?"](e))===o||r.$$is_boolean&&1!=r?a.$extra_hash_attributes()["$[]="](e,t):a.$set_value(e,t)},n.$$s=r,n),e).call(t)},_.$$s=f,_),s).call(l)},a.$$s=i,a),n).call(r,t):o},u.$$s=l,u),a).call(c),e.defn(l,"$[]",function(e){var t,n=this;return n.$issue_deprecation("[]",e),(t=n["$directly_supports_attribute?"](e))===o||t.$$is_boolean&&1!=t?n.$extra_hash_attributes()["$[]"](e):n.$get_value(e)}),e.defn(l,"$[]=",function(e,t){var n,r=this;return r.$issue_deprecation("[]=",e,t),(n=r["$directly_supports_attribute?"](e))===o||n.$$is_boolean&&1!=n?r.$extra_hash_attributes()["$[]="](e,t):r.$set_value(e,t)}),l.$private(),e.defn(l,"$extra_hash_attributes",function(){var e,t=this;return null==t.extra_hash_attributes&&(t.extra_hash_attributes=o),(e=t.extra_hash_attributes)!==!1&&e!==o?e:t.extra_hash_attributes=s([],{})}),e.defn(l,"$directly_supports_attribute?",function(e){var t=this;return t.$class().$hash_attribute_names()["$include?"](e)}),e.defn(l,"$get_value",function(e){var t=this;return t.$__send__(e)}),e.defn(l,"$set_value",function(e,t){var n=this;return n.$__send__(""+e.$to_s()+"=",t)}),e.defn(l,"$hash_for_delegation",function(){var e=this;return e.$to_h()}),e.defn(l,"$issue_deprecation",function(e){var t=o,n=arguments.length-1;0>n&&(n=0);var r=new Array(n);for(t=0;n>t;t++)r[t]=arguments[t+1];return o}),function(t){var n,r,a=n=i(t,"ClassMethods");a.$$proto,a.$$scope;e.defn(a,"$hash_attribute_names",function(){var e,t=this;return null==t.hash_attribute_names&&(t.hash_attribute_names=o),(e=t.hash_attribute_names)!==!1&&e!==o?e:t.hash_attribute_names=[]}),e.defn(a,"$attr_accessor",r=function(){var t=this,n=r.$$p,a=o,$=o,i=o,s=arguments.length-0;0>s&&(s=0);var c=new Array(s);for(a=0;s>a;a++)c[a]=arguments[a+0];for(r.$$p=null,$=[],i=0;i<arguments.length;i++)$[i]=arguments[i];return t.$hash_attribute_names().$concat(c),e.find_super_dispatcher(t,"attr_accessor",r,n).apply(t,$)})}(_.base)}(_.base),function(t,$super){function n(){}var r,a=n=c(t,$super,"LegacyExampleGroupHash",n),$=a.$$proto,i=a.$$scope;return $.metadata=o,a.$include(i.get("HashImitatable")),e.defn(a,"$initialize",function(e){var t,n,r,a=this,$=o;return a.metadata=e,
$=(t=(n=e).$fetch,t.$$p=(r=function(){r.$$s||this;return s([],{})},r.$$s=a,r),t).call(n,"parent_example_group")["$[]"]("example_group"),$!==!1&&$!==o?a["$[]="]("example_group",$):o}),e.defn(a,"$to_h",r=function(){var t=this,n=r.$$p,a=o,$=o;for(r.$$p=null,a=[],$=0;$<arguments.length;$++)a[$]=arguments[$];return e.find_super_dispatcher(t,"to_h",r,n).apply(t,a).$merge(t.metadata)}),a.$private(),e.defn(a,"$directly_supports_attribute?",function(e){return e["$!="]("example_group")}),e.defn(a,"$get_value",function(e){var t=this;return t.metadata["$[]"](e)}),e.defn(a,"$set_value",function(e,t){var n=this;return n.metadata["$[]="](e,t)}),o&&"set_value"}(_.base,null)}(_.base)}(a.base)},Opal.modules["rspec/core/metadata_filter"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="ignore";var n=(e.top,e),r=e.nil,a=e.breaker,o=(e.slice,e.module),$=e.hash;return e.add_stubs(["$any?","$filter_applies?","$all?","$silence_metadata_example_group_deprecations","$===","$[]","$!","$filter_applies_to_any_value?","$==","$location_filter_applies?","$filters_apply?","$key?","$=~","$arity","$call","$to_s","$private","$example_group_declaration_line","$line_number_filter_applies?","$map","$preceding_declaration_line","$world","$empty?","$&","$relevant_line_numbers","$+","$compact","$parent_of","$expand_path","$[]=","$thread_local_metadata","$delete"]),function(n){var i,s=i=o(n,"RSpec"),c=(s.$$proto,s.$$scope);!function(n){var i,s=i=o(n,"Core"),c=(s.$$proto,s.$$scope);!function(n){var i,s=i=o(n,"MetadataFilter");s.$$proto,s.$$scope;!function(n){var o,i=n.$$scope;n.$$proto;return e.defn(n,"$any_apply?",function(e,t){var n,a,o,$=this;return(n=(a=e)["$any?"],n.$$p=(o=function(e,n){var a=o.$$s||this;return null==e&&(e=r),null==n&&(n=r),a["$filter_applies?"](e,n,t)},o.$$s=$,o),n).call(a)}),e.defn(n,"$all_apply?",function(e,t){var n,a,o,$=this;return(n=(a=e)["$all?"],n.$$p=(o=function(e,n){var a=o.$$s||this;return null==e&&(e=r),null==n&&(n=r),a["$filter_applies?"](e,n,t)},o.$$s=$,o),n).call(a)}),e.defn(n,"$filter_applies?",function(t,n,a){try{var o,$,s,c=this;return(o=($=c).$silence_metadata_example_group_deprecations,o.$$p=(s=function(){var o,$,c=s.$$s||this,u=r;return $=i.get("Array")["$==="](a["$[]"](t)),(o=$!==!1&&$!==r?i.get("Proc")["$==="](n)["$!"]():$)===r||o.$$is_boolean&&1!=o||e.ret(c["$filter_applies_to_any_value?"](t,n,a)),t["$=="]("locations")&&e.ret(c["$location_filter_applies?"](n,a)),(o=i.get("Hash")["$==="](n))===r||o.$$is_boolean&&1!=o||e.ret(c["$filters_apply?"](t,n,a)),((o=a["$key?"](t))===r||o.$$is_boolean&&1!=o)&&e.ret(!1),function(){return u=n,i.get("Regexp")["$==="](u)?a["$[]"](t)["$=~"](n):i.get("Proc")["$==="](u)?function(){return u=n.$arity(),0["$==="](u)?n.$call():2["$==="](u)?n.$call(a["$[]"](t),a):n.$call(a["$[]"](t))}():a["$[]"](t).$to_s()["$=="](n.$to_s())}()},s.$$s=c,s),o).call($)}catch(u){if(u===e.returner)return u.$v;throw u}}),n.$private(),e.defn(n,"$filter_applies_to_any_value?",function(e,t,n){var a,o,i,s=this;return(a=(o=n["$[]"](e))["$any?"],a.$$p=(i=function(n){var a=i.$$s||this;return null==n&&(n=r),a["$filter_applies?"](e,n,$(e,t))},i.$$s=s,i),a).call(o)}),e.defn(n,"$location_filter_applies?",function(e,t){var n=this,a=r;return a=n.$example_group_declaration_line(e,t),a!==!1&&a!==r?n["$line_number_filter_applies?"](a,t):!0}),e.defn(n,"$line_number_filter_applies?",function(e,t){var n,a,o,$=this,s=r;return s=(n=(a=e).$map,n.$$p=(o=function(e){o.$$s||this;return null==e&&(e=r),i.get("RSpec").$world().$preceding_declaration_line(e)},o.$$s=$,o),n).call(a),$.$relevant_line_numbers(t)["$&"](s)["$empty?"]()["$!"]()}),e.defn(n,"$relevant_line_numbers",function(e){var n=this;return e===!1||e===r?[]:t([e["$[]"]("line_number")].$compact(),n.$relevant_line_numbers(n.$parent_of(e)))}),e.defn(n,"$example_group_declaration_line",function(e,t){var n=this,a=r;return a=n.$parent_of(t),a===!1||a===r?r:e["$[]"](i.get("File").$expand_path(a["$[]"]("file_path")))}),e.defn(n,"$filters_apply?",function(e,t,n){var a,o,$,s=this,c=r;return c=n["$[]"](e),(a=(o=i.get("Hash")["$==="](c))!==!1&&o!==r?o:i.get("HashImitatable")["$==="](c))===r||a.$$is_boolean&&1!=a?!1:(a=(o=t)["$all?"],a.$$p=($=function(e,t){var n=$.$$s||this;return null==e&&(e=r),null==t&&(t=r),n["$filter_applies?"](e,t,c)},$.$$s=s,$),a).call(o)}),e.defn(n,"$parent_of",function(e){var t;return(t=e["$key?"]("example_group"))===r||t.$$is_boolean&&1!=t?e["$[]"]("parent_example_group"):e["$[]"]("example_group")}),e.defn(n,"$silence_metadata_example_group_deprecations",o=function(){var t,n=o.$$p,$=n||r;o.$$p=null;try{return i.get("RSpec").$thread_local_metadata()["$[]="]("silence_metadata_example_group_deprecations",!0),t=e.yieldX($,[]),t===a?t:t}finally{i.get("RSpec").$thread_local_metadata().$delete("silence_metadata_example_group_deprecations")}}),r&&"silence_metadata_example_group_deprecations"}(e.get_singleton_class(s))}(c.base)}(c.base)}(n.base)},Opal.modules["rspec/mocks/any_instance"]=function(e){e.dynamic_require_severity="ignore";var t,n,r,a=e.top,o=e,$=e.nil;e.breaker,e.slice;return e.add_stubs(["$each","$require_rspec_mocks"]),(t=(n=["any_instance/chain","any_instance/stub_chain","any_instance/stub_chain_chain","any_instance/expect_chain_chain","any_instance/expectation_chain","any_instance/message_chains","any_instance/recorder","any_instance/proxy"]).$each,t.$$p=(r=function(e){r.$$s||this;return null==e&&(e=$),o.get("RSpec").$$scope.get("Support").$require_rspec_mocks(e)},r.$$s=a,r),t).call(n)},Opal.modules["rspec/mocks/message_chain"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.dynamic_require_severity="ignore";var n=(e.top,e),r=e.nil,a=(e.breaker,e.slice,e.module),o=e.klass,$=e.hash2;return e.add_stubs(["$attr_reader","$format_chain","$to_proc","$>","$length","$chain","$find_matching_stub","$shift","$chain_on","$invoke","$find_matching_expectation","$invoke_without_incrementing_received_count","$new","$expectation","$object","$private","$raise","$initialize","$setup_chain","$===","$last","$pop","$each","$<<","$split","$join","$__send__","$proxy_for","$space","$to_sym","$first","$expect_message","$allow_message"]),function(n){var i,s=i=a(n,"RSpec"),c=(s.$$proto,s.$$scope);!function(n){var i,s=i=a(n,"Mocks"),c=(s.$$proto,s.$$scope);!function(n,$super){function a(){}var $,i,s,c,u=a=o(n,$super,"MessageChain",a),l=u.$$proto,_=u.$$scope;return l.block=r,u.$attr_reader("object","chain","block"),e.defn(u,"$initialize",$=function(t){var n,a,o,i,s=this,c=$.$$p,u=c||r,l=r,_=arguments.length-1;0>_&&(_=0);var p=new Array(_);for(l=0;_>l;l++)p[l]=arguments[l+1];return $.$$p=null,s.object=t,a=(o=(i=s).$format_chain,o.$$p=u.$to_proc(),o).apply(i,e.to_a(p)),n=e.to_ary(a),s.chain=null==n[0]?r:n[0],s.block=null==n[1]?r:n[1],a}),e.defn(u,"$setup_chain",function(){var n,a,o,$,i,s,c,u=this,l=r,p=r,d=r;return t(u.$chain().$length(),1)?(n=l=u.$find_matching_stub())===r||n.$$is_boolean&&1!=n?(n=p=u.$find_matching_expectation())===r||n.$$is_boolean&&1!=n?(d=_.get("Double").$new(),(n=($=u).$expectation,n.$$p=(i=function(){i.$$s||this;return d},i.$$s=u,i),n).call($,u.$object(),u.$chain().$shift()),(n=(s=u).$chain_on,n.$$p=u.block.$to_proc(),n).apply(s,[d].concat(e.to_a(u.$chain())))):(u.$chain().$shift(),(n=(o=u).$chain_on,n.$$p=u.block.$to_proc(),n).apply(o,[p.$invoke_without_incrementing_received_count(r)].concat(e.to_a(u.$chain())))):(u.$chain().$shift(),(n=(a=u).$chain_on,n.$$p=u.block.$to_proc(),n).apply(a,[l.$invoke(r)].concat(e.to_a(u.$chain())))):(n=(c=u).$expectation,n.$$p=u.block.$to_proc(),n).call(c,u.$object(),u.$chain().$shift())}),u.$private(),e.defn(u,"$expectation",i=function(e,t){var n=this;i.$$p;return i.$$p=null,n.$raise(_.get("NotImplementedError"))}),e.defn(u,"$chain_on",s=function(t){var n,a,o=this,$=s.$$p,i=$||r,c=r,u=arguments.length-1;0>u&&(u=0);var l=new Array(u);for(c=0;u>c;c++)l[c]=arguments[c+1];return s.$$p=null,(n=(a=o).$initialize,n.$$p=i.$to_proc(),n).apply(a,[t].concat(e.to_a(l))),o.$setup_chain()}),e.defn(u,"$format_chain",c=function(){var e,t,n,a=this,o=c.$$p,$=o||r,i=r,s=r,u=arguments.length-0;0>u&&(u=0);var l=new Array(u);for(s=0;u>s;s++)l[s]=arguments[s+0];return c.$$p=null,(e=_.get("Hash")["$==="](l.$last()))===r||e.$$is_boolean&&1!=e||(i=l.$pop(),(e=(t=i).$each,e.$$p=(n=function(e,t){var a,o,i,s=n.$$s||this;return null==e&&(e=r),null==t&&(t=r),l["$<<"](e),$=(a=(o=_.get("Proc")).$new,a.$$p=(i=function(){i.$$s||this;return t},i.$$s=s,i),a).call(o)},n.$$s=a,n),e).call(t)),[l.$join(".").$split("."),$]}),e.defn(u,"$find_matching_stub",function(){var t=this;return e.get("RSpec").$$scope.get("Mocks").$space().$proxy_for(t.$object()).$__send__("find_matching_method_stub",t.$chain().$first().$to_sym())}),e.defn(u,"$find_matching_expectation",function(){var t=this;return e.get("RSpec").$$scope.get("Mocks").$space().$proxy_for(t.$object()).$__send__("find_matching_expectation",t.$chain().$first().$to_sym())}),r&&"find_matching_expectation"}(c.base,null),function(t,$super){function n(){}var a,i,s=n=o(t,$super,"ExpectChain",n);s.$$proto,s.$$scope;return e.defs(s,"$expect_chain_on",a=function(t){var n,o,$=this,i=a.$$p,s=i||r,c=r,u=arguments.length-1;0>u&&(u=0);var l=new Array(u);for(c=0;u>c;c++)l[c]=arguments[c+1];return a.$$p=null,(n=(o=$).$new,n.$$p=s.$to_proc(),n).apply(o,[t].concat(e.to_a(l))).$setup_chain()}),s.$private(),e.defn(s,"$expectation",i=function(t,n){var a,o,s=i.$$p,c=s||r;return i.$$p=null,(a=(o=e.get("RSpec").$$scope.get("Mocks")).$expect_message,a.$$p=c.$to_proc(),a).call(o,t,n,$([],{}))}),r&&"expectation"}(c.base,c.get("MessageChain")),function(t,$super){function n(){}var a,i,s=n=o(t,$super,"StubChain",n);s.$$proto,s.$$scope;return e.defs(s,"$stub_chain_on",a=function(t){var n,o,$=this,i=a.$$p,s=i||r,c=r,u=arguments.length-1;0>u&&(u=0);var l=new Array(u);for(c=0;u>c;c++)l[c]=arguments[c+1];return a.$$p=null,(n=(o=$).$new,n.$$p=s.$to_proc(),n).apply(o,[t].concat(e.to_a(l))).$setup_chain()}),s.$private(),e.defn(s,"$expectation",i=function(t,n){var a,o,s=i.$$p,c=s||r;return i.$$p=null,(a=(o=e.get("RSpec").$$scope.get("Mocks")).$allow_message,a.$$p=c.$to_proc(),a).call(o,t,n,$([],{}))}),r&&"expectation"}(c.base,c.get("MessageChain"))}(c.base)}(n.base)},Opal.modules["rspec/mocks/marshal_extension"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass;return e.add_stubs(["$respond_to?","$instance_eval","$!","$registered?","$space","$===","$dump_without_rspec_mocks","$dup","$alias_method","$undef_method"]),function(t){var o,$=o=r(t,"RSpec"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"Mocks"),i=($.$$proto,$.$$scope);!function(t,$super){function r(){}var o=r=a(t,$super,"MarshalExtension",r),$=(o.$$proto,o.$$scope);return e.defs(o,"$patch!",function(){var t,r,a,o=this;return(t=$.get("Marshal")["$respond_to?"]("dump_with_rspec_mocks"))===n||t.$$is_boolean&&1!=t?(t=(r=$.get("Marshal")).$instance_eval,t.$$p=(a=function(){var t=a.$$s||this;return function(t){var r=t.$$scope;t.$$proto;return e.defn(t,"$dump_with_rspec_mocks",function(t){var a,o,$=this,i=n,s=arguments.length-1;0>s&&(s=0);var c=new Array(s);for(i=0;s>i;i++)c[i]=arguments[i+1];return(a=(o=e.get("RSpec").$$scope.get("Mocks").$space()["$registered?"](t)["$!"]())!==!1&&o!==n?o:r.get("NilClass")["$==="](t))===n||a.$$is_boolean&&1!=a?(o=$).$dump_without_rspec_mocks.apply(o,[t.$dup()].concat(e.to_a(c))):(a=$).$dump_without_rspec_mocks.apply(a,[t].concat(e.to_a(c)))}),t.$alias_method("dump_without_rspec_mocks","dump"),t.$undef_method("dump"),t.$alias_method("dump","dump_with_rspec_mocks")}(e.get_singleton_class(t))},a.$$s=o,a),t).call(r):n}),e.defs(o,"$unpatch!",function(){var t,r,a,o=this;return(t=$.get("Marshal")["$respond_to?"]("dump_with_rspec_mocks"))===n||t.$$is_boolean&&1!=t?n:(t=(r=$.get("Marshal")).$instance_eval,t.$$p=(a=function(){var t=a.$$s||this;return function(e){e.$$scope,e.$$proto;return e.$undef_method("dump_with_rspec_mocks"),e.$undef_method("dump"),e.$alias_method("dump","dump_without_rspec_mocks"),e.$undef_method("dump_without_rspec_mocks")}(e.get_singleton_class(t))},a.$$s=o,a),t).call(r)}),n&&"unpatch!"}(i.base,null)}(i.base)}(t.base)},Opal.modules["rspec/mocks/matchers/have_received"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="ignore";var n=(e.top,e),r=e.nil,a=(e.breaker,e.slice),o=e.module,$=e.klass;return e.add_stubs(["$+","$expect","$ensure_implemented","$mock_proxy","$expected_messages_received_in_order?","$ensure_count_unconstrained","$never","$generate_failure_message","$description","$each","$define_method","$<<","$disallow","$private","$raise","$build_expectation","$apply_constraints_to","$send","$count_constraint","$find","$include?","$map","$to_proc","$check_for_unexpected_arguments","$generate_error","$message","$replay_received_message_on","$expected_messages_received?","$ensure_expected_ordering_received!","$proxy_for","$space"]),function(n){var i,s=i=o(n,"RSpec"),c=(s.$$proto,s.$$scope);!function(n){var i,s=i=o(n,"Mocks"),c=(s.$$proto,s.$$scope);!function(n){var i,s=i=o(n,"Matchers"),c=(s.$$proto,s.$$scope);!function(n,$super){function o(){}var i,s,c,u,l,_,p,d,f=o=$(n,$super,"HaveReceived",o),g=f.$$proto,h=f.$$scope;return g.block=g.method_name=g.expectation=g.constraints=g.subject=r,e.cdecl(h,"COUNT_CONSTRAINTS",["exactly","at_least","at_most","times","once","twice","thrice"]),e.cdecl(h,"ARGS_CONSTRAINTS",["with"]),e.cdecl(h,"CONSTRAINTS",t(t(h.get("COUNT_CONSTRAINTS"),h.get("ARGS_CONSTRAINTS")),["ordered"])),e.defn(f,"$initialize",i=function(e){var t=this,n=i.$$p,a=n||r;return i.$$p=null,t.method_name=e,t.block=a,t.constraints=[],t.subject=r}),e.defn(f,"$name",function(){return"have_received"}),e.defn(f,"$matches?",s=function(e){var t,n=this,a=s.$$p,o=a||r;return s.$$p=null,(t=n.block)!==!1&&t!==r?t:n.block=o,n.subject=e,n.expectation=n.$expect(),n.$mock_proxy().$ensure_implemented(n.method_name),n["$expected_messages_received_in_order?"]()}),e.defn(f,"$does_not_match?",function(e){var t=this;return t.subject=e,t.$ensure_count_unconstrained(),t.expectation=t.$expect().$never(),t.$mock_proxy().$ensure_implemented(t.method_name),t["$expected_messages_received_in_order?"]()}),e.defn(f,"$failure_message",function(){var e=this;return e.$generate_failure_message()}),e.defn(f,"$failure_message_when_negated",function(){var e=this;return e.$generate_failure_message()}),e.defn(f,"$description",function(){var e=this;return e.$expect().$description()}),(c=(u=h.get("CONSTRAINTS")).$each,c.$$p=(l=function(t){var n,o,$,i=l.$$s||this;return null==t&&(t=r),(n=(o=i).$define_method,n.$$p=($=function(n){var o=$.$$s||this;return null==o.constraints&&(o.constraints=r),n=a.call(arguments,0),o.constraints["$<<"]([t].concat(e.to_a(n))),o},$.$$s=i,$),n).call(o,t)},l.$$s=f,l),c).call(u),e.defn(f,"$setup_allowance",_=function(e){var t=this;_.$$p;return _.$$p=null,t.$disallow("allow"," as it would have no effect")}),e.defn(f,"$setup_any_instance_allowance",p=function(e){var t=this;p.$$p;return p.$$p=null,t.$disallow("allow_any_instance_of")}),e.defn(f,"$setup_any_instance_expectation",d=function(e){var t=this;d.$$p;return d.$$p=null,t.$disallow("expect_any_instance_of")}),f.$private(),e.defn(f,"$disallow",function(e,t){var n=this;return null==t&&(t=""),n.$raise(h.get("RSpec").$$scope.get("Mocks").$$scope.get("MockExpectationError"),"Using "+e+"(...) with the `have_received` "+("matcher is not supported"+t+"."))}),e.defn(f,"$expect",function(){var e,t=this,n=r;return(e=t.expectation)!==!1&&e!==r?e:t.expectation=function(){return n=t.$mock_proxy().$build_expectation(t.method_name),t.$apply_constraints_to(n),n}()}),e.defn(f,"$apply_constraints_to",function(t){var n,a,o,$=this;return(n=(a=$.constraints).$each,n.$$p=(o=function(n){var a;o.$$s||this;return null==n&&(n=r),(a=t).$send.apply(a,e.to_a(n))},o.$$s=$,o),n).call(a)}),e.defn(f,"$ensure_count_unconstrained",function(){var e,t=this;return(e=t.$count_constraint())===r||e.$$is_boolean&&1!=e?r:t.$raise(h.get("RSpec").$$scope.get("Mocks").$$scope.get("MockExpectationError"),"can't use "+t.$count_constraint()+" when negative")}),e.defn(f,"$count_constraint",function(){var e,t,n,a,o,$=this;return(e=(t=(a=(o=$.constraints).$map,a.$$p="first".$to_proc(),a).call(o)).$find,e.$$p=(n=function(e){n.$$s||this;return null==e&&(e=r),h.get("COUNT_CONSTRAINTS")["$include?"](e)},n.$$s=$,n),e).call(t)}),e.defn(f,"$generate_failure_message",function(){var t=this,n=r;try{return t.$mock_proxy().$check_for_unexpected_arguments(t.expectation),t.expectation.$generate_error()}catch(a){if(!e.rescue(a,[h.get("RSpec").$$scope.get("Mocks").$$scope.get("MockExpectationError")]))throw a;n=a;try{return n.$message()}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}),e.defn(f,"$expected_messages_received_in_order?",function(){var e,t,n=this;return(e=(t=n.$mock_proxy()).$replay_received_message_on,e.$$p=n.block.$to_proc(),e).call(t,n.expectation),e=n.expectation["$expected_messages_received?"](),e!==!1&&e!==r?n.expectation["$ensure_expected_ordering_received!"]():e}),e.defn(f,"$mock_proxy",function(){var e=this;return h.get("RSpec").$$scope.get("Mocks").$space().$proxy_for(e.subject)}),r&&"mock_proxy"}(c.base,null)}(c.base)}(c.base)}(n.base)},Opal.modules["rspec/mocks/matchers/receive"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice),a=e.module,o=e.klass;return e.add_stubs(["$require_rspec_mocks","$warn_if_any_instance","$setup_mock_proxy_method_substitute","$unshift","$new","$setup_expectation","$to_proc","$setup_any_instance_method_substitute","$each","$method_defined?","$define_method","$<<","$public_instance_methods","$private","$===","$warning","$klass","$proxy_for","$space","$setup_method_substitute","$any_instance_proxy_for","$to_sym","$move_block_to_last_customization","$__send__","$playback_onto","$last","$block","$block="]),t.get("RSpec").$$scope.get("Support").$require_rspec_mocks("matchers/expectation_customization"),function(t){var $,i=$=a(t,"RSpec"),s=(i.$$proto,i.$$scope);!function(t){var $,i=$=a(t,"Mocks"),s=(i.$$proto,i.$$scope);!function(t){var $,i=$=a(t,"Matchers"),s=(i.$$proto,i.$$scope);!function(t,$super){function a(){}var $,i,s,c,u,l,_,p,d,f=a=o(t,$super,"Receive",a),g=f.$$proto,h=f.$$scope;return g.recorded_customizations=g.message=g.block=n,e.defn(f,"$initialize",function(e,t){var n=this;return n.message=e,n.block=t,n.recorded_customizations=[]}),e.defn(f,"$name",function(){return"receive"}),e.defn(f,"$setup_expectation",$=function(e){var t=this,r=$.$$p,a=r||n;return $.$$p=null,t.$warn_if_any_instance("expect",e),t.$setup_mock_proxy_method_substitute(e,"add_message_expectation",a)}),e.alias(f,"matches?","setup_expectation"),e.defn(f,"$setup_negative_expectation",i=function(e){var t,r,a=this,o=i.$$p,$=o||n;return i.$$p=null,a.recorded_customizations.$unshift(h.get("ExpectationCustomization").$new("never",[],n)),a.$warn_if_any_instance("expect",e),(t=(r=a).$setup_expectation,t.$$p=$.$to_proc(),t).call(r,e)}),e.alias(f,"does_not_match?","setup_negative_expectation"),e.defn(f,"$setup_allowance",s=function(e){var t=this,r=s.$$p,a=r||n;return s.$$p=null,t.$warn_if_any_instance("allow",e),t.$setup_mock_proxy_method_substitute(e,"add_stub",a)}),e.defn(f,"$setup_any_instance_expectation",c=function(e){var t=this,r=c.$$p,a=r||n;return c.$$p=null,t.$setup_any_instance_method_substitute(e,"should_receive",a)}),e.defn(f,"$setup_any_instance_negative_expectation",u=function(e){var t=this,r=u.$$p,a=r||n;return u.$$p=null,t.$setup_any_instance_method_substitute(e,"should_not_receive",a)}),e.defn(f,"$setup_any_instance_allowance",l=function(e){var t=this,r=l.$$p,a=r||n;return l.$$p=null,t.$setup_any_instance_method_substitute(e,"stub",a)}),(_=(p=h.get("MessageExpectation").$public_instance_methods(!1)).$each,_.$$p=(d=function(e){var t,a,o,$=d.$$s||this;return null==e&&(e=n),(t=$["$method_defined?"](e))===n||t.$$is_boolean&&1!=t?(t=(a=$).$define_method,t.$$p=(o=function(t){var a,$=o.$$s||this;return null==$.recorded_customizations&&($.recorded_customizations=n),t=r.call(arguments,0),a=o.$$p||n,o.$$p=null,$.recorded_customizations["$<<"](h.get("ExpectationCustomization").$new(e,t,a)),$},o.$$s=$,o),t).call(a,e):n},d.$$s=f,d),_).call(p),f.$private(),e.defn(f,"$warn_if_any_instance",function(e,t){var r;return(r=h.get("AnyInstance").$$scope.get("Proxy")["$==="](t))===n||r.$$is_boolean&&1!=r?n:h.get("RSpec").$warning("`"+e+"("+t.$klass()+".any_instance).to` is probably not what you meant, it does not operate on "+("any instance of `"+t.$klass()+"`. ")+("Use `"+e+"_any_instance_of("+t.$klass()+").to` instead."))}),e.defn(f,"$setup_mock_proxy_method_substitute",function(t,r,a){var o=this,$=n;return $=e.get("RSpec").$$scope.get("Mocks").$space().$proxy_for(t),o.$setup_method_substitute($,r,a)}),e.defn(f,"$setup_any_instance_method_substitute",function(t,r,a){var o=this,$=n;return $=e.get("RSpec").$$scope.get("Mocks").$space().$any_instance_proxy_for(t),o.$setup_method_substitute($,r,a)}),e.defn(f,"$setup_method_substitute",function(t,r,a){var o,$,i,s,c=this,u=n,l=n,_=arguments.length-3;0>_&&(_=0);var p=new Array(_);for(l=0;_>l;l++)p[l]=arguments[l+3];return p["$<<"](c.message.$to_sym()),a=c.$move_block_to_last_customization(a),u=(o=($=t).$__send__,o.$$p=((i=c.block)!==!1&&i!==n?i:a).$to_proc(),o).apply($,[r].concat(e.to_a(p))),(o=(i=c.recorded_customizations).$each,o.$$p=(s=function(e){s.$$s||this;return null==e&&(e=n),e.$playback_onto(u)},s.$$s=c,s),o).call(i),u}),e.defn(f,"$move_block_to_last_customization",function(e){var t,r,a=this,o=n;return o=a.recorded_customizations.$last(),o===!1||o===n?e:(t=o,(r=t.$block())!==!1&&r!==n?r:t["$block="](e),n)}),n&&"move_block_to_last_customization"}(s.base,null)}(s.base)}(s.base)}(t.base)},Opal.modules["rspec/mocks/matchers/receive_message_chain"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice),a=e.module,o=e.klass;return e.add_stubs(["$require_rspec_mocks","$each","$define_method","$<<","$new","$stub_chain_on","$to_proc","$replay_customizations","$any_instance_proxy_for","$space","$stub_chain","$expect_chain","$expect_chain_on","$raise","$private","$playback_onto"]),t.get("RSpec").$$scope.get("Support").$require_rspec_mocks("matchers/expectation_customization"),function(t){var $,i=$=a(t,"RSpec"),s=(i.$$proto,i.$$scope);!function(t){var $,i=$=a(t,"Mocks"),s=(i.$$proto,i.$$scope);!function(t){var $,i=$=a(t,"Matchers"),s=(i.$$proto,i.$$scope);!function(t,$super){function a(){}var $,i,s,c,u,l,_,p,d=a=o(t,$super,"ReceiveMessageChain",a),f=d.$$proto,g=d.$$scope;return f.block=f.chain=f.recorded_customizations=n,e.defn(d,"$initialize",$=function(e){var t=this,r=$.$$p,a=r||n;return $.$$p=null,t.chain=e,t.block=a,t.recorded_customizations=[]}),(i=(s=["with","and_return","and_throw","and_raise","and_yield","and_call_original"]).$each,i.$$p=(c=function(e){var t,a,o,$=c.$$s||this;return null==e&&(e=n),(t=(a=$).$define_method,t.$$p=(o=function(t){var a,$=o.$$s||this;return null==$.recorded_customizations&&($.recorded_customizations=n),t=r.call(arguments,0),a=o.$$p||n,o.$$p=null,$.recorded_customizations["$<<"](g.get("ExpectationCustomization").$new(e,t,a)),$},o.$$s=$,o),t).call(a,e)},c.$$s=d,c),i).call(s),e.defn(d,"$name",function(){return"receive_message_chain"}),e.defn(d,"$setup_allowance",u=function(t){var r,a,o,$=this,i=u.$$p,s=i||n,c=n;return u.$$p=null,c=(r=(a=g.get("StubChain")).$stub_chain_on,r.$$p=((o=$.block)!==!1&&o!==n?o:s).$to_proc(),r).apply(a,[t].concat(e.to_a($.chain))),$.$replay_customizations(c)}),e.defn(d,"$setup_any_instance_allowance",l=function(t){var r,a,o,$=this,i=l.$$p,s=i||n,c=n,u=n;return l.$$p=null,c=e.get("RSpec").$$scope.get("Mocks").$space().$any_instance_proxy_for(t),u=(r=(a=c).$stub_chain,r.$$p=((o=$.block)!==!1&&o!==n?o:s).$to_proc(),r).apply(a,e.to_a($.chain)),$.$replay_customizations(u)}),e.defn(d,"$setup_any_instance_expectation",_=function(t){var r,a,o,$=this,i=_.$$p,s=i||n,c=n,u=n;return _.$$p=null,c=e.get("RSpec").$$scope.get("Mocks").$space().$any_instance_proxy_for(t),u=(r=(a=c).$expect_chain,r.$$p=((o=$.block)!==!1&&o!==n?o:s).$to_proc(),r).apply(a,e.to_a($.chain)),$.$replay_customizations(u)}),e.defn(d,"$setup_expectation",p=function(t){var r,a,o,$=this,i=p.$$p,s=i||n,c=n;return p.$$p=null,c=(r=(a=g.get("ExpectChain")).$expect_chain_on,r.$$p=((o=$.block)!==!1&&o!==n?o:s).$to_proc(),r).apply(a,[t].concat(e.to_a($.chain))),$.$replay_customizations(c)}),e.defn(d,"$setup_negative_expectation",function(){var e=this,t=n,r=arguments.length-0;0>r&&(r=0);var a=new Array(r);for(t=0;r>t;t++)a[t]=arguments[t+0];return e.$raise(g.get("NegationUnsupportedError"),"`expect(...).not_to receive_message_chain` is not supported since it doesn't really make sense. What would it even mean?")}),e.alias(d,"matches?","setup_expectation"),e.alias(d,"does_not_match?","setup_negative_expectation"),d.$private(),e.defn(d,"$replay_customizations",function(e){var t,r,a,o=this;return(t=(r=o.recorded_customizations).$each,t.$$p=(a=function(t){a.$$s||this;return null==t&&(t=n),t.$playback_onto(e)},a.$$s=o,a),t).call(r)}),n&&"replay_customizations"}(s.base,null)}(s.base)}(s.base)}(t.base)},Opal.modules["rspec/mocks/matchers/receive_messages"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=e.breaker,a=(e.slice,e.module),o=e.klass;return e.add_stubs(["$first_non_rspec_line","$warn_about_block","$each_message_on","$add_simple_expectation","$proxy_on","$raise","$add_simple_stub","$and_return","$should_receive","$any_instance_of","$stub","$private","$proxy_for","$space","$any_instance_proxy_for","$each"]),function(t){var $,i=$=a(t,"RSpec"),s=(i.$$proto,i.$$scope);!function(t){var $,i=$=a(t,"Mocks"),s=(i.$$proto,i.$$scope);!function(t){var $,i=$=a(t,"Matchers"),s=(i.$$proto,i.$$scope);!function(t,$super){function a(){}var $,i,s,c,u,l=a=o(t,$super,"ReceiveMessages",a),_=l.$$proto,p=l.$$scope;return _.message_return_value_hash=n,e.defn(l,"$initialize",function(e){var t=this;return t.message_return_value_hash=e,t.backtrace_line=p.get("CallerFilter").$first_non_rspec_line()}),e.defn(l,"$name",function(){return"receive_messages"}),e.defn(l,"$setup_expectation",$=function(e){var t,r,a,o=this,i=$.$$p,s=i||n;return $.$$p=null,s!==n&&o.$warn_about_block(),(t=(r=o).$each_message_on,t.$$p=(a=function(e,t,r){var o=a.$$s||this;return null==o.backtrace_line&&(o.backtrace_line=n),null==e&&(e=n),null==t&&(t=n),null==r&&(r=n),e.$add_simple_expectation(t,r,o.backtrace_line)},a.$$s=o,a),t).call(r,o.$proxy_on(e))}),e.alias(l,"matches?","setup_expectation"),e.defn(l,"$setup_negative_expectation",function(e){var t=this;return t.$raise(p.get("NegationUnsupportedError"),"`expect(...).to_not receive_messages` is not supported since it doesn't really make sense. What would it even mean?")}),e.alias(l,"does_not_match?","setup_negative_expectation"),e.defn(l,"$setup_allowance",i=function(e){var t,r,a,o=this,$=i.$$p,s=$||n;return i.$$p=null,s!==n&&o.$warn_about_block(),(t=(r=o).$each_message_on,t.$$p=(a=function(e,t,r){a.$$s||this;return null==e&&(e=n),null==t&&(t=n),null==r&&(r=n),e.$add_simple_stub(t,r)},a.$$s=o,a),t).call(r,o.$proxy_on(e))}),e.defn(l,"$setup_any_instance_expectation",s=function(e){var t,r,a,o=this,$=s.$$p,i=$||n;return s.$$p=null,i!==n&&o.$warn_about_block(),(t=(r=o).$each_message_on,t.$$p=(a=function(e,t,r){a.$$s||this;return null==e&&(e=n),null==t&&(t=n),null==r&&(r=n),e.$should_receive(t).$and_return(r)},a.$$s=o,a),t).call(r,o.$any_instance_of(e))}),e.defn(l,"$setup_any_instance_allowance",c=function(e){var t=this,r=c.$$p,a=r||n;return c.$$p=null,a!==n&&t.$warn_about_block(),t.$any_instance_of(e).$stub(t.message_return_value_hash)}),e.defn(l,"$warn_about_block",function(){var e=this;return e.$raise("Implementation blocks aren't supported with `receive_messages`")}),l.$private(),e.defn(l,"$proxy_on",function(t){return e.get("RSpec").$$scope.get("Mocks").$space().$proxy_for(t)}),e.defn(l,"$any_instance_of",function(t){return e.get("RSpec").$$scope.get("Mocks").$space().$any_instance_proxy_for(t)}),e.defn(l,"$each_message_on",u=function(t){var a,o,$,i=this,s=u.$$p,c=s||n;return u.$$p=null,(a=(o=i.message_return_value_hash).$each,a.$$p=($=function(a,o){var i;$.$$s||this;return null==a&&(a=n),null==o&&(o=n),i=e.yieldX(c,[t,a,o]),i===r?i:i},$.$$s=i,$),a).call(o)}),n&&"each_message_on"}(s.base,null)}(s.base)}(s.base)}(t.base)},Opal.modules["rspec/mocks"]=function(e){e.dynamic_require_severity="ignore";var t,n,r,a,o,$=e.top,i=e,s=e.nil,c=e.breaker,u=(e.slice,e.module),l=e.hash2;return e.add_stubs(["$require","$require_rspec_support","$define_optimized_require_for_rspec","$each","$require_rspec_mocks","$<<","$new_scope","$space","$verify_all","$reset_all","$pop","$last","$add_stub","$to_proc","$proxy_for","$add_message_expectation","$setup","$verify","$teardown","$attr_reader","$new","$autoload"]),$.$require("rspec/support"),i.get("RSpec").$$scope.get("Support").$require_rspec_support("caller_filter"),i.get("RSpec").$$scope.get("Support").$require_rspec_support("warnings"),i.get("RSpec").$$scope.get("Support").$require_rspec_support("ruby_features"),(t=(n=i.get("RSpec").$$scope.get("Support")).$define_optimized_require_for_rspec,t.$$p=(r=function(e){var t=r.$$s||this;return null==e&&(e=s),t.$require("rspec/mocks/../"+e)},r.$$s=$,r),t).call(n,"mocks"),(t=(a=["instance_method_stasher","method_double","argument_matchers","example_methods","proxy","test_double","argument_list_matcher","message_expectation","order_group","error_generator","space","mutate_const","targets","syntax","configuration","verifying_double","version"]).$each,t.$$p=(o=function(e){o.$$s||this;return null==e&&(e=s),i.get("RSpec").$$scope.get("Support").$require_rspec_mocks(e)},o.$$s=$,o),t).call(a),function(t){var n,r=n=u(t,"RSpec"),a=(r.$$proto,r.$$scope);!function(t){var n,r,a,o,$=n=u(t,"Mocks"),i=($.$$proto,$.$$scope);e.defs($,"$setup",function(){var e=this;return null==e.space_stack&&(e.space_stack=s),e.space_stack["$<<"](e.space=e.$space().$new_scope())}),e.defs($,"$verify",function(){var e=this;return e.$space().$verify_all()}),e.defs($,"$teardown",function(){var e,t=this;return null==t.space_stack&&(t.space_stack=s),null==t.root_space&&(t.root_space=s),t.$space().$reset_all(),t.space_stack.$pop(),t.space=(e=t.space_stack.$last())!==!1&&e!==s?e:t.root_space}),e.defs($,"$allow_message",r=function(e,t,n){var a,o,$=this,i=r.$$p,c=i||s;return null==n&&(n=l([],{})),r.$$p=null,(a=(o=$.$space().$proxy_for(e)).$add_stub,a.$$p=c.$to_proc(),a).call(o,t,n)}),e.defs($,"$expect_message",a=function(e,t,n){var r,o,$=this,i=a.$$p,c=i||s;return null==n&&(n=l([],{})),a.$$p=null,(r=(o=$.$space().$proxy_for(e)).$add_message_expectation,r.$$p=c.$to_proc(),r).call(o,t,n)}),e.defs($,"$with_temporary_scope",o=function(){var t=this,n=o.$$p,r=n||s;o.$$p=null,t.$setup();try{return e.yieldX(r,[])===c?c.$v:t.$verify()}finally{t.$teardown()}}),function(e){e.$$scope,e.$$proto;return e.$attr_reader("space")}(e.get_singleton_class($)),$.space_stack=[],$.root_space=$.space=i.get("RSpec").$$scope.get("Mocks").$$scope.get("RootSpace").$new(),e.cdecl(i,"IGNORED_BACKTRACE_LINE","this backtrace line is ignored"),$.$autoload("AnyInstance","rspec/mocks/any_instance"),$.$autoload("ExpectChain","rspec/mocks/message_chain"),$.$autoload("StubChain","rspec/mocks/message_chain"),$.$autoload("MarshalExtension","rspec/mocks/marshal_extension"),function(e){var t,n=t=u(e,"Matchers");n.$$proto,n.$$scope;n.$autoload("HaveReceived","rspec/mocks/matchers/have_received"),n.$autoload("Receive","rspec/mocks/matchers/receive"),n.$autoload("ReceiveMessageChain","rspec/mocks/matchers/receive_message_chain"),n.$autoload("ReceiveMessages","rspec/mocks/matchers/receive_messages")}(i.base)}(a.base)}(i.base)},Opal.modules["rspec/core/mocking_adapters/rspec"]=function(e){e.dynamic_require_severity="ignore";var t=e.top,n=e,r=(e.nil,e.breaker,e.slice,e.module);return e.add_stubs(["$require","$include","$configuration","$setup","$verify","$teardown"]),t.$require("rspec/mocks"),function(t){var n,a=n=r(t,"RSpec"),o=(a.$$proto,a.$$scope);!function(t){var n,a=n=r(t,"Core"),o=(a.$$proto,a.$$scope);!function(t){var n,a=n=r(t,"MockingAdapters"),o=(a.$$proto,a.$$scope);!function(t){var n,a=n=r(t,"RSpec");a.$$proto,a.$$scope;a.$include(e.get("RSpec").$$scope.get("Mocks").$$scope.get("ExampleMethods")),e.defs(a,"$framework_name",function(){return"rspec"}),e.defs(a,"$configuration",function(){return e.get("RSpec").$$scope.get("Mocks").$configuration()}),e.defn(a,"$setup_mocks_for_rspec",function(){return e.get("RSpec").$$scope.get("Mocks").$setup()}),e.defn(a,"$verify_mocks_for_rspec",function(){return e.get("RSpec").$$scope.get("Mocks").$verify()}),e.defn(a,"$teardown_mocks_for_rspec",function(){return e.get("RSpec").$$scope.get("Mocks").$teardown();
})}(o.base)}(o.base)}(o.base)}(n.base)},Opal.modules["rspec/core/notifications"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function a(e,t){return"number"==typeof e&&"number"==typeof t?e/t:e["$/"](t)}function o(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}function $(e,t){return"number"==typeof e&&"number"==typeof t?t>=e:e["$<="](t)}e.dynamic_require_severity="ignore";var i=(e.top,e),s=e.nil,c=(e.breaker,e.slice,e.module),u=e.klass,l=e.range,_=e.hash2;return e.add_stubs(["$require_rspec_core","$require_rspec_support","$module_function","$new","$pending_fixed?","$execution_result","$==","$status","$private_class_method","$examples","$failed_examples","$pending_examples","$format_examples","$each_with_index","$<<","$fully_formatted","$next","$failure_notifications","$each","$backtrace_line","$backtrace_formatter","$configuration","$location","$wrap","$full_description","$pending_message","$private","$map","$for","$public_class_method","$exception","$example","$add_shared_group_line","$failure_lines","$failure_color","$format_backtrace","$backtrace","$metadata","$detail_color","$formatted_backtrace","$description","$encoding_of","$colorized_message_lines","$colorized_formatted_backtrace","$method_defined?","$encoding","$to_s","$name","$class","$strip","$read_failed_line","$=~","$exception_class_name","$message","$split","$shared_group_line","$default_color","$find","$[]","$group_and_parent_groups","$shared_group","$+","$parent_groups","$example_group","$find_failed_line","$match","$exist?","$readlines","$-","$to_i","$expand_path","$file_path","$downcase","$fixed_color","$message_lines","$!","$used","$seed","$size","$pluralize","$example_count","$failure_count","$>","$pending_count","$totals_line","$pending_color","$success_color","$join","$format_duration","$duration","$load_time","$formatted_duration","$formatted_load_time","$colorized_totals_line","$empty?","$colorized_rerun_commands","$first","$sort_by","$-@","$run_time","$number_of_examples","$inject","$slowest_examples","$/","$slow_duration","$%","$*","$nan?","$calculate_slowest_groups","$last","$[]=","$key?","$top_level_description","$<=","$length","$keys","$each_value","$to_f"]),i.get("RSpec").$$scope.get("Support").$require_rspec_core("formatters/helpers"),i.get("RSpec").$$scope.get("Support").$require_rspec_support("encoded_string"),function(i){var p,d=p=c(i,"Core"),f=(d.$$proto,d.$$scope);!function(i){var p,d,f,g,h,m,v,b,y,x,w,k,S=p=c(i,"Notifications"),E=(S.$$proto,S.$$scope);!function(t){var n,r=n=c(t,"NullColorizer");r.$$proto,r.$$scope;r.$module_function(),e.defn(r,"$wrap",function(e,t){return e})}(E.base),e.cdecl(E,"StartNotification",E.get("Struct").$new("count","load_time")),e.cdecl(E,"ExampleNotification",(d=(f=E.get("Struct")).$new,d.$$p=(g=function(){var t=g.$$s||this;return e.defs(t,"$for",function(e){var t,n=this;return(t=e.$execution_result()["$pending_fixed?"]())===s||t.$$is_boolean&&1!=t?e.$execution_result().$status()["$=="]("failed")?E.get("FailedExampleNotification").$new(e):n.$new(e):E.get("PendingExampleFixedNotification").$new(e)}),t.$private_class_method("new")},g.$$s=S,g),d).call(f,"example")),function(t,$super){function n(){}var r=n=u(t,$super,"ExamplesNotification",n),a=r.$$proto,o=r.$$scope;return a.reporter=a.notifications=a.failed_notifications=s,e.defn(r,"$initialize",function(e){var t=this;return t.reporter=e}),e.defn(r,"$examples",function(){var e=this;return e.reporter.$examples()}),e.defn(r,"$failed_examples",function(){var e=this;return e.reporter.$failed_examples()}),e.defn(r,"$pending_examples",function(){var e=this;return e.reporter.$pending_examples()}),e.defn(r,"$notifications",function(){var e,t=this;return(e=t.notifications)!==!1&&e!==s?e:t.notifications=t.$format_examples(t.$examples())}),e.defn(r,"$failure_notifications",function(){var e,t=this;return(e=t.failed_notifications)!==!1&&e!==s?e:t.failed_notifications=t.$format_examples(t.$failed_examples())}),e.defn(r,"$fully_formatted_failed_examples",function(t){var n,r,a,o=this,$=s;return null==t&&(t=e.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("ConsoleCodes")),$="\nFailures:\n",(n=(r=o.$failure_notifications()).$each_with_index,n.$$p=(a=function(e,n){a.$$s||this;return null==e&&(e=s),null==n&&(n=s),$["$<<"](e.$fully_formatted(n.$next(),t))},a.$$s=o,a),n).call(r),$}),e.defn(r,"$fully_formatted_pending_examples",function(t){var n,r,a,$=this,i=s;return null==t&&(t=e.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("ConsoleCodes")),i="\nPending:\n",(n=(r=$.$pending_examples()).$each,n.$$p=(a=function(e){var n=(a.$$s||this,s);return null==e&&(e=s),n=o.get("RSpec").$configuration().$backtrace_formatter().$backtrace_line(e.$location()),i["$<<"]("  "+t.$wrap(e.$full_description(),"pending")+"\n"+("    # "+t.$wrap(e.$execution_result().$pending_message(),"detail")+"\n")+("    # "+t.$wrap(n,"detail")+"\n"))},a.$$s=$,a),n).call(r),i}),r.$private(),e.defn(r,"$format_examples",function(e){var t,n,r,a=this;return(t=(n=e).$map,t.$$p=(r=function(e){r.$$s||this;return null==e&&(e=s),o.get("ExampleNotification").$for(e)},r.$$s=a,r),t).call(n)}),s&&"format_examples"}(E.base,null),function(r,$super){function a(){}var o,$=a=u(r,$super,"FailedExampleNotification",a),i=$.$$proto,c=$.$$scope;return i.failure_lines=i.shared_group=i.shared_group_line=s,$.$public_class_method("new"),e.defn($,"$exception",function(){var e=this;return e.$example().$execution_result().$exception()}),e.defn($,"$description",function(){var e=this;return e.$example().$full_description()}),e.defn($,"$message_lines",function(){var e=this;return e.$add_shared_group_line(e.$failure_lines(),c.get("NullColorizer"))}),e.defn($,"$colorized_message_lines",function(t){var n,r,a,o=this;return null==t&&(t=e.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("ConsoleCodes")),(n=(r=o.$add_shared_group_line(o.$failure_lines(),t)).$map,n.$$p=(a=function(e){a.$$s||this;return null==e&&(e=s),t.$wrap(e,c.get("RSpec").$configuration().$failure_color())},a.$$s=o,a),n).call(r)}),e.defn($,"$formatted_backtrace",function(){var e=this;return e.$backtrace_formatter().$format_backtrace(e.$exception().$backtrace(),e.$example().$metadata())}),e.defn($,"$colorized_formatted_backtrace",function(t){var n,r,a,o=this;return null==t&&(t=e.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("ConsoleCodes")),(n=(r=o.$formatted_backtrace()).$map,n.$$p=(a=function(e){a.$$s||this;return null==e&&(e=s),t.$wrap("# "+e,c.get("RSpec").$configuration().$detail_color())},a.$$s=o,a),n).call(r)}),e.defn($,"$fully_formatted",function(t,n){var r,a,o,$,i,u=this,l=s;return null==n&&(n=e.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("ConsoleCodes")),l="\n  "+t+") "+u.$description()+"\n",(r=(a=u.$colorized_message_lines(n)).$each,r.$$p=(o=function(e){var t=o.$$s||this;return null==e&&(e=s),l["$<<"](c.get("RSpec").$$scope.get("Support").$$scope.get("EncodedString").$new("     "+e+"\n",t.$encoding_of(l)))},o.$$s=u,o),r).call(a),(r=($=u.$colorized_formatted_backtrace(n)).$each,r.$$p=(i=function(e){var t=i.$$s||this;return null==e&&(e=s),l["$<<"](c.get("RSpec").$$scope.get("Support").$$scope.get("EncodedString").$new("     "+e+"\n",t.$encoding_of(l)))},i.$$s=u,i),r).call($),l}),$.$private(),(o=c.get("String")["$method_defined?"]("encoding"))===s||o.$$is_boolean&&1!=o?e.defn($,"$encoding_of",function(e){return s}):e.defn($,"$encoding_of",function(e){return e.$encoding()}),e.defn($,"$backtrace_formatter",function(){return c.get("RSpec").$configuration().$backtrace_formatter()}),e.defn($,"$exception_class_name",function(){var e=this,t=s;return t=e.$exception().$class().$name().$to_s(),t["$=="]("")&&(t="(anonymous error class)"),t}),e.defn($,"$failure_lines",function(){var e,t,n,r,a=this,o=s;return(e=a.failure_lines)!==!1&&e!==s?e:a.failure_lines=function(){return o=["Failure/Error: "+a.$read_failed_line().$strip()],((t=a.$exception_class_name()["$=~"](/RSpec/))===s||t.$$is_boolean&&1!=t)&&o["$<<"](""+a.$exception_class_name()+":"),(t=(n=a.$exception().$message().$to_s().$split("\n")).$each,t.$$p=(r=function(e){var t,n=r.$$s||this;return null==e&&(e=s),(t=n.$exception().$message())===s||t.$$is_boolean&&1!=t?s:o["$<<"]("  "+e)},r.$$s=a,r),t).call(n),o}()}),e.defn($,"$add_shared_group_line",function(e,t){var n=this;return n.$shared_group_line()["$=="]("")||e["$<<"](t.$wrap(n.$shared_group_line(),c.get("RSpec").$configuration().$default_color())),e}),e.defn($,"$shared_group",function(){var e,t,n,r,a=this;return(e=a.shared_group)!==!1&&e!==s?e:a.shared_group=(t=(n=a.$group_and_parent_groups()).$find,t.$$p=(r=function(e){r.$$s||this;return null==e&&(e=s),e.$metadata()["$[]"]("shared_group_name")},r.$$s=a,r),t).call(n)}),e.defn($,"$shared_group_line",function(){var e,t,n=this;return(e=n.shared_group_line)!==!1&&e!==s?e:n.shared_group_line=function(){return(t=n.$shared_group())===s||t.$$is_boolean&&1!=t?"":'Shared Example Group: "'+n.$shared_group().$metadata()["$[]"]("shared_group_name")+'" called from '+n.$backtrace_formatter().$backtrace_line(n.$shared_group().$location())}()}),e.defn($,"$group_and_parent_groups",function(){var e=this;return t(e.$example().$example_group().$parent_groups(),[e.$example().$example_group()])}),e.defn($,"$read_failed_line",function(){var t,r,a=this,o=s,$=s,i=s;try{return o=a.$find_failed_line(),o===!1||o===s?"Unable to find matching line from backtrace":(r=o.$match(/(.+?):(\d+)(|:\d+)/)["$[]"](l(1,2,!1)),t=e.to_ary(r),$=null==t[0]?s:t[0],i=null==t[1]?s:t[1],r,(t=c.get("File")["$exist?"]($))===s||t.$$is_boolean&&1!=t?"Unable to find "+$+" to read failed line":(t=c.get("File").$readlines($)["$[]"](n(i.$to_i(),1)))!==!1&&t!==s?t:"Unable to find matching line in "+$)}catch(u){if(!e.rescue(u,[c.get("SecurityError")]))throw u;try{return"Unable to read failed line"}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}),e.defn($,"$find_failed_line",function(){var e,t,n,r=this,a=s;return a=c.get("File").$expand_path(r.$example().$file_path()),(e=(t=r.$exception().$backtrace()).$find,e.$$p=(n=function(e){var t,r=(n.$$s||this,s);return null==e&&(e=s),r=e.$match(/(.+?):(\d+)(|:\d+)/),(t=r!==!1&&r!==s)?r["$[]"](1).$downcase()["$=="](a.$downcase()):r},n.$$s=r,n),e).call(t)}),s&&"find_failed_line"}(E.base,E.get("ExampleNotification")),function(t,$super){function n(){}var r=n=u(t,$super,"PendingExampleFixedNotification",n),a=(r.$$proto,r.$$scope);return r.$public_class_method("new"),e.defn(r,"$description",function(){var e=this;return""+e.$example().$full_description()+" FIXED"}),e.defn(r,"$message_lines",function(){var e=this;return["Expected pending '"+e.$example().$execution_result().$pending_message()+"' to fail. No Error was raised."]}),e.defn(r,"$colorized_message_lines",function(t){var n,r,o,$=this;return null==t&&(t=e.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("ConsoleCodes")),(n=(r=$.$message_lines()).$map,n.$$p=(o=function(e){o.$$s||this;return null==e&&(e=s),t.$wrap(e,a.get("RSpec").$configuration().$fixed_color())},o.$$s=$,o),n).call(r)}),s&&"colorized_message_lines"}(E.base,E.get("FailedExampleNotification")),e.cdecl(E,"GroupNotification",E.get("Struct").$new("group")),e.cdecl(E,"MessageNotification",E.get("Struct").$new("message")),e.cdecl(E,"SeedNotification",(d=(h=E.get("Struct")).$new,d.$$p=(m=function(){var t=m.$$s||this;return e.def(t,"$seed_used?",function(){var e=this;return e.$used()["$!"]()["$!"]()}),t.$private("used"),e.def(t,"$fully_formatted",function(){var e=this;return"\nRandomized with seed "+e.$seed()+"\n\n"}),s&&"fully_formatted"},m.$$s=S,m),d).call(h,"seed","used")),e.cdecl(E,"SummaryNotification",(d=(v=E.get("Struct")).$new,d.$$p=(b=function(){var n=b.$$s||this;return e.def(n,"$example_count",function(){var e,t=this;return null==t.example_count&&(t.example_count=s),(e=t.example_count)!==!1&&e!==s?e:t.example_count=t.$examples().$size()}),e.def(n,"$failure_count",function(){var e,t=this;return null==t.failure_count&&(t.failure_count=s),(e=t.failure_count)!==!1&&e!==s?e:t.failure_count=t.$failed_examples().$size()}),e.def(n,"$pending_count",function(){var e,t=this;return null==t.pending_count&&(t.pending_count=s),(e=t.pending_count)!==!1&&e!==s?e:t.pending_count=t.$pending_examples().$size()}),e.def(n,"$totals_line",function(){var e=this,t=s;return t=E.get("Formatters").$$scope.get("Helpers").$pluralize(e.$example_count(),"example"),t["$<<"](", ")["$<<"](E.get("Formatters").$$scope.get("Helpers").$pluralize(e.$failure_count(),"failure")),r(e.$pending_count(),0)&&t["$<<"](", "+e.$pending_count()+" pending"),t}),e.def(n,"$colorized_totals_line",function(t){var n=this;return null==t&&(t=e.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("ConsoleCodes")),r(n.$failure_count(),0)?t.$wrap(n.$totals_line(),E.get("RSpec").$configuration().$failure_color()):r(n.$pending_count(),0)?t.$wrap(n.$totals_line(),E.get("RSpec").$configuration().$pending_color()):t.$wrap(n.$totals_line(),E.get("RSpec").$configuration().$success_color())}),e.def(n,"$colorized_rerun_commands",function(n){var r,a,o,$=this;return null==n&&(n=e.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("ConsoleCodes")),t("\nFailed examples:\n\n",(r=(a=$.$failed_examples()).$map,r.$$p=(o=function(e){o.$$s||this;return null==e&&(e=s),t(t(n.$wrap("rspec "+e.$location(),E.get("RSpec").$configuration().$failure_color())," "),n.$wrap("# "+e.$full_description(),E.get("RSpec").$configuration().$detail_color()))},o.$$s=$,o),r).call(a).$join("\n"))}),e.def(n,"$formatted_duration",function(){var e=this;return E.get("Formatters").$$scope.get("Helpers").$format_duration(e.$duration())}),e.def(n,"$formatted_load_time",function(){var e=this;return E.get("Formatters").$$scope.get("Helpers").$format_duration(e.$load_time())}),e.def(n,"$fully_formatted",function(t){var n,r=this,a=s;return null==t&&(t=e.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("ConsoleCodes")),a="\nFinished in "+r.$formatted_duration()+" "+("(files took "+r.$formatted_load_time()+" to load)\n")+(""+r.$colorized_totals_line(t)+"\n"),((n=r.$failed_examples()["$empty?"]())===s||n.$$is_boolean&&1!=n)&&a["$<<"](r.$colorized_rerun_commands(t))["$<<"]("\n"),a}),s&&"fully_formatted"},b.$$s=S,b),d).call(v,"duration","examples","failed_examples","pending_examples","load_time")),e.cdecl(E,"ProfileNotification",(d=(y=E.get("Struct")).$new,d.$$p=(x=function(){var n=x.$$s||this;return e.def(n,"$slowest_examples",function(){var e,t,n,r,a=this;return null==a.slowest_examples&&(a.slowest_examples=s),(e=a.slowest_examples)!==!1&&e!==s?e:a.slowest_examples=(t=(n=a.$examples()).$sort_by,t.$$p=(r=function(e){r.$$s||this;return null==e&&(e=s),e.$execution_result().$run_time()["$-@"]()},r.$$s=a,r),t).call(n).$first(a.$number_of_examples())}),e.def(n,"$slow_duration",function(){var e,n,r,a,o=this;return null==o.slow_duration&&(o.slow_duration=s),(e=o.slow_duration)!==!1&&e!==s?e:o.slow_duration=(n=(r=o.$slowest_examples()).$inject,n.$$p=(a=function(e,n){a.$$s||this;return null==e&&(e=s),null==n&&(n=s),t(e,n.$execution_result().$run_time())},a.$$s=o,a),n).call(r,0)}),e.def(n,"$percentage",function(){var e,t,n=this,r=s;return null==n.percentage&&(n.percentage=s),(e=n.percentage)!==!1&&e!==s?e:n.percentage=function(){return r=a(n.$slow_duration(),n.$duration()),"%.1f"["$%"](o(function(){return(t=r["$nan?"]())===s||t.$$is_boolean&&1!=t?r:0}(),100))}()}),e.def(n,"$slowest_groups",function(){var e,t=this;return null==t.slowest_groups&&(t.slowest_groups=s),(e=t.slowest_groups)!==!1&&e!==s?e:t.slowest_groups=t.$calculate_slowest_groups()}),n.$private(),e.def(n,"$calculate_slowest_groups",function(){var e,n,r,o,i,c,u,l=this,p=s;return p=_([],{}),(e=(n=l.$examples()).$each,e.$$p=(r=function(e){var n,a,o,$=(r.$$s||this,s),i=s;return null==e&&(e=s),$=e.$example_group().$parent_groups().$last().$metadata()["$[]"]("location"),n=$,a=p,i=(o=a["$[]"](n))!==!1&&o!==s?o:a["$[]="](n,E.get("Hash").$new(0)),n="total_time",a=i,a["$[]="](n,t(a["$[]"](n),e.$execution_result().$run_time())),n="count",a=i,a["$[]="](n,t(a["$[]"](n),1)),(n=i["$key?"]("description"))===s||n.$$is_boolean&&1!=n?i["$[]="]("description",e.$example_group().$top_level_description()):s},r.$$s=l,r),e).call(n),$(p.$keys().$length(),1)?_([],{}):((e=(o=p).$each_value,e.$$p=(i=function(e){i.$$s||this;return null==e&&(e=s),e["$[]="]("average",a(e["$[]"]("total_time").$to_f(),e["$[]"]("count")))},i.$$s=l,i),e).call(o),(e=(c=p).$sort_by,e.$$p=(u=function(e,t){u.$$s||this;return null==e&&(e=s),null==t&&(t=s),t["$[]"]("average")["$-@"]()},u.$$s=l,u),e).call(c).$first(l.$number_of_examples()))}),s&&"calculate_slowest_groups"},x.$$s=S,x),d).call(y,"duration","examples","number_of_examples")),e.cdecl(E,"DeprecationNotification",(d=(w=E.get("Struct")).$new,d.$$p=(k=function(){var t=k.$$s||this;return t.$private_class_method("new"),e.defs(t,"$from_hash",function(e){var t=this;return t.$new(e["$[]"]("deprecated"),e["$[]"]("message"),e["$[]"]("replacement"),e["$[]"]("call_site"))}),s&&"from_hash"},k.$$s=S,k),d).call(w,"deprecated","message","replacement","call_site")),function(e,$super){function t(){}var n=t=u(e,$super,"NullNotification",t);n.$$proto,n.$$scope;return s}(E.base,null)}(f.base)}(i.get("RSpec"))},Opal.modules["rspec/core/option_parser"]=function(e){e.dynamic_require_severity="ignore";var t=e.top,n=e,r=e.nil,a=(e.breaker,e.slice,e.module),o=e.klass,$=e.hash2,i=e.gvars,s=e.range;return e.add_stubs(["$require","$parse","$new","$empty?","$delete","$parse!","$parser","$abort","$message","$banner=","$on","$[]","$[]=","$<<","$to_i","$require_rspec_core","$run","$exit","$separator","$last","$nil?","$==","$Integer","$warning","$compile","$escape","$=~","$split","$gsub","$to_sym","$===","$Float","$puts","$on_tail","$to_s","$join","$each","$raise"]),t.$require("optparse"),function(t){var n,c=n=a(t,"Core"),u=(c.$$proto,c.$$scope);!function(t,$super){function n(){}var a=n=o(t,$super,"Parser",n),c=(a.$$proto,a.$$scope);return e.defs(a,"$parse",function(e){var t=this;return t.$new().$parse(e)}),e.defn(a,"$parse",function(t){var n,a=this,o=r,i=r;if((n=t["$empty?"]())!==r&&(!n.$$is_boolean||1==n))return $([],{});o=function(){return(n=t.$delete("--tty"))===r||n.$$is_boolean&&1!=n?$([],{}):$(["tty"],{tty:!0})}();try{a.$parser(o)["$parse!"](t)}catch(s){if(!e.rescue(s,[c.get("OptionParser").$$scope.get("InvalidOption")]))throw s;i=s;try{a.$abort(""+i.$message()+"\n\nPlease use --help for a listing of valid options")}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}return o}),e.defn(a,"$parser",function(t){var n,a,o,u=this;return(n=(a=c.get("OptionParser")).$new,n.$$p=(o=function(n){var a,u,l,_,p,d,f,g,h,m,v,b,y,x,w,k,S,E,R,A,O,M,q,z,C,I,N,j,T,P,F,D,B,H,L,U,G,Y,V,W,K,X,Z,J,Q,ee,te,ne,re,ae,oe,$e,ie,se,ce,ue=o.$$s||this,le=r;return null==n&&(n=r),a=["Usage: rspec [options] [files or directories]\n\n"],u=n,u["$banner="].apply(u,a),a[a.length-1],(a=(u=n).$on,a.$$p=(l=function(e){var n,a,o;l.$$s||this;return null==e&&(e=r),n="libs",a=t,(o=a["$[]"](n))!==!1&&o!==r?o:a["$[]="](n,[]),t["$[]"]("libs")["$<<"](e)},l.$$s=ue,l),a).call(u,"-I PATH","Specify PATH to add to $LOAD_PATH (may be used more than once)."),(a=(_=n).$on,a.$$p=(p=function(e){var n,a,o;p.$$s||this;return null==e&&(e=r),n="requires",a=t,(o=a["$[]"](n))!==!1&&o!==r?o:a["$[]="](n,[]),t["$[]"]("requires")["$<<"](e)},p.$$s=ue,p),a).call(_,"-r","--require PATH","Require a file."),(a=(d=n).$on,a.$$p=(f=function(e){f.$$s||this;return null==e&&(e=r),t["$[]="]("custom_options_file",e)},f.$$s=ue,f),a).call(d,"-O","--options PATH","Specify the path to a custom options file."),(a=(g=n).$on,a.$$p=(h=function(e){h.$$s||this;return null==e&&(e=r),t["$[]="]("order",e)},h.$$s=ue,h),a).call(g,"--order TYPE[:SEED]","Run examples by the specified order type.","  [defined] examples and groups are run in the order they are defined","  [rand]    randomize the order of groups and examples","  [random]  alias for rand","  [random:SEED] e.g. --order random:123"),(a=(m=n).$on,a.$$p=(v=function(e){v.$$s||this;return null==e&&(e=r),t["$[]="]("order","rand:"+e)},v.$$s=ue,v),a).call(m,"--seed SEED",c.get("Integer"),"Equivalent of --order rand:SEED."),(a=(b=n).$on,a.$$p=(y=function(e){y.$$s||this;return null==e&&(e=r),t["$[]="]("fail_fast",!0)},y.$$s=ue,y),a).call(b,"--fail-fast","Abort the run on first failure."),(a=(x=n).$on,a.$$p=(w=function(e){w.$$s||this;return null==e&&(e=r),t["$[]="]("fail_fast",!1)},w.$$s=ue,w),a).call(x,"--no-fail-fast","Do not abort the run on first failure."),(a=(k=n).$on,a.$$p=(S=function(e){S.$$s||this;return null==e&&(e=r),t["$[]="]("failure_exit_code",e)},S.$$s=ue,S),a).call(k,"--failure-exit-code CODE",c.get("Integer"),"Override the exit code used when there are failing specs."),(a=(E=n).$on,a.$$p=(R=function(e){R.$$s||this;return null==e&&(e=r),t["$[]="]("dry_run",!0)},R.$$s=ue,R),a).call(E,"--dry-run","Print the formatter output of your suite without","  running any examples or hooks"),(a=(A=n).$on,a.$$p=(O=function(e){O.$$s||this;return null==e&&(e=r),t["$[]="]("drb",e)},O.$$s=ue,O),a).call(A,"-X","--[no-]drb","Run examples via DRb."),(a=(M=n).$on,a.$$p=(q=function(e){q.$$s||this;return null==e&&(e=r),t["$[]="]("drb_port",e.$to_i())},q.$$s=ue,q),a).call(M,"--drb-port PORT","Port to connect to the DRb server."),(a=(z=n).$on,a.$$p=(C=function(e){var t=C.$$s||this;return null==e&&(e=r),c.get("RSpec").$$scope.get("Support").$require_rspec_core("project_initializer"),c.get("ProjectInitializer").$new().$run(),t.$exit()},C.$$s=ue,C),a).call(z,"--init","Initialize your project with RSpec."),n.$separator("\n  **** Output ****\n\n"),(a=(I=n).$on,a.$$p=(N=function(e){var n,a,o;N.$$s||this;return null==e&&(e=r),n="formatters",a=t,(o=a["$[]"](n))!==!1&&o!==r?o:a["$[]="](n,[]),t["$[]"]("formatters")["$<<"]([e])},N.$$s=ue,N),a).call(I,"-f","--format FORMATTER","Choose a formatter.","  [p]rogress (default - dots)","  [d]ocumentation (group and example names)","  [h]tml","  [j]son","  custom formatter class name"),(a=(j=n).$on,a.$$p=(T=function(e){var n,a,o;T.$$s||this;return null==e&&(e=r),n="formatters",a=t,(o=a["$[]"](n))!==!1&&o!==r?o:a["$[]="](n,[["progress"]]),t["$[]"]("formatters").$last()["$<<"](e)},T.$$s=ue,T),a).call(j,"-o","--out FILE","Write output to a file instead of $stdout. This option applies","  to the previously specified --format, or the default format","  if no format is specified."),(a=(P=n).$on,a.$$p=(F=function(e){F.$$s||this;return null==e&&(e=r),t["$[]="]("deprecation_stream",e)},F.$$s=ue,F),a).call(P,"--deprecation-out FILE","Write deprecation warnings to a file instead of $stderr."),(a=(D=n).$on,a.$$p=(B=function(e){B.$$s||this;return null==e&&(e=r),t["$[]="]("full_backtrace",!0)},B.$$s=ue,B),a).call(D,"-b","--backtrace","Enable full backtrace."),(a=(H=n).$on,a.$$p=(L=function(e){L.$$s||this;return null==e&&(e=r),t["$[]="]("color",e)},L.$$s=ue,L),a).call(H,"-c","--[no-]color","--[no-]colour","Enable color in the output."),(a=(U=n).$on,a.$$p=(G=function(n){var a,o=G.$$s||this;return null==n&&(n=r),t["$[]="]("profile_examples",function(){if(!((a=n["$nil?"]())===r||a.$$is_boolean&&1!=a))return!0;if(n["$=="](!1))return!1;try{return o.$Integer(n)}catch(t){if(!e.rescue(t,[c.get("ArgumentError")]))throw t;try{return c.get("RSpec").$warning("Non integer specified as profile count, seperate your path from options with -- e.g. "+("`rspec --profile -- "+n+"`"),$(["call_site"],{call_site:r})),!0}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}return r}())},G.$$s=ue,G),a).call(U,"-p","--[no-]profile [COUNT]","Enable profiling of examples and list the slowest examples (default: 10)."),(a=(Y=n).$on,a.$$p=(V=function(){V.$$s||this;return i.VERBOSE=!0},V.$$s=ue,V),a).call(Y,"-w","--warnings","Enable ruby warnings"),n.$separator("\n  **** Filtering/tags ****\n\n    In addition to the following options for selecting specific files, groups,\n    or examples, you can select a single example by appending the line number to\n    the filename:\n\n      rspec path/to/a_spec.rb:37\n\n"),(a=(W=n).$on,a.$$p=(K=function(e){K.$$s||this;return null==e&&(e=r),t["$[]="]("pattern",e)},K.$$s=ue,K),a).call(W,"-P","--pattern PATTERN",'Load files matching pattern (default: "spec/**/*_spec.rb").'),(a=(X=n).$on,a.$$p=(Z=function(e){Z.$$s||this;return null==e&&(e=r),t["$[]="]("exclude_pattern",e)},Z.$$s=ue,Z),a).call(X,"--exclude-pattern PATTERN","Load files except those matching pattern. Opposite effect of --pattern."),(a=(J=n).$on,a.$$p=(Q=function(e){var n,a,o;Q.$$s||this;return null==e&&(e=r),(n="full_description",a=t,(o=a["$[]"](n))!==!1&&o!==r?o:a["$[]="](n,[]))["$<<"](c.get("Regexp").$compile(c.get("Regexp").$escape(e)))},Q.$$s=ue,Q),a).call(J,"-e","--example STRING","Run examples whose full nested names include STRING (may be","  used more than once)"),(a=(ee=n).$on,a.$$p=(te=function(n){var a,o,i,c=te.$$s||this,u=r,l=r,_=r,p=r;return null==n&&(n=r),u=function(){return(a=n["$=~"](/^~/))===r||a.$$is_boolean&&1!=a?"inclusion_filter":"exclusion_filter"}(),o=n.$gsub(/^(~@|~|@)/,"").$split(":",2),a=e.to_ary(o),l=null==a[0]?r:a[0],_=null==a[1]?r:a[1],o,l=l.$to_sym(),a=u,o=t,(i=o["$[]"](a))!==!1&&i!==r?i:o["$[]="](a,$([],{})),t["$[]"](u)["$[]="](l,function(){return p=_,r["$==="](p)?!0:"true"["$==="](p)?!0:"false"["$==="](p)?!1:"nil"["$==="](p)?r:/^:/["$==="](p)?_["$[]"](s(1,-1,!1)).$to_sym():/^\d+$/["$==="](p)?c.$Integer(_):/^\d+.\d+$/["$==="](p)?c.$Float(_):_}())},te.$$s=ue,te),a).call(ee,"-t","--tag TAG[:VALUE]","Run examples with the specified tag, or exclude examples","by adding ~ before the tag.","  - e.g. ~slow","  - TAG is always converted to a symbol"),(a=(ne=n).$on,a.$$p=(re=function(e){re.$$s||this;return null==e&&(e=r),t["$[]="]("default_path",e)},re.$$s=ue,re),a).call(ne,"--default-path PATH","Set the default path where RSpec looks for examples (can","  be a path to a file or a directory)."),n.$separator("\n  **** Utility ****\n\n"),(a=(ae=n).$on,a.$$p=(oe=function(){var e=oe.$$s||this;return e.$puts(c.get("RSpec").$$scope.get("Core").$$scope.get("Version").$$scope.get("STRING")),e.$exit()},oe.$$s=ue,oe),a).call(ae,"-v","--version","Display the version."),le=["-d","--I"],(a=($e=n).$on_tail,a.$$p=(ie=function(){var e=ie.$$s||this;return e.$puts(n.$to_s().$gsub(new RegExp("^\\s+("+le.$join("|")+")\\s*$\\n"),"")),e.$exit()},ie.$$s=ue,ie),a).call($e,"-h","--help","You're looking at it."),(a=(se=le).$each,a.$$p=(ce=function(e){var t,a,o,$=ce.$$s||this;return null==e&&(e=r),(t=(a=n).$on,t.$$p=(o=function(){var e=o.$$s||this;return e.$raise(c.get("OptionParser").$$scope.get("InvalidOption").$new())},o.$$s=$,o),t).call(a,e)},ce.$$s=ue,ce),a).call(se)},o.$$s=u,o),n).call(a)}),r&&"parser"}(u.base,null)}(n.get("RSpec"))},Opal.modules["rspec/core/ordering"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.dynamic_require_severity="ignore";var a=(e.top,e),o=e.nil,$=e.breaker,i=(e.slice,e.module),s=e.klass,c=e.hash2;return e.add_stubs(["$require_rspec_core","$new","$seed","$shuffle","$>","$dup","$times","$+","$rand","$-","$size","$==","$[]","$[]=","$call","$register","$fetch","$to_proc","$used?","$attr_reader","$used_random_seed?","$ordering_registry","$register_ordering","$to_i","$split","$to_s","$include?","$key?","$seed=","$order="]),function(a){var u,l=u=i(a,"RSpec"),_=(l.$$proto,l.$$scope);!function(a){var u,l,_=u=i(a,"Core"),p=(_.$$proto,_.$$scope);(l=null==e.Object.$$scope.Random?o:"constant")===o||l.$$is_boolean&&1!=l?(p.get("RSpec").$$scope.get("Support").$require_rspec_core("backport_random"),e.cdecl(p,"RandomNumberGenerator",p.get("RSpec").$$scope.get("Core").$$scope.get("Backports").$$scope.get("Random"))):e.cdecl(p,"RandomNumberGenerator",e.get("Random")),function(a){var u,l=u=i(a,"Ordering"),_=(l.$$proto,l.$$scope);!function(t,$super){function n(){}var r=n=s(t,$super,"Identity",n);r.$$proto,r.$$scope;return e.defn(r,"$order",function(e){return e}),o&&"order"}(_.base,null),function(a,$super){function $(){}var i=$=s(a,$super,"Random",$),u=i.$$proto,l=i.$$scope;return u.used=u.configuration=o,e.defn(i,"$initialize",function(e){var t=this;return t.configuration=e,t.used=!1}),e.defn(i,"$used?",function(){var e=this;return e.used}),e.defn(i,"$order",function(e){var t=this,n=o;return t.used=!0,n=l.get("RandomNumberGenerator").$new(t.configuration.$seed()),t.$shuffle(e,n)}),t(l.get("RUBY_VERSION"),"1.9.3")?(e.defn(i,"$shuffle",function(e,t){return e.$shuffle(c(["random"],{random:t}))}),o&&"shuffle"):(e.defn(i,"$shuffle",function(e,t){var a,$,i,s=this,c=o;return c=e.$dup(),(a=($=c.$size()).$times,a.$$p=(i=function(e){var a,$=(i.$$s||this,o);return null==e&&(e=o),$=n(e,t.$rand(r(c.$size(),e))),e["$=="]($)?o:(a=[c["$[]"]($),c["$[]"](e)],c["$[]="](e,a[0]),c["$[]="]($,a[1]),a)},i.$$s=s,i),a).call($),c}),o&&"shuffle")}(_.base,null),function(t,$super){function n(){}var r=n=s(t,$super,"Custom",n),a=r.$$proto;r.$$scope;return a.callable=o,e.defn(r,"$initialize",function(e){var t=this;return t.callable=e}),e.defn(r,"$order",function(e){var t=this;return t.callable.$call(e)}),o&&"order"}(_.base,null),function(t,$super){function n(){}var r,a=n=s(t,$super,"Registry",n),$=a.$$proto,i=a.$$scope;return $.strategies=o,e.defn(a,"$initialize",function(e){var t=this,n=o;return t.configuration=e,t.strategies=c([],{}),t.$register("random",i.get("Random").$new(e)),n=i.get("Identity").$new(),t.$register("defined",n),t.$register("global",n)}),e.defn(a,"$fetch",r=function(e){var t,n,a=this,$=r.$$p,i=$||o;return r.$$p=null,(t=(n=a.strategies).$fetch,t.$$p=i.$to_proc(),t).call(n,e)}),e.defn(a,"$register",function(e,t){var n=this;return n.strategies["$[]="](e,t)}),e.defn(a,"$used_random_seed?",function(){var e=this;return e.strategies["$[]"]("random")["$used?"]()}),o&&"used_random_seed?"}(_.base,null),function(t,$super){function n(){}var r,a=n=s(t,$super,"ConfigurationManager",n),i=a.$$proto,c=a.$$scope;return i.seed_forced=i.order_forced=o,a.$attr_reader("seed","ordering_registry"),e.defn(a,"$initialize",function(){var e=this;return e.ordering_registry=c.get("Registry").$new(e),e.seed=e.$rand(65535),e.seed_forced=!1,e.order_forced=!1}),e.defn(a,"$seed_used?",function(){var e=this;return e.$ordering_registry()["$used_random_seed?"]()}),e.defn(a,"$seed=",function(e){var t,n=this;return(t=n.seed_forced)===o||t.$$is_boolean&&1!=t?(n.$register_ordering("global",n.$ordering_registry().$fetch("random")),n.seed=e.$to_i()):o}),e.defn(a,"$order=",function(t){var n,r,a=this,$=o,i=o,s=o;return r=t.$to_s().$split(":"),n=e.to_ary(r),$=null==n[0]?o:n[0],i=null==n[1]?o:n[1],r,i!==!1&&i!==o&&(a.seed=i.$to_i()),s=function(){return(n=$["$include?"]("rand"))===o||n.$$is_boolean&&1!=n?$["$=="]("defined")?"defined":o:"random"}(),s!==!1&&s!==o?a.$register_ordering("global",a.$ordering_registry().$fetch(s)):o}),e.defn(a,"$force",function(e){var t,n,r=this;return(t=e["$key?"]("seed"))===o||t.$$is_boolean&&1!=t?(t=e["$key?"]("order"))===o||t.$$is_boolean&&1!=t?o:(t=[e["$[]"]("order")],n=r,n["$order="].apply(n,t),t[t.length-1],r.order_forced=!0):(t=[e["$[]"]("seed")],n=r,n["$seed="].apply(n,t),t[t.length-1],r.seed_forced=!0,r.order_forced=!0)}),e.defn(a,"$register_ordering",r=function(t,n){var a,i,s,u=this,l=r.$$p,_=l||o;return null==n&&(n=c.get("Custom").$new((a=(i=c.get("Proc")).$new,a.$$p=(s=function(t){var n;s.$$s||this;return null==t&&(t=o),n=e.yield1(_,t),n===$?n:n},s.$$s=u,s),a).call(i))),r.$$p=null,i=u.order_forced,(a=i!==!1&&i!==o?t["$=="]("global"):i)===o||a.$$is_boolean&&1!=a?u.$ordering_registry().$register(t,n):o}),o&&"register_ordering"}(_.base,null)}(p.base)}(_.base)}(a.base)},Opal.modules["rspec/core/pending"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass;return e.add_stubs(["$attr_reader","$current_example","$raise","$gsub","$first_non_rspec_line","$mark_pending!","$mark_skipped!","$new","$[]=","$metadata","$!","$===","$pending_message=","$execution_result","$pending_fixed="]),function(t){var o,$=o=r(t,"RSpec"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"Core"),i=($.$$proto,$.$$scope);!function(t){var o,$,i=o=r(t,"Pending"),s=(i.$$proto,i.$$scope);!function(t,$super){function r(){}var o=r=a(t,$super,"SkipDeclaredInExample",r);o.$$proto,o.$$scope;return o.$attr_reader("argument"),e.defn(o,"$initialize",function(e){var t=this;return t.argument=e}),n&&"initialize"}(s.base,s.get("StandardError"));try{!function(e,$super){function t(){}var r=t=a(e,$super,"PendingExampleFixedError",t);
r.$$proto,r.$$scope;return n}(s.base,s.get("Test").$$scope.get("Unit").$$scope.get("AssertionFailedError"))}catch(c){try{!function(e,$super){function t(){}var r=t=a(e,$super,"PendingExampleFixedError",t);r.$$proto,r.$$scope;return n}(s.base,s.get("StandardError"))}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}e.cdecl(s,"NO_REASON_GIVEN","No reason given"),e.cdecl(s,"NOT_YET_IMPLEMENTED","Not yet implemented"),e.defn(i,"$pending",$=function(e){var t=this,r=$.$$p,a=r||n,o=n;return null==e&&(e=n),$.$$p=null,o=s.get("RSpec").$current_example(),a!==n?t.$raise(s.get("ArgumentError"),("            |The semantics of `RSpec::Core::Pending#pending` have changed in\n            |RSpec 3.  In RSpec 2.x, it caused the example to be skipped. In\n            |RSpec 3, the rest of the example is still run but is expected to\n            |fail, and will be marked as a failure (rather than as pending) if\n            |the example passes.\n            |\n            |Passing a block within an example is now deprecated. Marking the\n            |example as pending provides the same behavior in RSpec 3 which was\n            |provided only by the block in RSpec 2.x.\n            |\n            |Move the code in the block provided to `pending` into the rest of\n            |the example body.\n            |\n            |Called from "+s.get("CallerFilter").$first_non_rspec_line()+".\n            |\n").$gsub(/^\s+\|/,"")):o!==!1&&o!==n?s.get("Pending")["$mark_pending!"](o,e):t.$raise("`pending` may not be used outside of examples, such as in before(:context). Maybe you want `skip`?")}),e.defn(i,"$skip",function(e){var t=this,r=n;return null==e&&(e=n),r=s.get("RSpec").$current_example(),r!==!1&&r!==n&&s.get("Pending")["$mark_skipped!"](r,e),t.$raise(s.get("SkipDeclaredInExample").$new(e))}),e.defs(i,"$mark_skipped!",function(e,t){return s.get("Pending")["$mark_pending!"](e,t),e.$metadata()["$[]="]("skip",!0)}),e.defs(i,"$mark_pending!",function(e,t){var r,a,o=n;return o=function(){return(r=(a=t["$!"]())!==!1&&a!==n?a:s.get("String")["$==="](t)["$!"]())===n||r.$$is_boolean&&1!=r?t:s.get("NO_REASON_GIVEN")}(),e.$metadata()["$[]="]("pending",!0),r=[o],a=e.$execution_result(),a["$pending_message="].apply(a,r),r[r.length-1],r=[!1],a=e.$execution_result(),a["$pending_fixed="].apply(a,r),r[r.length-1]}),e.defs(i,"$mark_fixed!",function(e){var t,n;return t=[!0],n=e.$execution_result(),n["$pending_fixed="].apply(n,t),t[t.length-1]})}(i.base)}(i.base)}(t.base)},Opal.modules["rspec/core/reporter"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.dynamic_require_severity="ignore";var r=(e.top,e),a=e.nil,o=e.breaker,$=(e.slice,e.module),i=e.klass;return e.add_stubs(["$new","$[]=","$attr_reader","$each","$<<","$[]","$to_sym","$to_a","$start","$finish","$to_f","$-","$start_time","$notify","$now","$empty?","$descendant_filtered_examples","$for","$from_hash","$stop","$mute_profile_output?","$profile_examples","$seed","$seed_used?","$__send__","$registered_listeners","$private","$!","$profile_examples?","$fail_fast?","$>","$size"]),function(r){var s,c=s=$(r,"Core"),u=(c.$$proto,c.$$scope);!function(r,$super){function $(){}var s,c=$=i(r,$super,"Reporter",$),u=c.$$proto,l=c.$$scope;return u.listeners=u.start=u.configuration=u.load_time=u.examples=u.failed_examples=u.pending_examples=u.duration=a,e.defn(c,"$initialize",function(e){var t,n,r,o=this;return o.configuration=e,o.listeners=(t=(n=l.get("Hash")).$new,t.$$p=(r=function(e,t){r.$$s||this;return null==e&&(e=a),null==t&&(t=a),e["$[]="](t,l.get("Set").$new())},r.$$s=o,r),t).call(n),o.examples=[],o.failed_examples=[],o.pending_examples=[],o.duration=o.start=o.load_time=a}),c.$attr_reader("examples","failed_examples","pending_examples"),e.defn(c,"$register_listener",function(e){var t,n,r,o=this,$=a,i=arguments.length-1;0>i&&(i=0);var s=new Array(i);for($=0;i>$;$++)s[$]=arguments[$+1];return(t=(n=s).$each,t.$$p=(r=function(t){var n=r.$$s||this;return null==n.listeners&&(n.listeners=a),null==t&&(t=a),n.listeners["$[]"](t.$to_sym())["$<<"](e)},r.$$s=o,r),t).call(n),!0}),e.defn(c,"$registered_listeners",function(e){var t=this;return t.listeners["$[]"](e).$to_a()}),e.defn(c,"$report",s=function(t){var n,r=this,$=s.$$p,i=$||a;s.$$p=null,r.$start(t);try{return n=e.yield1(i,r),n===o?n:n}finally{r.$finish()}}),e.defn(c,"$start",function(e,n){var r=this;return null==n&&(n=l.get("RSpec").$$scope.get("Core").$$scope.get("Time").$now()),r.start=n,r.load_time=t(r.start,r.configuration.$start_time()).$to_f(),r.$notify("start",l.get("Notifications").$$scope.get("StartNotification").$new(e,r.load_time))}),e.defn(c,"$message",function(e){var t=this;return t.$notify("message",l.get("Notifications").$$scope.get("MessageNotification").$new(e))}),e.defn(c,"$example_group_started",function(e){var t,n=this;return(t=e.$descendant_filtered_examples()["$empty?"]())===a||t.$$is_boolean&&1!=t?n.$notify("example_group_started",l.get("Notifications").$$scope.get("GroupNotification").$new(e)):a}),e.defn(c,"$example_group_finished",function(e){var t,n=this;return(t=e.$descendant_filtered_examples()["$empty?"]())===a||t.$$is_boolean&&1!=t?n.$notify("example_group_finished",l.get("Notifications").$$scope.get("GroupNotification").$new(e)):a}),e.defn(c,"$example_started",function(e){var t=this;return t.examples["$<<"](e),t.$notify("example_started",l.get("Notifications").$$scope.get("ExampleNotification").$for(e))}),e.defn(c,"$example_passed",function(e){var t=this;return t.$notify("example_passed",l.get("Notifications").$$scope.get("ExampleNotification").$for(e))}),e.defn(c,"$example_failed",function(e){var t=this;return t.failed_examples["$<<"](e),t.$notify("example_failed",l.get("Notifications").$$scope.get("ExampleNotification").$for(e))}),e.defn(c,"$example_pending",function(e){var t=this;return t.pending_examples["$<<"](e),t.$notify("example_pending",l.get("Notifications").$$scope.get("ExampleNotification").$for(e))}),e.defn(c,"$deprecation",function(e){var t=this;return t.$notify("deprecation",l.get("Notifications").$$scope.get("DeprecationNotification").$from_hash(e))}),e.defn(c,"$finish",function(){var e,t=this;try{return t.$stop(),t.$notify("start_dump",l.get("Notifications").$$scope.get("NullNotification")),t.$notify("dump_pending",l.get("Notifications").$$scope.get("ExamplesNotification").$new(t)),t.$notify("dump_failures",l.get("Notifications").$$scope.get("ExamplesNotification").$new(t)),t.$notify("deprecation_summary",l.get("Notifications").$$scope.get("NullNotification")),t.$notify("dump_summary",l.get("Notifications").$$scope.get("SummaryNotification").$new(t.duration,t.examples,t.failed_examples,t.pending_examples,t.load_time)),((e=t["$mute_profile_output?"]())===a||e.$$is_boolean&&1!=e)&&t.$notify("dump_profile",l.get("Notifications").$$scope.get("ProfileNotification").$new(t.duration,t.examples,t.configuration.$profile_examples())),t.$notify("seed",l.get("Notifications").$$scope.get("SeedNotification").$new(t.configuration.$seed(),t["$seed_used?"]()))}finally{t.$notify("close",l.get("Notifications").$$scope.get("NullNotification"))}}),e.defn(c,"$stop",function(){var e,n=this;return(e=n.start)===a||e.$$is_boolean&&1!=e||(n.duration=t(l.get("RSpec").$$scope.get("Core").$$scope.get("Time").$now(),n.start).$to_f()),n.$notify("stop",l.get("Notifications").$$scope.get("ExamplesNotification").$new(n))}),e.defn(c,"$notify",function(e,t){var n,r,o,$=this;return(n=(r=$.$registered_listeners(e)).$each,n.$$p=(o=function(n){o.$$s||this;return null==n&&(n=a),n.$__send__(e,t)},o.$$s=$,o),n).call(r)}),c.$private(),e.defn(c,"$mute_profile_output?",function(){var e,t,r=this;return(e=r.configuration["$profile_examples?"]()["$!"]())!==!1&&e!==a?e:(t=r.configuration["$fail_fast?"](),t!==!1&&t!==a?n(r.failed_examples.$size(),0):t)}),e.defn(c,"$seed_used?",function(){var e,t=this;return e=t.configuration.$seed(),e!==!1&&e!==a?t.configuration["$seed_used?"]():e}),a&&"seed_used?"}(u.base,null)}(r.get("RSpec"))},Opal.modules["rspec/core/ruby_project"]=function(e){e.dynamic_require_severity="ignore";var t=e.top,n=e,r=e.nil,a=e.breaker,o=(e.slice,e.module),$=e.gvars;return e.add_stubs(["$require","$map","$add_dir_to_load_path","$join","$root","$include?","$unshift","$determine_root","$find_first_parent_containing","$ascend_until","$exist?","$ascend","$Pathname","$expand_path","$module_function"]),t.$require("pathname"),function(t){var n,i=n=o(t,"RSpec"),s=(i.$$proto,i.$$scope);!function(t){var n,i=n=o(t,"Core"),s=(i.$$proto,i.$$scope);!function(t){var n,i,s=n=o(t,"RubyProject"),c=(s.$$proto,s.$$scope);e.defn(s,"$add_to_load_path",function(){var e,t,n,a=this,o=r,$=arguments.length-0;0>$&&($=0);var i=new Array($);for(o=0;$>o;o++)i[o]=arguments[o+0];return(e=(t=i).$map,e.$$p=(n=function(e){var t=n.$$s||this;return null==e&&(e=r),t.$add_dir_to_load_path(c.get("File").$join(t.$root(),e))},n.$$s=a,n),e).call(t)}),e.defn(s,"$add_dir_to_load_path",function(e){var t;return null==$.LOAD_PATH&&($.LOAD_PATH=r),(t=$.LOAD_PATH["$include?"](e))===r||t.$$is_boolean&&1!=t?$.LOAD_PATH.$unshift(e):r}),e.defn(s,"$root",function(){var e,t=this;return null==t.project_root&&(t.project_root=r),(e=t.project_root)!==!1&&e!==r?e:t.project_root=t.$determine_root()}),e.defn(s,"$determine_root",function(){var e,t=this;return(e=t.$find_first_parent_containing("spec"))!==!1&&e!==r?e:"."}),e.defn(s,"$find_first_parent_containing",function(e){var t,n,a,o=this;return(t=(n=o).$ascend_until,t.$$p=(a=function(t){a.$$s||this;return null==t&&(t=r),c.get("File")["$exist?"](c.get("File").$join(t,e))},a.$$s=o,a),t).call(n)}),e.defn(s,"$ascend_until",i=function(){try{var t,n,o,$=this,s=i.$$p,u=s||r;return i.$$p=null,(t=(n=$.$Pathname(c.get("File").$expand_path("."))).$ascend,t.$$p=(o=function(t){var n,$;o.$$s||this;return null==t&&(t=r),(n=($=e.yield1(u,t))===a?a.$v:$)===r||n.$$is_boolean&&1!=n?r:void e.ret(t)},o.$$s=$,o),t).call(n)}catch(l){if(l===e.returner)return l.$v;throw l}}),s.$module_function("add_to_load_path"),s.$module_function("add_dir_to_load_path"),s.$module_function("root"),s.$module_function("determine_root"),s.$module_function("find_first_parent_containing"),s.$module_function("ascend_until")}(s.base)}(s.base)}(n.base)},Opal.modules["rspec/core/drb"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="ignore";var n=e.top,r=e,a=e.nil,o=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$require","$configuration","$[]","$options","$start_service","$new_with_uri","$drb_port","$run","$drb_argv","$configure_filter_manager","$filter_manager","$new","$<<","$add_failure_exit_code","$add_full_description","$add_filter","$inclusions","$exclusions","$add_formatters","$add_libs","$add_requires","$+","$to_s","$each","$delete","$source","$empty?","$each_pair","$include?","$==","$is_a?"]),n.$require("drb/drb"),function(n){var r,i=r=o(n,"RSpec"),s=(i.$$proto,i.$$scope);!function(n){var r,i=r=o(n,"Core"),s=(i.$$proto,i.$$scope);!function(t,$super){function n(){}var r=n=$(t,$super,"DRbRunner",n),o=r.$$proto,i=r.$$scope;return o.options=o.drb_argv=o.configuration=a,e.defn(r,"$initialize",function(e,t){var n=this;return null==t&&(t=i.get("RSpec").$configuration()),n.options=e,n.configuration=t}),e.defn(r,"$drb_port",function(){var e,t,n=this;return(e=(t=n.options.$options()["$[]"]("drb_port"))!==!1&&t!==a?t:i.get("ENV")["$[]"]("RSPEC_DRB"))!==!1&&e!==a?e:8989}),e.defn(r,"$run",function(t,n){var r=this,o=a;try{i.get("DRb").$start_service("druby://localhost:0")}catch($){if(!e.rescue($,[i.get("SocketError"),i.get("Errno").$$scope.get("EADDRNOTAVAIL")]))throw $;try{i.get("DRb").$start_service("druby://:0")}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}return o=i.get("DRbObject").$new_with_uri("druby://127.0.0.1:"+r.$drb_port()),o.$run(r.$drb_argv(),t,n)}),e.defn(r,"$drb_argv",function(){var e,t=this;return(e=t.drb_argv)!==!1&&e!==a?e:t.drb_argv=function(){return t.options.$configure_filter_manager(t.configuration.$filter_manager()),i.get("DRbOptions").$new(t.options.$options(),t.configuration.$filter_manager()).$options()}()}),a&&"drb_argv"}(s.base,null),function(n,$super){function r(){}var o=r=$(n,$super,"DRbOptions",r),i=o.$$proto,s=o.$$scope;return i.submitted_options=i.filter_manager=a,e.defn(o,"$initialize",function(e,t){var n=this;return n.submitted_options=e,n.filter_manager=t}),e.defn(o,"$options",function(){var e,n=this,r=a;return r=[],(e=n.submitted_options["$[]"]("color"))===a||e.$$is_boolean&&1!=e||r["$<<"]("--color"),(e=n.submitted_options["$[]"]("profile_examples"))===a||e.$$is_boolean&&1!=e||r["$<<"]("--profile"),(e=n.submitted_options["$[]"]("full_backtrace"))===a||e.$$is_boolean&&1!=e||r["$<<"]("--backtrace"),(e=n.submitted_options["$[]"]("tty"))===a||e.$$is_boolean&&1!=e||r["$<<"]("--tty"),(e=n.submitted_options["$[]"]("fail_fast"))===a||e.$$is_boolean&&1!=e||r["$<<"]("--fail-fast"),(e=n.submitted_options["$[]"]("custom_options_file"))===a||e.$$is_boolean&&1!=e||r["$<<"]("--options")["$<<"](n.submitted_options["$[]"]("custom_options_file")),(e=n.submitted_options["$[]"]("order"))===a||e.$$is_boolean&&1!=e||r["$<<"]("--order")["$<<"](n.submitted_options["$[]"]("order")),n.$add_failure_exit_code(r),n.$add_full_description(r),n.$add_filter(r,"inclusion",n.filter_manager.$inclusions()),n.$add_filter(r,"exclusion",n.filter_manager.$exclusions()),n.$add_formatters(r),n.$add_libs(r),n.$add_requires(r),t(r,n.submitted_options["$[]"]("files_or_directories_to_run"))}),e.defn(o,"$add_failure_exit_code",function(e){var t,n=this;return(t=n.submitted_options["$[]"]("failure_exit_code"))===a||t.$$is_boolean&&1!=t?a:e["$<<"]("--failure-exit-code")["$<<"](n.submitted_options["$[]"]("failure_exit_code").$to_s())}),e.defn(o,"$add_full_description",function(e){var t,n,r,o=this;return(t=o.submitted_options["$[]"]("full_description"))===a||t.$$is_boolean&&1!=t?a:(t=(n=o.submitted_options["$[]"]("full_description")).$each,t.$$p=(r=function(t){r.$$s||this;return null==t&&(t=a),e["$<<"]("--example")["$<<"](t.$source().$delete("\\"))},r.$$s=o,r),t).call(n)}),e.cdecl(s,"CONDITIONAL_FILTERS",["if","unless"]),e.defn(o,"$add_filter",function(e,t,n){var r,o,$,i=this;return(r=n["$empty?"]())===a||r.$$is_boolean&&1!=r?(r=(o=n).$each_pair,r.$$p=($=function(n,r){var o,i=($.$$s||this,a);return null==n&&(n=a),null==r&&(r=a),(o=s.get("CONDITIONAL_FILTERS")["$include?"](n))===a||o.$$is_boolean&&1!=o?(i=function(){return t["$=="]("inclusion")?n.$to_s():"~"+n}(),(o=r["$is_a?"](s.get("String")))===a||o.$$is_boolean&&1!=o||i["$<<"](":"+r),e["$<<"]("--tag")["$<<"](i)):a},$.$$s=i,$),r).call(o):a}),e.defn(o,"$add_formatters",function(e){var t,n,r,o=this;return(t=o.submitted_options["$[]"]("formatters"))===a||t.$$is_boolean&&1!=t?a:(t=(n=o.submitted_options["$[]"]("formatters")).$each,t.$$p=(r=function(t){var n;r.$$s||this;return null==t&&(t=a),e["$<<"]("--format")["$<<"](t["$[]"](0)),(n=t["$[]"](1))===a||n.$$is_boolean&&1!=n?a:e["$<<"]("--out")["$<<"](t["$[]"](1))},r.$$s=o,r),t).call(n)}),e.defn(o,"$add_libs",function(e){var t,n,r,o=this;return(t=o.submitted_options["$[]"]("libs"))===a||t.$$is_boolean&&1!=t?a:(t=(n=o.submitted_options["$[]"]("libs")).$each,t.$$p=(r=function(t){r.$$s||this;return null==t&&(t=a),e["$<<"]("-I")["$<<"](t)},r.$$s=o,r),t).call(n)}),e.defn(o,"$add_requires",function(e){var t,n,r,o=this;return(t=o.submitted_options["$[]"]("requires"))===a||t.$$is_boolean&&1!=t?a:(t=(n=o.submitted_options["$[]"]("requires")).$each,t.$$p=(r=function(t){r.$$s||this;return null==t&&(t=a),e["$<<"]("--require")["$<<"](t)},r.$$s=o,r),t).call(n)}),a&&"add_requires"}(s.base,null)}(s.base)}(r.base)},Opal.modules["rspec/core/runner"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,o=e.gvars;return e.add_stubs(["$autorun_disabled?","$deprecate","$installed_at_exit?","$running_in_drb?","$at_exit","$nil?","$is_a?","$invoke","$disable_autorun!","$to_i","$run","$!=","$exit","$trap_interrupt","$new","$[]","$options","$require","$puts","$configuration","$world","$setup","$run_specs","$ordered_example_groups","$error_stream=","$==","$output_stream","$output_stream=","$configure","$load_spec_files","$announce_filters","$report","$hooks","$all?","$map","$failure_exit_code","$reporter","$example_count","$current_server","$getaddress","$gethostname","$any?","$host","$URI","$uri","$trap","$wants_to_quit","$exit!","$wants_to_quit="]),function(t){var $,i=$=r(t,"RSpec"),s=(i.$$proto,i.$$scope);!function(t){var $,i=$=r(t,"Core"),s=(i.$$proto,i.$$scope);!function(t,$super){function r(){}var $=r=a(t,$super,"Runner",r),i=$.$$proto,s=$.$$scope;return i.world=i.configuration=i.options=n,e.defs($,"$autorun",function(){var e,t,r,a=this;return(e=a["$autorun_disabled?"]())===n||e.$$is_boolean&&1!=e?(e=(t=a["$installed_at_exit?"]())!==!1&&t!==n?t:a["$running_in_drb?"]())===n||e.$$is_boolean&&1!=e?((e=(t=a).$at_exit,e.$$p=(r=function(){var e,t,a=r.$$s||this;return null==o["!"]&&(o["!"]=n),(e=(t=o["!"]["$nil?"]())!==!1&&t!==n?t:o["!"]["$is_a?"](s.get("SystemExit")))===n||e.$$is_boolean&&1!=e?n:a.$invoke()},r.$$s=a,r),e).call(t),a.installed_at_exit=!0):n:(s.get("RSpec").$deprecate("Requiring `rspec/autorun` when running RSpec via the `rspec` command"),n)}),e.defs($,"$invoke",function(){var e,t=this,r=n;return null==o.stderr&&(o.stderr=n),null==o.stdout&&(o.stdout=n),t["$disable_autorun!"](),r=t.$run(s.get("ARGV"),o.stderr,o.stdout).$to_i(),(e=r["$!="](0))===n||e.$$is_boolean&&1!=e?n:t.$exit(r)}),e.defs($,"$run",function(t,r,a){var $,i=this,c=n;if(null==o.stderr&&(o.stderr=n),null==o.stdout&&(o.stdout=n),null==r&&(r=o.stderr),null==a&&(a=o.stdout),i.$trap_interrupt(),c=s.get("ConfigurationOptions").$new(t),($=c.$options()["$[]"]("drb"))===n||$.$$is_boolean&&1!=$)return i.$new(c).$run(r,a);i.$require("rspec/core/drb");try{return s.get("DRbRunner").$new(c).$run(r,a)}catch(u){if(!e.rescue(u,[s.get("DRb").$$scope.get("DRbConnError")]))throw u;try{return r.$puts("No DRb server is running. Running in local process instead ..."),i.$new(c).$run(r,a)}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}),e.defn($,"$initialize",function(e,t,n){var r=this;return null==t&&(t=s.get("RSpec").$configuration()),null==n&&(n=s.get("RSpec").$world()),r.options=e,r.configuration=t,r.world=n}),e.defn($,"$run",function(e,t){var n=this;return n.$setup(e,t),n.$run_specs(n.world.$ordered_example_groups())}),e.defn($,"$setup",function(e,t){var r,a,$=this;return null==o.stdout&&(o.stdout=n),r=[e],a=$.configuration,a["$error_stream="].apply(a,r),r[r.length-1],$.configuration.$output_stream()["$=="](o.stdout)&&(r=[t],a=$.configuration,a["$output_stream="].apply(a,r),r[r.length-1]),$.options.$configure($.configuration),$.configuration.$load_spec_files(),$.world.$announce_filters()}),e.defn($,"$run_specs",function(e){var t,r,a,o=this;return(t=(r=o.configuration.$reporter()).$report,t.$$p=(a=function(t){var r,o,$,i,c=a.$$s||this,u=n;null==c.configuration&&(c.configuration=n),null==t&&(t=n);try{return u=s.get("SuiteHookContext").$new(),c.configuration.$hooks().$run("before","suite",u),(r=(o=($=e).$map,o.$$p=(i=function(e){i.$$s||this;return null==e&&(e=n),e.$run(t)},i.$$s=c,i),o).call($)["$all?"]())===n||r.$$is_boolean&&1!=r?c.configuration.$failure_exit_code():0}finally{c.configuration.$hooks().$run("after","suite",u)}},a.$$s=o,a),t).call(r,o.world.$example_count(e))}),e.defs($,"$disable_autorun!",function(){var e=this;return e.autorun_disabled=!0}),e.defs($,"$autorun_disabled?",function(){var e,t=this;return null==t.autorun_disabled&&(t.autorun_disabled=n),(e=t.autorun_disabled)!==!1&&e!==n?e:t.autorun_disabled=!1}),e.defs($,"$installed_at_exit?",function(){var e,t=this;return null==t.installed_at_exit&&(t.installed_at_exit=n),(e=t.installed_at_exit)!==!1&&e!==n?e:t.installed_at_exit=!1}),e.defs($,"$running_in_drb?",function(){var t,r,a,o=this,$=n,i=n;try{try{return r=null!=s.DRb,(t=r!==!1&&r!==n?s.get("DRb").$current_server():r)===n||t.$$is_boolean&&1!=t?n:(o.$require("socket"),o.$require("uri"),$=s.get("IPSocket").$getaddress(s.get("Socket").$gethostname()),i=(t=(r=["127.0.0.1","localhost",$])["$any?"],t.$$p=(a=function(e){var t=a.$$s||this;return null==e&&(e=n),e["$=="](t.$URI(s.get("DRb").$current_server().$uri()).$host())},a.$$s=o,a),t).call(r))}catch(c){if(!e.rescue(c,[s.get("DRb").$$scope.get("DRbServerNotFound")]))throw c;try{return n}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}finally{return(t=i)!==!1&&t!==n?t:!1}}),e.defs($,"$trap_interrupt",function(){var e,t,r,a=this;return(e=(t=a).$trap,e.$$p=(r=function(){var e,t,a=r.$$s||this;return(e=s.get("RSpec").$world().$wants_to_quit())===n||e.$$is_boolean&&1!=e||a["$exit!"](1),e=[!0],t=s.get("RSpec").$world(),t["$wants_to_quit="].apply(t,e),e[e.length-1],s.get("STDERR").$puts("\nExiting... Interrupt again to exit immediately.")},r.$$s=a,r),e).call(t,"INT")}),n&&"trap_interrupt"}(s.base,null)}(s.base)}(t.base)},Opal.modules["rspec/core/shared_example_group"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=e.breaker,a=(e.slice,e.module),o=e.klass,$=e.hash2;return e.add_stubs(["$==","$[]","$thread_local_metadata","$raise","$add","$to_proc","$shared_example_group_registry","$world","$proc","$exposed_globally?","$change_global_dsl","$definitions","$ensure_block_has_source_location","$first_non_rspec_line","$valid_name?","$warn_if_key_taken","$[]=","$shared_example_groups","$unshift","$empty?","$new","$__send__","$class_exec","$include","$configuration","$each","$private","$===","$warn_with","$gsub","$formatted_location","$join","$source_location","$method_defined?","$split","$extend","$define_method","$instance_exec"]),function(t){var i,s,c,u=i=a(t,"RSpec"),l=(u.$$proto,u.$$scope);!function(t){var i,s=i=a(t,"Core"),c=(s.$$proto,s.$$scope);!function(t){var i,s,c=i=a(t,"SharedExampleGroup"),u=(c.$$proto,c.$$scope);e.defn(c,"$shared_examples",s=function(t){var r,a,o=this,$=s.$$p,i=$||n,c=n,l=n,_=arguments.length-1;0>_&&(_=0);var p=new Array(_);for(l=0;_>l;l++)p[l]=arguments[l+1];return s.$$p=null,c=o["$=="](u.get("ExampleGroup")),(r=(a=c!==!1&&c!==n)?u.get("RSpec").$thread_local_metadata()["$[]"]("in_example_group"):c)===n||r.$$is_boolean&&1!=r||o.$raise("Creating isolated shared examples from within a context is not allowed. Remove `RSpec.` prefix or move this to a top-level scope."),(r=(a=u.get("RSpec").$world().$shared_example_group_registry()).$add,r.$$p=i.$to_proc(),r).apply(a,[o,t].concat(e.to_a(p)))}),e.alias(c,"shared_context","shared_examples"),e.alias(c,"shared_examples_for","shared_examples"),function(t){var r,o=r=a(t,"TopLevelDSL"),$=(o.$$proto,o.$$scope);e.defs(o,"$definitions",function(){var t,r,a,o=this;return(t=(r=o).$proc,t.$$p=(a=function(){var t,r=a.$$s||this;return e.def(r,"$shared_examples",t=function(r){var a,o,i=t.$$p,s=i||n,c=n,u=arguments.length-1;0>u&&(u=0);var l=new Array(u);for(c=0;u>c;c++)l[c]=arguments[c+1];return t.$$p=null,(a=(o=$.get("RSpec").$world().$shared_example_group_registry()).$add,a.$$p=s.$to_proc(),a).apply(o,["main",r].concat(e.to_a(l)))}),e.alias(r,"shared_context","shared_examples"),e.alias(r,"shared_examples_for","shared_examples")},a.$$s=o,a),t).call(r)}),e.defs(o,"$exposed_globally?",function(){var e,t=this;return null==t.exposed_globally&&(t.exposed_globally=n),(e=t.exposed_globally)!==!1&&e!==n?e:t.exposed_globally=!1}),e.defs(o,"$expose_globally!",function(){var e,t,r=this;return(e=r["$exposed_globally?"]())===n||e.$$is_boolean&&1!=e?((e=(t=$.get("Core").$$scope.get("DSL")).$change_global_dsl,e.$$p=r.$definitions().$to_proc(),e).call(t),r.exposed_globally=!0):n}),e.defs(o,"$remove_globally!",function(){var t,r,a,o=this;return(t=o["$exposed_globally?"]())===n||t.$$is_boolean&&1!=t?n:((t=(r=$.get("Core").$$scope.get("DSL")).$change_global_dsl,t.$$p=(a=function(){var t=a.$$s||this;return e.udef(t,"$shared_examples"),e.udef(t,"$shared_context"),e.udef(t,"$shared_examples_for")},a.$$s=o,a),t).call(r),o.exposed_globally=!1)})}(u.base),function(t,$super){function a(){}var i,s,c,u=a=o(t,$super,"Registry",a),l=u.$$proto,_=u.$$scope;return l.shared_example_groups=n,e.defn(u,"$add",i=function(t,r){var a,o,$,s,c,u=this,l=i.$$p,p=l||n,d=n,f=n,g=arguments.length-2;0>g&&(g=0);var h=new Array(g);for(f=0;g>f;f++)h[f]=arguments[f+2];return i.$$p=null,(a=(o=u).$ensure_block_has_source_location,a.$$p=($=function(){$.$$s||this;return _.get("CallerFilter").$first_non_rspec_line()},$.$$s=u,$),a).call(o,p),(a=u["$valid_name?"](r))===n||a.$$is_boolean&&1!=a?h.$unshift(r):(u.$warn_if_key_taken(t,r,p),u.$shared_example_groups()["$[]"](t)["$[]="](r,p)),(a=h["$empty?"]())===n||a.$$is_boolean&&1!=a?(d=_.get("Module").$new(),(a=(s=function(e){e.$$scope,e.$$proto;return e}(e.get_singleton_class(d))).$__send__,a.$$p=(c=function(e){var t,r;c.$$s||this;return null==e&&(e=n),(t=(r=e).$class_exec,t.$$p=p.$to_proc(),t).call(r)},c.$$s=u,c),a).call(s,"define_method","included"),(a=_.get("RSpec").$configuration()).$include.apply(a,[d].concat(e.to_a(h)))):n}),e.defn(u,"$find",function(t,r){try{var a,o,$,i=this;return(a=(o=t).$each,a.$$p=($=function(t){var a=$.$$s||this,o=n;return null==t&&(t=n),o=a.$shared_example_groups()["$[]"](t)["$[]"](r),o===!1||o===n?n:void e.ret(o)},$.$$s=i,$),a).call(o),i.$shared_example_groups()["$[]"]("main")["$[]"](r)}catch(s){if(s===e.returner)return s.$v;throw s}}),u.$private(),e.defn(u,"$shared_example_groups",function(){var e,t,r,a,o=this;return(e=o.shared_example_groups)!==!1&&e!==n?e:o.shared_example_groups=(t=(r=_.get("Hash")).$new,t.$$p=(a=function(e,t){a.$$s||this;return null==e&&(e=n),null==t&&(t=n),e["$[]="](t,$([],{}))},a.$$s=o,a),t).call(r)}),e.defn(u,"$valid_name?",function(e){var t=n;return function(){return t=e,_.get("String")["$==="](t)||_.get("Symbol")["$==="](t)||_.get("Module")["$==="](t)?!0:!1}()}),e.defn(u,"$warn_if_key_taken",function(e,t,r){var a=this,o=n;return o=a.$shared_example_groups()["$[]"](e)["$[]"](t),o===!1||o===n?n:_.get("RSpec").$warn_with(("            |WARNING: Shared example group '"+t+"' has been previously defined at:\n            |  "+a.$formatted_location(o)+"\n            |...and you are now defining it at:\n            |  "+a.$formatted_location(r)+"\n            |The new definition will overwrite the original one.\n").$gsub(/^ +\|/,""),$(["call_site"],{call_site:n}))}),e.defn(u,"$formatted_location",function(e){return e.$source_location().$join(":")}),(s=_.get("Proc")["$method_defined?"]("source_location"))===n||s.$$is_boolean&&1!=s?(e.defn(u,"$ensure_block_has_source_location",c=function(t){var a,o,$,i=this,s=c.$$p,u=s||n,l=n;return c.$$p=null,l=((a=e.yieldX(u,[]))===r?r.$v:a).$split(":"),t.$extend((a=(o=_.get("Module")).$new,a.$$p=($=function(){var e,t,n,r=$.$$s||this;return(e=(t=r).$define_method,e.$$p=(n=function(){n.$$s||this;return l},n.$$s=r,n),e).call(t,"source_location")},$.$$s=i,$),a).call(o))}),n&&"ensure_block_has_source_location"):(e.defn(u,"$ensure_block_has_source_location",function(e){return n}),n&&"ensure_block_has_source_location")}(u.base,null)}(c.base)}(l.base),(s=(c=u).$instance_exec,s.$$p=l.get("Core").$$scope.get("SharedExampleGroup").$$scope.get("TopLevelDSL").$definitions().$to_proc(),s).call(c)}(t.base)},Opal.modules["rspec/core/version"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=(e.nil,e.breaker,e.slice,e.module);return function(t){var r,a=r=n(t,"RSpec"),o=(a.$$proto,a.$$scope);!function(t){var r,a=r=n(t,"Core"),o=(a.$$proto,a.$$scope);!function(t){var r,a=r=n(t,"Version"),o=(a.$$proto,a.$$scope);e.cdecl(o,"STRING","3.1.7")}(o.base)}(o.base)}(t.base)},Opal.modules["rspec/support/warnings"]=function(e){e.dynamic_require_severity="ignore";var t=e.top,n=e,r=e.nil,a=(e.breaker,e.slice,e.module),o=e.hash2;return e.add_stubs(["$require","$require_rspec_support","$warn_with","$fetch","$first_non_rspec_line","$[]","$<<","$warn","$extend"]),t.$require("rspec/support"),n.get("RSpec").$$scope.get("Support").$require_rspec_support("caller_filter"),function(t){var n,$=n=a(t,"RSpec"),i=($.$$proto,$.$$scope);!function(t){var n,$=n=a(t,"Support"),i=($.$$proto,$.$$scope);!function(t){var n,$=n=a(t,"Warnings"),i=($.$$proto,$.$$scope);e.defn($,"$deprecate",function(e,t){var n=this;return null==t&&(t=o([],{})),n.$warn_with("DEPRECATION: "+e+" is deprecated.",t)}),e.defn($,"$warn_deprecation",function(e,t){var n=this;return null==t&&(t=o([],{})),n.$warn_with("DEPRECATION: \n "+e,t)}),e.defn($,"$warning",function(e,t){var n=this;return null==t&&(t=o([],{})),n.$warn_with("WARNING: "+e+".",t)}),e.defn($,"$warn_with",function(t,n){var a,$,s,c=this,u=r;return null==n&&(n=o([],{})),u=(a=($=n).$fetch,a.$$p=(s=function(){s.$$s||this;return i.get("CallerFilter").$first_non_rspec_line()},s.$$s=c,s),a).call($,"call_site"),(a=n["$[]"]("replacement"))===r||a.$$is_boolean&&1!=a||t["$<<"](" Use "+n["$[]"]("replacement")+" instead."),u!==!1&&u!==r&&t["$<<"](" Called from "+u+"."),e.get("Kernel").$warn(t)})}(i.base)}(i.base),$.$extend(i.get("RSpec").$$scope.get("Support").$$scope.get("Warnings"))}(n.base)},Opal.modules["rspec/core/warnings"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="ignore";var n=e.top,r=e,a=e.nil,o=(e.breaker,e.slice,e.module),$=e.hash2;return e.add_stubs(["$require","$deprecation","$reporter","$configuration","$merge","$first_non_rspec_line","$[]","$end_with?","$+","$current_example","$location"]),n.$require("rspec/support/warnings"),function(n){var r,i=r=o(n,"RSpec"),s=(i.$$proto,i.$$scope);!function(n){var r,i=r=o(n,"Core"),s=(i.$$proto,i.$$scope);!function(n){var r,i,s=r=o(n,"Warnings"),c=(s.$$proto,s.$$scope);e.defn(s,"$deprecate",function(e,t){return null==t&&(t=$([],{})),c.get("RSpec").$configuration().$reporter().$deprecation($(["deprecated","call_site"],{deprecated:e,call_site:c.get("CallerFilter").$first_non_rspec_line()}).$merge(t))}),e.defn(s,"$warn_deprecation",function(e,t){return null==t&&(t=$([],{})),c.get("RSpec").$configuration().$reporter().$deprecation(t.$merge($(["message"],{message:e})))}),e.defn(s,"$warn_with",i=function(n,r){var o,s=this;i.$$p;return null==r&&(r=$([],{})),i.$$p=null,(o=r["$[]"]("use_spec_location_as_call_site"))===a||o.$$is_boolean&&1!=o||(((o=n["$end_with?"]("."))===a||o.$$is_boolean&&1!=o)&&(n=t(n,".")),(o=c.get("RSpec").$current_example())===a||o.$$is_boolean&&1!=o||(n=t(n," Warning generated from spec at `"+c.get("RSpec").$current_example().$location()+"`."))),e.find_super_dispatcher(s,"warn_with",i,null).apply(s,[n,r])})}(s.base)}(s.base)}(r.base)},Opal.modules["rspec/core/world"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?t>=e:e["$<="](t)}e.dynamic_require_severity="ignore";var r=e.top,a=e,o=e.nil,$=(e.breaker,e.slice,e.module),i=e.klass;return e.add_stubs(["$require","$include","$attr_reader","$attr_accessor","$new","$[]=","$dup","$examples","$prune","$filter_manager","$uniq!","$configuration","$clear","$example_groups","$=~","$[]","$fetch","$ordering_registry","$order","$<<","$inclusion_filter","$exclusion_filter","$configure_group","$inject","$+","$size","$filtered_examples","$flat_map","$descendants","$<=","$sort","$declaration_line_numbers","$reporter","$announce_inclusion_filter","$announce_exclusion_filter","$empty?","$==","$length","$message","$join","$run_all_when_everything_filtered?","$zero?","$example_count","$everything_filtered_message","$description","$private"]),r.$require("rbconfig"),function(r){var a,s=a=$(r,"RSpec"),c=(s.$$proto,s.$$scope);!function(r){var a,s=a=$(r,"Core"),c=(s.$$proto,s.$$scope);!function(r,$super){function a(){}var $=a=i(r,$super,"World",a),s=$.$$proto,c=$.$$scope;return s.configuration=s.example_groups=s.shared_example_group_registry=s.line_numbers=o,$.$include(c.get("RSpec").$$scope.get("Core").$$scope.get("Hooks")),$.$attr_reader("example_groups","filtered_examples"),$.$attr_accessor("wants_to_quit"),e.defn($,"$initialize",function(e){var t,n,r,a=this;return null==e&&(e=c.get("RSpec").$configuration()),a.configuration=e,a.example_groups=[],a.filtered_examples=(t=(n=c.get("Hash")).$new,t.$$p=(r=function(e,t){var n=r.$$s||this,a=o;return null==e&&(e=o),null==t&&(t=o),e["$[]="](t,function(){return a=t.$examples().$dup(),a=n.$filter_manager().$prune(a),a["$uniq!"](),a}())},r.$$s=a,r),t).call(n)}),e.defn($,"$clear_remaining_example_groups",function(){var e=this;return e.$example_groups().$clear()}),e.defn($,"$windows_os?",function(){return c.get("RbConfig").$$scope.get("CONFIG")["$[]"]("host_os")["$=~"](/cygwin|mswin|mingw|bccwin|wince|emx/)}),e.defn($,"$ordered_example_groups",function(){var e=this,t=o;return t=e.configuration.$ordering_registry().$fetch("global"),t.$order(e.example_groups)}),e.defn($,"$reset",function(){
var e=this;return e.$example_groups().$clear(),e.shared_example_group_registry=o}),e.defn($,"$filter_manager",function(){var e=this;return e.configuration.$filter_manager()}),e.defn($,"$register",function(e){var t=this;return t.$example_groups()["$<<"](e),e}),e.defn($,"$shared_example_group_registry",function(){var e,t=this;return(e=t.shared_example_group_registry)!==!1&&e!==o?e:t.shared_example_group_registry=c.get("SharedExampleGroup").$$scope.get("Registry").$new()}),e.defn($,"$inclusion_filter",function(){var e=this;return e.configuration.$inclusion_filter()}),e.defn($,"$exclusion_filter",function(){var e=this;return e.configuration.$exclusion_filter()}),e.defn($,"$configure_group",function(e){var t=this;return t.configuration.$configure_group(e)}),e.defn($,"$example_count",function(e){var n,r,a,$,i,s,u=this;return null==e&&(e=u.$example_groups()),(n=(r=($=(i=c.get("FlatMap")).$flat_map,$.$$p=(s=function(e){s.$$s||this;return null==e&&(e=o),e.$descendants()},s.$$s=u,s),$).call(i,e)).$inject,n.$$p=(a=function(e,n){a.$$s||this;return null==e&&(e=o),null==n&&(n=o),t(e,n.$filtered_examples().$size())},a.$$s=u,a),n).call(r,0)}),e.defn($,"$preceding_declaration_line",function(e){var t,r,a,$=this;return(t=(r=$.$declaration_line_numbers().$sort()).$inject,t.$$p=(a=function(t,r){a.$$s||this;return null==t&&(t=o),null==r&&(r=o),n(r,e)?r:t},a.$$s=$,a),t).call(r,o)}),e.defn($,"$reporter",function(){var e=this;return e.configuration.$reporter()}),e.defn($,"$announce_filters",function(){var e,t,n=this,r=o,a=o;return r=[],n.$announce_inclusion_filter(r),n.$announce_exclusion_filter(r),((e=n.$filter_manager()["$empty?"]())===o||e.$$is_boolean&&1!=e)&&(r.$length()["$=="](1)?n.$reporter().$message("Run options: "+r["$[]"](0)):n.$reporter().$message("Run options:\n  "+r.$join("\n  "))),t=n.configuration["$run_all_when_everything_filtered?"](),(e=t!==!1&&t!==o?n.$example_count()["$zero?"]():t)===o||e.$$is_boolean&&1!=e||(n.$reporter().$message(""+n.$everything_filtered_message()+"; ignoring "+n.$inclusion_filter().$description()),n.$filtered_examples().$clear(),n.$inclusion_filter().$clear()),(e=n.$example_count()["$zero?"]())===o||e.$$is_boolean&&1!=e?o:(n.$example_groups().$clear(),(e=n.$filter_manager()["$empty?"]())===o||e.$$is_boolean&&1!=e?(e=n.$exclusion_filter()["$empty?"]())===o||e.$$is_boolean&&1!=e?(e=n.$inclusion_filter()["$empty?"]())===o||e.$$is_boolean&&1!=e?o:n.$reporter().$message(n.$everything_filtered_message()):(a=n.$everything_filtered_message(),(e=n.configuration["$run_all_when_everything_filtered?"]())===o||e.$$is_boolean&&1!=e||a["$<<"]("; ignoring "+n.$inclusion_filter().$description()),n.$reporter().$message(a)):n.$reporter().$message("No examples found."))}),e.defn($,"$everything_filtered_message",function(){return"\nAll examples were filtered out"}),e.defn($,"$announce_inclusion_filter",function(e){var t,n=this;return(t=n.$inclusion_filter()["$empty?"]())===o||t.$$is_boolean&&1!=t?e["$<<"]("include "+n.$inclusion_filter().$description()):o}),e.defn($,"$announce_exclusion_filter",function(e){var t,n=this;return(t=n.$exclusion_filter()["$empty?"]())===o||t.$$is_boolean&&1!=t?e["$<<"]("exclude "+n.$exclusion_filter().$description()):o}),$.$private(),e.defn($,"$declaration_line_numbers",function(){var e,n,r,a,$=this;return(e=$.line_numbers)!==!1&&e!==o?e:$.line_numbers=(n=(r=$.$example_groups()).$inject,n.$$p=(a=function(e,n){a.$$s||this;return null==e&&(e=o),null==n&&(n=o),t(e,n.$declaration_line_numbers())},a.$$s=$,a),n).call(r,[])}),o&&"declaration_line_numbers"}(c.base,null)}(c.base)}(a.base)},Opal.modules["rspec/expectations/configuration"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass;return e.add_stubs(["$require_rspec_expectations","$include?","$Array","$enable_expect","$disable_expect","$enable_should","$disable_should","$should_enabled?","$<<","$expect_enabled?","$respond_to?","$color_enabled?","$configuration","$attr_writer","$each","$backtrace_formatter","$syntax=","$warn_about_should!","$new","$reset_syntaxes_to_default"]),t.get("RSpec").$$scope.get("Support").$require_rspec_expectations("syntax"),function(t){var o,$=o=r(t,"RSpec"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"Expectations"),i=($.$$proto,$.$$scope);!function(t,$super){function r(){}var o,$,i,s=r=a(t,$super,"Configuration",r),c=s.$$proto,u=s.$$scope;return c.color=c.backtrace_formatter=c.include_chain_clauses_in_custom_matcher_descriptions=n,e.defn(s,"$syntax=",function(e){var t,r=this;return(t=r.$Array(e)["$include?"]("expect"))===n||t.$$is_boolean&&1!=t?u.get("Expectations").$$scope.get("Syntax").$disable_expect():u.get("Expectations").$$scope.get("Syntax").$enable_expect(),(t=r.$Array(e)["$include?"]("should"))===n||t.$$is_boolean&&1!=t?u.get("Expectations").$$scope.get("Syntax").$disable_should():u.get("Expectations").$$scope.get("Syntax").$enable_should()}),e.defn(s,"$syntax",function(){var e,t=n;return t=[],(e=u.get("Expectations").$$scope.get("Syntax")["$should_enabled?"]())===n||e.$$is_boolean&&1!=e||t["$<<"]("should"),(e=u.get("Expectations").$$scope.get("Syntax")["$expect_enabled?"]())===n||e.$$is_boolean&&1!=e||t["$<<"]("expect"),t}),(o=e.get("RSpec")["$respond_to?"]("configuration"))===n||o.$$is_boolean&&1!=o?(s.$attr_writer("color"),e.defn(s,"$color?",function(){var e=this;return e.color})):e.defn(s,"$color?",function(){return e.get("RSpec").$configuration()["$color_enabled?"]()}),e.defn(s,"$add_should_and_should_not_to",function(){var e,t,r,a=this,o=n,$=arguments.length-0;0>$&&($=0);var i=new Array($);for(o=0;$>o;o++)i[o]=arguments[o+0];return(e=(t=i).$each,e.$$p=(r=function(e){r.$$s||this;return null==e&&(e=n),u.get("Expectations").$$scope.get("Syntax").$enable_should(e)},r.$$s=a,r),e).call(t)}),s.$attr_writer("backtrace_formatter"),e.defn(s,"$backtrace_formatter",function(){var t,r,a,o=this;return(t=o.backtrace_formatter)!==!1&&t!==n?t:o.backtrace_formatter=function(){return(r=(a=e.get("RSpec").$configuration().$backtrace_formatter)&&!a.$$stub||e.get("RSpec").$configuration()["$respond_to_missing?"]("backtrace_formatter")?"method":n)===n||r.$$is_boolean&&1!=r?u.get("NullBacktraceFormatter"):e.get("RSpec").$configuration().$backtrace_formatter()}()}),s.$attr_writer("include_chain_clauses_in_custom_matcher_descriptions"),e.defn(s,"$include_chain_clauses_in_custom_matcher_descriptions?",function(){var e,t=this;return(e=t.include_chain_clauses_in_custom_matcher_descriptions)!==!1&&e!==n?e:t.include_chain_clauses_in_custom_matcher_descriptions=!1}),e.defn(s,"$reset_syntaxes_to_default",function(){var e,t,n=this;return e=[["should","expect"]],t=n,t["$syntax="].apply(t,e),e[e.length-1],u.get("RSpec").$$scope.get("Expectations").$$scope.get("Syntax")["$warn_about_should!"]()}),e.cdecl(u,"NullBacktraceFormatter",(o=($=u.get("Module")).$new,o.$$p=(i=function(){var t=i.$$s||this;return e.defs(t,"$format_backtrace",function(e){return e}),n&&"format_backtrace"},i.$$s=s,i),o).call($))}(i.base,null),e.defs($,"$configuration",function(){var e,t=this;return null==t.configuration&&(t.configuration=n),(e=t.configuration)!==!1&&e!==n?e:t.configuration=i.get("Configuration").$new()}),$.$configuration().$reset_syntaxes_to_default()}(i.base)}(t.base)},Opal.modules["rspec/expectations/expectation_target"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass;return e.add_stubs(["$new","$equal?","$raise","$prevent_operator_matchers","$handle_matcher","$to_proc","$private","$enforce_block_expectation","$supports_block_expectations?","$description_of","$description","$inspect"]),function(t){var o,$=o=r(t,"RSpec"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"Expectations"),i=($.$$proto,$.$$scope);!function(t,$super){function r(){}var o,$,i=r=a(t,$super,"ExpectationTarget",r),s=i.$$proto,c=i.$$scope;return s.target=n,e.cdecl(c,"UndefinedValue",c.get("Module").$new()),e.defn(i,"$initialize",function(e){var t=this;return t.target=e}),e.defs(i,"$for",function(e,t){var r,a=this;return(r=c.get("UndefinedValue")["$equal?"](e))===n||r.$$is_boolean&&1!=r?t!==!1&&t!==n?a.$raise(c.get("ArgumentError"),"You cannot pass both an argument and a block to `expect`."):a.$new(e):(t!==!1&&t!==n||a.$raise(c.get("ArgumentError"),"You must pass either an argument or a block to `expect`."),c.get("BlockExpectationTarget").$new(t))}),e.defn(i,"$to",o=function(e,t){var r,a,$=this,i=o.$$p,s=i||n;return null==e&&(e=n),null==t&&(t=n),o.$$p=null,e!==!1&&e!==n||$.$prevent_operator_matchers("to"),(r=(a=c.get("RSpec").$$scope.get("Expectations").$$scope.get("PositiveExpectationHandler")).$handle_matcher,r.$$p=s.$to_proc(),r).call(a,$.target,e,t)}),e.defn(i,"$not_to",$=function(e,t){var r,a,o=this,i=$.$$p,s=i||n;return null==e&&(e=n),null==t&&(t=n),$.$$p=null,e!==!1&&e!==n||o.$prevent_operator_matchers("not_to"),(r=(a=c.get("RSpec").$$scope.get("Expectations").$$scope.get("NegativeExpectationHandler")).$handle_matcher,r.$$p=s.$to_proc(),r).call(a,o.target,e,t)}),e.alias(i,"to_not","not_to"),i.$private(),e.defn(i,"$prevent_operator_matchers",function(e){var t=this;return t.$raise(c.get("ArgumentError"),"The expect syntax does not support operator matchers, "+("so you must pass a matcher to `#"+e+"`."))}),n&&"prevent_operator_matchers"}(i.base,null),function(t,$super){function r(){}var o,$,i=r=a(t,$super,"BlockExpectationTarget",r),s=(i.$$proto,i.$$scope);return e.defn(i,"$to",o=function(t,r){var a=this,$=o.$$p,i=n,s=n;for(null==r&&(r=n),o.$$p=null,i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return a.$enforce_block_expectation(t),e.find_super_dispatcher(a,"to",o,$).apply(a,i)}),e.defn(i,"$not_to",$=function(t,r){var a=this,o=$.$$p,i=n,s=n;for(null==r&&(r=n),$.$$p=null,i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return a.$enforce_block_expectation(t),e.find_super_dispatcher(a,"not_to",$,o).apply(a,i)}),e.alias(i,"to_not","not_to"),i.$private(),e.defn(i,"$enforce_block_expectation",function(e){var t,r=this;return(t=r["$supports_block_expectations?"](e))===n||t.$$is_boolean&&1!=t?r.$raise(s.get("ExpectationNotMetError"),"You must pass an argument rather than "+("a block to use the provided matcher ("+r.$description_of(e)+"), or ")+"the matcher must implement `supports_block_expectations?`."):n}),e.defn(i,"$supports_block_expectations?",function(t){try{return t["$supports_block_expectations?"]()}catch(n){if(!e.rescue(n,[s.get("NoMethodError")]))throw n;try{return!1}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}),e.defn(i,"$description_of",function(t){try{return t.$description()}catch(n){if(!e.rescue(n,[s.get("NoMethodError")]))throw n;try{return t.$inspect()}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}),n&&"description_of"}(i.base,i.get("ExpectationTarget"))}(i.base)}(t.base)},Opal.modules["rspec/expectations/fail_with"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.hash2;return e.add_stubs(["$require_rspec_support","$new","$lambda","$surface_descriptions_in","$color?","$configuration","$raise","$diff","$differ","$empty?"]),t.get("RSpec").$$scope.get("Support").$require_rspec_support("differ"),function(t){var o,$=o=r(t,"RSpec"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"Expectations");$.$$proto,$.$$scope;!function(t){var r=t.$$scope;t.$$proto;return e.defn(t,"$differ",function(){var e,t,o,$=this;return r.get("RSpec").$$scope.get("Support").$$scope.get("Differ").$new(a(["object_preparer","color"],{object_preparer:(e=(t=$).$lambda,e.$$p=(o=function(e){o.$$s||this;return null==e&&(e=n),r.get("RSpec").$$scope.get("Matchers").$$scope.get("Composable").$surface_descriptions_in(e)},o.$$s=$,o),e).call(t),color:r.get("RSpec").$$scope.get("Matchers").$configuration()["$color?"]()}))}),e.defn(t,"$fail_with",function(e,t,a){var o,$=this,i=n;return null==t&&(t=n),null==a&&(a=n),e!==!1&&e!==n||$.$raise(r.get("ArgumentError"),"Failure message is nil. Does your matcher define the appropriate failure_message[_when_negated] method to return a string?"),i=$.$differ().$diff(a,t),((o=i["$empty?"]())===n||o.$$is_boolean&&1!=o)&&(e=""+e+"\nDiff:"+i),$.$raise(r.get("RSpec").$$scope.get("Expectations").$$scope.get("ExpectationNotMetError"),e)}),n&&"fail_with"}(e.get_singleton_class($))}(i.base)}(t.base)},Opal.modules["rspec/expectations/handler"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,o=e.hash2;return e.add_stubs(["$nil?","$respond_to?","$warn","$join","$inspect","$wrap","$check_message","$last_expectation_handler=","$last_matcher=","$modern_matcher_from","$call","$__send__","$diffable?","$fail_with","$expected","$actual","$setup","$new","$matches?","$to_proc","$handle_failure","$!","$does_not_match?","$warn_deprecation","$gsub","$name","$class","$first_non_rspec_line","$interface_matches?","$failure_message_for_should","$base_matcher","$failure_message_for_should_not","$failure_message","$negative_failure_message"]),function(t){var $,i=$=r(t,"RSpec"),s=(i.$$proto,i.$$scope);!function(t){var $,i=$=r(t,"Expectations"),s=(i.$$proto,i.$$scope);!function(t){var a,o=a=r(t,"ExpectationHelper"),$=(o.$$proto,o.$$scope);e.defs(o,"$check_message",function(t){var r,a,o;return(r=(a=(o=t["$nil?"]())!==!1&&o!==n?o:t["$respond_to?"]("to_str"))!==!1&&a!==n?a:t["$respond_to?"]("call"))===n||r.$$is_boolean&&1!=r?e.get("Kernel").$warn(["WARNING: ignoring the provided expectation message argument (",t.$inspect(),") since it is not a string or a proc."].$join()):n}),e.defs(o,"$modern_matcher_from",function(e){var t,r;return(t=(r=$.get("LegacyMatcherAdapter").$$scope.get("RSpec2").$wrap(e))!==!1&&r!==n?r:$.get("LegacyMatcherAdapter").$$scope.get("RSpec1").$wrap(e))!==!1&&t!==n?t:e}),e.defs(o,"$setup",function(t,n,r){var a,o,$=this;return $.$check_message(r),a=[t],o=e.get("RSpec").$$scope.get("Matchers"),o["$last_expectation_handler="].apply(o,a),a[a.length-1],a=[$.$modern_matcher_from(n)],o=e.get("RSpec").$$scope.get("Matchers"),o["$last_matcher="].apply(o,a),a[a.length-1]}),e.defs(o,"$handle_failure",function(t,r,a){var o,$;return(o=r["$respond_to?"]("call"))===n||o.$$is_boolean&&1!=o||(r=r.$call()),(o=r)!==!1&&o!==n?o:r=t.$__send__(a),$=t["$respond_to?"]("diffable?"),(o=$!==!1&&$!==n?t["$diffable?"]():$)===n||o.$$is_boolean&&1!=o?e.get("RSpec").$$scope.get("Expectations").$fail_with(r):e.get("RSpec").$$scope.get("Expectations").$fail_with(r,t.$expected(),t.$actual())})}(s.base),function(t,$super){function r(){}var o,$=r=a(t,$super,"PositiveExpectationHandler",r),i=($.$$proto,$.$$scope);return e.defs($,"$handle_matcher",o=function(t,r,a){var $,s,c,u=this,l=o.$$p,_=l||n,p=n;return null==a&&(a=n),o.$$p=null,p=i.get("ExpectationHelper").$setup(u,r,a),r===!1||r===n?e.get("RSpec").$$scope.get("Matchers").$$scope.get("BuiltIn").$$scope.get("PositiveOperatorMatcher").$new(t):($=(s=(c=p)["$matches?"],s.$$p=_.$to_proc(),s).call(c,t))!==!1&&$!==n?$:i.get("ExpectationHelper").$handle_failure(p,a,"failure_message")}),e.defs($,"$verb",function(){return"should"}),e.defs($,"$should_method",function(){return"should"}),e.defs($,"$opposite_should_method",function(){return"should_not"}),n&&"opposite_should_method"}(s.base,null),function(t,$super){function r(){}var o,$,i=r=a(t,$super,"NegativeExpectationHandler",r),s=(i.$$proto,i.$$scope);return e.defs(i,"$handle_matcher",o=function(t,r,a){var $,i,c,u=this,l=o.$$p,_=l||n,p=n;return null==a&&(a=n),o.$$p=null,p=s.get("ExpectationHelper").$setup(u,r,a),r===!1||r===n?e.get("RSpec").$$scope.get("Matchers").$$scope.get("BuiltIn").$$scope.get("NegativeOperatorMatcher").$new(t):(($=(i=(c=u)["$does_not_match?"],i.$$p=_.$to_proc(),i).call(c,p,t))!==!1&&$!==n?$:s.get("ExpectationHelper").$handle_failure(p,a,"failure_message_when_negated"))["$!"]()}),e.defs(i,"$does_not_match?",$=function(e,t){var r,a,o,i=$.$$p,s=i||n;return $.$$p=null,(r=e["$respond_to?"]("does_not_match?"))===n||r.$$is_boolean&&1!=r?(r=(o=e)["$matches?"],r.$$p=s.$to_proc(),r).call(o,t)["$!"]():(r=(a=e)["$does_not_match?"],r.$$p=s.$to_proc(),r).call(a,t)}),e.defs(i,"$verb",function(){return"should not"}),e.defs(i,"$should_method",function(){return"should_not"}),e.defs(i,"$opposite_should_method",function(){return"should"}),n&&"opposite_should_method"}(s.base,null),function(t,$super){function r(){}var $,i=r=a(t,$super,"LegacyMatcherAdapter",r),s=(i.$$proto,i.$$scope);return e.defn(i,"$initialize",$=function(t){var r,a=this,i=$.$$p,c=n,u=n;for($.$$p=null,c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];return e.find_super_dispatcher(a,"initialize",$,i).apply(a,c),e.get("RSpec").$warn_deprecation(("          |"+((r=t.$class().$name())!==!1&&r!==n?r:t.$inspect())+" implements a legacy RSpec matcher\n          |protocol. For the current protocol you should expose the failure messages\n          |via the `failure_message` and `failure_message_when_negated` methods.\n          |(Used from "+s.get("CallerFilter").$first_non_rspec_line()+")\n").$gsub(/^\s+\|/,""),o(["type"],{type:"legacy_matcher"}))}),e.defs(i,"$wrap",function(e){var t,r=this;return(t=r["$interface_matches?"](e))===n||t.$$is_boolean&&1!=t?n:r.$new(e)}),function(t,$super){function r(){}var o=r=a(t,$super,"RSpec2",r);o.$$proto,o.$$scope;return e.defn(o,"$failure_message",function(){var e=this;return e.$base_matcher().$failure_message_for_should()}),e.defn(o,"$failure_message_when_negated",function(){var e=this;return e.$base_matcher().$failure_message_for_should_not()}),e.defs(o,"$interface_matches?",function(e){var t,r;return r=e["$respond_to?"]("failure_message")["$!"](),(t=r!==!1&&r!==n?e["$respond_to?"]("failure_message_for_should"):r)!==!1&&t!==n?t:(r=e["$respond_to?"]("failure_message_when_negated")["$!"](),r!==!1&&r!==n?e["$respond_to?"]("failure_message_for_should_not"):r)}),n&&"interface_matches?"}(s.base,i),function(t,$super){function r(){}var o=r=a(t,$super,"RSpec1",r);o.$$proto,o.$$scope;return e.defn(o,"$failure_message",function(){var e=this;return e.$base_matcher().$failure_message()}),e.defn(o,"$failure_message_when_negated",function(){var e=this;return e.$base_matcher().$negative_failure_message()}),e.defs(o,"$interface_matches?",function(e){var t;return t=e["$respond_to?"]("failure_message_when_negated")["$!"](),t!==!1&&t!==n?e["$respond_to?"]("negative_failure_message"):t}),n&&"interface_matches?"}(s.base,i)}(s.base,s.get("Matchers").$$scope.get("MatcherDelegator")),e.cdecl(s,"LegacyMacherAdapter",s.get("LegacyMatcherAdapter"))}(s.base)}(t.base)},Opal.modules["rspec/expectations/syntax"]=function(e){e.dynamic_require_severity="ignore";var t,n=(e.top,e),r=e.nil,a=(e.breaker,e.slice,e.module),o=e.hash2,$=e.klass;return e.add_stubs(["$module_function","$last","$ancestors","$deprecate","$==","$default_should_host","$should_enabled?","$module_exec","$warn_about_should_unless_configured","$handle_matcher","$to_proc","$expect_enabled?","$for","$method_defined?"]),function(t){var n,$=n=a(t,"RSpec"),i=($.$$proto,$.$$scope);!function(t){var n,$=n=a(t,"Expectations"),i=($.$$proto,$.$$scope);!function(t){var n,$=n=a(t,"Syntax"),i=($.$$proto,$.$$scope);$.$module_function(),e.defn($,"$default_should_host",function(){var t,n=this;return null==n.default_should_host&&(n.default_should_host=r),(t=n.default_should_host)!==!1&&t!==r?t:n.default_should_host=e.get("Object").$ancestors().$last()}),e.defn($,"$warn_about_should!",function(){var e=this;return e.warn_about_should=!0}),e.defn($,"$warn_about_should_unless_configured",function(e){var t,n=this;return null==n.warn_about_should&&(n.warn_about_should=r),(t=n.warn_about_should)===r||t.$$is_boolean&&1!=t?r:(i.get("RSpec").$deprecate("Using `"+e+"` from rspec-expectations' old `:should` syntax without explicitly enabling the syntax",o(["replacement"],{replacement:"the new `:expect` syntax or explicitly enable `:should`"})),n.warn_about_should=!1)}),e.defn($,"$enable_should",function(t){var n,a,o,$=this;return null==t&&(t=$.$default_should_host()),t["$=="]($.$default_should_host())&&($.warn_about_should=!1),(n=$["$should_enabled?"](t))===r||n.$$is_boolean&&1!=n?(n=(a=t).$module_exec,n.$$p=(o=function(){var t,n,a=o.$$s||this;return e.def(a,"$should",t=function(n,a){var o,$,i=this,s=t.$$p,c=s||r;return null==n&&(n=r),null==a&&(a=r),t.$$p=null,e.get("RSpec").$$scope.get("Expectations").$$scope.get("Syntax").$warn_about_should_unless_configured("should"),(o=($=e.get("RSpec").$$scope.get("Expectations").$$scope.get("PositiveExpectationHandler")).$handle_matcher,o.$$p=c.$to_proc(),o).call($,i,n,a)}),e.def(a,"$should_not",n=function(t,a){var o,$,i=this,s=n.$$p,c=s||r;return null==t&&(t=r),null==a&&(a=r),n.$$p=null,e.get("RSpec").$$scope.get("Expectations").$$scope.get("Syntax").$warn_about_should_unless_configured("should_not"),(o=($=e.get("RSpec").$$scope.get("Expectations").$$scope.get("NegativeExpectationHandler")).$handle_matcher,o.$$p=c.$to_proc(),o).call($,i,t,a)}),r&&"should_not"},o.$$s=$,o),n).call(a):r}),e.defn($,"$disable_should",function(t){var n,a,o,$=this;return null==t&&(t=$.$default_should_host()),(n=$["$should_enabled?"](t))===r||n.$$is_boolean&&1!=n?r:(n=(a=t).$module_exec,n.$$p=(o=function(){var t=o.$$s||this;return e.udef(t,"$should"),e.udef(t,"$should_not")},o.$$s=$,o),n).call(a)}),e.defn($,"$enable_expect",function(t){var n,a,o,$=this;return null==t&&(t=e.get("RSpec").$$scope.get("Matchers")),(n=$["$expect_enabled?"](t))===r||n.$$is_boolean&&1!=n?(n=(a=t).$module_exec,n.$$p=(o=function(){var t,n=o.$$s||this;return e.def(n,"$expect",t=function(n){var a=t.$$p,o=a||r;return null==n&&(n=e.get("RSpec").$$scope.get("Expectations").$$scope.get("ExpectationTarget").$$scope.get("UndefinedValue")),t.$$p=null,e.get("RSpec").$$scope.get("Expectations").$$scope.get("ExpectationTarget").$for(n,o)}),r&&"expect"},o.$$s=$,o),n).call(a):r}),e.defn($,"$disable_expect",function(t){var n,a,o,$=this;return null==t&&(t=e.get("RSpec").$$scope.get("Matchers")),(n=$["$expect_enabled?"](t))===r||n.$$is_boolean&&1!=n?r:(n=(a=t).$module_exec,n.$$p=(o=function(){var t=o.$$s||this;return e.udef(t,"$expect")},o.$$s=$,o),n).call(a)}),e.defn($,"$should_enabled?",function(e){var t=this;return null==e&&(e=t.$default_should_host()),e["$method_defined?"]("should")}),e.defn($,"$expect_enabled?",function(t){return null==t&&(t=e.get("RSpec").$$scope.get("Matchers")),t["$method_defined?"]("expect")})}(i.base)}(i.base)}(n.base),(t=null!=n.BasicObject)===r||t.$$is_boolean&&1!=t?r:function(e,$super){function t(){}var n=t=$(e,$super,"BasicObject",t);n.$$proto,n.$$scope;return r}(n.base,null)},Opal.modules["rspec/expectations/version"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=(e.nil,e.breaker,e.slice,e.module);return function(t){var r,a=r=n(t,"RSpec"),o=(a.$$proto,a.$$scope);!function(t){var r,a=r=n(t,"Expectations"),o=(a.$$proto,a.$$scope);!function(t){var r,a=r=n(t,"Version"),o=(a.$$proto,a.$$scope);e.cdecl(o,"STRING","3.1.2")}(o.base)}(o.base)}(t.base)},Opal.modules["rspec/matchers/aliased_matcher"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass;return e.add_stubs(["$is_a_matcher?","$new","$class","$call","$respond_to?","$does_not_match?","$to_proc","$!","$matches?","$optimal_failure_message","$private","$has_default_failure_messages?","$__send__","$!="]),function(t){var o,$=o=r(t,"RSpec"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"Matchers"),i=($.$$proto,$.$$scope);!function(t,$super){function r(){}var o,$,i,s,c,u=r=a(t,$super,"AliasedMatcher",r),l=u.$$proto,_=u.$$scope;return l.description_block=n,e.defn(u,"$initialize",o=function(t,n){var r=this;o.$$p;return o.$$p=null,r.description_block=n,e.find_super_dispatcher(r,"initialize",o,null).apply(r,[t])}),e.defn(u,"$method_missing",$=function(){var t,r=this,a=$.$$p,o=n,i=n,s=n;for($.$$p=null,i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return o=e.find_super_dispatcher(r,"method_missing",$,a).apply(r,i),(t=_.get("RSpec").$$scope.get("Matchers")["$is_a_matcher?"](o))===n||t.$$is_boolean&&1!=t?o:r.$class().$new(o,r.description_block)}),e.defn(u,"$description",i=function(){var t=this,r=i.$$p,a=n,o=n;for(i.$$p=null,a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return t.description_block.$call(e.find_super_dispatcher(t,"description",i,r).apply(t,a))}),e.defn(u,"$failure_message",s=function(){var t=this,r=s.$$p,a=n,o=n;for(s.$$p=null,a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return t.description_block.$call(e.find_super_dispatcher(t,"failure_message",s,r).apply(t,a))}),e.defn(u,"$failure_message_when_negated",c=function(){var t=this,r=c.$$p,a=n,o=n;for(c.$$p=null,a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return t.description_block.$call(e.find_super_dispatcher(t,"failure_message_when_negated",c,r).apply(t,a))}),n&&"failure_message_when_negated"}(i.base,i.get("MatcherDelegator")),function(t,$super){function n(){}var r=n=a(t,$super,"AliasedMatcherWithOperatorSupport",n);r.$$proto,r.$$scope;return e.udef(r,"$=="),e.udef(r,"$===")}(i.base,i.get("AliasedMatcher")),function(t,$super){function r(){}var o,$,i=r=a(t,$super,"AliasedNegatedMatcher",r),s=i.$$proto,c=i.$$scope;return s.base_matcher=s.description_block=n,e.defn(i,"$matches?",o=function(){var t,r,a=this,$=o.$$p,i=$||n,s=n,c=n,u=n,l=arguments.length-0;0>l&&(l=0);var _=new Array(l);for(s=0;l>s;s++)_[s]=arguments[s+0];for(o.$$p=null,c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];return(t=a.base_matcher["$respond_to?"]("does_not_match?"))===n||t.$$is_boolean&&1!=t?e.find_super_dispatcher(a,"matches?",o,$).apply(a,c)["$!"]():(t=(r=a.base_matcher)["$does_not_match?"],t.$$p=i.$to_proc(),t).apply(r,e.to_a(_))}),e.defn(i,"$does_not_match?",$=function(){var t,r,a=this,o=$.$$p,i=o||n,s=n,c=arguments.length-0;0>c&&(c=0);var u=new Array(c);for(s=0;c>s;s++)u[s]=arguments[s+0];return $.$$p=null,(t=(r=a.base_matcher)["$matches?"],t.$$p=i.$to_proc(),t).apply(r,e.to_a(u))}),e.defn(i,"$failure_message",function(){var e=this;return e.$optimal_failure_message("failure_message","failure_message_when_negated")}),e.defn(i,"$failure_message_when_negated",function(){var e=this;return e.$optimal_failure_message("failure_message_when_negated","failure_message")}),i.$private(),e.cdecl(c,"DefaultFailureMessages",c.get("BuiltIn").$$scope.get("BaseMatcher").$$scope.get("DefaultFailureMessages")),e.defn(i,"$optimal_failure_message",function(e,t){var r,a=this,o=n,$=n;return(r=c.get("DefaultFailureMessages")["$has_default_failure_messages?"](a.base_matcher))===n||r.$$is_boolean&&1!=r||(o=a.base_matcher.$__send__(e),$=a.description_block.$call(o),(r=$["$!="](o))===n||r.$$is_boolean&&1!=r)?a.base_matcher.$__send__(t):$}),n&&"optimal_failure_message"}(i.base,i.get("AliasedMatcher"))}(i.base)}(t.base)},Opal.modules["rspec/matchers/built_in/be_kind_of"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass;return e.add_stubs(["$private","$kind_of?"]),function(t){var o,$=o=r(t,"RSpec"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"Matchers"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"BuiltIn"),i=($.$$proto,$.$$scope);!function(t,$super){function r(){}var o=r=a(t,$super,"BeAKindOf",r);o.$$proto,o.$$scope;return o.$private(),e.defn(o,"$match",function(e,t){return t["$kind_of?"](e)}),n&&"match"}(i.base,i.get("BaseMatcher"))}(i.base)}(i.base)}(t.base)},Opal.modules["rspec/matchers/built_in/be_instance_of"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass;return e.add_stubs(["$expected","$private","$instance_of?"]),function(t){var o,$=o=r(t,"RSpec"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"Matchers"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"BuiltIn"),i=($.$$proto,$.$$scope);!function(t,$super){function r(){}var o=r=a(t,$super,"BeAnInstanceOf",r);o.$$proto,o.$$scope;return e.defn(o,"$description",function(){var e=this;return"be an instance of "+e.$expected()}),o.$private(),e.defn(o,"$match",function(e,t){return t["$instance_of?"](e)}),n&&"match"}(i.base,i.get("BaseMatcher"))}(i.base)}(i.base)}(t.base)},Opal.modules["rspec/matchers/built_in/be_between"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass;return e.add_stubs(["$inclusive","$comparable?","$compare","$not_comparable_clause","$inspect","$private","$respond_to?","$__send__"]),function(t){var o,$=o=r(t,"RSpec"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"Matchers"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"BuiltIn"),i=($.$$proto,$.$$scope);!function(t,$super){function r(){}var o,$=r=a(t,$super,"BeBetween",r),i=$.$$proto,s=$.$$scope;return i.min=i.max=i.mode=i.actual=i.less_than_operator=i.greater_than_operator=n,e.defn($,"$initialize",function(e,t){var n,r=this;return n=[e,t],r.min=n[0],r.max=n[1],n,r.$inclusive()}),e.defn($,"$inclusive",function(){var e=this;return e.less_than_operator="<=",e.greater_than_operator=">=",e.mode="inclusive",e}),e.defn($,"$exclusive",function(){var e=this;return e.less_than_operator="<",e.greater_than_operator=">",e.mode="exclusive",e}),e.defn($,"$matches?",function(t){var r,a=this;try{return a.actual=t,r=a["$comparable?"](),r!==!1&&r!==n?a.$compare():r}catch(o){if(!e.rescue(o,[s.get("ArgumentError")]))throw o;try{return!1}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}),e.defn($,"$failure_message",o=function(){var t=this,r=o.$$p,a=n,$=n;for(o.$$p=null,a=[],$=0;$<arguments.length;$++)a[$]=arguments[$];return""+e.find_super_dispatcher(t,"failure_message",o,r).apply(t,a)+t.$not_comparable_clause()}),e.defn($,"$description",function(){var e=this;return"be between "+e.min.$inspect()+" and "+e.max.$inspect()+" ("+e.mode+")"}),$.$private(),e.defn($,"$comparable?",function(){var e,t=this;return e=t.actual["$respond_to?"](t.less_than_operator),e!==!1&&e!==n?t.actual["$respond_to?"](t.greater_than_operator):e}),e.defn($,"$not_comparable_clause",function(){var e,t=this;return(e=t["$comparable?"]())===n||e.$$is_boolean&&1!=e?", but it does not respond to `"+t.less_than_operator+"` and `"+t.greater_than_operator+"`":n}),e.defn($,"$compare",function(){var e,t=this;return e=t.actual.$__send__(t.greater_than_operator,t.min),e!==!1&&e!==n?t.actual.$__send__(t.less_than_operator,t.max):e}),n&&"compare"}(i.base,i.get("BaseMatcher"))}(i.base)}(i.base)}(t.base)},Opal.modules["rspec/matchers/built_in/be"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="ignore";var n=(e.top,e),r=e.nil,a=(e.breaker,e.slice,e.module),o=e.klass;return e.add_stubs(["$inspect","$actual","$private","$!","$nil?","$empty?","$parenthesize","$join","$inspected_args","$map","$split_words","$to_sentence","$include","$each","$define_method","$new","$__send__","$gsub","$to_s","$include?","$+","$expected_to_sentence","$args_to_sentence","$parse_expected","$shift","$predicate_accessible?","$predicate_matches?","$failure_message_expecting","$prefix_to_sentence","$private_predicate?","$predicate_exists?","$===","$first","$methods","$private_methods","$predicate","$respond_to?","$present_tense_predicate","$to_proc","$prefix_and_expected","$compact","$captures","$match","$validity_message","$args_to_s"]),function(n){var $,i=$=a(n,"RSpec"),s=(i.$$proto,i.$$scope);!function(n){var $,i=$=a(n,"Matchers"),s=(i.$$proto,i.$$scope);!function(n){var $,i=$=a(n,"BuiltIn"),s=(i.$$proto,i.$$scope);!function(t,$super){function n(){}var a=n=o(t,$super,"BeTruthy",n);a.$$proto,a.$$scope;return e.defn(a,"$failure_message",function(){var e=this;return"expected: truthy value\n     got: "+e.$actual().$inspect()}),e.defn(a,"$failure_message_when_negated",function(){var e=this;return"expected: falsey value\n     got: "+e.$actual().$inspect()}),a.$private(),e.defn(a,"$match",function(e,t){return t["$!"]()["$!"]()}),r&&"match"}(s.base,s.get("BaseMatcher")),function(t,$super){function n(){}var a=n=o(t,$super,"BeFalsey",n);a.$$proto,a.$$scope;return e.defn(a,"$failure_message",function(){var e=this;return"expected: falsey value\n     got: "+e.$actual().$inspect()}),e.defn(a,"$failure_message_when_negated",function(){var e=this;return"expected: truthy value\n     got: "+e.$actual().$inspect()}),a.$private(),e.defn(a,"$match",function(e,t){return t["$!"]()}),r&&"match"}(s.base,s.get("BaseMatcher")),function(t,$super){function n(){}var a=n=o(t,$super,"BeNil",n);a.$$proto,a.$$scope;return e.defn(a,"$failure_message",function(){var e=this;return"expected: nil\n     got: "+e.$actual().$inspect()}),e.defn(a,"$failure_message_when_negated",function(){return"expected: not nil\n     got: nil"}),a.$private(),e.defn(a,"$match",function(e,t){return t["$nil?"]()}),r&&"match"}(s.base,s.get("BaseMatcher")),function(t){var n,o=n=a(t,"BeHelpers");o.$$proto,o.$$scope;o.$private(),e.defn(o,"$args_to_s",function(){var e,t=this;
return null==t.args&&(t.args=r),(e=t.args["$empty?"]())===r||e.$$is_boolean&&1!=e?t.$parenthesize(t.$inspected_args().$join(", ")):""}),e.defn(o,"$parenthesize",function(e){return"("+e+")"}),e.defn(o,"$inspected_args",function(){var e,t,n,a=this;return null==a.args&&(a.args=r),(e=(t=a.args).$map,e.$$p=(n=function(e){n.$$s||this;return null==e&&(e=r),e.$inspect()},n.$$s=a,n),e).call(t)}),e.defn(o,"$expected_to_sentence",function(){var e=this;return null==e.expected&&(e.expected=r),e.$split_words(e.expected)}),e.defn(o,"$args_to_sentence",function(){var e=this;return null==e.args&&(e.args=r),e.$to_sentence(e.args)})}(s.base),function(t,$super){function n(){}var a,$,i,s=n=o(t,$super,"Be",n),c=s.$$proto,u=s.$$scope;return c.actual=r,s.$include(u.get("BeHelpers")),e.defn(s,"$initialize",function(){var e=this,t=r,n=arguments.length-0;0>n&&(n=0);var a=new Array(n);for(t=0;n>t;t++)a[t]=arguments[t+0];return e.args=a}),e.defn(s,"$failure_message",function(){var e=this;return"expected "+e.actual.$inspect()+" to evaluate to true"}),e.defn(s,"$failure_message_when_negated",function(){var e=this;return"expected "+e.actual.$inspect()+" to evaluate to false"}),(a=($=["==","<","<=",">=",">","===","=~"]).$each,a.$$p=(i=function(e){var t,n,a,o=i.$$s||this;return null==e&&(e=r),(t=(n=o).$define_method,t.$$p=(a=function(t){a.$$s||this;return null==t&&(t=r),u.get("BeComparedTo").$new(t,e)},a.$$s=o,a),t).call(n,e)},i.$$s=s,i),a).call($),s.$private(),e.defn(s,"$match",function(e,t){return t["$!"]()["$!"]()}),r&&"match"}(s.base,s.get("BaseMatcher")),function(n,$super){function a(){}var $=a=o(n,$super,"BeComparedTo",a),i=$.$$proto,s=$.$$scope;return i.actual=i.operator=i.expected=r,$.$include(s.get("BeHelpers")),e.defn($,"$initialize",function(e,t){var n,r=this;return n=[e,t],r.expected=n[0],r.operator=n[1],n,r.args=[]}),e.defn($,"$matches?",function(e){var t=this;return t.actual=e,t.actual.$__send__(t.operator,t.expected)}),e.defn($,"$failure_message",function(){var e=this;return"expected: "+e.operator+" "+e.expected.$inspect()+"\n     got: "+e.operator.$to_s().$gsub(/./," ")+" "+e.actual.$inspect()}),e.defn($,"$failure_message_when_negated",function(){var e,n=this,a=r;return a="`expect("+n.actual.$inspect()+").not_to be "+n.operator+" "+n.expected.$inspect()+"`",(e=["<",">","<=",">="]["$include?"](n.operator))===r||e.$$is_boolean&&1!=e?a:t(a," not only FAILED, it is a bit confusing.")}),e.defn($,"$description",function(){var e=this;return"be "+e.operator+" "+e.$expected_to_sentence()+e.$args_to_sentence()}),r&&"description"}(s.base,s.get("BaseMatcher")),function(t,$super){function n(){}var a,$,i,s,c=n=o(t,$super,"BePredicate",n),u=c.$$proto,l=c.$$scope;return u.block=u.actual=u.args=u.expected=u.prefix=u.predicate_matches=r,c.$include(l.get("BeHelpers")),e.defn(c,"$initialize",a=function(){var e=this,t=a.$$p,n=t||r,o=r,$=arguments.length-0;0>$&&($=0);var i=new Array($);for(o=0;$>o;o++)i[o]=arguments[o+0];return a.$$p=null,e.expected=e.$parse_expected(i.$shift()),e.args=i,e.block=n}),e.defn(c,"$matches?",$=function(e){var t,n=this,a=$.$$p,o=a||r;return $.$$p=null,n.actual=e,(t=n.block)!==!1&&t!==r?t:n.block=o,t=n["$predicate_accessible?"](),t!==!1&&t!==r?n["$predicate_matches?"]():t}),e.defn(c,"$does_not_match?",i=function(e){var t,n=this,a=i.$$p,o=a||r;return i.$$p=null,n.actual=e,(t=n.block)!==!1&&t!==r?t:n.block=o,t=n["$predicate_accessible?"](),t!==!1&&t!==r?n["$predicate_matches?"]()["$!"]():t}),e.defn(c,"$failure_message",function(){var e=this;return e.$failure_message_expecting(!0)}),e.defn(c,"$failure_message_when_negated",function(){var e=this;return e.$failure_message_expecting(!1)}),e.defn(c,"$description",function(){var e=this;return""+e.$prefix_to_sentence()+e.$expected_to_sentence()+e.$args_to_sentence()}),c.$private(),e.defn(c,"$predicate_accessible?",function(){var e,t=this;return e=t["$private_predicate?"]()["$!"](),e!==!1&&e!==r?t["$predicate_exists?"]():e}),(s=l.get("String")["$==="](c.$methods().$first()))===r||s.$$is_boolean&&1!=s?e.defn(c,"$private_predicate?",function(){var e=this;return e.actual.$private_methods()["$include?"](e.$predicate())}):e.defn(c,"$private_predicate?",function(){var e=this;return e.actual.$private_methods()["$include?"](e.$predicate().$to_s())}),e.defn(c,"$predicate_exists?",function(){var e,t=this;return(e=t.$actual()["$respond_to?"](t.$predicate()))!==!1&&e!==r?e:t.$actual()["$respond_to?"](t.$present_tense_predicate())}),e.defn(c,"$predicate_matches?",function(){var t,n,a=this,o=r;return o=function(){return(t=a.$actual()["$respond_to?"](a.$predicate()))===r||t.$$is_boolean&&1!=t?a.$present_tense_predicate():a.$predicate()}(),a.predicate_matches=(t=(n=a.$actual()).$__send__,t.$$p=a.block.$to_proc(),t).apply(n,[o].concat(e.to_a(a.args)))}),e.defn(c,"$predicate",function(){var e=this;return""+e.expected.$to_s()+"?"}),e.defn(c,"$present_tense_predicate",function(){var e=this;return""+e.expected.$to_s()+"s?"}),e.defn(c,"$parse_expected",function(t){var n,a,o=this;return a=o.$prefix_and_expected(t),n=e.to_ary(a),o.prefix=null==n[0]?r:n[0],t=null==n[1]?r:n[1],a,t}),e.defn(c,"$prefix_and_expected",function(e){return l.get("Matchers").$$scope.get("BE_PREDICATE_REGEX").$match(e.$to_s()).$captures().$compact()}),e.defn(c,"$prefix_to_sentence",function(){var e=this;return e.$split_words(e.prefix)}),e.defn(c,"$failure_message_expecting",function(e){var t,n=this;return(t=n.$validity_message())!==!1&&t!==r?t:"expected `"+n.actual.$inspect()+"."+n.$predicate()+n.$args_to_s()+"` to return "+e+", got "+n.predicate_matches.$inspect()}),e.defn(c,"$validity_message",function(){var e,t=this;return(e=t["$private_predicate?"]())===r||e.$$is_boolean&&1!=e?(e=t["$predicate_exists?"]()["$!"]())===r||e.$$is_boolean&&1!=e?r:"expected "+t.actual+" to respond to `"+t.$predicate()+"`":"expected "+t.actual+" to respond to `"+t.$predicate()+"` but `"+t.$predicate()+"` is a private method"}),r&&"validity_message"}(s.base,s.get("BaseMatcher"))}(s.base)}(s.base)}(n.base)},Opal.modules["rspec/matchers/built_in/be_within"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e/t:e["$/"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?t>=e:e["$<="](t)}function a(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.dynamic_require_severity="ignore";var o=(e.top,e),$=e.nil,i=(e.breaker,e.slice,e.module),s=e.klass;return e.add_stubs(["$/","$*","$abs","$raise","$needs_expected","$numeric?","$<=","$-","$inspect","$description","$not_numeric_clause","$private","$respond_to?","$new"]),function(o){var c,u=c=i(o,"RSpec"),l=(u.$$proto,u.$$scope);!function(o){var c,u=c=i(o,"Matchers"),l=(u.$$proto,u.$$scope);!function(o){var c,u=c=i(o,"BuiltIn"),l=(u.$$proto,u.$$scope);!function(o,$super){function i(){}var c=i=s(o,$super,"BeWithin",i),u=c.$$proto,l=c.$$scope;return u.delta=u.expected=u.actual=u.tolerance=u.unit=$,e.defn(c,"$initialize",function(e){var t=this;return t.delta=e}),e.defn(c,"$of",function(e){var t=this;return t.expected=e,t.tolerance=t.delta,t.unit="",t}),e.defn(c,"$percent_of",function(e){var r=this;return r.expected=e,r.tolerance=t(n(r.delta,r.expected.$abs()),100),r.unit="%",r}),e.defn(c,"$matches?",function(e){var t,n,o=this;return o.actual=e,n=o.expected,((t=null!=n&&n!==$?"instance-variable":$)===$||t.$$is_boolean&&1!=t)&&o.$raise(o.$needs_expected()),t=o["$numeric?"](),t!==!1&&t!==$?r(a(o.actual,o.expected).$abs(),o.tolerance):t}),e.defn(c,"$failure_message",function(){var e=this;return"expected "+e.actual.$inspect()+" to "+e.$description()+e.$not_numeric_clause()}),e.defn(c,"$failure_message_when_negated",function(){var e=this;return"expected "+e.actual.$inspect()+" not to "+e.$description()}),e.defn(c,"$description",function(){var e=this;return"be within "+e.delta+e.unit+" of "+e.expected}),c.$private(),e.defn(c,"$numeric?",function(){var e=this;return e.actual["$respond_to?"]("-")}),e.defn(c,"$needs_expected",function(){var e=this;return l.get("ArgumentError").$new("You must set an expected value using #of: be_within("+e.delta+").of(expected_value)")}),e.defn(c,"$not_numeric_clause",function(){var e,t=this;return(e=t["$numeric?"]())===$||e.$$is_boolean&&1!=e?", but it could not be treated as a numeric value":$}),$&&"not_numeric_clause"}(l.base,l.get("BaseMatcher"))}(l.base)}(l.base)}(o.base)},Opal.modules["rspec/matchers/built_in/change"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>=t:e["$>="](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?t>=e:e["$<="](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.dynamic_require_severity="ignore";var a=(e.top,e),o=e.nil,$=(e.breaker,e.slice,e.module),i=e.klass;return e.add_stubs(["$new","$values_match?","$>=","$<=","$===","$raise_block_syntax_error","$perform_change","$changed?","$!","$matches?","$message","$positive_failure_reason","$negative_failure_reason","$private","$to_proc","$raise","$description_of","$actual_before","$actual_after","$gsub","$to_s","$failure_reason","$call","$actual_delta","$last","$ancestors","$matches_before?","$matches_after?","$change_description","$not_given_a_block_failure","$before_value_failure","$did_not_change_failure","$after_value_failure","$did_change_failure","$attr_reader","$lambda","$__send__","$evaluate_value_proc","$!=","$-","$dup"]),function(a){var s,c=s=$(a,"RSpec"),u=(c.$$proto,c.$$scope);!function(a){var s,c=s=$(a,"Matchers"),u=(c.$$proto,c.$$scope);!function(a){var s,c=s=$(a,"BuiltIn"),u=(c.$$proto,c.$$scope);!function(r,$super){function a(){}var $,s,c,u=a=i(r,$super,"Change",a),l=u.$$proto,_=u.$$scope;return l.change_details=l.event_proc=o,e.defn(u,"$by",function(e){var t,n,r,a=this;return(t=(n=_.get("ChangeRelatively")).$new,t.$$p=(r=function(t){var n=r.$$s||this;return null==t&&(t=o),n["$values_match?"](e,t)},r.$$s=a,r),t).call(n,a.change_details,e,"by")}),e.defn(u,"$by_at_least",function(e){var n,r,a,$=this;return(n=(r=_.get("ChangeRelatively")).$new,n.$$p=(a=function(n){a.$$s||this;return null==n&&(n=o),t(n,e)},a.$$s=$,a),n).call(r,$.change_details,e,"by_at_least")}),e.defn(u,"$by_at_most",function(e){var t,r,a,$=this;return(t=(r=_.get("ChangeRelatively")).$new,t.$$p=(a=function(t){a.$$s||this;return null==t&&(t=o),n(t,e)},a.$$s=$,a),t).call(r,$.change_details,e,"by_at_most")}),e.defn(u,"$to",function(e){var t=this;return _.get("ChangeToValue").$new(t.change_details,e)}),e.defn(u,"$from",function(e){var t=this;return _.get("ChangeFromValue").$new(t.change_details,e)}),e.defn(u,"$matches?",$=function(e){var t,n=this,r=$.$$p,a=r||o;return $.$$p=null,n.event_proc=e,(t=_.get("Proc")["$==="](e))===o||t.$$is_boolean&&1!=t?!1:(a!==o&&n.$raise_block_syntax_error(),n.change_details.$perform_change(e),n.change_details["$changed?"]())}),e.defn(u,"$does_not_match?",s=function(e){var t,n=this,r=s.$$p,a=r||o;return s.$$p=null,a!==o&&n.$raise_block_syntax_error(),t=n["$matches?"](e)["$!"](),t!==!1&&t!==o?_.get("Proc")["$==="](e):t}),e.defn(u,"$failure_message",function(){var e=this;return"expected "+e.change_details.$message()+" to have changed, but "+e.$positive_failure_reason()}),e.defn(u,"$failure_message_when_negated",function(){var e=this;return"expected "+e.change_details.$message()+" not to have changed, but "+e.$negative_failure_reason()}),e.defn(u,"$description",function(){var e=this;return"change "+e.change_details.$message()}),e.defn(u,"$supports_block_expectations?",function(){return!0}),u.$private(),e.defn(u,"$initialize",c=function(e,t){var n,r,a=this,$=c.$$p,i=$||o;return null==e&&(e=o),null==t&&(t=o),c.$$p=null,a.change_details=(n=(r=_.get("ChangeDetails")).$new,n.$$p=i.$to_proc(),n).call(r,e,t)}),e.defn(u,"$raise_block_syntax_error",function(){var e=this;return e.$raise(_.get("SyntaxError"),"The block passed to the `change` matcher must use `{ ... }` instead of do/end")}),e.defn(u,"$positive_failure_reason",function(){var e,t=this;return(e=_.get("Proc")["$==="](t.event_proc))===o||e.$$is_boolean&&1!=e?"was not given a block":"is still "+t.$description_of(t.change_details.$actual_before())}),e.defn(u,"$negative_failure_reason",function(){var e,t=this;return(e=_.get("Proc")["$==="](t.event_proc))===o||e.$$is_boolean&&1!=e?"was not given a block":"did change from "+t.$description_of(t.change_details.$actual_before())+" to "+t.$description_of(t.change_details.$actual_after())}),o&&"negative_failure_reason"}(u.base,u.get("BaseMatcher")),function(t,$super){function n(){}var r,a=n=i(t,$super,"ChangeRelatively",n),$=a.$$proto,s=a.$$scope;return $.change_details=$.relativity=$.expected_delta=$.comparer=$.event_proc=o,e.defn(a,"$initialize",r=function(e,t,n){var a=this,$=r.$$p,i=$||o;return r.$$p=null,a.change_details=e,a.expected_delta=t,a.relativity=n,a.comparer=i}),e.defn(a,"$failure_message",function(){var e=this;return"expected "+e.change_details.$message()+" to have changed "+e.relativity.$to_s().$gsub("_"," ")+" "+e.$description_of(e.expected_delta)+", but "+e.$failure_reason()}),e.defn(a,"$matches?",function(e){var t,n=this;return n.event_proc=e,(t=s.get("Proc")["$==="](e))===o||t.$$is_boolean&&1!=t?!1:(n.change_details.$perform_change(e),n.comparer.$call(n.change_details.$actual_delta()))}),e.defn(a,"$does_not_match?",function(e){var t=this;return t.$raise(s.get("NotImplementedError"),"`expect { }.not_to change { }."+t.relativity+"()` is not supported")}),e.defn(a,"$description",function(){var e=this;return"change "+e.change_details.$message()+" "+e.relativity.$to_s().$gsub("_"," ")+" "+e.$description_of(e.expected_delta)}),e.defn(a,"$supports_block_expectations?",function(){return!0}),a.$private(),e.defn(a,"$failure_reason",function(){var e,t=this;return(e=s.get("Proc")["$==="](t.event_proc))===o||e.$$is_boolean&&1!=e?"was not given a block":"was changed by "+t.$description_of(t.change_details.$actual_delta())}),o&&"failure_reason"}(u.base,u.get("BaseMatcher")),function(t,$super){function n(){}var r=n=i(t,$super,"SpecificValuesChange",n),a=r.$$proto,$=r.$$scope;return a.change_details=a.event_proc=a.expected_before=a.expected_after=o,e.cdecl($,"MATCH_ANYTHING",e.get("Object").$ancestors().$last()),e.defn(r,"$initialize",function(e,t,n){var r=this;return r.change_details=e,r.expected_before=t,r.expected_after=n}),e.defn(r,"$matches?",function(e){var t,n,r=this;return r.event_proc=e,(t=$.get("Proc")["$==="](e))===o||t.$$is_boolean&&1!=t?!1:(r.change_details.$perform_change(e),n=r.change_details["$changed?"](),t=n!==!1&&n!==o?r["$matches_before?"]():n,t!==!1&&t!==o?r["$matches_after?"]():t)}),e.defn(r,"$description",function(){var e=this;return"change "+e.change_details.$message()+" "+e.$change_description()}),e.defn(r,"$failure_message",function(){var e,t=this;return(e=$.get("Proc")["$==="](t.event_proc))===o||e.$$is_boolean&&1!=e?t.$not_given_a_block_failure():(e=t["$matches_before?"]())===o||e.$$is_boolean&&1!=e?t.$before_value_failure():(e=t.change_details["$changed?"]())===o||e.$$is_boolean&&1!=e?t.$did_not_change_failure():t.$after_value_failure()}),e.defn(r,"$supports_block_expectations?",function(){return!0}),r.$private(),e.defn(r,"$matches_before?",function(){var e=this;return e["$values_match?"](e.expected_before,e.change_details.$actual_before())}),e.defn(r,"$matches_after?",function(){var e=this;return e["$values_match?"](e.expected_after,e.change_details.$actual_after())}),e.defn(r,"$before_value_failure",function(){var e=this;return"expected "+e.change_details.$message()+" to have initially been "+e.$description_of(e.expected_before)+", but was "+e.$description_of(e.change_details.$actual_before())}),e.defn(r,"$after_value_failure",function(){var e=this;return"expected "+e.change_details.$message()+" to have changed to "+e.$description_of(e.expected_after)+", but is now "+e.$description_of(e.change_details.$actual_after())}),e.defn(r,"$did_not_change_failure",function(){var e=this;return"expected "+e.change_details.$message()+" to have changed "+e.$change_description()+", but did not change"}),e.defn(r,"$did_change_failure",function(){var e=this;return"expected "+e.change_details.$message()+" not to have changed, but did change from "+e.$description_of(e.change_details.$actual_before())+" to "+e.$description_of(e.change_details.$actual_after())}),e.defn(r,"$not_given_a_block_failure",function(){var e=this;return"expected "+e.change_details.$message()+" to have changed "+e.$change_description()+", but was not given a block"}),o&&"not_given_a_block_failure"}(u.base,u.get("BaseMatcher")),function(t,$super){function n(){}var r,a=n=i(t,$super,"ChangeFromValue",n),$=a.$$proto,s=a.$$scope;return $.description_suffix=$.change_details=$.event_proc=$.expected_before=o,e.defn(a,"$initialize",r=function(t,n){var a=this;r.$$p;return r.$$p=null,a.description_suffix=o,e.find_super_dispatcher(a,"initialize",r,null).apply(a,[t,n,s.get("MATCH_ANYTHING")])}),e.defn(a,"$to",function(e){var t=this;return t.expected_after=e,t.description_suffix=" to "+t.$description_of(e),t}),e.defn(a,"$does_not_match?",function(e){var t,n=this;return(t=n.description_suffix)===o||t.$$is_boolean&&1!=t||n.$raise(s.get("NotImplementedError"),"`expect { }.not_to change { }.to()` is not supported"),n.event_proc=e,(t=s.get("Proc")["$==="](e))===o||t.$$is_boolean&&1!=t?!1:(n.change_details.$perform_change(e),t=n.change_details["$changed?"]()["$!"](),t!==!1&&t!==o?n["$matches_before?"]():t)}),e.defn(a,"$failure_message_when_negated",function(){var e,t=this;return(e=s.get("Proc")["$==="](t.event_proc))===o||e.$$is_boolean&&1!=e?t.$not_given_a_block_failure():(e=t["$matches_before?"]())===o||e.$$is_boolean&&1!=e?t.$before_value_failure():t.$did_change_failure()}),a.$private(),e.defn(a,"$change_description",function(){var e=this;return"from "+e.$description_of(e.expected_before)+e.description_suffix}),o&&"change_description"}(u.base,u.get("SpecificValuesChange")),function(t,$super){function n(){}var r,a=n=i(t,$super,"ChangeToValue",n),$=a.$$proto,s=a.$$scope;return $.expected_after=$.description_suffix=o,e.defn(a,"$initialize",r=function(t,n){var a=this;r.$$p;return r.$$p=null,a.description_suffix=o,e.find_super_dispatcher(a,"initialize",r,null).apply(a,[t,s.get("MATCH_ANYTHING"),n])}),e.defn(a,"$from",function(e){var t=this;return t.expected_before=e,t.description_suffix=" from "+t.$description_of(e),t}),e.defn(a,"$does_not_match?",function(e){var t=this;return t.$raise(s.get("NotImplementedError"),"`expect { }.not_to change { }.to()` is not supported")}),a.$private(),e.defn(a,"$change_description",function(){var e=this;return"to "+e.$description_of(e.expected_after)+e.description_suffix}),o&&"change_description"}(u.base,u.get("SpecificValuesChange")),function(t,$super){function n(){}var a,$=n=i(t,$super,"ChangeDetails",n),s=$.$$proto,c=$.$$scope;return s.actual_before=s.actual_after=s.value_proc=o,$.$attr_reader("message","actual_before","actual_after"),e.defn($,"$initialize",a=function(e,t){var n,r,$,i,s=this,u=a.$$p,l=u||o;return null==e&&(e=o),null==t&&(t=o),a.$$p=null,(n=(r=e!==!1&&e!==o)?t["$!"]():e)===o||n.$$is_boolean&&1!=n||s.$raise(c.get("ArgumentError"),"`change` requires either an object and message (`change(obj, :msg)`) or a block (`change { }`). You passed an object but no message."),s.message=function(){return t!==!1&&t!==o?"#"+t:"result"}(),s.value_proc=(n=l)!==!1&&n!==o?n:(r=($=s).$lambda,r.$$p=(i=function(){i.$$s||this;return e.$__send__(t)},i.$$s=s,i),r).call($)}),e.defn($,"$perform_change",function(e){var t=this;return t.actual_before=t.$evaluate_value_proc(),e.$call(),t.actual_after=t.$evaluate_value_proc()}),e.defn($,"$changed?",function(){var e=this;return e.actual_before["$!="](e.actual_after)}),e.defn($,"$actual_delta",function(){var e=this;return r(e.actual_after,e.actual_before)}),$.$private(),e.defn($,"$evaluate_value_proc",function(){var e=this,t=o,n=o;return function(){return t=n=e.value_proc.$call(),c.get("IO")["$==="](t)?n:c.get("Enumerable")["$==="](t)||c.get("String")["$==="](t)?n.$dup():n}()}),o&&"evaluate_value_proc"}(u.base,null)}(u.base)}(u.base)}(a.base)},Opal.modules["rspec/matchers/built_in/compound"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.dynamic_require_severity="ignore";var r=(e.top,e),a=e.nil,o=(e.breaker,e.slice),$=e.module,i=e.klass,s=e.hash2;return e.add_stubs(["$attr_reader","$raise","$conjunction","$singleline_message","$description","$matcher_1","$matcher_2","$matcher_supports_block_expectations?","$matcher_expects_call_stack_jump?","$private","$clone","$supports_block_expectations?","$===","$new","$join","$map","$=~","$+","$lines","$failure_message","$multiline?","$multiline_message","$indent_multiline_message","$sub","$>","$count","$matcher_matches?","$matches?","$order_block_matchers","$[]=","$inner_matcher_block","$fetch","$empty?","$call","$class","$expects_call_stack_jump?","$matcher_1_matches?","$matcher_2_matches?","$compound_failure_message"]),function(r){var c,u=c=$(r,"RSpec"),l=(u.$$proto,u.$$scope);!function(r){var c,u=c=$(r,"Matchers"),l=(u.$$proto,u.$$scope);!function(r){var c,u=c=$(r,"BuiltIn"),l=(u.$$proto,u.$$scope);!function(r,$super){function $(){}var c,u=$=i(r,$super,"Compound",$),l=u.$$proto,_=u.$$scope;return l.matcher_1=l.matcher_2=l.evaluator=a,u.$attr_reader("matcher_1","matcher_2"),e.defn(u,"$initialize",function(e,t){var n=this;return n.matcher_1=e,n.matcher_2=t}),e.defn(u,"$does_not_match?",function(e){var t=this;return t.$raise(_.get("NotImplementedError"),"`expect(...).not_to matcher."+t.$conjunction()+" matcher` is not supported, since it creates a bit of an ambiguity. Instead, define negated versions of whatever matchers you wish to negate with `RSpec::Matchers.define_negated_matcher` and "+("use `expect(...).to matcher."+t.$conjunction()+" matcher`."))}),e.defn(u,"$description",function(){var e=this;return e.$singleline_message(e.$matcher_1().$description(),e.$matcher_2().$description())}),e.defn(u,"$supports_block_expectations?",function(){var e,t=this;return e=t["$matcher_supports_block_expectations?"](t.$matcher_1()),e!==!1&&e!==a?t["$matcher_supports_block_expectations?"](t.$matcher_2()):e}),e.defn(u,"$expects_call_stack_jump?",function(){var e,t=this;return(e=_.get("NestedEvaluator")["$matcher_expects_call_stack_jump?"](t.$matcher_1()))!==!1&&e!==a?e:_.get("NestedEvaluator")["$matcher_expects_call_stack_jump?"](t.$matcher_2())}),u.$private(),e.defn(u,"$initialize_copy",c=function(t){var n=this,r=c.$$p,o=a,$=a;for(c.$$p=null,o=[],$=0;$<arguments.length;$++)o[$]=arguments[$];return n.matcher_1=n.matcher_1.$clone(),n.matcher_2=n.matcher_2.$clone(),e.find_super_dispatcher(n,"initialize_copy",c,r).apply(n,o)}),e.defn(u,"$match",function(e,t){var n,r,o=this,$=a;return $=function(){return r=o["$supports_block_expectations?"](),(n=r!==!1&&r!==a?_.get("Proc")["$==="](t):r)===a||n.$$is_boolean&&1!=n?_.get("SequentialEvaluator"):_.get("NestedEvaluator")}(),o.evaluator=$.$new(t,o.$matcher_1(),o.$matcher_2())}),e.defn(u,"$indent_multiline_message",function(e){var n,r,o,$=this;return(n=(r=e.$lines()).$map,n.$$p=(o=function(e){var n;o.$$s||this;return null==e&&(e=a),(n=e["$=~"](/\S/))===a||n.$$is_boolean&&1!=n?e:t("   ",e)},o.$$s=$,o),n).call(r).$join()}),e.defn(u,"$compound_failure_message",function(){var e,t,n=this,r=a,o=a;return r=n.$matcher_1().$failure_message(),o=n.$matcher_2().$failure_message(),(e=(t=n["$multiline?"](r))!==!1&&t!==a?t:n["$multiline?"](o))===a||e.$$is_boolean&&1!=e?n.$singleline_message(r,o):n.$multiline_message(r,o)}),e.defn(u,"$multiline_message",function(e,t){var n=this;return[n.$indent_multiline_message(e.$sub(/\n+\z/,"")),"..."+n.$conjunction()+":",n.$indent_multiline_message(t.$sub(/\A\n+/,""))].$join("\n\n")}),e.defn(u,"$multiline?",function(e){return n(e.$lines().$count(),1)}),e.defn(u,"$singleline_message",function(e,t){var n=this;return[e,n.$conjunction(),t].$join(" ")}),e.defn(u,"$matcher_1_matches?",function(){var e=this;return e.evaluator["$matcher_matches?"](e.$matcher_1())}),e.defn(u,"$matcher_2_matches?",function(){var e=this;return e.evaluator["$matcher_matches?"](e.$matcher_2())}),e.defn(u,"$matcher_supports_block_expectations?",function(t){try{return t["$supports_block_expectations?"]()}catch(n){if(!e.rescue(n,[_.get("NoMethodError")]))throw n;try{return!1}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}),function(t,$super){function n(){}var r=n=i(t,$super,"SequentialEvaluator",n),o=r.$$proto;r.$$scope;return o.actual=a,e.defn(r,"$initialize",function(e){var t=this;return t.actual=e}),e.defn(r,"$matcher_matches?",function(e){var t=this;return e["$matches?"](t.actual)}),a&&"matcher_matches?"}(_.base,null),function(t,$super){function n(){}var r=n=i(t,$super,"NestedEvaluator",n),$=r.$$proto,c=r.$$scope;return $.match_results=$.actual=$.matcher_2=$.matcher_1=a,e.defn(r,"$initialize",function(t,n,r){var $,i,u,l=this,_=a,p=a;return l.actual=t,l.matcher_1=n,l.matcher_2=r,l.match_results=s([],{}),i=l.$order_block_matchers(),$=e.to_ary(i),_=null==$[0]?a:$[0],p=null==$[1]?a:$[1],i,l.match_results["$[]="](p,p["$matches?"](($=(i=c.get("Proc")).$new,$.$$p=(u=function(e){var t=u.$$s||this;return null==t.match_results&&(t.match_results=a),e=o.call(arguments,0),t.match_results["$[]="](_,_["$matches?"](t.$inner_matcher_block(e)))},u.$$s=l,u),$).call(i)))}),e.defn(r,"$matcher_matches?",function(e){var t=this;return t.match_results.$fetch(e)}),r.$private(),e.defn(r,"$inner_matcher_block",function(t){var n,r,$,i=this;return(n=t["$empty?"]())===a||n.$$is_boolean&&1!=n?(n=(r=c.get("Proc")).$new,n.$$p=($=function(n){var r,i=$.$$s||this;return null==i.matcher_1&&(i.matcher_1=a),null==i.matcher_2&&(i.matcher_2=a),null==i.actual&&(i.actual=a),n=o.call(arguments,0),((r=n["$empty?"]())===a||r.$$is_boolean&&1!=r)&&i.$raise(c.get("ArgumentError"),"("+i.matcher_1.$description()+") and "+("("+i.matcher_2.$description()+") cannot be combined in a compound expectation ")+"since both matchers pass arguments to the block."),(r=i.actual).$call.apply(r,e.to_a(t))},$.$$s=i,$),n).call(r):i.actual}),e.defn(r,"$order_block_matchers",function(){var e,t=this;return(e=t.$class()["$matcher_expects_call_stack_jump?"](t.matcher_2))===a||e.$$is_boolean&&1!=e?[t.matcher_1,t.matcher_2]:(e=t.$class()["$matcher_expects_call_stack_jump?"](t.matcher_1))===a||e.$$is_boolean&&1!=e?[t.matcher_2,t.matcher_1]:t.$raise(c.get("ArgumentError"),"("+t.matcher_1.$description()+") and "+("("+t.matcher_2.$description()+") cannot be combined in a compound expectation ")+"because they both expect a call stack jump.")}),e.defs(r,"$matcher_expects_call_stack_jump?",function(t){try{return t["$expects_call_stack_jump?"]()}catch(n){if(!e.rescue(n,[c.get("NoMethodError")]))throw n;try{return!1}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}),a&&"matcher_expects_call_stack_jump?"}(_.base,null),function(t,$super){function n(){}var r,o=n=i(t,$super,"And",n);o.$$proto,o.$$scope;return e.defn(o,"$failure_message",function(){var e,t=this;return(e=t["$matcher_1_matches?"]())===a||e.$$is_boolean&&1!=e?(e=t["$matcher_2_matches?"]())===a||e.$$is_boolean&&1!=e?t.$compound_failure_message():t.$matcher_1().$failure_message():t.$matcher_2().$failure_message()}),o.$private(),e.defn(o,"$match",r=function(){var t,n=this,o=r.$$p,$=a,i=a;for(r.$$p=null,$=[],i=0;i<arguments.length;i++)$[i]=arguments[i];return e.find_super_dispatcher(n,"match",r,o).apply(n,$),t=n["$matcher_1_matches?"](),t!==!1&&t!==a?n["$matcher_2_matches?"]():t}),e.defn(o,"$conjunction",function(){return"and"}),a&&"conjunction"}(_.base,u),function(t,$super){function n(){}var r,o=n=i(t,$super,"Or",n);o.$$proto,o.$$scope;return e.defn(o,"$failure_message",function(){var e=this;return e.$compound_failure_message()}),o.$private(),e.defn(o,"$match",r=function(){var t,n=this,o=r.$$p,$=a,i=a;for(r.$$p=null,$=[],i=0;i<arguments.length;i++)$[i]=arguments[i];return e.find_super_dispatcher(n,"match",r,o).apply(n,$),(t=n["$matcher_1_matches?"]())!==!1&&t!==a?t:n["$matcher_2_matches?"]()}),e.defn(o,"$conjunction",function(){return"or"}),a&&"conjunction"}(_.base,u)}(l.base,l.get("BaseMatcher"))}(l.base)}(l.base)}(r.base)},Opal.modules["rspec/matchers/built_in/contain_exactly"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.dynamic_require_severity="ignore";var a=(e.top,e),o=e.nil,$=(e.breaker,e.slice,e.module),i=e.klass,s=e.hash2;return e.add_stubs(["$===","$actual","$inspect","$safe_sort","$surface_descriptions_in","$expected","$+","$empty?","$missing_items","$extra_items","$to_sentence","$private","$convert_actual_to_an_array","$match_when_sorted?","$values_match?","$respond_to?","$to_ary","$enumerable?","$to_a","$sort","$map","$[]","$unmatched_expected_indexes","$best_solution","$unmatched_actual_indexes","$find_best_solution","$pairings_maximizer","$new","$size","$each_with_index","$<<","$>","$unmatched_item_count","$indeterminate_expected_indexes","$indeterminate_actual_indexes","$candidate?","$count","$class","$attr_reader","$categorize_indexes","$solution","$first","$expected_to_actual_matched_indexes","$each","$best_solution_for_pairing","$ideal?","$worse_than?","$each_pair","$!","$reciprocal_single_match?","$one?","$==","$apply_pairing_to","$delete","$actual_to_expected_matched_indexes","$inject","$[]=","$-"]),function(a){var c,u=c=$(a,"RSpec"),l=(u.$$proto,u.$$scope);!function(a){var c,u=c=$(a,"Matchers"),l=(u.$$proto,u.$$scope);!function(a){var c,u=c=$(a,"BuiltIn"),l=(u.$$proto,u.$$scope);!function(a,$super){function $(){}var c=$=i(a,$super,"ContainExactly",$),u=c.$$proto,l=c.$$scope;return u.missing_items=u.extra_items=u.best_solution=u.pairings_maximizer=o,e.defn(c,"$failure_message",function(){var e,n=this,r=o;return(e=l.get("Array")["$==="](n.$actual()))===o||e.$$is_boolean&&1!=e?"expected a collection that can be converted to an array with `#to_ary` or `#to_a`, but got "+n.$actual().$inspect():(r="expected collection contained:  "+n.$safe_sort(n.$surface_descriptions_in(n.$expected())).$inspect()+"\n",r=t(r,"actual collection contained:    "+n.$safe_sort(n.$actual()).$inspect()+"\n"),((e=n.$missing_items()["$empty?"]())===o||e.$$is_boolean&&1!=e)&&(r=t(r,"the missing elements were:      "+n.$safe_sort(n.$surface_descriptions_in(n.$missing_items())).$inspect()+"\n")),((e=n.$extra_items()["$empty?"]())===o||e.$$is_boolean&&1!=e)&&(r=t(r,"the extra elements were:        "+n.$safe_sort(n.$extra_items()).$inspect()+"\n")),r)}),e.defn(c,"$failure_message_when_negated",function(){var e=this;return"expected "+e.$actual().$inspect()+" not to contain exactly"+e.$to_sentence(e.$surface_descriptions_in(e.$expected()))}),e.defn(c,"$description",function(){var e=this;return"contain exactly"+e.$to_sentence(e.$surface_descriptions_in(e.$expected()))}),c.$private(),e.defn(c,"$match",function(e,t){var n,r,a=this;return(n=a.$convert_actual_to_an_array())===o||n.$$is_boolean&&1!=n?!1:(n=a["$match_when_sorted?"]())!==!1&&n!==o?n:(r=a.$extra_items()["$empty?"](),r!==!1&&r!==o?a.$missing_items()["$empty?"]():r)}),e.defn(c,"$match_when_sorted?",function(){var e=this;return e["$values_match?"](e.$safe_sort(e.$expected()),e.$safe_sort(e.$actual()))}),e.defn(c,"$convert_actual_to_an_array",function(){var e,t,n=this;return(e=n.$actual()["$respond_to?"]("to_ary"))===o||e.$$is_boolean&&1!=e?(t=n["$enumerable?"](n.$actual()),(e=t!==!1&&t!==o?n.$actual()["$respond_to?"]("to_a"):t)===o||e.$$is_boolean&&1!=e?!1:n.actual=n.$actual().$to_a()):n.actual=n.$actual().$to_ary()}),e.defn(c,"$safe_sort",function(e){try{return e.$sort()}catch(t){return e}}),e.defn(c,"$missing_items",function(){var e,t,n,r,a=this;return(e=a.missing_items)!==!1&&e!==o?e:a.missing_items=(t=(n=a.$best_solution().$unmatched_expected_indexes()).$map,t.$$p=(r=function(e){var t=r.$$s||this;return null==e&&(e=o),t.$expected()["$[]"](e)},r.$$s=a,r),t).call(n)}),e.defn(c,"$extra_items",function(){var e,t,n,r,a=this;return(e=a.extra_items)!==!1&&e!==o?e:a.extra_items=(t=(n=a.$best_solution().$unmatched_actual_indexes()).$map,t.$$p=(r=function(e){var t=r.$$s||this;return null==e&&(e=o),t.$actual()["$[]"](e)},r.$$s=a,r),t).call(n)}),e.defn(c,"$best_solution",function(){var e,t=this;return(e=t.best_solution)!==!1&&e!==o?e:t.best_solution=t.$pairings_maximizer().$find_best_solution()}),e.defn(c,"$pairings_maximizer",function(){var e,t,n,r,a,$,i,s,c=this,u=o,_=o;return(e=c.pairings_maximizer)!==!1&&e!==o?e:c.pairings_maximizer=function(){return u=l.get("Hash")["$[]"]((t=(n=l.get("Array")).$new,t.$$p=(r=function(e){r.$$s||this;return null==e&&(e=o),[e,[]]},r.$$s=c,r),t).call(n,c.$expected().$size())),_=l.get("Hash")["$[]"]((t=(a=l.get("Array")).$new,
t.$$p=($=function(e){$.$$s||this;return null==e&&(e=o),[e,[]]},$.$$s=c,$),t).call(a,c.$actual().$size())),(t=(i=c.$expected()).$each_with_index,t.$$p=(s=function(e,t){var n,r,a,$=s.$$s||this;return null==e&&(e=o),null==t&&(t=o),(n=(r=$.$actual()).$each_with_index,n.$$p=(a=function(n,r){var $,i=a.$$s||this;return null==n&&(n=o),null==r&&(r=o),($=i["$values_match?"](e,n))===o||$.$$is_boolean&&1!=$?o:(u["$[]"](t)["$<<"](r),_["$[]"](r)["$<<"](t))},a.$$s=$,a),n).call(r)},s.$$s=c,s),t).call(i),l.get("PairingsMaximizer").$new(u,_)}()}),function(a,$super){function $(){}var c,u,l,_,p,d=$=i(a,$super,"PairingsMaximizer",$),f=(d.$$proto,d.$$scope);return e.cdecl(f,"Solution",(c=(u=f.get("Struct")).$new,c.$$p=(l=function(){var r=l.$$s||this;return e.def(r,"$worse_than?",function(e){var t=this;return n(t.$unmatched_item_count(),e.$unmatched_item_count())}),e.def(r,"$candidate?",function(){var e,t=this;return e=t.$indeterminate_expected_indexes()["$empty?"](),e!==!1&&e!==o?t.$indeterminate_actual_indexes()["$empty?"]():e}),e.def(r,"$ideal?",function(){var e,t,n=this;return e=n["$candidate?"](),e!==!1&&e!==o?(t=n.$unmatched_expected_indexes()["$empty?"]())!==!1&&t!==o?t:n.$unmatched_actual_indexes()["$empty?"]():e}),e.def(r,"$unmatched_item_count",function(){var e=this;return t(e.$unmatched_expected_indexes().$count(),e.$unmatched_actual_indexes().$count())}),e.def(r,"$+",function(e){var n=this;return n.$class().$new(t(n.$unmatched_expected_indexes(),e.$unmatched_expected_indexes()),t(n.$unmatched_actual_indexes(),e.$unmatched_actual_indexes()),[],[])}),o&&"+"},l.$$s=d,l),c).call(u,"unmatched_expected_indexes","unmatched_actual_indexes","indeterminate_expected_indexes","indeterminate_actual_indexes")),d.$attr_reader("expected_to_actual_matched_indexes","actual_to_expected_matched_indexes","solution"),e.defn(d,"$initialize",function(t,n){var r,a,$=this,i=o,s=o,c=o,u=o;return $.expected_to_actual_matched_indexes=t,$.actual_to_expected_matched_indexes=n,a=$.$categorize_indexes(t,n),r=e.to_ary(a),i=null==r[0]?o:r[0],s=null==r[1]?o:r[1],a,a=$.$categorize_indexes(n,t),r=e.to_ary(a),c=null==r[0]?o:r[0],u=null==r[1]?o:r[1],a,$.solution=f.get("Solution").$new(i,c,s,u)}),e.defn(d,"$find_best_solution",function(){try{var t,n,r,a=this,$=o,i=o,s=o;return(t=a.$solution()["$candidate?"]())===o||t.$$is_boolean&&1!=t?($=f.get("NullSolution"),i=a.$solution().$indeterminate_expected_indexes().$first(),s=a.$expected_to_actual_matched_indexes()["$[]"](i),(t=(n=s).$each,t.$$p=(r=function(t){var n,a=r.$$s||this,s=o;return null==t&&(t=o),s=a.$best_solution_for_pairing(i,t),(n=s["$ideal?"]())===o||n.$$is_boolean&&1!=n||e.ret(s),(n=$["$worse_than?"](s))===o||n.$$is_boolean&&1!=n?o:$=s},r.$$s=a,r),t).call(n),$):a.$solution()}catch(c){if(c===e.returner)return c.$v;throw c}}),d.$private(),e.cdecl(f,"NullSolution",(c=(_=f.get("Class")).$new,c.$$p=(p=function(){var t=p.$$s||this;return e.defs(t,"$worse_than?",function(e){return!0}),o&&"worse_than?"},p.$$s=d,p),c).call(_)),e.defn(d,"$categorize_indexes",function(e,t){var n,r,a,$=this,i=o,s=o;return i=[],s=[],(n=(r=e).$each_pair,n.$$p=(a=function(e,n){var r,$=a.$$s||this;return null==e&&(e=o),null==n&&(n=o),(r=n["$empty?"]())===o||r.$$is_boolean&&1!=r?(r=$["$reciprocal_single_match?"](n,e,t)["$!"]())===o||r.$$is_boolean&&1!=r?o:s["$<<"](e):i["$<<"](e)},a.$$s=$,a),n).call(r),[i,s]}),e.defn(d,"$reciprocal_single_match?",function(e,t,n){var r;return(r=e["$one?"]())===o||r.$$is_boolean&&1!=r?!1:n["$[]"](e.$first())["$=="]([t])}),e.defn(d,"$best_solution_for_pairing",function(e,n){var r=this,a=o,$=o;return a=r.$apply_pairing_to(r.$solution().$indeterminate_expected_indexes(),r.$expected_to_actual_matched_indexes(),n),a.$delete(e),$=r.$apply_pairing_to(r.$solution().$indeterminate_actual_indexes(),r.$actual_to_expected_matched_indexes(),e),$.$delete(n),t(r.$solution(),r.$class().$new(a,$).$find_best_solution())}),e.defn(d,"$apply_pairing_to",function(e,t,n){var a,$,i,c=this;return(a=($=e).$inject,a.$$p=(i=function(e,a){i.$$s||this;return null==e&&(e=o),null==a&&(a=o),e["$[]="](a,r(t["$[]"](a),[n])),e},i.$$s=c,i),a).call($,s([],{}))}),o&&"apply_pairing_to"}(l.base,null)}(l.base,l.get("BaseMatcher"))}(l.base)}(l.base)}(a.base)},Opal.modules["rspec/matchers/built_in/cover"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass;return e.add_stubs(["$all?","$cover?","$none?","$expected"]),function(t){var o,$=o=r(t,"RSpec"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"Matchers"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"BuiltIn"),i=($.$$proto,$.$$scope);!function(t,$super){function r(){}var o=r=a(t,$super,"Cover",r),$=o.$$proto;o.$$scope;return $.expected=n,e.defn(o,"$initialize",function(){var e=this,t=n,r=arguments.length-0;0>r&&(r=0);var a=new Array(r);for(t=0;r>t;t++)a[t]=arguments[t+0];return e.expected=a}),e.defn(o,"$matches?",function(e){var t,r,a,o=this;return o.actual=e,(t=(r=o.expected)["$all?"],t.$$p=(a=function(t){a.$$s||this;return null==t&&(t=n),e["$cover?"](t)},a.$$s=o,a),t).call(r)}),e.defn(o,"$does_not_match?",function(e){var t,r,a,o=this;return o.actual=e,(t=(r=o.$expected())["$none?"],t.$$p=(a=function(t){a.$$s||this;return null==t&&(t=n),e["$cover?"](t)},a.$$s=o,a),t).call(r)}),n&&"does_not_match?"}(i.base,i.get("BaseMatcher"))}(i.base)}(i.base)}(t.base)},Opal.modules["rspec/matchers/built_in/start_and_end_with"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass;return e.add_stubs(["$==","$length","$first","$tap","$<<","$!","$respond_to?","$actual","$===","$expected","$name_to_sentence","$inspect","$surface_descriptions_in","$private","$subset_matches?","$element_matches?","$new","$values_match?","$[]","$-@"]),function(t){var o,$=o=r(t,"RSpec"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"Matchers"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"BuiltIn"),i=($.$$proto,$.$$scope);!function(t,$super){function r(){}var o,$,i=r=a(t,$super,"StartAndEndWith",r),s=(i.$$proto,i.$$scope);return e.defn(i,"$initialize",function(){var e=this,t=n,r=arguments.length-0;0>r&&(r=0);var a=new Array(r);for(t=0;r>t;t++)a[t]=arguments[t+0];return e.actual_does_not_have_ordered_elements=!1,e.expected=function(){return a.$length()["$=="](1)?a.$first():a}()}),e.defn(i,"$failure_message",o=function(){var t,r,a,$=this,i=o.$$p,s=n,c=n;for(o.$$p=null,s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];return(t=(r=e.find_super_dispatcher($,"failure_message",o,i).apply($,s)).$tap,t.$$p=(a=function(e){var t,r=a.$$s||this;return null==r.actual_does_not_have_ordered_elements&&(r.actual_does_not_have_ordered_elements=n),null==e&&(e=n),(t=r.actual_does_not_have_ordered_elements)===n||t.$$is_boolean&&1!=t?(t=r.$actual()["$respond_to?"]("[]")["$!"]())===n||t.$$is_boolean&&1!=t?n:e["$<<"](", but it cannot be indexed using #[]"):e["$<<"](", but it does not have ordered elements")},a.$$s=$,a),t).call(r)}),e.defn(i,"$description",$=function(){var t,r=this,a=$.$$p,o=n,i=n;for($.$$p=null,o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return(t=s.get("Hash")["$==="](r.$expected()))===n||t.$$is_boolean&&1!=t?e.find_super_dispatcher(r,"description",$,a).apply(r,o):""+r.$name_to_sentence()+" "+r.$surface_descriptions_in(r.$expected()).$inspect()}),i.$private(),e.defn(i,"$match",function(t,r){var a,o,$=this;if((a=r["$respond_to?"]("[]"))===n||a.$$is_boolean&&1!=a)return!1;try{return o=s.get("Struct")["$==="](t)["$!"](),(a=o!==!1&&o!==n?t["$respond_to?"]("length"):o)===n||a.$$is_boolean&&1!=a?$["$element_matches?"]():$["$subset_matches?"]()}catch(i){if(!e.rescue(i,[s.get("ArgumentError")]))throw i;try{return $.actual_does_not_have_ordered_elements=!0,!1}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}),e.defn(i,"$actual_is_unordered",function(){var e=this;return s.get("ArgumentError").$new(""+e.$actual().$inspect()+" does not have ordered elements")}),n&&"actual_is_unordered"}(i.base,i.get("BaseMatcher")),function(t,$super){function r(){}var o=r=a(t,$super,"StartWith",r);o.$$proto,o.$$scope;return o.$private(),e.defn(o,"$subset_matches?",function(){var e=this;return e["$values_match?"](e.$expected(),e.$actual()["$[]"](0,e.$expected().$length()))}),e.defn(o,"$element_matches?",function(){var e=this;return e["$values_match?"](e.$expected(),e.$actual()["$[]"](0))}),n&&"element_matches?"}(i.base,i.get("StartAndEndWith")),function(t,$super){function r(){}var o=r=a(t,$super,"EndWith",r);o.$$proto,o.$$scope;return o.$private(),e.defn(o,"$subset_matches?",function(){var e=this;return e["$values_match?"](e.$expected(),e.$actual()["$[]"](e.$expected().$length()["$-@"](),e.$expected().$length()))}),e.defn(o,"$element_matches?",function(){var e=this;return e["$values_match?"](e.$expected(),e.$actual()["$[]"](-1))}),n&&"element_matches?"}(i.base,i.get("StartAndEndWith"))}(i.base)}(i.base)}(t.base)},Opal.modules["rspec/matchers/built_in/eq"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass;return e.add_stubs(["$format_object","$expected","$actual","$name_to_sentence","$inspect","$private","$==","$===","$format_time","$format_date_time","$to_s","$method_defined?","$strftime","$%","$nsec","$usec"]),function(t){var o,$=o=r(t,"RSpec"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"Matchers"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"BuiltIn"),i=($.$$proto,$.$$scope);!function(t,$super){function r(){}var o,$=r=a(t,$super,"Eq",r),i=$.$$proto,s=$.$$scope;return i.expected=n,e.defn($,"$failure_message",function(){var e=this;return"\nexpected: "+e.$format_object(e.$expected())+"\n     got: "+e.$format_object(e.$actual())+"\n\n(compared using ==)\n"}),e.defn($,"$failure_message_when_negated",function(){var e=this;return"\nexpected: value != "+e.$format_object(e.$expected())+"\n     got: "+e.$format_object(e.$actual())+"\n\n(compared using ==)\n"}),e.defn($,"$description",function(){var e=this;return""+e.$name_to_sentence()+" "+e.expected.$inspect()}),e.defn($,"$diffable?",function(){return!0}),$.$private(),e.defn($,"$match",function(e,t){return t["$=="](e)}),e.defn($,"$format_object",function(e){var t,r,a=this;return(t=s.get("Time")["$==="](e))===n||t.$$is_boolean&&1!=t?(r=null!=s.DateTime,(t=r!==!1&&r!==n?s.get("DateTime")["$==="](e):r)===n||t.$$is_boolean&&1!=t?(r=null!=s.BigDecimal,(t=r!==!1&&r!==n?s.get("BigDecimal")["$==="](e):r)===n||t.$$is_boolean&&1!=t?e.$inspect():""+e.$to_s("F")+" ("+e.$inspect()+")"):a.$format_date_time(e)):a.$format_time(e)}),e.cdecl(s,"TIME_FORMAT","%Y-%m-%d %H:%M:%S"),(o=s.get("Time")["$method_defined?"]("nsec"))===n||o.$$is_boolean&&1!=o?e.defn($,"$format_time",function(e){return e.$strftime(""+s.get("TIME_FORMAT")+"."+"%06d"["$%"](e.$usec())+" %z")}):e.defn($,"$format_time",function(e){return e.$strftime(""+s.get("TIME_FORMAT")+"."+"%09d"["$%"](e.$nsec())+" %z")}),e.cdecl(s,"DATE_TIME_FORMAT","%a, %d %b %Y %H:%M:%S.%N %z"),e.defn($,"$format_date_time",function(e){var t;return(t=null!=s.ActiveSupport)===n||t.$$is_boolean&&1!=t?e.$inspect():e.$strftime(s.get("DATE_TIME_FORMAT"))}),n&&"format_date_time"}(i.base,i.get("BaseMatcher"))}(i.base)}(i.base)}(t.base)},Opal.modules["rspec/matchers/built_in/eql"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass;return e.add_stubs(["$inspect","$expected","$actual","$private","$eql?"]),function(t){var o,$=o=r(t,"RSpec"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"Matchers"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"BuiltIn"),i=($.$$proto,$.$$scope);!function(t,$super){function r(){}var o=r=a(t,$super,"Eql",r);o.$$proto,o.$$scope;return e.defn(o,"$failure_message",function(){var e=this;return"\nexpected: "+e.$expected().$inspect()+"\n     got: "+e.$actual().$inspect()+"\n\n(compared using eql?)\n"}),e.defn(o,"$failure_message_when_negated",function(){var e=this;return"\nexpected: value != "+e.$expected().$inspect()+"\n     got: "+e.$actual().$inspect()+"\n\n(compared using eql?)\n"}),e.defn(o,"$diffable?",function(){return!0}),o.$private(),e.defn(o,"$match",function(e,t){return t["$eql?"](e)}),n&&"match"}(i.base,i.get("BaseMatcher"))}(i.base)}(i.base)}(t.base)},Opal.modules["rspec/matchers/built_in/equal"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass;return e.add_stubs(["$expected_is_a_literal_singleton?","$simple_failure_message","$detailed_failure_message","$inspect_object","$actual","$expected","$!","$private","$equal?","$include?","$inspect","$actual_inspected","$class","$object_id"]),function(t){var o,$=o=r(t,"RSpec"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"Matchers"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"BuiltIn"),i=($.$$proto,$.$$scope);!function(t,$super){function r(){}var o=r=a(t,$super,"Equal",r),$=(o.$$proto,o.$$scope);return e.defn(o,"$failure_message",function(){var e,t=this;return(e=t["$expected_is_a_literal_singleton?"]())===n||e.$$is_boolean&&1!=e?t.$detailed_failure_message():t.$simple_failure_message()}),e.defn(o,"$failure_message_when_negated",function(){var e=this;return"\nexpected not "+e.$inspect_object(e.$actual())+"\n         got "+e.$inspect_object(e.$expected())+"\n\nCompared using equal?, which compares object identity.\n\n"}),e.defn(o,"$diffable?",function(){var e=this;return e["$expected_is_a_literal_singleton?"]()["$!"]()}),o.$private(),e.defn(o,"$match",function(e,t){return t["$equal?"](e)}),e.cdecl($,"LITERAL_SINGLETONS",[!0,!1,n]),e.defn(o,"$expected_is_a_literal_singleton?",function(){var e=this;return $.get("LITERAL_SINGLETONS")["$include?"](e.$expected())}),e.defn(o,"$actual_inspected",function(){var e,t=this;return(e=$.get("LITERAL_SINGLETONS")["$include?"](t.$actual()))===n||e.$$is_boolean&&1!=e?t.$inspect_object(t.$actual()):t.$actual().$inspect()}),e.defn(o,"$simple_failure_message",function(){var e=this;return"\nexpected "+e.$expected().$inspect()+"\n     got "+e.$actual_inspected()+"\n"}),e.defn(o,"$detailed_failure_message",function(){var e=this;return"\nexpected "+e.$inspect_object(e.$expected())+"\n     got "+e.$inspect_object(e.$actual())+"\n\nCompared using equal?, which compares object identity,\nbut expected and actual are not the same object. Use\n`expect(actual).to eq(expected)` if you don't care about\nobject identity in this example.\n\n"}),e.defn(o,"$inspect_object",function(e){return"#<"+e.$class()+":"+e.$object_id()+"> => "+e.$inspect()}),n&&"inspect_object"}(i.base,i.get("BaseMatcher"))}(i.base)}(i.base)}(t.base)},Opal.modules["rspec/matchers/built_in/exist"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass;return e.add_stubs(["$new","$valid_test?","$actual_exists?","$!","$inspect","$validity_message","$==","$size","$uniq_truthy_values","$first","$existence_values","$===","$last","$private","$uniq","$map","$__send__","$actual","$expected","$predicates","$select","$respond_to?"]),function(t){var o,$=o=r(t,"RSpec"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"Matchers"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"BuiltIn"),i=($.$$proto,$.$$scope);!function(t,$super){function r(){}var o=r=a(t,$super,"Exist",r),$=o.$$proto,i=o.$$scope;return $.actual=$.expected=$.test=n,e.defn(o,"$initialize",function(){var e=this,t=n,r=arguments.length-0;0>r&&(r=0);var a=new Array(r);for(t=0;r>t;t++)a[t]=arguments[t+0];return e.expected=a}),e.defn(o,"$matches?",function(e){var t,r=this;return r.actual=e,r.test=i.get("ExistenceTest").$new(r.actual,r.expected),t=r.test["$valid_test?"](),t!==!1&&t!==n?r.test["$actual_exists?"]():t}),e.defn(o,"$does_not_match?",function(e){var t,r=this;return r.actual=e,r.test=i.get("ExistenceTest").$new(r.actual,r.expected),t=r.test["$valid_test?"](),t!==!1&&t!==n?r.test["$actual_exists?"]()["$!"]():t}),e.defn(o,"$failure_message",function(){var e=this;return"expected "+e.actual.$inspect()+" to exist"+e.test.$validity_message()}),e.defn(o,"$failure_message_when_negated",function(){var e=this;return"expected "+e.actual.$inspect()+" not to exist"+e.test.$validity_message()}),function(t,$super){function r(){}var o=r=a(t,$super,"ExistenceTest",r),$=o.$$proto;o.$$scope;return $.uniq_truthy_values=$.existence_values=$.predicates=n,e.defn(o,"$valid_test?",function(){var e=this;return e.$uniq_truthy_values().$size()["$=="](1)}),e.defn(o,"$actual_exists?",function(){var e=this;return e.$existence_values().$first()}),e.defn(o,"$validity_message",function(){var e=this,t=n;return function(){return t=e.$uniq_truthy_values().$size(),0["$==="](t)?" but it does not respond to either `exist?` or `exists?`":2["$==="](t)?" but `exist?` and `exists?` returned different values:\n\n"+(" exist?: "+e.$existence_values().$first()+"\n")+("exists?: "+e.$existence_values().$last()):n}()}),o.$private(),e.defn(o,"$uniq_truthy_values",function(){var e,t,r,a,o=this;return(e=o.uniq_truthy_values)!==!1&&e!==n?e:o.uniq_truthy_values=(t=(r=o.$existence_values()).$map,t.$$p=(a=function(e){a.$$s||this;return null==e&&(e=n),e["$!"]()["$!"]()},a.$$s=o,a),t).call(r).$uniq()}),e.defn(o,"$existence_values",function(){var t,r,a,o,$=this;return(t=$.existence_values)!==!1&&t!==n?t:$.existence_values=(r=(a=$.$predicates()).$map,r.$$p=(o=function(t){var r,a=o.$$s||this;return null==t&&(t=n),(r=a.$actual()).$__send__.apply(r,[t].concat(e.to_a(a.$expected())))},o.$$s=$,o),r).call(a)}),e.defn(o,"$predicates",function(){var e,t,r,a,o=this;return(e=o.predicates)!==!1&&e!==n?e:o.predicates=(t=(r=["exist?","exists?"]).$select,t.$$p=(a=function(e){var t=a.$$s||this;return null==e&&(e=n),t.$actual()["$respond_to?"](e)},a.$$s=o,a),t).call(r)}),n&&"predicates"}(i.base,i.get("Struct").$new("actual","expected"))}(i.base,i.get("BaseMatcher"))}(i.base)}(i.base)}(t.base)},Opal.modules["rspec/matchers/built_in/has"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass;return e.add_stubs(["$predicate_accessible?","$predicate_matches?","$!","$validity_message","$predicate","$failure_message_args_description","$join","$compact","$method_description","$args_description","$private","$private_predicate?","$predicate_exists?","$===","$first","$methods","$include?","$private_methods","$to_s","$respond_to?","$__send__","$to_proc","$captures","$match","$gsub","$empty?","$map","$inspect"]),function(t){var o,$=o=r(t,"RSpec"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"Matchers"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"BuiltIn"),i=($.$$proto,$.$$scope);!function(t,$super){function r(){}var o,$,i,s,c=r=a(t,$super,"Has",r),u=c.$$proto,l=c.$$scope;return u.block=u.actual=u.args=u.predicate=u.method_name=n,e.defn(c,"$initialize",o=function(e){var t,r=this,a=o.$$p,$=a||n,i=n,s=arguments.length-1;0>s&&(s=0);var c=new Array(s);for(i=0;s>i;i++)c[i]=arguments[i+1];return o.$$p=null,t=[e,c,$],r.method_name=t[0],r.args=t[1],r.block=t[2],t}),e.defn(c,"$matches?",$=function(e){var t,r=this,a=$.$$p,o=a||n;return $.$$p=null,r.actual=e,(t=r.block)!==!1&&t!==n?t:r.block=o,t=r["$predicate_accessible?"](),t!==!1&&t!==n?r["$predicate_matches?"]():t}),e.defn(c,"$does_not_match?",i=function(e){var t,r=this,a=i.$$p,o=a||n;return i.$$p=null,r.actual=e,(t=r.block)!==!1&&t!==n?t:r.block=o,t=r["$predicate_accessible?"](),t!==!1&&t!==n?r["$predicate_matches?"]()["$!"]():t}),e.defn(c,"$failure_message",function(){var e,t=this;return(e=t.$validity_message())!==!1&&e!==n?e:"expected #"+t.$predicate()+t.$failure_message_args_description()+" to return true, got false"}),e.defn(c,"$failure_message_when_negated",function(){var e,t=this;return(e=t.$validity_message())!==!1&&e!==n?e:"expected #"+t.$predicate()+t.$failure_message_args_description()+" to return false, got true"}),e.defn(c,"$description",function(){var e=this;return[e.$method_description(),e.$args_description()].$compact().$join(" ")}),c.$private(),e.defn(c,"$predicate_accessible?",function(){var e,t=this;return e=t["$private_predicate?"]()["$!"](),e!==!1&&e!==n?t["$predicate_exists?"]():e}),(s=l.get("String")["$==="](c.$methods().$first()))===n||s.$$is_boolean&&1!=s?e.defn(c,"$private_predicate?",function(){var e=this;return e.actual.$private_methods()["$include?"](e.$predicate())}):e.defn(c,"$private_predicate?",function(){var e=this;return e.actual.$private_methods()["$include?"](e.$predicate().$to_s())}),e.defn(c,"$predicate_exists?",function(){var e=this;return e.actual["$respond_to?"](e.$predicate())}),e.defn(c,"$predicate_matches?",function(){var t,n,r=this;return(t=(n=r.actual).$__send__,t.$$p=r.block.$to_proc(),t).apply(n,[r.$predicate()].concat(e.to_a(r.args)))}),e.defn(c,"$predicate",function(){var e,t=this;return(e=t.predicate)!==!1&&e!==n?e:t.predicate="has_"+l.get("Matchers").$$scope.get("HAS_REGEX").$match(t.method_name.$to_s()).$captures().$first().$to_s()+"?"}),e.defn(c,"$method_description",function(){var e=this;return e.method_name.$to_s().$gsub("_"," ")}),e.defn(c,"$args_description",function(){var e,t,r,a=this;return(e=a.args["$empty?"]())===n||e.$$is_boolean&&1!=e?(e=(t=a.args).$map,e.$$p=(r=function(e){r.$$s||this;return null==e&&(e=n),e.$inspect()},r.$$s=a,r),e).call(t).$join(", "):n}),e.defn(c,"$failure_message_args_description",function(){var e=this,t=n;return t=e.$args_description(),t!==!1&&t!==n?"("+t+")":n}),e.defn(c,"$validity_message",function(){var e,t=this;return(e=t["$private_predicate?"]())===n||e.$$is_boolean&&1!=e?(e=t["$predicate_exists?"]()["$!"]())===n||e.$$is_boolean&&1!=e?n:"expected "+t.actual+" to respond to `"+t.$predicate()+"`":"expected "+t.actual+" to respond to `"+t.$predicate()+"` but `"+t.$predicate()+"` is a private method"}),n&&"validity_message"}(i.base,i.get("BaseMatcher"))}(i.base)}(i.base)}(t.base)},Opal.modules["rspec/matchers/built_in/have_attributes"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=e.breaker,a=e.slice,o=e.module,$=e.klass;return e.add_stubs(["$attr_reader","$respond_to_attributes?","$perform_match","$surface_descriptions_in","$expected","$improve_hash_formatting","$inspect","$respond_to_failure_message_or","$private","$__send__","$actual_has_attribute?","$actual","$values_match?","$matches?","$respond_to_matcher","$!","$arguments","$with","$new","$keys","$respond_to_failed","$failure_message"]),function(t){var i,s=i=o(t,"RSpec"),c=(s.$$proto,s.$$scope);!function(t){var i,s=i=o(t,"Matchers"),c=(s.$$proto,s.$$scope);!function(t){var i,s=i=o(t,"BuiltIn"),c=(s.$$proto,s.$$scope);!function(t,$super){function o(){}var i,s,c,u=o=$(t,$super,"HaveAttributes",o),l=u.$$proto,_=u.$$scope;return l.respond_to_matcher=n,u.$attr_reader("respond_to_failed"),e.defn(u,"$initialize",function(e){var t=this;return t.expected=e,t.respond_to_failed=!1}),e.defn(u,"$matches?",function(e){var t,r=this;return r.actual=e,(t=r["$respond_to_attributes?"]())===n||t.$$is_boolean&&1!=t?!1:r.$perform_match("all?")}),e.defn(u,"$does_not_match?",function(e){var t,r=this;return r.actual=e,(t=r["$respond_to_attributes?"]())===n||t.$$is_boolean&&1!=t?!1:r.$perform_match("none?")}),e.defn(u,"$description",function(){var e=this,t=n;return t=e.$surface_descriptions_in(e.$expected()),e.$improve_hash_formatting("have attributes "+t.$inspect())}),e.defn(u,"$failure_message",i=function(){var t,n,r,o=this;i.$$p;return i.$$p=null,(t=(n=o).$respond_to_failure_message_or,t.$$p=(r=function(){var t=r.$$s||this;return e.find_iter_super_dispatcher(t,"failure_message",r.$$def||i,null).apply(t,a.call(arguments))},r.$$s=o,r),t).call(n)}),e.defn(u,"$failure_message_when_negated",s=function(){var t,n,r,o=this;s.$$p;return s.$$p=null,(t=(n=o).$respond_to_failure_message_or,t.$$p=(r=function(){var t=r.$$s||this;return e.find_iter_super_dispatcher(t,"failure_message_when_negated",r.$$def||s,null).apply(t,a.call(arguments))},r.$$s=o,r),t).call(n)}),u.$private(),e.defn(u,"$perform_match",function(e){var t,r,a,o=this;return(t=(r=o.$expected()).$__send__,t.$$p=(a=function(e,t){var r=a.$$s||this;return null==e&&(e=n),null==t&&(t=n),r["$actual_has_attribute?"](e,t)},a.$$s=o,a),t).call(r,e)}),e.defn(u,"$actual_has_attribute?",function(e,t){var r=this,a=n;return a=r.$actual().$__send__(e),r["$values_match?"](t,a)}),e.defn(u,"$respond_to_attributes?",function(){var e=this,t=n;return t=e.$respond_to_matcher()["$matches?"](e.$actual()),e.respond_to_failed=t["$!"](),t}),e.defn(u,"$respond_to_matcher",function(){var t,r,a=this;return(t=a.respond_to_matcher)!==!1&&t!==n?t:a.respond_to_matcher=(r=_.get("RespondTo")).$new.apply(r,e.to_a(a.$expected().$keys())).$with(0).$arguments()}),e.defn(u,"$respond_to_failure_message_or",c=function(){var t,a=this,o=c.$$p,$=o||n;return c.$$p=null,(t=a.$respond_to_failed())===n||t.$$is_boolean&&1!=t?a.$improve_hash_formatting((t=e.yieldX($,[]))===r?r.$v:t):a.$respond_to_matcher().$failure_message()}),n&&"respond_to_failure_message_or"}(c.base,c.get("BaseMatcher"))}(c.base)}(c.base)}(t.base)},Opal.modules["rspec/matchers/built_in/include"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="ignore";var n=(e.top,e),r=e.nil,a=(e.breaker,e.slice,e.module),o=e.klass;return e.add_stubs(["$perform_match","$surface_descriptions_in","$expected","$improve_hash_formatting","$to_sentence","$+","$invalid_type_message","$private","$respond_to?","$actual","$__send__","$comparing_hash_to_a_subset?","$actual_hash_includes?","$comparing_hash_keys?","$actual_hash_has_key?","$actual_collection_includes?","$is_a?","$fetch","$values_match?","$!","$key?","$any?","$keys","$include?"]),function(n){var $,i=$=a(n,"RSpec"),s=(i.$$proto,i.$$scope);!function(n){var $,i=$=a(n,"Matchers"),s=(i.$$proto,i.$$scope);!function(n){var $,i=$=a(n,"BuiltIn"),s=(i.$$proto,i.$$scope);!function(n,$super){function a(){}var $,i,s=a=o(n,$super,"Include",a),c=(s.$$proto,s.$$scope);return e.defn(s,"$initialize",function(){var e=this,t=r,n=arguments.length-0;0>n&&(n=0);var a=new Array(n);for(t=0;n>t;t++)a[t]=arguments[t+0];return e.expected=a}),e.defn(s,"$matches?",function(e){var t=this;return t.actual=e,t.$perform_match("all?","all?")}),e.defn(s,"$does_not_match?",function(e){var t=this;return t.actual=e,t.$perform_match("none?","any?")}),e.defn(s,"$description",function(){var e=this,t=r;return t=e.$surface_descriptions_in(e.$expected()),e.$improve_hash_formatting("include"+e.$to_sentence(t))}),e.defn(s,"$failure_message",$=function(){var n=this,a=$.$$p,o=r,i=r;for($.$$p=null,o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return t(n.$improve_hash_formatting(e.find_super_dispatcher(n,"failure_message",$,a).apply(n,o)),n.$invalid_type_message())}),e.defn(s,"$failure_message_when_negated",i=function(){var n=this,a=i.$$p,o=r,$=r;for(i.$$p=null,o=[],$=0;$<arguments.length;$++)o[$]=arguments[$];return t(n.$improve_hash_formatting(e.find_super_dispatcher(n,"failure_message_when_negated",i,a).apply(n,o)),n.$invalid_type_message())}),e.defn(s,"$diffable?",function(){return!0}),s.$private(),e.defn(s,"$invalid_type_message",function(){var e,t=this;return(e=t.$actual()["$respond_to?"]("include?"))===r||e.$$is_boolean&&1!=e?", but it does not respond to `include?`":""}),e.defn(s,"$perform_match",function(e,t){var n,a,o,$=this;return(n=$.$actual()["$respond_to?"]("include?"))===r||n.$$is_boolean&&1!=n?!1:(n=(a=$.$expected()).$__send__,n.$$p=(o=function(e){var n,a,$,i=o.$$s||this;return null==e&&(e=r),(n=i["$comparing_hash_to_a_subset?"](e))===r||n.$$is_boolean&&1!=n?(n=i["$comparing_hash_keys?"](e))===r||n.$$is_boolean&&1!=n?i["$actual_collection_includes?"](e):i["$actual_hash_has_key?"](e):(n=(a=e).$__send__,n.$$p=($=function(e,t){var n=$.$$s||this;return null==e&&(e=r),null==t&&(t=r),n["$actual_hash_includes?"](e,t)},$.$$s=i,$),n).call(a,t)},o.$$s=$,o),n).call(a,e)}),e.defn(s,"$comparing_hash_to_a_subset?",function(e){var t,n=this;return t=n.$actual()["$is_a?"](c.get("Hash")),t!==!1&&t!==r?e["$is_a?"](c.get("Hash")):t}),e.defn(s,"$actual_hash_includes?",function(t,n){try{var a,o,$,i=this,s=r;return s=(a=(o=i.$actual()).$fetch,a.$$p=($=function(){$.$$s||this;e.ret(!1)},$.$$s=i,$),a).call(o,t),i["$values_match?"](n,s)}catch(c){if(c===e.returner)return c.$v;throw c}}),e.defn(s,"$comparing_hash_keys?",function(e){var t,n=this;return t=n.$actual()["$is_a?"](c.get("Hash")),t!==!1&&t!==r?e["$is_a?"](c.get("Hash"))["$!"]():t}),e.defn(s,"$actual_hash_has_key?",function(e){var t,n,a,o,$=this;return(t=$.$actual()["$key?"](e))!==!1&&t!==r?t:(n=(a=$.$actual().$keys())["$any?"],n.$$p=(o=function(t){var n=o.$$s||this;return null==t&&(t=r),n["$values_match?"](e,t)},o.$$s=$,o),n).call(a)}),e.defn(s,"$actual_collection_includes?",function(e){var t,n,a,o=this;return(t=o.$actual()["$include?"](e))===r||t.$$is_boolean&&1!=t?(t=o.$actual()["$respond_to?"]("any?"))===r||t.$$is_boolean&&1!=t?!1:(t=(n=o.$actual())["$any?"],t.$$p=(a=function(t){var n=a.$$s||this;return null==t&&(t=r),n["$values_match?"](e,t)},a.$$s=o,a),t).call(n):!0}),r&&"actual_collection_includes?"}(s.base,s.get("BaseMatcher"))}(s.base)}(s.base)}(n.base)},Opal.modules["rspec/matchers/built_in/all"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="ignore";var n=(e.top,e),r=e.nil,a=(e.breaker,e.slice,e.module),o=e.klass,$=e.hash2;return e.add_stubs(["$attr_reader","$raise","$iterable?","$improve_hash_formatting","$each","$<<","$failure_message_for_item","$failed_objects","$join","$description_of","$matcher","$private","$index_failed_objects","$empty?","$each_with_index","$clone","$matches?","$[]=","$failure_message","$actual","$indent_multiline_message","$add_new_line_if_needed","$start_with?","$sub","$map","$=~","$+","$lines","$respond_to?"]),function(n){var i,s=i=a(n,"RSpec"),c=(s.$$proto,s.$$scope);!function(n){var i,s=i=a(n,"Matchers"),c=(s.$$proto,s.$$scope);!function(n){var i,s=i=a(n,"BuiltIn"),c=(s.$$proto,s.$$scope);!function(n,$super){function a(){}var i,s,c=a=o(n,$super,"All",a),u=c.$$proto,l=c.$$scope;return u.matcher=u.actual=r,c.$attr_reader("matcher","failed_objects"),e.defn(c,"$initialize",function(e){var t=this;return t.matcher=e,t.failed_objects=$([],{})}),e.defn(c,"$does_not_match?",function(e){var t=this;return t.$raise(l.get("NotImplementedError"),"`expect().not_to all( matcher )` is not supported.")}),e.defn(c,"$failure_message",i=function(){var t,n,a,o=this,$=i.$$p,s=r,c=r,u=r;for(i.$$p=null,c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];return(t=o["$iterable?"]())===r||t.$$is_boolean&&1!=t?""+o.$improve_hash_formatting(e.find_super_dispatcher(o,"failure_message",i,$).apply(o,c))+", but was not iterable":(s=[o.$improve_hash_formatting(e.find_super_dispatcher(o,"failure_message",i,$).apply(o,c))],(t=(n=o.$failed_objects()).$each,t.$$p=(a=function(e,t){var n=a.$$s||this;return null==e&&(e=r),null==t&&(t=r),s["$<<"](n.$failure_message_for_item(e,t))},a.$$s=o,a),t).call(n),s.$join("\n\n"))}),e.defn(c,"$description",function(){var e=this;return e.$improve_hash_formatting("all "+e.$description_of(e.$matcher()))}),c.$private(),e.defn(c,"$match",function(e,t){var n,a=this;return(n=a["$iterable?"]())===r||n.$$is_boolean&&1!=n?!1:(a.$index_failed_objects(),a.$failed_objects()["$empty?"]())}),e.defn(c,"$index_failed_objects",function(){var e,t,n,a=this;return(e=(t=a.$actual()).$each_with_index,e.$$p=(n=function(e,t){var a=n.$$s||this,o=r,$=r;return null==e&&(e=r),null==t&&(t=r),o=a.$matcher().$clone(),$=o["$matches?"](e),$!==!1&&$!==r?r:a.$failed_objects()["$[]="](t,o.$failure_message())},n.$$s=a,n),e).call(t)}),e.defn(c,"$failure_message_for_item",function(e,t){var n=this;return t=n.$indent_multiline_message(n.$add_new_line_if_needed(t)),n.$indent_multiline_message("object at index "+e+" failed to match:"+t)}),e.defn(c,"$add_new_line_if_needed",function(e){var t;return(t=e["$start_with?"]("\n"))===r||t.$$is_boolean&&1!=t?"\n"+e:e}),e.defn(c,"$indent_multiline_message",function(e){var n,a,o,$=this;return e=e.$sub(/\n+\z/,""),(n=(a=e.$lines()).$map,n.$$p=(o=function(e){var n;o.$$s||this;return null==e&&(e=r),(n=e["$=~"](/\S/))===r||n.$$is_boolean&&1!=n?e:t("   ",e)},o.$$s=$,o),n).call(a).$join()}),e.defn(c,"$initialize_copy",s=function(t){var n=this,a=s.$$p,o=r,$=r;for(s.$$p=null,o=[],$=0;$<arguments.length;$++)o[$]=arguments[$];return n.matcher=n.matcher.$clone(),e.find_super_dispatcher(n,"initialize_copy",s,a).apply(n,o)}),e.defn(c,"$iterable?",function(){var e=this;return e.actual["$respond_to?"]("each_with_index")}),r&&"iterable?"}(c.base,c.get("BaseMatcher"))}(c.base)}(c.base)}(n.base)},Opal.modules["rspec/matchers/built_in/match"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass;return e.add_stubs(["$inspect","$surface_descriptions_in","$expected","$private","$values_match?","$respond_to?","$match"]),
function(t){var o,$=o=r(t,"RSpec"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"Matchers"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"BuiltIn"),i=($.$$proto,$.$$scope);!function(t,$super){function r(){}var o=r=a(t,$super,"Match",r);o.$$proto,o.$$scope;return e.defn(o,"$description",function(){var e=this;return"match "+e.$surface_descriptions_in(e.$expected()).$inspect()}),e.defn(o,"$diffable?",function(){return!0}),o.$private(),e.defn(o,"$match",function(e,t){var r,a=this;return(r=a["$values_match?"](e,t))===n||r.$$is_boolean&&1!=r?(r=t["$respond_to?"]("match"))===n||r.$$is_boolean&&1!=r?n:t.$match(e):!0}),n&&"match"}(i.base,i.get("BaseMatcher"))}(i.base)}(i.base)}(t.base)},Opal.modules["rspec/matchers/built_in/operators"]=function(e){e.dynamic_require_severity="ignore";var t=e.top,n=e,r=e.nil,a=(e.breaker,e.slice,e.module),o=e.klass,$=e.hash2;return e.add_stubs(["$require","$registry","$[]","$[]=","$delete","$each","$ancestors","$register","$define_method","$!","$has_non_generic_implementation_of?","$get","$class","$__send__","$should_method","$last_expectation_handler","$new","$eval_match","$sub","$!=","$respond_to?","$opposite_should_method","$raise","$use_custom_matcher_or_delegate","$fail_with","$inspect","$private","$owner","$method_handle_for","$last_matcher=","$__delegate_operator","$include?","$fail_with_message","$gsub"]),t.$require("rspec/support"),function(t){var n,i=n=a(t,"RSpec"),s=(i.$$proto,i.$$scope);!function(t){var n,i=n=a(t,"Matchers"),s=(i.$$proto,i.$$scope);!function(t){var n,i=n=a(t,"BuiltIn"),s=(i.$$proto,i.$$scope);!function(t,$super){function n(){}var a,i,s,c=n=o(t,$super,"OperatorMatcher",n),u=c.$$proto,l=c.$$scope;return u.expected=u.actual=u.operator=r,function(t){t.$$scope,t.$$proto;return e.defn(t,"$registry",function(){var e,t=this;return null==t.registry&&(t.registry=r),(e=t.registry)!==!1&&e!==r?e:t.registry=$([],{})}),e.defn(t,"$register",function(e,t,n){var a,o,i,s=this;return a=e,o=s.$registry(),(i=o["$[]"](a))!==!1&&i!==r?i:o["$[]="](a,$([],{})),s.$registry()["$[]"](e)["$[]="](t,n)}),e.defn(t,"$unregister",function(e,t){var n,a=this;return n=a.$registry()["$[]"](e),n!==!1&&n!==r?a.$registry()["$[]"](e).$delete(t):n}),e.defn(t,"$get",function(t,n){try{var a,o,$,i=this;return(a=(o=t.$ancestors()).$each,a.$$p=($=function(t){var a,o=$.$$s||this,i=r;return null==t&&(t=r),a=o.$registry()["$[]"](t),i=a!==!1&&a!==r?o.$registry()["$[]"](t)["$[]"](n):a,i===!1||i===r?r:void e.ret(i)},$.$$s=i,$),a).call(o),r}catch(s){if(s===e.returner)return s.$v;throw s}}),r&&"get"}(e.get_singleton_class(c)),c.$register(l.get("Enumerable"),"=~",l.get("BuiltIn").$$scope.get("ContainExactly")),e.defn(c,"$initialize",function(e){var t=this;return t.actual=e}),e.defs(c,"$use_custom_matcher_or_delegate",function(t){var n,a,o,$,i,s=this,c=r;return(n=(a=s).$define_method,n.$$p=(o=function(n){var a,$,i=o.$$s||this,s=r;return null==i.actual&&(i.actual=r),null==n&&(n=r),$=i["$has_non_generic_implementation_of?"](t)["$!"](),(a=$!==!1&&$!==r?s=l.get("OperatorMatcher").$get(i.actual.$class(),t):$)===r||a.$$is_boolean&&1!=a?i.$eval_match(i.actual,t,n):i.actual.$__send__(e.get("RSpec").$$scope.get("Matchers").$last_expectation_handler().$should_method(),s.$new(n))},o.$$s=s,o),n).call(a,t),c=t.$sub(/^=/,"!"),$=c["$!="](t),(n=$!==!1&&$!==r?s["$respond_to?"](c):$)===r||n.$$is_boolean&&1!=n?r:(n=($=s).$define_method,n.$$p=(i=function(n){var a=i.$$s||this,o=r;return null==n&&(n=r),o=e.get("RSpec").$$scope.get("Matchers").$last_expectation_handler().$opposite_should_method(),a.$raise("RSpec does not support `"+e.get("RSpec").$$scope.get("Matchers").$last_expectation_handler().$should_method()+" "+c+" expected`.  "+("Use `"+o+" "+t+" expected` instead."))},i.$$s=s,i),n).call($,c)}),(a=(i=["==","===","=~",">",">=","<","<="]).$each,a.$$p=(s=function(e){var t=s.$$s||this;return null==e&&(e=r),t.$use_custom_matcher_or_delegate(e)},s.$$s=c,s),a).call(i),e.defn(c,"$fail_with_message",function(e){var t=this;return l.get("RSpec").$$scope.get("Expectations").$fail_with(e,t.expected,t.actual)}),e.defn(c,"$description",function(){var e=this;return""+e.operator+" "+e.expected.$inspect()}),c.$private(),e.defn(c,"$has_non_generic_implementation_of?",function(t){var n=this;try{return l.get("Support").$method_handle_for(n.actual,t).$owner()["$!="](e.get("Kernel"))}catch(r){if(!e.rescue(r,[l.get("NameError")]))throw r;try{return!1}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}),e.defn(c,"$eval_match",function(t,n,r){var a,o,$=this;return a=[$],o=e.get("RSpec").$$scope.get("Matchers"),o["$last_matcher="].apply(o,a),a[a.length-1],a=[n,r],$.operator=a[0],$.expected=a[1],a,$.$__delegate_operator(t,n,r)}),r&&"eval_match"}(s.base,null),function(t,$super){function n(){}var a=n=o(t,$super,"PositiveOperatorMatcher",n);a.$$proto,a.$$scope;return e.defn(a,"$__delegate_operator",function(e,t,n){var a,o=this;return(a=e.$__send__(t,n))===r||a.$$is_boolean&&1!=a?(a=["==","===","=~"]["$include?"](t))===r||a.$$is_boolean&&1!=a?o.$fail_with_message("expected: "+t+" "+n.$inspect()+"\n     got: "+t.$gsub(/./," ")+" "+e.$inspect()):o.$fail_with_message("expected: "+n.$inspect()+"\n     got: "+e.$inspect()+" (using "+t+")"):!0}),r&&"__delegate_operator"}(s.base,s.get("OperatorMatcher")),function(t,$super){function n(){}var a=n=o(t,$super,"NegativeOperatorMatcher",n);a.$$proto,a.$$scope;return e.defn(a,"$__delegate_operator",function(e,t,n){var a,o=this;return(a=e.$__send__(t,n))===r||a.$$is_boolean&&1!=a?!1:o.$fail_with_message("expected not: "+t+" "+n.$inspect()+"\n         got: "+t.$gsub(/./," ")+" "+e.$inspect())}),r&&"__delegate_operator"}(s.base,s.get("OperatorMatcher"))}(s.base)}(s.base)}(n.base)},Opal.modules["rspec/matchers/built_in/output"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.dynamic_require_severity="ignore";var n=e.top,r=e,a=e.nil,o=(e.breaker,e.slice,e.module),$=e.klass,i=e.gvars;return e.add_stubs(["$require","$===","$capture","$values_match?","$captured?","$!","$matches?","$description","$positive_failure_reason","$negative_failure_reason","$description_of","$name","$private","$>","$length","$actual_output_description","$inspect","$raise","$new","$call","$string"]),n.$require("stringio"),function(n){var r,s=r=o(n,"RSpec"),c=(s.$$proto,s.$$scope);!function(n){var r,s=r=o(n,"Matchers"),c=(s.$$proto,s.$$scope);!function(n){var r,s=r=o(n,"BuiltIn"),c=(s.$$proto,s.$$scope);!function(n,$super){function r(){}var o=r=$(n,$super,"Output",r),i=o.$$proto,s=o.$$scope;return i.stream_capturer=i.expected=i.actual=i.block=a,e.defn(o,"$initialize",function(e){var t=this;return t.expected=e,t.actual="",t.block=a,t.stream_capturer=s.get("NullCapture")}),e.defn(o,"$matches?",function(e){var t,n=this;return n.block=e,(t=s.get("Proc")["$==="](e))===a||t.$$is_boolean&&1!=t?!1:(n.actual=n.stream_capturer.$capture(e),(t=n.expected)===a||t.$$is_boolean&&1!=t?n["$captured?"]():n["$values_match?"](n.expected,n.actual))}),e.defn(o,"$does_not_match?",function(e){var t,n=this;return t=n["$matches?"](e)["$!"](),t!==!1&&t!==a?s.get("Proc")["$==="](e):t}),e.defn(o,"$to_stdout",function(){var e=this;return e.stream_capturer=s.get("CaptureStdout"),e}),e.defn(o,"$to_stderr",function(){var e=this;return e.stream_capturer=s.get("CaptureStderr"),e}),e.defn(o,"$failure_message",function(){var e=this;return"expected block to "+e.$description()+", but "+e.$positive_failure_reason()}),e.defn(o,"$failure_message_when_negated",function(){var e=this;return"expected block to not "+e.$description()+", but "+e.$negative_failure_reason()}),e.defn(o,"$description",function(){var e,t=this;return(e=t.expected)===a||e.$$is_boolean&&1!=e?"output to "+t.stream_capturer.$name():"output "+t.$description_of(t.expected)+" to "+t.stream_capturer.$name()}),e.defn(o,"$diffable?",function(){return!0}),e.defn(o,"$supports_block_expectations?",function(){return!0}),o.$private(),e.defn(o,"$captured?",function(){var e=this;return t(e.actual.$length(),0)}),e.defn(o,"$positive_failure_reason",function(){var e,t=this;return(e=s.get("Proc")["$==="](t.block))===a||e.$$is_boolean&&1!=e?"was not a block":(e=t.expected)===a||e.$$is_boolean&&1!=e?"did not":"output "+t.$actual_output_description()}),e.defn(o,"$negative_failure_reason",function(){var e,t=this;return(e=s.get("Proc")["$==="](t.block))===a||e.$$is_boolean&&1!=e?"was not a block":"output "+t.$actual_output_description()}),e.defn(o,"$actual_output_description",function(){var e,t=this;return(e=t["$captured?"]())===a||e.$$is_boolean&&1!=e?"nothing":t.actual.$inspect()}),a&&"actual_output_description"}(c.base,c.get("BaseMatcher")),function(t){var n,r=n=o(t,"NullCapture");r.$$proto,r.$$scope;e.defs(r,"$name",function(){return"some stream"}),e.defs(r,"$capture",function(e){var t=this;return t.$raise("You must chain `to_stdout` or `to_stderr` off of the `output(...)` matcher.")})}(c.base),function(t){var n,r=n=o(t,"CaptureStdout"),$=(r.$$proto,r.$$scope);e.defs(r,"$name",function(){return"stdout"}),e.defs(r,"$capture",function(e){var t=a,n=a;null==i.stdout&&(i.stdout=a);try{return t=$.get("StringIO").$new(),n=i.stdout,i.stdout=t,e.$call(),t.$string()}finally{i.stdout=n}})}(c.base),function(t){var n,r=n=o(t,"CaptureStderr"),$=(r.$$proto,r.$$scope);e.defs(r,"$name",function(){return"stderr"}),e.defs(r,"$capture",function(e){var t=a,n=a;null==i.stderr&&(i.stderr=a);try{return t=$.get("StringIO").$new(),n=i.stderr,i.stderr=t,e.$call(),t.$string()}finally{i.stderr=n}})}(c.base)}(c.base)}(c.base)}(r.base)},Opal.modules["rspec/matchers/built_in/raise_error"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass;return e.add_stubs(["$include","$===","$raise_message_already_set","$call","$values_match?","$verify_message","$eval_block","$expectation_matched?","$prevent_invalid_expectations","$!","$matches?","$message","$expected_error","$given_error","$private","$error_and_message_match?","$block_matches?","$[]","$nil?","$expecting_specific_exception?","$new","$raise","$description_of","$inspect","$backtrace_formatter","$configuration","$format_backtrace","$backtrace","$join","$!="]),function(t){var o,$=o=r(t,"RSpec"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"Matchers"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"BuiltIn"),i=($.$$proto,$.$$scope);!function(t,$super){function r(){}var o,$,i=r=a(t,$super,"RaiseError",r),s=i.$$proto,c=i.$$scope;return s.expected_message=s.block=s.expected_error=s.actual_error=s.raised_expected_error=s.with_expected_message=s.eval_block=s.eval_block_passed=s.given_proc=n,i.$include(c.get("Composable")),e.defn(i,"$initialize",o=function(e,t){var r,a=this,$=o.$$p,i=$||n,s=n;return null==e&&(e=c.get("Exception")),null==t&&(t=n),o.$$p=null,a.block=i,a.actual_error=n,function(){return s=e,c.get("String")["$==="](s)||c.get("Regexp")["$==="](s)?(r=[c.get("Exception"),e],a.expected_error=r[0],a.expected_message=r[1],r):(r=[e,t],a.expected_error=r[0],a.expected_message=r[1],r)}()}),e.defn(i,"$with_message",function(e){var t,r=this;return(t=r.expected_message)===n||t.$$is_boolean&&1!=t||r.$raise_message_already_set(),r.expected_message=e,r}),e.defn(i,"$matches?",$=function(t,r){var a,o,i,s=this,u=$.$$p,l=u||n;if(null==r&&(r=!1),$.$$p=null,s.given_proc=t,(a=s.block)!==!1&&a!==n?a:s.block=l,s.raised_expected_error=!1,s.with_expected_message=!1,s.eval_block=!1,s.eval_block_passed=!1,(a=c.get("Proc")["$==="](t))===n||a.$$is_boolean&&1!=a)return!1;try{t.$call()}catch(_){if(!e.rescue(_,[c.get("Exception")]))throw _;s.actual_error=_;try{(a=s["$values_match?"](s.expected_error,s.actual_error))===n||a.$$is_boolean&&1!=a||(s.raised_expected_error=!0,s.with_expected_message=s.$verify_message())}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}return r!==!1&&r!==n||(i=s.raised_expected_error,o=i!==!1&&i!==n?s.with_expected_message:i,(a=o!==!1&&o!==n?s.block:o)===n||a.$$is_boolean&&1!=a||s.$eval_block()),s["$expectation_matched?"]()}),e.defn(i,"$does_not_match?",function(e){var t,r=this;return r.$prevent_invalid_expectations(),t=r["$matches?"](e,"negative_expectation")["$!"](),t!==!1&&t!==n?c.get("Proc")["$==="](e):t}),e.defn(i,"$supports_block_expectations?",function(){return!0}),e.defn(i,"$expects_call_stack_jump?",function(){return!0}),e.defn(i,"$failure_message",function(){var e,t=this;return(e=t.eval_block)===n||e.$$is_boolean&&1!=e?"expected "+t.$expected_error()+t.$given_error():t.actual_error.$message()}),e.defn(i,"$failure_message_when_negated",function(){var e=this;return"expected no "+e.$expected_error()+e.$given_error()}),e.defn(i,"$description",function(){var e=this;return"raise "+e.$expected_error()}),i.$private(),e.defn(i,"$expectation_matched?",function(){var e,t=this;return e=t["$error_and_message_match?"](),e!==!1&&e!==n?t["$block_matches?"]():e}),e.defn(i,"$error_and_message_match?",function(){var e,t=this;return e=t.raised_expected_error,e!==!1&&e!==n?t.with_expected_message:e}),e.defn(i,"$block_matches?",function(){var e,t=this;return(e=t.eval_block)===n||e.$$is_boolean&&1!=e?!0:t.eval_block_passed}),e.defn(i,"$eval_block",function(){var t=this,r=n;t.eval_block=!0;try{return t.block["$[]"](t.actual_error),t.eval_block_passed=!0}catch(a){if(!e.rescue(a,[c.get("Exception")]))throw a;r=a;try{return t.actual_error=r}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}),e.defn(i,"$verify_message",function(){var e,t=this;return(e=t.expected_message["$nil?"]())===n||e.$$is_boolean&&1!=e?t["$values_match?"](t.expected_message,t.actual_error.$message()):!0}),e.defn(i,"$prevent_invalid_expectations",function(){var e,t,r=this,a=n,o=n;return a=function(){return t=r["$expecting_specific_exception?"](),(e=t!==!1&&t!==n?r.expected_message:t)===n||e.$$is_boolean&&1!=e?(e=r["$expecting_specific_exception?"]())===n||e.$$is_boolean&&1!=e?(e=r.expected_message)===n||e.$$is_boolean&&1!=e?n:"`expect { }.not_to raise_error(message)`":"`expect { }.not_to raise_error(SpecificErrorClass)`":"`expect { }.not_to raise_error(SpecificErrorClass, message)`"}(),a===!1||a===n?n:(o=c.get("ArgumentError").$new(""+a+" is not valid, use `expect { }.not_to raise_error` (with no args) instead"),r.$raise(o))}),e.defn(i,"$expected_error",function(){var e=this,t=n;return function(){return t=e.expected_message,n["$==="](t)?e.$description_of(e.expected_error):c.get("Regexp")["$==="](t)?""+e.expected_error+" with message matching "+e.expected_message.$inspect():""+e.expected_error+" with "+e.$description_of(e.expected_message)}()}),e.defn(i,"$format_backtrace",function(e){var t=n;return t=c.get("Matchers").$configuration().$backtrace_formatter(),t.$format_backtrace(e)}),e.defn(i,"$given_error",function(){var t,r=this,a=n;return(t=c.get("Proc")["$==="](r.given_proc))===n||t.$$is_boolean&&1!=t?" but was not given a block":(t=r.actual_error)===n||t.$$is_boolean&&1!=t?" but nothing was raised":(a=r.$format_backtrace(r.actual_error.$backtrace()),[", got "+r.actual_error.$inspect()+" with backtrace:"].concat(e.to_a(a)).$join("\n  # "))}),e.defn(i,"$expecting_specific_exception?",function(){var e=this;return e.expected_error["$!="](c.get("Exception"))}),e.defn(i,"$raise_message_already_set",function(){var e=this;return e.$raise("`expect { }.to raise_error(message).with_message(message)` is not valid. The matcher only allows the expected message to be specified once")}),n&&"raise_message_already_set"}(i.base,null)}(i.base)}(i.base)}(t.base)},Opal.modules["rspec/matchers/built_in/respond_to"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass;return e.add_stubs(["$require_rspec_support","$empty?","$find_failing_method_names","$inspect","$join","$map","$with_arity","$sub","$failure_message","$pp_names","$private","$__send__","$respond_to?","$matches_arity?","$new","$method","$valid?","$==","$length","$first"]),t.get("RSpec").$$scope.get("Support").$require_rspec_support("method_signature_verifier"),function(t){var o,$=o=r(t,"RSpec"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"Matchers"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"BuiltIn"),i=($.$$proto,$.$$scope);!function(t,$super){function r(){}var o=r=a(t,$super,"RespondTo",r),$=o.$$proto,i=o.$$scope;return $.actual=$.failing_method_names=$.names=$.expected_arity=n,e.defn(o,"$initialize",function(){var e=this,t=n,r=arguments.length-0;0>r&&(r=0);var a=new Array(r);for(t=0;r>t;t++)a[t]=arguments[t+0];return e.names=a,e.expected_arity=n}),e.defn(o,"$with",function(e){var t=this;return t.expected_arity=e,t}),e.defn(o,"$argument",function(){var e=this;return e}),e.alias(o,"arguments","argument"),e.defn(o,"$matches?",function(e){var t=this;return t.$find_failing_method_names(e,"reject")["$empty?"]()}),e.defn(o,"$does_not_match?",function(e){var t=this;return t.$find_failing_method_names(e,"select")["$empty?"]()}),e.defn(o,"$failure_message",function(){var e,t,r,a=this;return"expected "+a.actual.$inspect()+" to respond to "+(e=(t=a.failing_method_names).$map,e.$$p=(r=function(e){r.$$s||this;return null==e&&(e=n),e.$inspect()},r.$$s=a,r),e).call(t).$join(", ")+a.$with_arity()}),e.defn(o,"$failure_message_when_negated",function(){var e=this;return e.$failure_message().$sub(/to respond to/,"not to respond to")}),e.defn(o,"$description",function(){var e=this;return"respond to "+e.$pp_names()+e.$with_arity()}),o.$private(),e.defn(o,"$find_failing_method_names",function(e,t){var r,a,o,$=this;return $.actual=e,$.failing_method_names=(r=(a=$.names).$__send__,r.$$p=(o=function(t){var r,a=o.$$s||this;return null==a.actual&&(a.actual=n),null==t&&(t=n),r=a.actual["$respond_to?"](t),r!==!1&&r!==n?a["$matches_arity?"](e,t):r},o.$$s=$,o),r).call(a,t)}),e.defn(o,"$matches_arity?",function(e,t){var r,a=this,o=n;return(r=a.expected_arity)===n||r.$$is_boolean&&1!=r?!0:(o=i.get("Support").$$scope.get("MethodSignature").$new(e.$method(t)),i.get("Support").$$scope.get("StrictSignatureVerifier").$new(o,i.get("Array").$new(a.expected_arity))["$valid?"]())}),e.defn(o,"$with_arity",function(){var e,t=this;return(e=t.expected_arity)===n||e.$$is_boolean&&1!=e?"":" with "+t.expected_arity+" argument"+function(){return t.expected_arity["$=="](1)?"":"s"}()}),e.defn(o,"$pp_names",function(){var e=this;return e.names.$length()["$=="](1)?"#"+e.names.$first():e.names.$inspect()}),n&&"pp_names"}(i.base,i.get("BaseMatcher"))}(i.base)}(i.base)}(t.base)},Opal.modules["rspec/matchers/built_in/satisfy"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass;return e.add_stubs(["$call"]),function(t){var o,$=o=r(t,"RSpec"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"Matchers"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"BuiltIn"),i=($.$$proto,$.$$scope);!function(t,$super){function r(){}var o,$,i=r=a(t,$super,"Satisfy",r),s=i.$$proto;i.$$scope;return s.block=s.actual=n,e.defn(i,"$initialize",o=function(){var e=this,t=o.$$p,r=t||n;return o.$$p=null,e.block=r}),e.defn(i,"$matches?",$=function(e){var t=this,r=$.$$p,a=r||n;return $.$$p=null,a!==!1&&a!==n&&(t.block=a),t.actual=e,t.block.$call(e)}),e.defn(i,"$failure_message",function(){var e=this;return"expected "+e.actual+" to satisfy block"}),e.defn(i,"$failure_message_when_negated",function(){var e=this;return"expected "+e.actual+" not to satisfy block"}),e.defn(i,"$description",function(){return"satisfy block"}),n&&"description"}(i.base,i.get("BaseMatcher"))}(i.base)}(i.base)}(t.base)},Opal.modules["rspec/matchers/built_in/throw_symbol"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="ignore";var n=(e.top,e),r=e.nil,a=(e.breaker,e.slice,e.module),o=e.klass;return e.add_stubs(["$include","$===","$nil?","$call","$catch","$throw","$==","$match","$message","$raise","$to_sym","$[]","$captures","$!","$values_match?","$matches?","$expected","$actual_result","$private","$caught","$throw_description","$is_a?","$inspect","$description_of","$+"]),function(n){var $,i=$=a(n,"RSpec"),s=(i.$$proto,i.$$scope);!function(n){var $,i=$=a(n,"Matchers"),s=(i.$$proto,i.$$scope);!function(n){var $,i=$=a(n,"BuiltIn"),s=(i.$$proto,i.$$scope);!function(n,$super){function a(){}var $=a=o(n,$super,"ThrowSymbol",a),i=$.$$proto,s=$.$$scope;return i.expected_symbol=i.caught_arg=i.caught_symbol=i.expected_arg=i.block=r,$.$include(s.get("Composable")),e.defn($,"$initialize",function(e,t){var n=this;return null==e&&(e=r),null==t&&(t=r),n.expected_symbol=e,n.expected_arg=t,n.caught_symbol=n.caught_arg=r}),e.defn($,"$matches?",function(t){var n,a,o,$=this,i=r,c=r,u=r;if($.block=t,(n=s.get("Proc")["$==="](t))===r||n.$$is_boolean&&1!=n)return!1;try{try{return(n=$.expected_symbol["$nil?"]())===r||n.$$is_boolean&&1!=n?($.caught_arg=(n=(a=$).$catch,n.$$p=(o=function(){var e,n,a,$=o.$$s||this;return null==$.expected_symbol&&($.expected_symbol=r),(e=(n=$).$catch,e.$$p=(a=function(){var e=a.$$s||this;return t.$call(),e.$throw("proc_did_not_throw_anything","nothing_thrown")},a.$$s=$,a),e).call(n,$.expected_symbol)},o.$$s=$,o),n).call(a,"proc_did_not_throw_anything"),$.caught_arg["$=="]("nothing_thrown")?$.caught_arg=r:$.caught_symbol=$.expected_symbol):t.$call()}catch(l){if(e.rescue(l,[s.get("NameError"),s.get("ArgumentError")])){i=l;try{return((n=c=i.$message().$match(/uncaught throw (`|\:)([a-zA-Z0-9_]*)(')?/))===r||n.$$is_boolean&&1!=n)&&(u=i,$.$raise()),$.caught_symbol=c.$captures()["$[]"](1).$to_sym()}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}else{u=l;try{$.$raise()}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}}finally{if(u===!1||u===r)return(n=$.expected_symbol["$nil?"]())===r||n.$$is_boolean&&1!=n?(n=$.expected_arg["$nil?"]())===r||n.$$is_boolean&&1!=n?(n=$.caught_symbol["$=="]($.expected_symbol),n!==!1&&n!==r?$["$values_match?"]($.expected_arg,$.caught_arg):n):$.caught_symbol["$=="]($.expected_symbol):$.caught_symbol["$!"]()["$!"]()}}),e.defn($,"$does_not_match?",function(e){var t,n=this;return t=n["$matches?"](e)["$!"](),t!==!1&&t!==r?s.get("Proc")["$==="](e):t}),e.defn($,"$failure_message",function(){var e=this;return"expected "+e.$expected()+" to be thrown, "+e.$actual_result()}),e.defn($,"$failure_message_when_negated",function(){var e,t=this;return"expected "+t.$expected("no Symbol")+function(){return(e=t.expected_symbol)===r||e.$$is_boolean&&1!=e?r:" not"}()+" to be thrown, "+t.$actual_result()}),e.defn($,"$description",function(){var e=this;return"throw "+e.$expected()}),e.defn($,"$supports_block_expectations?",function(){return!0}),e.defn($,"$expects_call_stack_jump?",function(){return!0}),$.$private(),e.defn($,"$actual_result",function(){var e,t=this;return(e=s.get("Proc")["$==="](t.block))===r||e.$$is_boolean&&1!=e?"but was not a block":"got "+t.$caught()}),e.defn($,"$expected",function(e){var t,n=this;return null==e&&(e="a Symbol"),n.$throw_description((t=n.expected_symbol)!==!1&&t!==r?t:e,n.expected_arg)}),e.defn($,"$caught",function(){var e,t=this;return t.$throw_description((e=t.caught_symbol)!==!1&&e!==r?e:"nothing",t.caught_arg)}),e.defn($,"$throw_description",function(e,n){var a,o,$=this,i=r,c=r;return i=function(){return(a=e["$is_a?"](s.get("String")))===r||a.$$is_boolean&&1!=a?e.$inspect():e}(),c=function(){return n!==!1&&n!==r?" with "+$.$description_of(n):(o=$.expected_arg,(a=o!==!1&&o!==r?$.caught_symbol["$=="]($.expected_symbol):o)===r||a.$$is_boolean&&1!=a?"":" with no argument")}(),t(i,c)}),r&&"throw_description"}(s.base,null)}(s.base)}(s.base)}(n.base)},Opal.modules["rspec/matchers/built_in/yield"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.dynamic_require_severity="ignore";var r=(e.top,e),a=e.nil,o=(e.breaker,e.slice),$=e.module,i=e.klass;return e.add_stubs(["$require_rspec_support","$new","$has_block?","$assert_valid_expect_block!","$call","$assert_used!","$attr_accessor","$num_yields=","$yielded_args=","$===","$+","$num_yields","$<<","$yielded_args","$first","$raise","$map","$==","$size","$>","$to_f","$valid?","$exactly","$set_expected_yields_count","$probe","$__send__","$yielded_once?","$!","$matches?","$failure_reason","$private","$human_readable_expecation_type","$human_readable_count","$empty?","$single_yield_args","$positive_failure_reason","$negative_failure_reason","$zero?","$inspect","$args_match?","$expected_arg_description","$join","$description_of","$all_args_match?","$surface_descriptions_in","$values_match?","$successive_yield_args"]),r.get("RSpec").$$scope.get("Support").$require_rspec_support("method_signature_verifier"),function(r){var s,c=s=$(r,"RSpec"),u=(c.$$proto,c.$$scope);!function(r){var s,c=s=$(r,"Matchers"),u=(c.$$proto,c.$$scope);!function(r){var s,c=s=$(r,"BuiltIn"),u=(c.$$proto,c.$$scope);!function(r,$super){function $(){}var s=$=i(r,$super,"YieldProbe",$),c=s.$$proto,u=s.$$scope;return c.block=c.used=a,e.defs(s,"$probe",function(e){var t,n=this,r=a;return r=n.$new(e),(t=r["$has_block?"]())===a||t.$$is_boolean&&1!=t?r:(r["$assert_valid_expect_block!"](),e.$call(r),r["$assert_used!"](),r)}),s.$attr_accessor("num_yields","yielded_args"),e.defn(s,"$initialize",function(e){var t,n=this;return n.block=e,n.used=!1,t=[0,[]],n["$num_yields="](t[0]),n["$yielded_args="](t[1]),t}),e.defn(s,"$has_block?",function(){var e=this;return u.get("Proc")["$==="](e.block)}),e.defn(s,"$to_proc",function(){var e,n,r,$=this,i=a;return $.used=!0,i=$,(e=(n=u.get("Proc")).$new,e.$$p=(r=function(e){var n;r.$$s||this;return e=o.call(arguments,0),n=i,n["$num_yields="](t(n.$num_yields(),1)),i.$yielded_args()["$<<"](e),a},r.$$s=$,r),e).call(n)}),e.defn(s,"$single_yield_args",function(){var e=this;return e.$yielded_args().$first()}),e.defn(s,"$yielded_once?",function(e){var t=this,n=a;return function(){return n=t.$num_yields(),1["$==="](n)?!0:0["$==="](n)?!1:t.$raise("The "+e+" matcher is not designed to be used with a method that yields multiple times. Use the yield_successive_args matcher for that case.")}()}),e.defn(s,"$successive_yield_args",function(){var e,t,n,r=this;return(e=(t=r.$yielded_args()).$map,e.$$p=(n=function(e){n.$$s||this;return null==e&&(e=a),e.$size()["$=="](1)?e.$first():e},n.$$s=r,n),e).call(t)}),e.defn(s,"$assert_used!",function(){var e,t=this;return(e=t.used)===a||e.$$is_boolean&&1!=e?t.$raise("You must pass the argument yielded to your expect block on to the method-under-test as a block. It acts as a probe that allows the matcher to detect whether or not the method-under-test yields, and, if so, how many times, and what the yielded arguments are."):a}),n(u.get("RUBY_VERSION").$to_f(),1.8)?(e.defn(s,"$assert_valid_expect_block!",function(){var e,t=this,n=a;return n=u.get("RSpec").$$scope.get("Support").$$scope.get("BlockSignature").$new(t.block),(e=u.get("RSpec").$$scope.get("Support").$$scope.get("StrictSignatureVerifier").$new(n,[t])["$valid?"]())===a||e.$$is_boolean&&1!=e?t.$raise("Your expect block must accept an argument to be used with this matcher. Pass the argument as a block on to the method you are testing."):a}),a&&"assert_valid_expect_block!"):(e.defn(s,"$assert_valid_expect_block!",function(){return a}),a&&"assert_valid_expect_block!")}(u.base,null),function(n,$super){function r(){}var o=r=i(n,$super,"YieldControl",r),$=o.$$proto,s=o.$$scope;return $.probe=$.expectation_type=$.expected_yields_count=a,e.defn(o,"$initialize",function(){var e=this;return e.expectation_type=a,e.expected_yields_count=a}),e.defn(o,"$once",function(){var e=this;return e.$exactly(1),e}),e.defn(o,"$twice",function(){var e=this;return e.$exactly(2),e}),e.defn(o,"$thrice",function(){var e=this;return e.$exactly(3),e}),e.defn(o,"$exactly",function(e){var t=this;return t.$set_expected_yields_count("==",e),t}),e.defn(o,"$at_most",function(e){var t=this;return t.$set_expected_yields_count("<=",e),t}),e.defn(o,"$at_least",function(e){var t=this;return t.$set_expected_yields_count(">=",e),t}),e.defn(o,"$times",function(){var e=this;return e}),e.defn(o,"$matches?",function(e){var t,n=this;return n.probe=s.get("YieldProbe").$probe(e),(t=n.probe["$has_block?"]())===a||t.$$is_boolean&&1!=t?!1:(t=n.expectation_type)===a||t.$$is_boolean&&1!=t?n.probe["$yielded_once?"]("yield_control"):n.probe.$num_yields().$__send__(n.expectation_type,n.expected_yields_count)}),e.defn(o,"$does_not_match?",function(e){var t,n=this;return t=n["$matches?"](e)["$!"](),t!==!1&&t!==a?n.probe["$has_block?"]():t}),e.defn(o,"$failure_message",function(){var e=this;return t("expected given block to yield control",e.$failure_reason())}),e.defn(o,"$failure_message_when_negated",function(){var e=this;return t("expected given block not to yield control",e.$failure_reason())}),e.defn(o,"$supports_block_expectations?",function(){return!0}),o.$private(),e.defn(o,"$set_expected_yields_count",function(e,t){var n=this,r=a;return n.expectation_type=e,n.expected_yields_count=function(){return r=t,s.get("Numeric")["$==="](r)?t:"once"["$==="](r)?1:"twice"["$==="](r)?2:"thrice"["$==="](r)?3:a}()}),e.defn(o,"$failure_reason",function(){var e,t=this;return(e=t.probe["$has_block?"]())===a||e.$$is_boolean&&1!=e?" but was not a block":(e=t.expected_yields_count)===a||e.$$is_boolean&&1!=e?"":" "+t.$human_readable_expecation_type()+t.$human_readable_count()}),e.defn(o,"$human_readable_expecation_type",function(){var e=this,t=a;return function(){return t=e.expectation_type,"<="["$==="](t)?"at most ":">="["$==="](t)?"at least ":""}()}),e.defn(o,"$human_readable_count",function(){var e=this,t=a;return function(){return t=e.expected_yields_count,1["$==="](t)?"once":2["$==="](t)?"twice":""+e.expected_yields_count+" times"}()}),a&&"human_readable_count"}(u.base,u.get("BaseMatcher")),function(t,$super){function n(){}var r=n=i(t,$super,"YieldWithNoArgs",n),o=r.$$proto,$=r.$$scope;return o.probe=a,e.defn(r,"$matches?",function(e){var t,n=this;return n.probe=$.get("YieldProbe").$probe(e),(t=n.probe["$has_block?"]())===a||t.$$is_boolean&&1!=t?!1:(t=n.probe["$yielded_once?"]("yield_with_no_args"),t!==!1&&t!==a?n.probe.$single_yield_args()["$empty?"]():t)}),e.defn(r,"$does_not_match?",function(e){var t,n=this;return t=n["$matches?"](e)["$!"](),t!==!1&&t!==a?n.probe["$has_block?"]():t}),e.defn(r,"$failure_message",function(){var e=this;return"expected given block to yield with no arguments, but "+e.$positive_failure_reason()}),e.defn(r,"$failure_message_when_negated",function(){var e=this;return"expected given block not to yield with no arguments, but "+e.$negative_failure_reason()}),e.defn(r,"$supports_block_expectations?",function(){return!0}),r.$private(),e.defn(r,"$positive_failure_reason",function(){var e,t=this;return(e=t.probe["$has_block?"]())===a||e.$$is_boolean&&1!=e?"was not a block":(e=t.probe.$num_yields()["$zero?"]())===a||e.$$is_boolean&&1!=e?"yielded with arguments: "+t.probe.$single_yield_args().$inspect():"did not yield"}),e.defn(r,"$negative_failure_reason",function(){var e,t=this;return(e=t.probe["$has_block?"]())===a||e.$$is_boolean&&1!=e?"was not a block":"did"}),a&&"negative_failure_reason"}(u.base,u.get("BaseMatcher")),function(n,$super){function r(){}var o=r=i(n,$super,"YieldWithArgs",r),$=o.$$proto,s=o.$$scope;return $.probe=$.expected=$.positive_args_failure=$.actual=a,e.defn(o,"$initialize",function(){var e=this,t=a,n=arguments.length-0;0>n&&(n=0);var r=new Array(n);for(t=0;n>t;t++)r[t]=arguments[t+0];return e.expected=r}),e.defn(o,"$matches?",function(e){var t,n=this;return n.probe=s.get("YieldProbe").$probe(e),(t=n.probe["$has_block?"]())===a||t.$$is_boolean&&1!=t?!1:(n.actual=n.probe.$single_yield_args(),t=n.probe["$yielded_once?"]("yield_with_args"),t!==!1&&t!==a?n["$args_match?"]():t)}),e.defn(o,"$does_not_match?",function(e){var t,n=this;return t=n["$matches?"](e)["$!"](),t!==!1&&t!==a?n.probe["$has_block?"]():t}),e.defn(o,"$failure_message",function(){var e=this;return"expected given block to yield with arguments, but "+e.$positive_failure_reason()}),e.defn(o,"$failure_message_when_negated",function(){var e=this;return"expected given block not to yield with arguments, but "+e.$negative_failure_reason()}),e.defn(o,"$description",function(){var e,t=this,n=a;return n="yield with args",((e=t.expected["$empty?"]())===a||e.$$is_boolean&&1!=e)&&n["$<<"]("("+t.$expected_arg_description()+")"),n}),e.defn(o,"$supports_block_expectations?",function(){return!0}),o.$private(),e.defn(o,"$positive_failure_reason",function(){var e,t=this;return(e=t.probe["$has_block?"]())===a||e.$$is_boolean&&1!=e?"was not a block":(e=t.probe.$num_yields()["$zero?"]())===a||e.$$is_boolean&&1!=e?t.positive_args_failure:"did not yield"}),e.defn(o,"$expected_arg_description",function(){var e,t,n,r=this;return(e=(t=r.expected).$map,e.$$p=(n=function(e){var t=n.$$s||this;return null==e&&(e=a),t.$description_of(e)},n.$$s=r,n),e).call(t).$join(", ")}),e.defn(o,"$negative_failure_reason",function(){
var e,n=this;return(e=n.probe["$has_block?"]()["$!"]())===a||e.$$is_boolean&&1!=e?(e=n["$all_args_match?"]())===a||e.$$is_boolean&&1!=e?"did":t("yielded with expected arguments\nexpected not: "+n.$surface_descriptions_in(n.expected).$inspect(),"\n         got: "+n.actual.$inspect()):"was not a block"}),e.defn(o,"$args_match?",function(){var e,n=this,r=a;return(e=n.expected["$empty?"]())===a||e.$$is_boolean&&1!=e?(((e=r=n["$all_args_match?"]())===a||e.$$is_boolean&&1!=e)&&(n.positive_args_failure=t("yielded with unexpected arguments\nexpected: "+n.$surface_descriptions_in(n.expected).$inspect(),"\n     got: "+n.actual.$inspect())),r):((e=n.actual["$empty?"]())===a||e.$$is_boolean&&1!=e||(n.positive_args_failure="yielded with no arguments"),n.actual["$empty?"]()["$!"]())}),e.defn(o,"$all_args_match?",function(){var e=this;return e["$values_match?"](e.expected,e.actual)}),a&&"all_args_match?"}(u.base,u.get("BaseMatcher")),function(t,$super){function n(){}var r=n=i(t,$super,"YieldSuccessiveArgs",n),o=r.$$proto,$=r.$$scope;return o.probe=o.expected=o.actual=a,e.defn(r,"$initialize",function(){var e=this,t=a,n=arguments.length-0;0>n&&(n=0);var r=new Array(n);for(t=0;n>t;t++)r[t]=arguments[t+0];return e.expected=r}),e.defn(r,"$matches?",function(e){var t,n=this;return n.probe=$.get("YieldProbe").$probe(e),(t=n.probe["$has_block?"]())===a||t.$$is_boolean&&1!=t?!1:(n.actual=n.probe.$successive_yield_args(),n["$args_match?"]())}),e.defn(r,"$does_not_match?",function(e){var t,n=this;return t=n["$matches?"](e)["$!"](),t!==!1&&t!==a?n.probe["$has_block?"]():t}),e.defn(r,"$failure_message",function(){var e=this;return"expected given block to yield successively with arguments, but "+e.$positive_failure_reason()}),e.defn(r,"$failure_message_when_negated",function(){var e=this;return"expected given block not to yield successively with arguments, but "+e.$negative_failure_reason()}),e.defn(r,"$description",function(){var e=this,t=a;return t="yield successive args",t["$<<"]("("+e.$expected_arg_description()+")"),t}),e.defn(r,"$supports_block_expectations?",function(){return!0}),r.$private(),e.defn(r,"$args_match?",function(){var e=this;return e["$values_match?"](e.expected,e.actual)}),e.defn(r,"$expected_arg_description",function(){var e,t,n,r=this;return(e=(t=r.expected).$map,e.$$p=(n=function(e){var t=n.$$s||this;return null==e&&(e=a),t.$description_of(e)},n.$$s=r,n),e).call(t).$join(", ")}),e.defn(r,"$positive_failure_reason",function(){var e,t=this;return(e=t.probe["$has_block?"]())===a||e.$$is_boolean&&1!=e?"was not a block":"yielded with unexpected arguments\nexpected: "+t.$surface_descriptions_in(t.expected).$inspect()+("\n     got: "+t.actual.$inspect())}),e.defn(r,"$negative_failure_reason",function(){var e,t=this;return(e=t.probe["$has_block?"]())===a||e.$$is_boolean&&1!=e?"was not a block":"yielded with expected arguments\nexpected not: "+t.$surface_descriptions_in(t.expected).$inspect()+("\n         got: "+t.actual.$inspect())}),a&&"negative_failure_reason"}(u.base,u.get("BaseMatcher"))}(u.base)}(u.base)}(r.base)},Opal.modules["rspec/matchers/built_in"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=(e.nil,e.breaker,e.slice,e.module);return e.add_stubs(["$require_rspec_matchers","$autoload"]),t.get("RSpec").$$scope.get("Support").$require_rspec_matchers("built_in/base_matcher"),function(e){var t,r=t=n(e,"RSpec"),a=(r.$$proto,r.$$scope);!function(e){var t,r=t=n(e,"Matchers"),a=(r.$$proto,r.$$scope);!function(e){var t,r=t=n(e,"BuiltIn");r.$$proto,r.$$scope;r.$autoload("BeAKindOf","rspec/matchers/built_in/be_kind_of"),r.$autoload("BeAnInstanceOf","rspec/matchers/built_in/be_instance_of"),r.$autoload("BeBetween","rspec/matchers/built_in/be_between"),r.$autoload("Be","rspec/matchers/built_in/be"),r.$autoload("BeComparedTo","rspec/matchers/built_in/be"),r.$autoload("BeFalsey","rspec/matchers/built_in/be"),r.$autoload("BeNil","rspec/matchers/built_in/be"),r.$autoload("BePredicate","rspec/matchers/built_in/be"),r.$autoload("BeTruthy","rspec/matchers/built_in/be"),r.$autoload("BeWithin","rspec/matchers/built_in/be_within"),r.$autoload("Change","rspec/matchers/built_in/change"),r.$autoload("Compound","rspec/matchers/built_in/compound"),r.$autoload("ContainExactly","rspec/matchers/built_in/contain_exactly"),r.$autoload("Cover","rspec/matchers/built_in/cover"),r.$autoload("EndWith","rspec/matchers/built_in/start_and_end_with"),r.$autoload("Eq","rspec/matchers/built_in/eq"),r.$autoload("Eql","rspec/matchers/built_in/eql"),r.$autoload("Equal","rspec/matchers/built_in/equal"),r.$autoload("Exist","rspec/matchers/built_in/exist"),r.$autoload("Has","rspec/matchers/built_in/has"),r.$autoload("HaveAttributes","rspec/matchers/built_in/have_attributes"),r.$autoload("Include","rspec/matchers/built_in/include"),r.$autoload("All","rspec/matchers/built_in/all"),r.$autoload("Match","rspec/matchers/built_in/match"),r.$autoload("NegativeOperatorMatcher","rspec/matchers/built_in/operators"),r.$autoload("OperatorMatcher","rspec/matchers/built_in/operators"),r.$autoload("Output","rspec/matchers/built_in/output"),r.$autoload("PositiveOperatorMatcher","rspec/matchers/built_in/operators"),r.$autoload("RaiseError","rspec/matchers/built_in/raise_error"),r.$autoload("RespondTo","rspec/matchers/built_in/respond_to"),r.$autoload("Satisfy","rspec/matchers/built_in/satisfy"),r.$autoload("StartWith","rspec/matchers/built_in/start_and_end_with"),r.$autoload("ThrowSymbol","rspec/matchers/built_in/throw_symbol"),r.$autoload("YieldControl","rspec/matchers/built_in/yield"),r.$autoload("YieldSuccessiveArgs","rspec/matchers/built_in/yield"),r.$autoload("YieldWithArgs","rspec/matchers/built_in/yield"),r.$autoload("YieldWithNoArgs","rspec/matchers/built_in/yield")}(a.base)}(a.base)}(t.base)},Opal.modules["rspec/matchers/built_in/base_matcher"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}e.dynamic_require_severity="ignore";var r=(e.top,e),a=e.nil,o=e.breaker,$=(e.slice,e.module),i=e.klass;return e.add_stubs(["$include","$freeze","$new","$attr_reader","$equal?","$match","$expected","$empty?","$unshift","$name_to_sentence","$to_sentence","$private","$any?","$-","$present_ivars","$raise","$name","$class","$<","$to_f","$map","$to_sym","$instance_variables","$inspect","$actual","$description","$==","$owner","$method"]),function(r){var s,c=s=$(r,"RSpec"),u=(c.$$proto,c.$$scope);!function(r){var s,c=s=$(r,"Matchers"),u=(c.$$proto,c.$$scope);!function(r){var s,c=s=$(r,"BuiltIn"),u=(c.$$proto,c.$$scope);!function(r,$super){function s(){}var c,u=s=i(r,$super,"BaseMatcher",s),l=u.$$proto,_=u.$$scope;return l.expected=a,u.$include(_.get("RSpec").$$scope.get("Matchers").$$scope.get("Pretty")),u.$include(_.get("RSpec").$$scope.get("Matchers").$$scope.get("Composable")),e.cdecl(_,"UNDEFINED",_.get("Object").$new().$freeze()),u.$attr_reader("actual","expected","rescued_exception"),e.defn(u,"$initialize",function(e){var t,n=this;return null==e&&(e=_.get("UNDEFINED")),(t=_.get("UNDEFINED")["$equal?"](e))===a||t.$$is_boolean&&1!=t?n.expected=e:a}),e.defn(u,"$matches?",function(e){var t=this;return t.actual=e,t.$match(t.$expected(),e)}),e.defn(u,"$match_unless_raises",c=function(){var t,n=this,r=c.$$p,$=r||a,i=a,s=arguments.length-0;0>s&&(s=0);var u=new Array(s);for(i=0;s>i;i++)u[i]=arguments[i+0];c.$$p=null,(t=u["$empty?"]())===a||t.$$is_boolean&&1!=t||u.$unshift(_.get("Exception"));try{return e.yieldX($,[])===o?o.$v:!0}catch(l){if(!e.rescue(l,[u]))throw l;n.rescued_exception=l;try{return!1}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}),e.defn(u,"$description",function(){var e,t,n=this;return t=n.expected,(e=null!=t&&t!==a?"instance-variable":a)===a||e.$$is_boolean&&1!=e?n.$name_to_sentence():""+n.$name_to_sentence()+n.$to_sentence(n.expected)}),e.defn(u,"$diffable?",function(){return!1}),e.defn(u,"$supports_block_expectations?",function(){return!1}),e.defn(u,"$expects_call_stack_jump?",function(){return!1}),u.$private(),e.defn(u,"$assert_ivars",function(){var e,n=this,r=a,o=arguments.length-0;0>o&&(o=0);var $=new Array(o);for(r=0;o>r;r++)$[r]=arguments[r+0];return(e=t($,n.$present_ivars())["$any?"]())===a||e.$$is_boolean&&1!=e?a:n.$raise(""+n.$class().$name()+" needs to supply"+n.$to_sentence($))}),n(_.get("RUBY_VERSION").$to_f(),1.9)?e.defn(u,"$present_ivars",function(){var e,t,n,r=this;return(e=(t=r.$instance_variables()).$map,e.$$p=(n=function(e){n.$$s||this;return null==e&&(e=a),e.$to_sym()},n.$$s=r,n),e).call(t)}):e.alias(u,"present_ivars","instance_variables"),function(t){var n,r=n=$(t,"DefaultFailureMessages"),a=(r.$$proto,r.$$scope);e.defn(r,"$failure_message",function(){var e=this;return"expected "+e.$actual().$inspect()+" to "+e.$description()}),e.defn(r,"$failure_message_when_negated",function(){var e=this;return"expected "+e.$actual().$inspect()+" not to "+e.$description()}),e.defs(r,"$has_default_failure_messages?",function(t){var n,r=this;try{return(n=t.$method("failure_message").$owner()["$=="](r))?t.$method("failure_message_when_negated").$owner()["$=="](r):t.$method("failure_message").$owner()["$=="](r)}catch(o){if(!e.rescue(o,[a.get("NameError")]))throw o;try{return!1}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}})}(_.base),u.$include(_.get("DefaultFailureMessages"))}(u.base,null)}(u.base)}(u.base)}(r.base)},Opal.modules["rspec/matchers/composable"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module);return e.add_stubs(["$require_rspec_support","$new","$matches?","$private","$with_matchers_cloned","$values_match?","$is_a_describable_matcher?","$description","$inspect","$===","$[]","$surface_descriptions_in","$to_a","$enumerable?","$map","$is_a_matcher?","$clone","$include?","$ancestors","$module_function","$item","$text"]),t.get("RSpec").$$scope.get("Support").$require_rspec_support("fuzzy_matcher"),function(t){var a,o=a=r(t,"RSpec"),$=(o.$$proto,o.$$scope);!function(t){var a,o=a=r(t,"Matchers"),$=(o.$$proto,o.$$scope);!function(t){var a,o,$,i,s=a=r(t,"Composable"),c=(s.$$proto,s.$$scope);e.defn(s,"$and",function(e){var t=this;return c.get("BuiltIn").$$scope.get("Compound").$$scope.get("And").$new(t,e)}),e.alias(s,"&","and"),e.defn(s,"$or",function(e){var t=this;return c.get("BuiltIn").$$scope.get("Compound").$$scope.get("Or").$new(t,e)}),e.alias(s,"|","or"),e.defn(s,"$===",function(e){var t=this;return t["$matches?"](e)}),s.$private(),e.defn(s,"$values_match?",function(e,t){var n=this;return e=n.$with_matchers_cloned(e),c.get("Support").$$scope.get("FuzzyMatcher")["$values_match?"](e,t)}),e.defn(s,"$description_of",function(e){var t;return(t=c.get("Matchers")["$is_a_describable_matcher?"](e))===n||t.$$is_boolean&&1!=t?e.$inspect():e.$description()}),e.defn(s,"$surface_descriptions_in",function(t){var r,a,o,$=this;if(!((r=c.get("Matchers")["$is_a_describable_matcher?"](t))===n||r.$$is_boolean&&1!=r))return c.get("DescribableItem").$new(t);if(!((r=c.get("Hash")["$==="](t))===n||r.$$is_boolean&&1!=r))return c.get("Hash")["$[]"]($.$surface_descriptions_in(t.$to_a()));if(!((r=c.get("Struct")["$==="](t))===n||r.$$is_boolean&&1!=r))return t.$inspect();if((r=$["$enumerable?"](t))===n||r.$$is_boolean&&1!=r)return t;try{return(r=(a=t).$map,r.$$p=(o=function(e){var t=o.$$s||this;return null==e&&(e=n),t.$surface_descriptions_in(e)},o.$$s=$,o),r).call(a)}catch(i){if(!e.rescue(i,[c.get("IOError")]))throw i;try{return t.$inspect()}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}),e.defn(s,"$with_matchers_cloned",function(t){var r,a,o,$=this;if(!((r=c.get("Matchers")["$is_a_matcher?"](t))===n||r.$$is_boolean&&1!=r))return t.$clone();if(!((r=c.get("Hash")["$==="](t))===n||r.$$is_boolean&&1!=r))return c.get("Hash")["$[]"]($.$with_matchers_cloned(t.$to_a()));if(!((r=c.get("Struct")["$==="](t))===n||r.$$is_boolean&&1!=r))return t;if((r=$["$enumerable?"](t))===n||r.$$is_boolean&&1!=r)return t;try{return(r=(a=t).$map,r.$$p=(o=function(e){var t=o.$$s||this;return null==e&&(e=n),t.$with_matchers_cloned(e)},o.$$s=$,o),r).call(a)}catch(i){if(!e.rescue(i,[c.get("IOError")]))throw i;try{return t}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}),(o=c.get("String").$ancestors()["$include?"](c.get("Enumerable")))===n||o.$$is_boolean&&1!=o?e.defn(s,"$enumerable?",function(e){return c.get("Enumerable")["$==="](e)}):e.defn(s,"$enumerable?",function(e){var t;return(t=c.get("String")["$==="](e))===n||t.$$is_boolean&&1!=t?c.get("Enumerable")["$==="](e):!1}),s.$module_function("surface_descriptions_in","enumerable?"),e.cdecl(c,"DescribableItem",(o=($=c.get("Struct")).$new,o.$$p=(i=function(){var t=i.$$s||this;return e.def(t,"$inspect",function(){var e=this;return"("+e.$item().$description()+")"}),e.def(t,"$pretty_print",function(e){var t=this;return e.$text("("+t.$item().$description()+")")}),n&&"pretty_print"},i.$$s=s,i),o).call($,"item"))}($.base)}($.base)}(t.base)},Opal.modules["rspec/matchers/dsl"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>=t:e["$>="](t)}e.dynamic_require_severity="ignore";var n=(e.top,e),r=e.nil,a=(e.breaker,e.slice),o=e.module,$=e.hash2,i=e.klass;return e.add_stubs(["$define_method","$new","$alias_method","$respond_to?","$configure","$extend","$define_user_override","$actual_arg_for","$to_proc","$push","$private","$__send__","$lambda","$deprecate","$match","$match_when_negated","$failure_message","$failure_message_when_negated","$include","$name_to_sentence","$to_sentence","$expected","$chained_method_clause_sentences","$include_chain_clauses_in_custom_matcher_descriptions?","$configuration","$join","$map","$split_words","$attr_reader","$class_exec","$==","$size","$expected_as_array","$[]","$name","$class","$>=","$to_f","$zero?","$arity"]),function(n){var s,c=s=o(n,"RSpec"),u=(c.$$proto,c.$$scope);!function(n){var s,c=s=o(n,"Matchers"),u=(c.$$proto,c.$$scope);!function(n){var s,c,u,l,_,p=s=o(n,"DSL"),d=(p.$$proto,p.$$scope);e.defn(p,"$define",c=function(t){var n,o,$,i=this,s=c.$$p,u=s||r;return c.$$p=null,(n=(o=i).$define_method,n.$$p=($=function(n){var r,o=$.$$s||this;return n=a.call(arguments,0),(r=d.get("RSpec").$$scope.get("Matchers").$$scope.get("DSL").$$scope.get("Matcher")).$new.apply(r,[t,u,o].concat(e.to_a(n)))},$.$$s=i,$),n).call(o,t)}),p.$alias_method("matcher","define"),(u=d.get("RSpec")["$respond_to?"]("configure"))===r||u.$$is_boolean&&1!=u||(u=(l=d.get("RSpec")).$configure,u.$$p=(_=function(e){var t=_.$$s||this;return null==e&&(e=r),e.$extend(t)},_.$$s=p,_),u).call(l),function(t){var n,i,s,c,u,l,_,p,d,f=n=o(t,"Macros"),g=(f.$$proto,f.$$scope);e.defn(f,"$match",i=function(){var t,n,a,o=this,$=i.$$p,s=$||r;return i.$$p=null,(t=(n=o).$define_user_override,t.$$p=(a=function(t){var n=a.$$s||this;null==t&&(t=r);try{return n.actual=t,e.find_iter_super_dispatcher(n,"match",a.$$def||i,null).apply(n,e.to_a(n.$actual_arg_for(s)))}catch(o){if(!e.rescue(o,[g.get("RSpec").$$scope.get("Expectations").$$scope.get("ExpectationNotMetError")]))throw o;try{return!1}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}},a.$$s=o,a),t).call(n,"matches?",s)}),e.defn(f,"$match_when_negated",s=function(){var t,n,a,o=this,$=s.$$p,i=$||r;return s.$$p=null,(t=(n=o).$define_user_override,t.$$p=(a=function(t){var n=a.$$s||this;return null==t&&(t=r),n.actual=t,e.find_iter_super_dispatcher(n,"match_when_negated",a.$$def||s,null).apply(n,e.to_a(n.$actual_arg_for(i)))},a.$$s=o,a),t).call(n,"does_not_match?",i)}),e.defn(f,"$match_unless_raises",c=function(t){var n,a,o,$=this,i=c.$$p,s=i||r;return null==t&&(t=g.get("Exception")),c.$$p=null,(n=(a=$).$define_user_override,n.$$p=(o=function(n){var a=o.$$s||this;null==n&&(n=r),a.actual=n;try{return e.find_iter_super_dispatcher(a,"match_unless_raises",o.$$def||c,null).apply(a,e.to_a(a.$actual_arg_for(s)))}catch($){if(e.rescue($,[t])){a.rescued_exception=$;try{return!1}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}},o.$$s=$,o),n).call(a,"matches?",s)}),e.defn(f,"$failure_message",u=function(){var e=this,t=u.$$p,n=t||r;return u.$$p=null,e.$define_user_override("failure_message",n)}),e.defn(f,"$failure_message_when_negated",l=function(){var e=this,t=l.$$p,n=t||r;return l.$$p=null,e.$define_user_override("failure_message_when_negated",n)}),e.defn(f,"$description",_=function(){var e=this,t=_.$$p,n=t||r;return _.$$p=null,e.$define_user_override("description",n)}),e.defn(f,"$diffable",function(){var e,t,n,r=this;return(e=(t=r).$define_method,e.$$p=(n=function(){n.$$s||this;return!0},n.$$s=r,n),e).call(t,"diffable?")}),e.defn(f,"$supports_block_expectations",function(){var e,t,n,r=this;return(e=(t=r).$define_method,e.$$p=(n=function(){n.$$s||this;return!0},n.$$s=r,n),e).call(t,"supports_block_expectations?")}),e.defn(f,"$chain",p=function(t){var n,o,$,i=this,s=p.$$p,c=s||r;return p.$$p=null,(n=(o=i).$define_user_override,n.$$p=($=function(n){var o,i=$.$$s||this;return null==i.chained_method_clauses&&(i.chained_method_clauses=r),n=a.call(arguments,0),o=$.$$p||r,$.$$p=null,e.find_iter_super_dispatcher(i,"chain",$.$$def||p,null).apply(i,e.to_a(n).concat(o.$to_proc())),i.chained_method_clauses.$push([t,n]),i},$.$$s=i,$),n).call(o,t,c)}),f.$private(),e.defn(f,"$define_user_override",d=function(t,n){var a,o,$,i,s,c=this,u=d.$$p,l=u||r;return null==c.user_method_defs&&(c.user_method_defs=r),d.$$p=null,(a=(o=c.user_method_defs).$__send__,a.$$p=n.$to_proc(),a).call(o,"define_method",t),(a=l)!==!1&&a!==r?a:l=($=(i=c).$lambda,$.$$p=(s=function(){var t=s.$$s||this;return e.find_iter_super_dispatcher(t,"define_user_override",s.$$def||d,null).apply(t,e.to_a(t.$actual_arg_for(n)))},s.$$s=c,s),$).call(i),(a=($=c).$define_method,a.$$p=l.$to_proc(),a).call($,t)}),function(t){var n,a,i,s,c,u=n=o(t,"Deprecated"),l=(u.$$proto,u.$$scope);e.defn(u,"$match_for_should",a=function(){var e,t,n=this,o=a.$$p,i=o||r;return a.$$p=null,l.get("RSpec").$deprecate("`match_for_should`",$(["replacement"],{replacement:"`match`"})),(e=(t=n).$match,e.$$p=i.$to_proc(),e).call(t)}),e.defn(u,"$match_for_should_not",i=function(){var e,t,n=this,a=i.$$p,o=a||r;return i.$$p=null,l.get("RSpec").$deprecate("`match_for_should_not`",$(["replacement"],{replacement:"`match_when_negated`"})),(e=(t=n).$match_when_negated,e.$$p=o.$to_proc(),e).call(t)}),e.defn(u,"$failure_message_for_should",s=function(){var e,t,n=this,a=s.$$p,o=a||r;return s.$$p=null,l.get("RSpec").$deprecate("`failure_message_for_should`",$(["replacement"],{replacement:"`failure_message`"})),(e=(t=n).$failure_message,e.$$p=o.$to_proc(),e).call(t)}),e.defn(u,"$failure_message_for_should_not",c=function(){var e,t,n=this,a=c.$$p,o=a||r;return c.$$p=null,l.get("RSpec").$deprecate("`failure_message_for_should_not`",$(["replacement"],{replacement:"`failure_message_when_negated`"})),(e=(t=n).$failure_message_when_negated,e.$$p=o.$to_proc(),e).call(t)})}(g.base)}(d.base),function(t){var n,a=n=o(t,"DefaultImplementations"),$=(a.$$proto,a.$$scope);a.$include($.get("BuiltIn").$$scope.get("BaseMatcher").$$scope.get("DefaultFailureMessages")),e.defn(a,"$diffable?",function(){return!1}),e.defn(a,"$description",function(){var e=this;return""+e.$name_to_sentence()+e.$to_sentence(e.$expected())+e.$chained_method_clause_sentences()}),e.defn(a,"$supports_block_expectations?",function(){return!1}),e.defn(a,"$expects_call_stack_jump?",function(){return!1}),a.$private(),e.defn(a,"$chained_method_clause_sentences",function(){var e,t,n,a=this;return null==a.chained_method_clauses&&(a.chained_method_clauses=r),(e=$.get("Expectations").$configuration()["$include_chain_clauses_in_custom_matcher_descriptions?"]())===r||e.$$is_boolean&&1!=e?"":(e=(t=a.chained_method_clauses).$map,e.$$p=(n=function(e,t){var a=n.$$s||this;return null==e&&(e=r),null==t&&(t=r)," "+a.$split_words(e)+a.$to_sentence(t)},n.$$s=a,n),e).call(t).$join()})}(d.base),function(n,$super){function a(){}var o,$,s,c=a=i(n,$super,"Matcher",a),u=c.$$proto,l=c.$$scope;return u.matcher_execution_context=u.actual=r,c.$include(l.get("DefaultImplementations")),c.$include(l.get("RSpec").$$scope.get("Matchers")),c.$include(l.get("RSpec").$$scope.get("Matchers").$$scope.get("Pretty")),c.$include(l.get("Composable")),c.$extend(l.get("Macros")),c.$extend(l.get("Macros").$$scope.get("Deprecated")),c.$attr_reader("actual"),c.$attr_reader("rescued_exception"),e.defn(c,"$initialize",function(t,n,a){var o,$,i=this,s=r,c=arguments.length-3;0>c&&(c=0);var u=new Array(c);for(s=0;c>s;s++)u[s]=arguments[s+3];return i.name=t,i.actual=r,i.expected_as_array=u,i.matcher_execution_context=a,i.chained_method_clauses=[],(o=($=function(e){var t=e.$$scope;e.$$proto;return e.$include(e.user_method_defs=t.get("Module").$new()),e}(e.get_singleton_class(i))).$class_exec,o.$$p=n.$to_proc(),o).apply($,e.to_a(u))}),e.defn(c,"$expected",function(){var e=this;return e.$expected_as_array().$size()["$=="](1)?e.$expected_as_array()["$[]"](0):e.$expected_as_array()}),c.$attr_reader("expected_as_array"),e.defn(c,"$inspect",function(){var e=this;return"#<"+e.$class().$name()+" "+e.$name()+">"}),t(l.get("RUBY_VERSION").$to_f(),1.9)?e.defn(c,"$respond_to_missing?",o=function(t,n){var a,$=this,i=o.$$p,s=r,c=r;for(null==n&&(n=!1),o.$$p=null,s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];return(a=e.find_super_dispatcher($,"respond_to_missing?",o,i).apply($,s))!==!1&&a!==r?a:$.matcher_execution_context["$respond_to?"](t,n)}):e.defn(c,"$respond_to?",$=function(t,n){var a,o=this,i=$.$$p,s=r,c=r;for(null==n&&(n=!1),$.$$p=null,s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];return(a=e.find_super_dispatcher(o,"respond_to?",$,i).apply(o,s))!==!1&&a!==r?a:o.matcher_execution_context["$respond_to?"](t,n)}),c.$private(),e.defn(c,"$actual_arg_for",function(e){var t,n=this;return(t=e.$arity()["$zero?"]())===r||t.$$is_boolean&&1!=t?[n.actual]:[]}),e.defn(c,"$method_missing",s=function(t){var n,a,o=this,$=s.$$p,i=$||r,c=r,u=arguments.length-1;0>u&&(u=0);var l=new Array(u);for(c=0;u>c;c++)l[c]=arguments[c+1];return s.$$p=null,(n=o.matcher_execution_context["$respond_to?"](t))===r||n.$$is_boolean&&1!=n?e.find_super_dispatcher(o,"method_missing",s,null).apply(o,[t].concat(e.to_a(l)).concat(i.$to_proc())):(n=(a=o.matcher_execution_context).$__send__,n.$$p=i.$to_proc(),n).apply(a,[t].concat(e.to_a(l)))}),r&&"method_missing"}(d.base,null)}(u.base)}(u.base)}(n.base),n.get("RSpec").$$scope.get("Matchers").$extend(n.get("RSpec").$$scope.get("Matchers").$$scope.get("DSL"))},Opal.modules["rspec/matchers/generated_descriptions"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module);return e.add_stubs(["$attr_accessor","$last_matcher=","$last_expectation_handler=","$nil?","$last_expectation_handler","$verb","$last_description","$private","$respond_to?","$last_matcher","$description"]),function(t){var a,o=a=r(t,"RSpec"),$=(o.$$proto,o.$$scope);!function(t){var a,o=a=r(t,"Matchers");o.$$proto,o.$$scope;!function(e){e.$$scope,e.$$proto;return e.$attr_accessor("last_matcher","last_expectation_handler")}(e.get_singleton_class(o)),e.defs(o,"$clear_generated_description",function(){var e,t,r=this;return e=[n],t=r,t["$last_matcher="].apply(t,e),e[e.length-1],e=[n],t=r,t["$last_expectation_handler="].apply(t,e),e[e.length-1]}),e.defs(o,"$generated_description",function(){var e,t=this;return(e=t.$last_expectation_handler()["$nil?"]())===n||e.$$is_boolean&&1!=e?""+t.$last_expectation_handler().$verb()+" "+t.$last_description():n}),o.$private(),e.defs(o,"$last_description",function(){var e,t=this;return(e=t.$last_matcher()["$respond_to?"]("description"))===n||e.$$is_boolean&&1!=e?"When you call a matcher in an example without a String, like this:\n\nspecify { expect(object).to matcher }\n\nor this:\n\nit { is_expected.to matcher }\n\nRSpec expects the matcher to have a #description method. You should either\nadd a String to the example this matcher is being used in, or give it a\ndescription method. Then you won't have to suffer this lengthy warning again.\n":t.$last_matcher().$description()})}($.base)}(t.base)},Opal.modules["rspec/matchers/matcher_delegator"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.dynamic_require_severity="ignore";var n=(e.top,e),r=e.nil,a=(e.breaker,e.slice,e.module),o=e.klass;return e.add_stubs(["$include","$attr_reader","$__send__","$to_proc","$base_matcher","$>","$to_f","$respond_to?","$clone"]),function(n){var $,i=$=a(n,"RSpec"),s=(i.$$proto,i.$$scope);!function(n){var $,i=$=a(n,"Matchers"),s=(i.$$proto,i.$$scope);!function(n,$super){function a(){}var $,i,s,c,u=a=o(n,$super,"MatcherDelegator",a),l=u.$$proto,_=u.$$scope;return l.base_matcher=r,u.$include(_.get("Composable")),u.$attr_reader("base_matcher"),e.defn(u,"$initialize",function(e){var t=this;return t.base_matcher=e}),e.defn(u,"$method_missing",$=function(){var t,n,a=this,o=$.$$p,i=o||r,s=r,c=arguments.length-0;0>c&&(c=0);var u=new Array(c);for(s=0;c>s;s++)u[s]=arguments[s+0];return $.$$p=null,(t=(n=a.$base_matcher()).$__send__,t.$$p=i.$to_proc(),t).apply(n,e.to_a(u))}),t(e.get("RUBY_VERSION").$to_f(),1.8)?e.defn(u,"$respond_to_missing?",i=function(t,n){var a,o=this,$=i.$$p,s=r,c=r;for(null==n&&(n=!1),i.$$p=null,s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];return(a=e.find_super_dispatcher(o,"respond_to_missing?",i,$).apply(o,s))!==!1&&a!==r?a:o.$base_matcher()["$respond_to?"](t,n)}):e.defn(u,"$respond_to?",s=function(t,n){var a,o=this,$=s.$$p,i=r,c=r;for(null==n&&(n=!1),s.$$p=null,i=[],c=0;c<arguments.length;c++)i[c]=arguments[c];return(a=e.find_super_dispatcher(o,"respond_to?",s,$).apply(o,i))!==!1&&a!==r?a:o.$base_matcher()["$respond_to?"](t,n)}),e.defn(u,"$initialize_copy",c=function(t){var n=this,a=c.$$p,o=r,$=r;for(c.$$p=null,o=[],$=0;$<arguments.length;$++)o[$]=arguments[$];return n.base_matcher=n.base_matcher.$clone(),e.find_super_dispatcher(n,"initialize_copy",c,a).apply(n,o)}),r&&"initialize_copy"}(s.base,null)}(s.base)}(n.base)},Opal.modules["rspec/matchers/pretty"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.range;return e.add_stubs(["$gsub","$to_s","$module_function","$!","$===","$inspect","$map","$to_word","$Array","$length","$[]","$join","$is_matcher_with_description?","$description","$split_words","$name","$underscore","$last","$split","$class","$dup","$gsub!","$tr!","$downcase!","$private","$is_a_matcher?","$respond_to?"]),function(t){var o,$=o=r(t,"RSpec"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"Matchers"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"Pretty"),i=($.$$proto,$.$$scope);e.defn($,"$split_words",function(e){return e.$to_s().$gsub(/_/," ")}),$.$module_function("split_words"),e.defn($,"$to_sentence",function(e){var t,r,o,$=this,s=n;return(t=(r=e["$!"]())!==!1&&r!==n?r:i.get("Struct")["$==="](e))===n||t.$$is_boolean&&1!=t?(e=(t=(r=$.$Array(e)).$map,t.$$p=(o=function(e){var t=o.$$s||this;return null==e&&(e=n),t.$to_word(e)},o.$$s=$,o),t).call(r),function(){return s=e.$length(),0["$==="](s)?"":1["$==="](s)?" "+e["$[]"](0):2["$==="](s)?" "+e["$[]"](0)+" and "+e["$[]"](1):" "+e["$[]"](a(0,-1,!0)).$join(", ")+", and "+e["$[]"](-1)}()):" "+e.$inspect()}),e.defn($,"$to_word",function(e){var t,r=this;return(t=r["$is_matcher_with_description?"](e))===n||t.$$is_boolean&&1!=t?e.$inspect():e.$description()}),e.defn($,"$name_to_sentence",function(){var e=this;return e.$split_words(e.$name())}),e.defn($,"$name",function(){var e,t,r=this;return null==r.name&&(r.name=n),t=r.name,(e=null!=t&&t!==n?"instance-variable":n)===n||e.$$is_boolean&&1!=e?r.$underscore(r.$class().$name().$split("::").$last()):r.name}),e.defn($,"$underscore",function(e){var t=n;return t=e.$to_s().$dup(),t["$gsub!"](/([A-Z]+)([A-Z][a-z])/,"\\1_\\2"),t["$gsub!"](/([a-z\d])([A-Z])/,"\\1_\\2"),t["$tr!"]("-","_"),t["$downcase!"](),t}),$.$private(),e.defn($,"$is_matcher_with_description?",function(e){var t;return t=i.get("RSpec").$$scope.get("Matchers")["$is_a_matcher?"](e),t!==!1&&t!==n?e["$respond_to?"]("description"):t}),e.defn($,"$improve_hash_formatting",function(e){return e.$gsub(/(\S)=>(\S)/,"\\1 => \\2")})}(i.base)}(i.base)}(t.base)},Opal.modules["rspec/mocks/any_instance/chain"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice),a=e.module,o=e.klass;return e.add_stubs(["$define_method","$record","$to_proc","$include","$create_message_expectation_on","$inject","$__send__","$last","$first","$messages","$any?","$==","$args_match?","$negated?","$raise_double_negation_error","$new","$private","$empty?","$verify_invocation_order","$<<","$unshift"]),function(t){var $,i=$=a(t,"RSpec"),s=(i.$$proto,i.$$scope);!function(t){var $,i=$=a(t,"Mocks"),s=(i.$$proto,i.$$scope);!function(t){var $,i=$=a(t,"AnyInstance"),s=(i.$$proto,i.$$scope);!function(t,$super){function $(){}var i,s,c,u,l=$=o(t,$super,"Chain",$),_=l.$$proto,p=l.$$scope;return _.argument_list_matcher=_.messages=n,e.defn(l,"$initialize",i=function(e){var t=this,r=i.$$p,a=r||n,o=n,$=arguments.length-1;0>$&&($=0);var s=new Array($);for(o=0;$>o;o++)s[o]=arguments[o+1];return i.$$p=null,t.recorder=e,t.expectation_args=s,t.expectation_block=a,t.argument_list_matcher=p.get("ArgumentListMatcher").$$scope.get("MATCH_ALL")}),function(t){var o,$=o=a(t,"Customizations");$.$$proto,$.$$scope;e.defs($,"$record",function(t){var a,o,$,i=this;return(a=(o=i).$define_method,a.$$p=($=function(a){var o,i,s,c=$.$$s||this;return a=r.call(arguments,0),o=$.$$p||n,$.$$p=null,(i=(s=c).$record,i.$$p=o.$to_proc(),i).apply(s,[t].concat(e.to_a(a)))},$.$$s=i,$),a).call(o,t)}),$.$record("and_return"),$.$record("and_raise"),$.$record("and_throw"),$.$record("and_yield"),$.$record("and_call_original"),$.$record("with"),$.$record("once"),$.$record("twice"),$.$record("thrice"),$.$record("exactly"),$.$record("times"),$.$record("never"),$.$record("at_least"),$.$record("at_most")}(p.base),l.$include(p.get("Customizations")),e.defn(l,"$playback!",function(t){var r,a,o,$=this,i=n;return i=$.$create_message_expectation_on(t),(r=(a=$.$messages()).$inject,r.$$p=(o=function(t,r){var a,$;o.$$s||this;return null==t&&(t=n),null==r&&(r=n),(a=($=t).$__send__,a.$$p=r.$last().$to_proc(),a).apply($,e.to_a(r.$first()))},o.$$s=$,o),r).call(a,i)}),e.defn(l,"$constrained_to_any_of?",function(){var e,t,r,a=this,o=n,$=arguments.length-0;0>$&&($=0);var i=new Array($);for(o=0;$>o;o++)i[o]=arguments[o+0];return(e=(t=i)["$any?"],e.$$p=(r=function(e){var t,a,o,$=r.$$s||this;return null==e&&(e=n),(t=(a=$.$messages())["$any?"],t.$$p=(o=function(t){o.$$s||this;return null==t&&(t=n),t.$first().$first()["$=="](e)},o.$$s=$,o),t).call(a)},r.$$s=a,r),e).call(t)}),e.defn(l,"$matches_args?",function(){var t,r=this,a=n,o=arguments.length-0;0>o&&(o=0);var $=new Array(o);for(a=0;o>a;a++)$[a]=arguments[a+0];return(t=r.argument_list_matcher)["$args_match?"].apply(t,e.to_a($))}),e.defn(l,"$expectation_fulfilled!",function(){var e=this;return e.expectation_fulfilled=!0}),e.defn(l,"$never",s=function(){var t,r=this,a=s.$$p,o=n,$=n;for(s.$$p=null,o=[],$=0;$<arguments.length;$++)o[$]=arguments[$];return(t=r["$negated?"]())===n||t.$$is_boolean&&1!=t||p.get("ErrorGenerator").$raise_double_negation_error("expect_any_instance_of(MyClass)"),e.find_super_dispatcher(r,"never",s,a).apply(r,o)}),e.defn(l,"$with",c=function(){var t,r=this,a=c.$$p,o=n,$=n,i=n,s=arguments.length-0;0>s&&(s=0);var u=new Array(s);for(o=0;s>o;o++)u[o]=arguments[o+0];for(c.$$p=null,$=[],i=0;i<arguments.length;i++)$[i]=arguments[i];return r.argument_list_matcher=(t=p.get("ArgumentListMatcher")).$new.apply(t,e.to_a(u)),e.find_super_dispatcher(r,"with",c,a).apply(r,$)}),l.$private(),e.defn(l,"$negated?",function(){var e,t,r,a=this;return(e=(t=a.$messages())["$any?"],e.$$p=(r=function(e,t){var a=(r.$$s||this,e[0]);return null==t&&(t=n),a["$=="]("never")},r.$$s=a,r),e).call(t)}),e.defn(l,"$messages",function(){var e,t=this;return(e=t.messages)!==!1&&e!==n?e:t.messages=[]}),e.defn(l,"$last_message",function(){var e,t=this;return(e=t.$messages()["$empty?"]())===n||e.$$is_boolean&&1!=e?t.$messages().$last().$first().$first():n}),e.defn(l,"$record",u=function(t){var r,a,o=this,$=u.$$p,i=$||n,s=n,c=arguments.length-1;0>c&&(c=0);var l=new Array(c);for(s=0;c>s;s++)l[s]=arguments[s+1];return u.$$p=null,(r=(a=o).$verify_invocation_order,r.$$p=i.$to_proc(),r).apply(a,[t].concat(e.to_a(l))),o.$messages()["$<<"]([l.$unshift(t),i]),o}),n&&"record"}(s.base,null)}(s.base)}(s.base)}(t.base)},Opal.modules["rspec/mocks/any_instance/expect_chain_chain"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,o=e.hash2;return e.add_stubs(["$tap","$private","$expect_chain_on","$to_proc"]),function(t){var $,i=$=r(t,"RSpec"),s=(i.$$proto,i.$$scope);!function(t){var $,i=$=r(t,"Mocks"),s=(i.$$proto,i.$$scope);!function(t){var $,i=$=r(t,"AnyInstance"),s=(i.$$proto,
i.$$scope);!function(t,$super){function r(){}var $,i,s=r=a(t,$super,"ExpectChainChain",r),c=s.$$proto;s.$$scope;return c.expectation_fulfilled=c.expectation_block=c.expectation_args=c.invocation_order=n,e.defn(s,"$initialize",$=function(){var t=this,r=$.$$p,a=n,o=n,i=n,s=arguments.length-0;0>s&&(s=0);var c=new Array(s);for(a=0;s>a;a++)c[a]=arguments[a+0];for($.$$p=null,o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return e.find_super_dispatcher(t,"initialize",$,r).apply(t,o),t.expectation_fulfilled=!1}),e.defn(s,"$expectation_fulfilled?",function(){var e=this;return e.expectation_fulfilled}),e.defn(s,"$playback!",i=function(t){var r,a,o,$=this,s=i.$$p,c=n,u=n;for(i.$$p=null,c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];return(r=(a=e.find_super_dispatcher($,"playback!",i,s).apply($,c)).$tap,r.$$p=(o=function(){var e=o.$$s||this;return e.expectation_fulfilled=!0},o.$$s=$,o),r).call(a)}),s.$private(),e.defn(s,"$create_message_expectation_on",function(t){var n,r,a=this;return(n=(r=e.get("RSpec").$$scope.get("Mocks").$$scope.get("ExpectChain")).$expect_chain_on,n.$$p=a.expectation_block.$to_proc(),n).apply(r,[t].concat(e.to_a(a.expectation_args)))}),e.defn(s,"$invocation_order",function(){var e,t=this;return(e=t.invocation_order)!==!1&&e!==n?e:t.invocation_order=o(["and_return","and_raise","and_yield"],{and_return:[n],and_raise:[n],and_yield:[n]})}),n&&"invocation_order"}(s.base,s.get("StubChain"))}(s.base)}(s.base)}(t.base)},Opal.modules["rspec/mocks/any_instance/expectation_chain"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,o=e.hash2;return e.add_stubs(["$constrained_to_any_of?","$private","$proxy_for","$space","$merge","$add_message_expectation","$to_proc","$yield_receiver_to_any_instance_implementation_blocks?","$configuration","$and_yield_receiver_to_implementation"]),function(t){var $,i=$=r(t,"RSpec"),s=(i.$$proto,i.$$scope);!function(t){var $,i=$=r(t,"Mocks"),s=(i.$$proto,i.$$scope);!function(t){var $,i=$=r(t,"AnyInstance"),s=(i.$$proto,i.$$scope);!function(t,$super){function r(){}var o,$,i=r=a(t,$super,"ExpectationChain",r),s=i.$$proto;i.$$scope;return s.expectation_fulfilled=n,e.defn(i,"$expectation_fulfilled?",function(){var e,t=this;return(e=t.expectation_fulfilled)!==!1&&e!==n?e:t["$constrained_to_any_of?"]("never")}),e.defn(i,"$initialize",o=function(){var t=this,r=o.$$p,a=n,$=n,i=n,s=arguments.length-0;0>s&&(s=0);var c=new Array(s);for(a=0;s>a;a++)c[a]=arguments[a+0];for(o.$$p=null,$=[],i=0;i<arguments.length;i++)$[i]=arguments[i];return t.expectation_fulfilled=!1,e.find_super_dispatcher(t,"initialize",o,r).apply(t,$)}),i.$private(),e.defn(i,"$verify_invocation_order",$=function(e){var t=($.$$p,n),r=arguments.length-1;0>r&&(r=0);var a=new Array(r);for(t=0;r>t;t++)a[t]=arguments[t+1];return $.$$p=null,n}),n&&"verify_invocation_order"}(s.base,s.get("Chain")),function(t,$super){function r(){}var $=r=a(t,$super,"PositiveExpectationChain",r),i=$.$$proto,s=$.$$scope;return i.expectation_args=i.expectation_block=i.invocation_order=n,$.$private(),e.defn($,"$create_message_expectation_on",function(t){var r,a,$=this,i=n,c=n,u=n,l=n;return i=e.get("RSpec").$$scope.get("Mocks").$space().$proxy_for(t),a=$.expectation_args,r=e.to_ary(a),c=null==r[0]?n:r[0],u=null==r[1]?n:r[1],a,u=((r=u)!==!1&&r!==n?r:o([],{})).$merge(o(["expected_form"],{expected_form:s.get("IGNORED_BACKTRACE_LINE")})),l=(r=(a=i).$add_message_expectation,r.$$p=$.expectation_block.$to_proc(),r).call(a,c,u),(r=s.get("RSpec").$$scope.get("Mocks").$configuration()["$yield_receiver_to_any_instance_implementation_blocks?"]())===n||r.$$is_boolean&&1!=r||l.$and_yield_receiver_to_implementation(),l}),e.defn($,"$invocation_order",function(){var e,t=this;return(e=t.invocation_order)!==!1&&e!==n?e:t.invocation_order=o(["with","and_return","and_raise"],{"with":[n],and_return:["with",n],and_raise:["with",n]})}),n&&"invocation_order"}(s.base,s.get("ExpectationChain"))}(s.base)}(s.base)}(t.base)},Opal.modules["rspec/mocks/any_instance/message_chains"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=e.breaker,a=(e.slice,e.module),o=e.klass;return e.add_stubs(["$new","$[]=","$[]","$<<","$reject!","$===","$find","$each","$!","$expectation_fulfilled?","$matches_args?","$all?","$compact","$map","$last","$to_s","$expectation_fulfilled!","$raise_if_second_instance_to_receive_message","$playback!","$private","$equal?","$raise","$join","$sort","$unfulfilled_expectations"]),function(t){var $,i=$=a(t,"RSpec"),s=(i.$$proto,i.$$scope);!function(t){var $,i=$=a(t,"Mocks"),s=(i.$$proto,i.$$scope);!function(t){var $,i=$=a(t,"AnyInstance"),s=(i.$$proto,i.$$scope);!function(t,$super){function a(){}var $,i=a=o(t,$super,"MessageChains",a),s=i.$$proto,c=i.$$scope;return s.chains_by_method_name=s.instance_with_expectation=n,e.defn(i,"$initialize",function(){var e,t,r,a=this;return a.chains_by_method_name=(e=(t=c.get("Hash")).$new,e.$$p=(r=function(e,t){r.$$s||this;return null==e&&(e=n),null==t&&(t=n),e["$[]="](t,[])},r.$$s=a,r),e).call(t)}),e.defn(i,"$[]",function(e){var t=this;return t.chains_by_method_name["$[]"](e)}),e.defn(i,"$add",function(e,t){var n=this;return n.chains_by_method_name["$[]"](e)["$<<"](t),t}),e.defn(i,"$remove_stub_chains_for!",function(e){var t,r,a,o=this;return(t=(r=o.chains_by_method_name["$[]"](e))["$reject!"],t.$$p=(a=function(e){a.$$s||this;return null==e&&(e=n),c.get("StubChain")["$==="](e)},a.$$s=o,a),t).call(r)}),e.defn(i,"$has_expectation?",function(e){var t,r,a,o=this;return(t=(r=o.chains_by_method_name["$[]"](e)).$find,t.$$p=(a=function(e){a.$$s||this;return null==e&&(e=n),c.get("ExpectationChain")["$==="](e)},a.$$s=o,a),t).call(r)}),e.defn(i,"$each_unfulfilled_expectation_matching",$=function(t){var a,o,i,s=this,c=$.$$p,u=c||n,l=n,_=arguments.length-1;0>_&&(_=0);var p=new Array(_);for(l=0;_>l;l++)p[l]=arguments[l+1];return $.$$p=null,(a=(o=s.chains_by_method_name["$[]"](t)).$each,a.$$p=(i=function(t){var a,o,$;i.$$s||this;return null==t&&(t=n),o=t["$expectation_fulfilled?"]()["$!"](),(a=o!==!1&&o!==n?($=t)["$matches_args?"].apply($,e.to_a(p)):o)===n||a.$$is_boolean&&1!=a?n:(a=e.yield1(u,t),a===r?a:a)},i.$$s=s,i),a).call(o)}),e.defn(i,"$all_expectations_fulfilled?",function(){var e,t,r,a=this;return(e=(t=a.chains_by_method_name)["$all?"],e.$$p=(r=function(e,t){var a,o,$,i=r.$$s||this;return null==e&&(e=n),null==t&&(t=n),(a=(o=t)["$all?"],a.$$p=($=function(e){$.$$s||this;return null==e&&(e=n),e["$expectation_fulfilled?"]()},$.$$s=i,$),a).call(o)},r.$$s=a,r),e).call(t)}),e.defn(i,"$unfulfilled_expectations",function(){var e,t,r,a=this;return(e=(t=a.chains_by_method_name).$map,e.$$p=(r=function(e,t){var a;r.$$s||this;return null==e&&(e=n),null==t&&(t=n),(a=t.$last()["$expectation_fulfilled?"]())===n||a.$$is_boolean&&1!=a?(a=c.get("ExpectationChain")["$==="](t.$last()))===n||a.$$is_boolean&&1!=a?n:e.$to_s():n},r.$$s=a,r),e).call(t).$compact()}),e.defn(i,"$received_expected_message!",function(e){var t,r,a,o=this;return(t=(r=o.chains_by_method_name["$[]"](e)).$each,t.$$p=(a=function(e){a.$$s||this;return null==e&&(e=n),e["$expectation_fulfilled!"]()},a.$$s=o,a),t).call(r)}),e.defn(i,"$playback!",function(e,t){var r,a,o,$=this;return $.$raise_if_second_instance_to_receive_message(e),(r=(a=$.chains_by_method_name["$[]"](t)).$each,r.$$p=(o=function(t){o.$$s||this;return null==t&&(t=n),t["$playback!"](e)},o.$$s=$,o),r).call(a)}),i.$private(),e.defn(i,"$raise_if_second_instance_to_receive_message",function(e){var t,r=this;return(t=c.get("ExpectationChain")["$==="](e))===n||t.$$is_boolean&&1!=t||((t=r.instance_with_expectation)!==!1&&t!==n?t:r.instance_with_expectation=e),(t=c.get("ExpectationChain")["$==="](e))===n||t.$$is_boolean&&1!=t?n:(t=r.instance_with_expectation["$equal?"](e))===n||t.$$is_boolean&&1!=t?r.$raise(c.get("RSpec").$$scope.get("Mocks").$$scope.get("MockExpectationError"),"Exactly one instance should have received the following message(s) but didn't: "+r.$unfulfilled_expectations().$sort().$join(", ")):n}),n&&"raise_if_second_instance_to_receive_message"}(s.base,null)}(s.base)}(s.base)}(t.base)},Opal.modules["rspec/mocks/any_instance/proxy"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.dynamic_require_severity="ignore";var r=(e.top,e),a=e.nil,o=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$klass","$===","$each","$and_return","$stub","$perform_proxying","$add_stub","$to_proc","$remove_stub_if_present","$stub_chain_on","$object","$expect_chain_on","$never","$add_message_expectation","$private","$__send__","$map","$new","$+","$>","$to_f","$respond_to?","$first"]),function(r){var i,s=i=o(r,"RSpec"),c=(s.$$proto,s.$$scope);!function(r){var i,s=i=o(r,"Mocks"),c=(s.$$proto,s.$$scope);!function(r){var i,s=i=o(r,"AnyInstance"),c=(s.$$proto,s.$$scope);!function(n,$super){function r(){}var o,i,s,c,u,l,_=r=$(n,$super,"Proxy",r),p=_.$$proto,d=_.$$scope;return p.recorder=p.target_proxies=a,e.defn(_,"$initialize",function(e,t){var n=this;return n.recorder=e,n.target_proxies=t}),e.defn(_,"$klass",function(){var e=this;return e.recorder.$klass()}),e.defn(_,"$stub",o=function(e){var t,n,r,$,i,s=this,c=o.$$p,u=c||a;return o.$$p=null,(t=d.get("Hash")["$==="](e))===a||t.$$is_boolean&&1!=t?(t=($=s).$perform_proxying,t.$$p=(i=function(t){var n,r;i.$$s||this;return null==t&&(t=a),(n=(r=t).$add_stub,n.$$p=u.$to_proc(),n).call(r,e)},i.$$s=s,i),t).call($,"stub",[e],u):(t=(n=e).$each,t.$$p=(r=function(e,t){var n=r.$$s||this;return null==e&&(e=a),null==t&&(t=a),n.$stub(e).$and_return(t)},r.$$s=s,r),t).call(n)}),e.defn(_,"$unstub",function(e){var t,n,r,o=this;return(t=(n=o).$perform_proxying,t.$$p=(r=function(t){r.$$s||this;return null==t&&(t=a),t.$remove_stub_if_present(e)},r.$$s=o,r),t).call(n,"unstub",[e],a)}),e.defn(_,"$stub_chain",i=function(){var t,n,r,o=this,$=i.$$p,s=$||a,c=a,u=arguments.length-0;0>u&&(u=0);var l=new Array(u);for(c=0;u>c;c++)l[c]=arguments[c+0];return i.$$p=null,(t=(n=o).$perform_proxying,t.$$p=(r=function(t){var n,o;r.$$s||this;return null==t&&(t=a),(n=(o=d.get("Mocks").$$scope.get("StubChain")).$stub_chain_on,n.$$p=s.$to_proc(),n).apply(o,[t.$object()].concat(e.to_a(l)))},r.$$s=o,r),t).call(n,"stub_chain",l,s)}),e.defn(_,"$expect_chain",s=function(){var t,n,r,o=this,$=s.$$p,i=$||a,c=a,u=arguments.length-0;0>u&&(u=0);var l=new Array(u);for(c=0;u>c;c++)l[c]=arguments[c+0];return s.$$p=null,(t=(n=o).$perform_proxying,t.$$p=(r=function(t){var n,o;r.$$s||this;return null==t&&(t=a),(n=(o=d.get("Mocks").$$scope.get("ExpectChain")).$expect_chain_on,n.$$p=i.$to_proc(),n).apply(o,[t.$object()].concat(e.to_a(l)))},r.$$s=o,r),t).call(n,"expect_chain",l,i)}),e.defn(_,"$should_receive",c=function(e){var t,n,r,o=this,$=c.$$p,i=$||a;return c.$$p=null,(t=(n=o).$perform_proxying,t.$$p=(r=function(t){var n,o;r.$$s||this;return null==t&&(t=a),(n=(o=t).$add_stub,n.$$p=i.$to_proc(),n).call(o,e)},r.$$s=o,r),t).call(n,"should_receive",[e],i)}),e.defn(_,"$should_not_receive",u=function(e){var t,n,r,o=this,$=u.$$p,i=$||a;return u.$$p=null,(t=(n=o).$perform_proxying,t.$$p=(r=function(t){var n,o;r.$$s||this;return null==t&&(t=a),(n=(o=t).$add_message_expectation,n.$$p=i.$to_proc(),n).call(o,e).$never()},r.$$s=o,r),t).call(n,"should_not_receive",[e],i)}),_.$private(),e.defn(_,"$perform_proxying",l=function(n,r,o){var $,i,s,c=this,u=l.$$p,_=u||a,p=a,f=a;return l.$$p=null,p=($=(i=c.recorder).$__send__,$.$$p=o.$to_proc(),$).apply(i,[n].concat(e.to_a(r))),f=($=(s=c.target_proxies).$map,$.$$p=_.$to_proc(),$).call(s),d.get("FluentInterfaceProxy").$new(t([p],f))}),a&&"perform_proxying"}(c.base,null),function(t,$super){function r(){}var o,i,s,c=r=$(t,$super,"FluentInterfaceProxy",r),u=c.$$proto,l=c.$$scope;return u.targets=a,e.defn(c,"$initialize",function(e){var t=this;return t.targets=e}),n(l.get("RUBY_VERSION").$to_f(),1.8)?e.defn(c,"$respond_to_missing?",o=function(t,n){var r,$=this,i=o.$$p,s=a,c=a;for(null==n&&(n=!1),o.$$p=null,s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];return(r=e.find_super_dispatcher($,"respond_to_missing?",o,i).apply($,s))!==!1&&r!==a?r:$.targets.$first()["$respond_to?"](t,n)}):e.defn(c,"$respond_to?",i=function(t,n){var r,o=this,$=i.$$p,s=a,c=a;for(null==n&&(n=!1),i.$$p=null,s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];return(r=e.find_super_dispatcher(o,"respond_to?",i,$).apply(o,s))!==!1&&r!==a?r:o.targets.$first()["$respond_to?"](t,n)}),e.defn(c,"$method_missing",s=function(){var t,n,r,o=this,$=s.$$p,i=$||a,c=a,u=a,_=arguments.length-0;0>_&&(_=0);var p=new Array(_);for(u=0;_>u;u++)p[u]=arguments[u+0];return s.$$p=null,c=(t=(n=o.targets).$map,t.$$p=(r=function(t){var n,o;r.$$s||this;return null==t&&(t=a),(n=(o=t).$__send__,n.$$p=i.$to_proc(),n).apply(o,e.to_a(p))},r.$$s=o,r),t).call(n),l.get("FluentInterfaceProxy").$new(c)}),a&&"method_missing"}(c.base,null)}(c.base)}(c.base)}(r.base)},Opal.modules["rspec/mocks/any_instance/recorder"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=e.breaker,a=e.slice,o=e.module,$=e.klass,i=e.hash2;return e.add_stubs(["$attr_reader","$new","$[]=","$observe!","$add","$message_chains","$to_proc","$normalize_chain","$never","$should_receive","$include?","$to_sym","$raise","$remove_stub_chains_for!","$clear","$[]","$stubs","$has_expectation?","$stop_observing!","$all_expectations_fulfilled?","$join","$sort","$unfulfilled_expectations","$each","$restore_method!","$ensure_registered","$space","$playback!","$received_expected_message!","$super_class_observing?","$each_unfulfilled_expectation_matching","$expectation_fulfilled!","$mark_invoked!","$protected","$delete","$any_instance_recorder_for","$super_class_observers_for","$private","$lambda","$==","$already_observing?","$select","$ancestor_is_an_observer?","$ancestors","$any?","$unshift","$reverse","$map","$split","$to_s","$shift","$first","$public_protected_or_private_method_defined?","$build_alias_method_name","$restore_original_method!","$remove_dummy_method!","$owner","$instance_method","$class_exec","$remove_method","$alias_method","$method_defined_at_any_visibility?","$allow_no_prepended_module_definition_of","$verify_partial_doubles?","$configuration","$<<","$backup_method!","$__send__","$instance_that_received","$class","$object_id","$instance_variable_get","$instance_variables","$module_prepends_supported?","$prepended_modules_of","$find","$method_defined?"]),function(t){var s,c=s=o(t,"RSpec"),u=(c.$$proto,c.$$scope);!function(t){var s,c=s=o(t,"Mocks"),u=(c.$$proto,c.$$scope);!function(t){var s,c=s=o(t,"AnyInstance"),u=(c.$$proto,c.$$scope);!function(t,$super){function o(){}var s,c,u,l,_,p,d,f=o=$(t,$super,"Recorder",o),g=f.$$proto,h=f.$$scope;return g.observed_methods=g.expectation_set=g.played_methods=g.klass=n,f.$attr_reader("message_chains","stubs","klass"),e.defn(f,"$initialize",function(e){var t,r,a,o=this;return o.message_chains=h.get("MessageChains").$new(),o.stubs=(t=(r=h.get("Hash")).$new,t.$$p=(a=function(e,t){a.$$s||this;return null==e&&(e=n),null==t&&(t=n),e["$[]="](t,[])},a.$$s=o,a),t).call(r),o.observed_methods=[],o.played_methods=i([],{}),o.klass=e,o.expectation_set=!1}),e.defn(f,"$stub",s=function(e){var t,r,a=this,o=s.$$p,$=o||n;return s.$$p=null,a["$observe!"](e),a.$message_chains().$add(e,(t=(r=h.get("StubChain")).$new,t.$$p=$.$to_proc(),t).call(r,a,e))}),e.defn(f,"$stub_chain",c=function(){var t,r,a,o=this,$=c.$$p,i=$||n,s=n,u=arguments.length-0;0>u&&(u=0);var l=new Array(u);for(s=0;u>s;s++)l[s]=arguments[s+0];return c.$$p=null,(t=(r=o).$normalize_chain,t.$$p=(a=function(t,r){var o,$,s=a.$$s||this;return null==t&&(t=n),null==r&&(r=n),s["$observe!"](t),s.$message_chains().$add(t,(o=($=h.get("StubChainChain")).$new,o.$$p=i.$to_proc(),o).apply($,[s].concat(e.to_a(r))))},a.$$s=o,a),t).apply(r,e.to_a(l))}),e.defn(f,"$expect_chain",u=function(){var t,r,a,o=this,$=u.$$p,i=$||n,s=n,c=arguments.length-0;0>c&&(c=0);var l=new Array(c);for(s=0;c>s;s++)l[s]=arguments[s+0];return u.$$p=null,o.expectation_set=!0,(t=(r=o).$normalize_chain,t.$$p=(a=function(t,r){var o,$,s=a.$$s||this;return null==t&&(t=n),null==r&&(r=n),s["$observe!"](t),s.$message_chains().$add(t,(o=($=h.get("ExpectChainChain")).$new,o.$$p=i.$to_proc(),o).apply($,[s].concat(e.to_a(r))))},a.$$s=o,a),t).apply(r,e.to_a(l))}),e.defn(f,"$should_receive",l=function(e){var t,r,a=this,o=l.$$p,$=o||n;return l.$$p=null,a.expectation_set=!0,a["$observe!"](e),a.$message_chains().$add(e,(t=(r=h.get("PositiveExpectationChain")).$new,t.$$p=$.$to_proc(),t).call(r,a,e))}),e.defn(f,"$should_not_receive",_=function(e){var t,r,a=this,o=_.$$p,$=o||n;return _.$$p=null,(t=(r=a).$should_receive,t.$$p=$.$to_proc(),t).call(r,e).$never()}),e.defn(f,"$unstub",function(e){var t,r=this;return((t=r.observed_methods["$include?"](e.$to_sym()))===n||t.$$is_boolean&&1!=t)&&r.$raise(h.get("RSpec").$$scope.get("Mocks").$$scope.get("MockExpectationError"),"The method `"+e+"` was not stubbed or was already unstubbed"),r.$message_chains()["$remove_stub_chains_for!"](e),r.$stubs()["$[]"](e).$clear(),(t=r.$message_chains()["$has_expectation?"](e))===n||t.$$is_boolean&&1!=t?r["$stop_observing!"](e):n}),e.defn(f,"$verify",function(){var e,t=this;return(e=t.expectation_set)===n||e.$$is_boolean&&1!=e?n:(e=t.$message_chains()["$all_expectations_fulfilled?"]())===n||e.$$is_boolean&&1!=e?t.$raise(h.get("RSpec").$$scope.get("Mocks").$$scope.get("MockExpectationError"),"Exactly one instance should have received the following message(s) but didn't: "+t.$message_chains().$unfulfilled_expectations().$sort().$join(", ")):n}),e.defn(f,"$stop_all_observation!",function(){var e,t,r,a=this;return(e=(t=a.observed_methods).$each,e.$$p=(r=function(e){var t=r.$$s||this;return null==e&&(e=n),t["$restore_method!"](e)},r.$$s=a,r),e).call(t)}),e.defn(f,"$playback!",function(e,t){var r,a=this;return h.get("RSpec").$$scope.get("Mocks").$space().$ensure_registered(e),a.$message_chains()["$playback!"](e,t),a.played_methods["$[]="](t,e),(r=a.$message_chains()["$has_expectation?"](t))===n||r.$$is_boolean&&1!=r?n:a["$received_expected_message!"](t)}),e.defn(f,"$instance_that_received",function(e){var t=this;return t.played_methods["$[]"](e)}),e.defn(f,"$build_alias_method_name",function(e){return"__"+e+"_without_any_instance__"}),e.defn(f,"$already_observing?",function(e){var t,r=this;return(t=r.observed_methods["$include?"](e))!==!1&&t!==n?t:r["$super_class_observing?"](e)}),e.defn(f,"$notify_received_message",function(t,r,a,o){var $,i,s,c=this,u=n;return u=!1,($=(i=c.$message_chains()).$each_unfulfilled_expectation_matching,$.$$p=(s=function(e){s.$$s||this;return null==e&&(e=n),u=!0,e["$expectation_fulfilled!"]()},s.$$s=c,s),$).apply(i,[r].concat(e.to_a(a))),u===!1||u===n?n:(c["$restore_method!"](r),c["$mark_invoked!"](r))}),f.$protected(),e.defn(f,"$stop_observing!",function(t){var r,a,o,$=this;return $["$restore_method!"](t),$.observed_methods.$delete(t),(r=(a=$.$super_class_observers_for(t)).$each,r.$$p=(o=function(r){o.$$s||this;return null==r&&(r=n),e.get("RSpec").$$scope.get("Mocks").$space().$any_instance_recorder_for(r)["$stop_observing!"](t)},o.$$s=$,o),r).call(a)}),f.$private(),e.defn(f,"$ancestor_is_an_observer?",function(t){var r,a,o,$=this;return(r=(a=$).$lambda,r.$$p=(o=function(r){var a=o.$$s||this;return null==a.klass&&(a.klass=n),null==r&&(r=n),r["$=="](a.klass)?n:e.get("RSpec").$$scope.get("Mocks").$space().$any_instance_recorder_for(r)["$already_observing?"](t)},o.$$s=$,o),r).call(a)}),e.defn(f,"$super_class_observers_for",function(e){var t,n,r=this;return(t=(n=r.klass.$ancestors()).$select,t.$$p=r["$ancestor_is_an_observer?"](e).$to_proc(),t).call(n)}),e.defn(f,"$super_class_observing?",function(e){var t,n,r=this;return(t=(n=r.klass.$ancestors())["$any?"],t.$$p=r["$ancestor_is_an_observer?"](e).$to_proc(),t).call(n)}),e.defn(f,"$normalize_chain",p=function(){var t,a,o,$,i,s,c=this,u=p.$$p,l=u||n,_=n,d=arguments.length-0;0>d&&(d=0);var f=new Array(d);for(_=0;d>_;_++)f[_]=arguments[_+0];return p.$$p=null,(t=(a=($=(i=f.$shift().$to_s().$split(".")).$map,$.$$p=(s=function(e){s.$$s||this;return null==e&&(e=n),e.$to_sym()},s.$$s=c,s),$).call(i).$reverse()).$each,t.$$p=(o=function(e){o.$$s||this;return null==e&&(e=n),f.$unshift(e)},o.$$s=c,o),t).call(a),t=e.yieldX(l,[f.$first(),f]),t===r?t:t}),e.defn(f,"$received_expected_message!",function(e){var t=this;return t.$message_chains()["$received_expected_message!"](e),t["$restore_method!"](e),t["$mark_invoked!"](e)}),e.defn(f,"$restore_method!",function(e){var t,r=this;return(t=r["$public_protected_or_private_method_defined?"](r.$build_alias_method_name(e)))===n||t.$$is_boolean&&1!=t?r["$remove_dummy_method!"](e):r["$restore_original_method!"](e)}),e.defn(f,"$restore_original_method!",function(e){var t,r,a,o=this,$=n;return o.klass.$instance_method(e).$owner()["$=="](o.klass)?($=o.$build_alias_method_name(e),(t=(r=o.klass).$class_exec,t.$$p=(a=function(){var t=a.$$s||this;return t.$remove_method(e),t.$alias_method(e,$),t.$remove_method($)},a.$$s=o,a),t).call(r)):n}),e.defn(f,"$remove_dummy_method!",function(e){var t,n,r,a=this;return(t=(n=a.klass).$class_exec,t.$$p=(r=function(){var t=r.$$s||this;return t.$remove_method(e)},r.$$s=a,r),t).call(n)}),e.defn(f,"$backup_method!",function(e){var t,r,a,o=this,$=n;return $=o.$build_alias_method_name(e),(t=o["$public_protected_or_private_method_defined?"](e))===n||t.$$is_boolean&&1!=t?n:(t=(r=o.klass).$class_exec,t.$$p=(a=function(){var t=a.$$s||this;return t.$alias_method($,e)},a.$$s=o,a),t).call(r)}),e.defn(f,"$public_protected_or_private_method_defined?",function(e){var t=this;return h.get("MethodReference")["$method_defined_at_any_visibility?"](t.klass,e)}),e.defn(f,"$observe!",function(t){var r,o,$,i=this,s=n;return i.$allow_no_prepended_module_definition_of(t),(r=h.get("RSpec").$$scope.get("Mocks").$configuration()["$verify_partial_doubles?"]())===n||r.$$is_boolean&&1!=r||((r=i["$public_protected_or_private_method_defined?"](t))===n||r.$$is_boolean&&1!=r)&&i.$raise(h.get("MockExpectationError"),""+i.klass+" does not implement #"+t),(r=i["$already_observing?"](t))===n||r.$$is_boolean&&1!=r||i["$stop_observing!"](t),i.observed_methods["$<<"](t),i["$backup_method!"](t),s=i,(r=(o=i.klass).$__send__,r.$$p=($=function(r){var o,i,c,u=$.$$s||this;return r=a.call(arguments,0),o=$.$$p||n,$.$$p=null,s["$playback!"](u,t),(i=(c=u).$__send__,i.$$p=o.$to_proc(),i).apply(c,[t].concat(e.to_a(r)))},$.$$s=i,$),r).call(o,"define_method",t)}),e.defn(f,"$mark_invoked!",function(e){var t,r,o,$=this,i=n;return $["$backup_method!"](e),i=$,(t=(r=$.klass).$__send__,t.$$p=(o=function(t){var r,$,s,c,u=o.$$s||this,l=n,_=n;return t=a.call(arguments,0),r=o.$$p||n,o.$$p=null,l=i.$instance_that_received(e),_="#<"+u.$class()+":"+u.$object_id()+" "+($=(s=u.$instance_variables()).$map,$.$$p=(c=function(e){var t=c.$$s||this;return null==e&&(e=n),""+e+"="+t.$instance_variable_get(e)},c.$$s=u,c),$).call(s).$join(", ")+">",u.$raise(h.get("RSpec").$$scope.get("Mocks").$$scope.get("MockExpectationError"),"The message '"+e+"' was received by "+_+" but has already been received by "+l)},o.$$s=$,o),t).call(r,"define_method",e)}),(d=h.get("Support").$$scope.get("RubyFeatures")["$module_prepends_supported?"]())===n||d.$$is_boolean&&1!=d?(e.defn(f,"$allow_no_prepended_module_definition_of",function(e){return n}),n&&"allow_no_prepended_module_definition_of"):(e.defn(f,"$allow_no_prepended_module_definition_of",function(e){var t,r,a,o=this,$=n,i=n;return $=h.get("RSpec").$$scope.get("Mocks").$$scope.get("Proxy").$prepended_modules_of(o.klass),i=(t=(r=$).$find,t.$$p=(a=function(t){a.$$s||this;return null==t&&(t=n),t["$method_defined?"](e)},a.$$s=o,a),t).call(r),i===!1||i===n?n:o.$raise(h.get("RSpec").$$scope.get("Mocks").$$scope.get("MockExpectationError"),"Using `any_instance` to stub a method ("+e+") that has been "+("defined on a prepended module ("+i+") is not supported."))}),n&&"allow_no_prepended_module_definition_of")}(u.base,null)}(u.base)}(u.base)}(t.base)},Opal.modules["rspec/mocks/any_instance/stub_chain"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,o=e.hash2;return e.add_stubs(["$private","$proxy_for","$space","$merge","$add_stub","$to_proc","$<<","$[]","$stubs","$message","$yield_receiver_to_any_instance_implementation_blocks?","$configuration","$and_yield_receiver_to_implementation","$include?","$invocation_order","$last_message","$raise"]),function(t){var $,i=$=r(t,"RSpec"),s=(i.$$proto,i.$$scope);!function(t){var $,i=$=r(t,"Mocks"),s=(i.$$proto,i.$$scope);!function(t){var $,i=$=r(t,"AnyInstance"),s=(i.$$proto,i.$$scope);!function(t,$super){function r(){}var $,i=r=a(t,$super,"StubChain",r),s=i.$$proto,c=i.$$scope;return s.expectation_args=s.expectation_block=s.recorder=s.invocation_order=n,e.defn(i,"$expectation_fulfilled?",function(){return!0}),i.$private(),e.defn(i,"$create_message_expectation_on",function(t){var r,a,$=this,i=n,s=n,u=n,l=n;return i=e.get("RSpec").$$scope.get("Mocks").$space().$proxy_for(t),a=$.expectation_args,r=e.to_ary(a),s=null==r[0]?n:r[0],u=null==r[1]?n:r[1],a,u=((r=u)!==!1&&r!==n?r:o([],{})).$merge(o(["expected_form"],{expected_form:c.get("IGNORED_BACKTRACE_LINE")})),l=(r=(a=i).$add_stub,r.$$p=$.expectation_block.$to_proc(),r).call(a,s,u),$.recorder.$stubs()["$[]"](l.$message())["$<<"](l),(r=c.get("RSpec").$$scope.get("Mocks").$configuration()["$yield_receiver_to_any_instance_implementation_blocks?"]())===n||r.$$is_boolean&&1!=r||l.$and_yield_receiver_to_implementation(),l}),e.defn(i,"$invocation_order",function(){var e,t=this;return(e=t.invocation_order)!==!1&&e!==n?e:t.invocation_order=o(["with","and_return","and_raise","and_yield","and_call_original"],{"with":[n],and_return:["with",n],and_raise:["with",n],and_yield:["with",n],and_call_original:["with",n]})}),e.defn(i,"$verify_invocation_order",$=function(e){var t,r=this,a=($.$$p,n),o=arguments.length-1;0>o&&(o=0);var i=new Array(o);for(a=0;o>a;a++)i[a]=arguments[a+1];return $.$$p=null,(t=r.$invocation_order()["$[]"](e)["$include?"](r.$last_message()))===n||t.$$is_boolean&&1!=t?r.$raise(c.get("NoMethodError"),"Undefined method "+e):n}),n&&"verify_invocation_order"}(s.base,s.get("Chain"))}(s.base)}(s.base)}(t.base)},Opal.modules["rspec/mocks/any_instance/stub_chain_chain"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,o=e.hash2;return e.add_stubs(["$private","$stub_chain_on","$to_proc"]),function(t){var $,i=$=r(t,"RSpec"),s=(i.$$proto,i.$$scope);!function(t){var $,i=$=r(t,"Mocks"),s=(i.$$proto,i.$$scope);!function(t){var $,i=$=r(t,"AnyInstance"),s=(i.$$proto,i.$$scope);!function(t,$super){function r(){}var $,i=r=a(t,$super,"StubChainChain",r),s=i.$$proto;i.$$scope;return s.expectation_block=s.expectation_args=s.invocation_order=n,e.defn(i,"$initialize",$=function(){var t=this,r=$.$$p,a=n,o=n,i=n,s=arguments.length-0;0>s&&(s=0);var c=new Array(s);for(a=0;s>a;a++)c[a]=arguments[a+0];for($.$$p=null,o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return e.find_super_dispatcher(t,"initialize",$,r).apply(t,o),t.expectation_fulfilled=!1}),i.$private(),e.defn(i,"$create_message_expectation_on",function(t){var n,r,a=this;return(n=(r=e.get("RSpec").$$scope.get("Mocks").$$scope.get("StubChain")).$stub_chain_on,n.$$p=a.expectation_block.$to_proc(),n).apply(r,[t].concat(e.to_a(a.expectation_args)))}),e.defn(i,"$invocation_order",function(){var e,t=this;return(e=t.invocation_order)!==!1&&e!==n?e:t.invocation_order=o(["and_return","and_raise","and_yield"],{and_return:[n],and_raise:[n],and_yield:[n]})}),n&&"invocation_order"}(s.base,s.get("StubChain"))}(s.base)}(s.base)}(t.base)},Opal.modules["rspec/support/matcher_definition"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module);return e.add_stubs(["$<<","$matcher_definitions","$delete","$any?","$call"]),function(t){var a,o=a=r(t,"RSpec"),$=(o.$$proto,o.$$scope);!function(t){var a,o,$,i=a=r(t,"Support");i.$$proto,i.$$scope;e.defs(i,"$matcher_definitions",function(){var e,t=this;return null==t.matcher_definitions&&(t.matcher_definitions=n),(e=t.matcher_definitions)!==!1&&e!==n?e:t.matcher_definitions=[]}),e.defs(i,"$register_matcher_definition",o=function(){var e=this,t=o.$$p,r=t||n;return o.$$p=null,e.$matcher_definitions()["$<<"](r)}),e.defs(i,"$deregister_matcher_definition",$=function(){var e=this,t=$.$$p,r=t||n;return $.$$p=null,e.$matcher_definitions().$delete(r)}),e.defs(i,"$is_a_matcher?",function(e){var t,r,a,o=this;return(t=(r=o.$matcher_definitions())["$any?"],t.$$p=(a=function(t){a.$$s||this;return null==t&&(t=n),t.$call(e)},a.$$s=o,a),t).call(r)})}($.base)}(t.base)},Opal.modules["rspec/mocks/argument_matchers"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="ignore";var n=e.top,r=e,a=e.nil,o=(e.breaker,e.slice,e.module),$=e.hash2,i=e.klass;return e.add_stubs(["$require","$new","$anythingize_lonely_keys","$===","$first","$==","$count","$alias_method","$class","$last","$delete_at","$each","$[]=","$__send__","$key?","$values_match?","$[]","$sub","$inspect","$superset?","$join","$all?","$respond_to?","$map","$to_proc","$instance_of?","$name","$kind_of?","$+","$register_matcher_definition","$include?"]),n.$require("rspec/support/matcher_definition"),function(n){var r,s=r=o(n,"RSpec"),c=(s.$$proto,s.$$scope);!function(n){var r,s=r=o(n,"Mocks"),c=(s.$$proto,s.$$scope);!function(n){var r,s,c,u,l=r=o(n,"ArgumentMatchers"),_=(l.$$proto,l.$$scope),p=a;e.defn(l,"$any_args",function(){return _.get("AnyArgsMatcher").$new()}),e.defn(l,"$anything",function(){return _.get("AnyArgMatcher").$new()}),e.defn(l,"$no_args",function(){return _.get("NoArgsMatcher").$new()}),e.defn(l,"$duck_type",function(){var t,n=a,r=arguments.length-0;0>r&&(r=0);var o=new Array(r);for(n=0;r>n;n++)o[n]=arguments[n+0];return(t=_.get("DuckTypeMatcher")).$new.apply(t,e.to_a(o))}),e.defn(l,"$boolean",function(){return _.get("BooleanMatcher").$new()}),e.defn(l,"$hash_including",function(){var t,n=a,r=arguments.length-0;0>r&&(r=0);var o=new Array(r);for(n=0;r>n;n++)o[n]=arguments[n+0];return _.get("HashIncludingMatcher").$new((t=_.get("ArgumentMatchers")).$anythingize_lonely_keys.apply(t,e.to_a(o)))}),e.defn(l,"$array_including",function(){var e,t,n=a,r=a,o=arguments.length-0;0>o&&(o=0);var $=new Array(o);for(r=0;o>r;r++)$[r]=arguments[r+0];return n=function(){return t=_.get("Array")["$==="]($.$first()),(e=t!==!1&&t!==a?$.$count()["$=="](1):t)===a||e.$$is_boolean&&1!=e?$:$.$first()}(),_.get("ArrayIncludingMatcher").$new(n)}),e.defn(l,"$hash_excluding",function(){var t,n=a,r=arguments.length-0;0>r&&(r=0);var o=new Array(r);for(n=0;r>n;n++)o[n]=arguments[n+0];return _.get("HashExcludingMatcher").$new((t=_.get("ArgumentMatchers")).$anythingize_lonely_keys.apply(t,e.to_a(o)))}),l.$alias_method("hash_not_including","hash_excluding"),e.defn(l,"$instance_of",function(e){return _.get("InstanceOf").$new(e)}),l.$alias_method("an_instance_of","instance_of"),e.defn(l,"$kind_of",function(e){return _.get("KindOf").$new(e)}),l.$alias_method("a_kind_of","kind_of"),e.defs(l,"$anythingize_lonely_keys",function(){var e,t,n,r=this,o=a,i=a,s=arguments.length-0;0>s&&(s=0);var c=new Array(s);for(i=0;s>i;i++)c[i]=arguments[i+0];return o=function(){return c.$last().$class()["$=="](_.get("Hash"))?c.$delete_at(-1):$([],{})}(),(e=(t=c).$each,e.$$p=(n=function(e){n.$$s||this;return null==e&&(e=a),o["$[]="](e,_.get("AnyArgMatcher").$new())},n.$$s=r,n),e).call(t),o}),function(t,$super){function n(){}var r=n=i(t,$super,"AnyArgsMatcher",n);r.$$proto,r.$$scope;return e.defn(r,"$description",function(){return"any args"}),a&&"description"}(_.base,null),function(t,$super){function n(){}var r=n=i(t,$super,"AnyArgMatcher",n);r.$$proto,r.$$scope;return e.defn(r,"$===",function(e){return!0}),e.defn(r,"$description",function(){return"anything"}),a&&"description"}(_.base,null),function(t,$super){function n(){}var r=n=i(t,$super,"NoArgsMatcher",n);r.$$proto,r.$$scope;return e.defn(r,"$description",function(){return"no args"}),a&&"description"}(_.base,null),function(t,$super){function n(){}var r=n=i(t,$super,"BooleanMatcher",n);r.$$proto,r.$$scope;return e.defn(r,"$===",function(e){var t;return(t=(!0)["$=="](e))!==!1&&t!==a?t:(!1)["$=="](e)}),e.defn(r,"$description",function(){return"boolean"}),a&&"description"}(_.base,null),function(t,$super){function n(){}var r=n=i(t,$super,"BaseHashMatcher",n),o=r.$$proto,$=r.$$scope;return o.expected=a,e.defn(r,"$initialize",function(e){var t=this;return t.expected=e}),e.defn(r,"$===",function(t,n){var r,o,i,s=this;try{return(r=(o=s.expected).$__send__,r.$$p=(i=function(e,t){var r;i.$$s||this;return null==e&&(e=a),null==t&&(t=a),r=n["$key?"](e),
r!==!1&&r!==a?$.get("Support").$$scope.get("FuzzyMatcher")["$values_match?"](t,n["$[]"](e)):r},i.$$s=s,i),r).call(o,t)}catch(c){if(!e.rescue(c,[$.get("NoMethodError")]))throw c;try{return!1}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}),e.defn(r,"$description",function(e){var t=this;return""+e+"("+t.expected.$inspect().$sub(/^\{/,"").$sub(/\}$/,"")+")"}),a&&"description"}(_.base,null),function(t,$super){function n(){}var r,o,$=n=i(t,$super,"HashIncludingMatcher",n);$.$$proto,$.$$scope;return e.defn($,"$===",r=function(t){var n=this;r.$$p;return r.$$p=null,e.find_super_dispatcher(n,"===",r,null).apply(n,["all?",t])}),e.defn($,"$description",o=function(){var t=this;o.$$p;return o.$$p=null,e.find_super_dispatcher(t,"description",o,null).apply(t,["hash_including"])}),a&&"description"}(_.base,_.get("BaseHashMatcher")),function(t,$super){function n(){}var r,o,$=n=i(t,$super,"HashExcludingMatcher",n);$.$$proto,$.$$scope;return e.defn($,"$===",r=function(t){var n=this;r.$$p;return r.$$p=null,e.find_super_dispatcher(n,"===",r,null).apply(n,["none?",t])}),e.defn($,"$description",o=function(){var t=this;o.$$p;return o.$$p=null,e.find_super_dispatcher(t,"description",o,null).apply(t,["hash_not_including"])}),a&&"description"}(_.base,_.get("BaseHashMatcher")),function(t,$super){function n(){}var r=n=i(t,$super,"ArrayIncludingMatcher",n),o=r.$$proto,$=r.$$scope;return o.expected=a,e.defn(r,"$initialize",function(e){var t=this;return t.expected=e}),e.defn(r,"$===",function(e){var t=this;return $.get("Set").$new(e)["$superset?"]($.get("Set").$new(t.expected))}),e.defn(r,"$description",function(){var e=this;return"array_including("+e.expected.$join(", ")+")"}),a&&"description"}(_.base,null),function(t,$super){function n(){}var r=n=i(t,$super,"DuckTypeMatcher",n),o=r.$$proto;r.$$scope;return o.methods_to_respond_to=a,e.defn(r,"$initialize",function(){var e=this,t=a,n=arguments.length-0;0>n&&(n=0);var r=new Array(n);for(t=0;n>t;t++)r[t]=arguments[t+0];return e.methods_to_respond_to=r}),e.defn(r,"$===",function(e){var t,n,r,o=this;return(t=(n=o.methods_to_respond_to)["$all?"],t.$$p=(r=function(t){r.$$s||this;return null==t&&(t=a),e["$respond_to?"](t)},r.$$s=o,r),t).call(n)}),e.defn(r,"$description",function(){var e,t,n=this;return"duck_type("+(e=(t=n.methods_to_respond_to).$map,e.$$p="inspect".$to_proc(),e).call(t).$join(", ")+")"}),a&&"description"}(_.base,null),function(t,$super){function n(){}var r=n=i(t,$super,"InstanceOf",n),o=r.$$proto;r.$$scope;return o.klass=a,e.defn(r,"$initialize",function(e){var t=this;return t.klass=e}),e.defn(r,"$===",function(e){var t=this;return e["$instance_of?"](t.klass)}),e.defn(r,"$description",function(){var e=this;return"an_instance_of("+e.klass.$name()+")"}),a&&"description"}(_.base,null),function(t,$super){function n(){}var r=n=i(t,$super,"KindOf",n),o=r.$$proto;r.$$scope;return o.klass=a,e.defn(r,"$initialize",function(e){var t=this;return t.klass=e}),e.defn(r,"$===",function(e){var t=this;return e["$kind_of?"](t.klass)}),e.defn(r,"$description",function(){var e=this;return"kind of "+e.klass.$name()}),a&&"description"}(_.base,null),p=t(l.$name(),"::"),(s=(c=e.get("RSpec").$$scope.get("Support")).$register_matcher_definition,s.$$p=(u=function(t){u.$$s||this;null==t&&(t=a);try{return t.$class().$name()["$include?"](p)}catch(n){if(!e.rescue(n,[_.get("NoMethodError")]))throw n;try{return!1}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}},u.$$s=l,u),s).call(c)}(c.base)}(c.base)}(r.base)},Opal.modules["rspec/support/fuzzy_matcher"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module);return e.add_stubs(["$===","$!","$arrays_match?","$to_a","$hashes_match?","$==","$!=","$size","$all?","$values_match?","$zip","$fetch","$private_class_method"]),function(t){var a,o=a=r(t,"RSpec"),$=(o.$$proto,o.$$scope);!function(t){var a,o=a=r(t,"Support"),$=(o.$$proto,o.$$scope);!function(t){var a,o=a=r(t,"FuzzyMatcher"),$=(o.$$proto,o.$$scope);e.defs(o,"$values_match?",function(t,r){var a,o,i,s=this;if(i=$.get("Array")["$==="](t),o=i!==!1&&i!==n?$.get("Enumerable")["$==="](r):i,!((a=o!==!1&&o!==n?$.get("Struct")["$==="](r)["$!"]():o)===n||a.$$is_boolean&&1!=a))return s["$arrays_match?"](t,r.$to_a());if(o=$.get("Hash")["$==="](t),!((a=o!==!1&&o!==n?$.get("Hash")["$==="](r):o)===n||a.$$is_boolean&&1!=a))return s["$hashes_match?"](t,r);if(r["$=="](t))return!0;try{return t["$==="](r)}catch(c){if(!e.rescue(c,[$.get("ArgumentError")]))throw c;try{return!1}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}),e.defs(o,"$arrays_match?",function(e,t){var r,a,o,$=this;return(r=e.$size()["$!="](t.$size()))===n||r.$$is_boolean&&1!=r?(r=(a=e.$zip(t))["$all?"],r.$$p=(o=function(e,t){var r=o.$$s||this;return null==e&&(e=n),null==t&&(t=n),r["$values_match?"](e,t)},o.$$s=$,o),r).call(a):!1}),e.defs(o,"$hashes_match?",function(t,r){try{var a,o,$,i=this;return(a=t.$size()["$!="](r.$size()))===n||a.$$is_boolean&&1!=a?(a=(o=t)["$all?"],a.$$p=($=function(t,a){var o,i,s,c=$.$$s||this,u=n;return null==t&&(t=n),null==a&&(a=n),u=(o=(i=r).$fetch,o.$$p=(s=function(){s.$$s||this;e.ret(!1)},s.$$s=c,s),o).call(i,t),c["$values_match?"](a,u)},$.$$s=i,$),a).call(o):!1}catch(s){if(s===e.returner)return s.$v;throw s}}),o.$private_class_method("arrays_match?","hashes_match?")}($.base)}($.base)}(t.base)},Opal.modules["rspec/mocks/argument_list_matcher"]=function(e){e.dynamic_require_severity="ignore";var t=e.top,n=e,r=e.nil,a=(e.breaker,e.slice,e.module),o=e.klass;return e.add_stubs(["$require","$attr_reader","$first","$===","$values_match?","$new"]),t.$require("rspec/mocks/argument_matchers"),t.$require("rspec/support/fuzzy_matcher"),function(t){var n,$=n=a(t,"RSpec"),i=($.$$proto,$.$$scope);!function(t){var n,$=n=a(t,"Mocks"),i=($.$$proto,$.$$scope);!function(t,$super){function n(){}var a=n=o(t,$super,"ArgumentListMatcher",n),$=a.$$proto,i=a.$$scope;return $.matchers=r,a.$attr_reader("expected_args"),e.defn(a,"$initialize",function(){var e=this,t=r,n=r,a=arguments.length-0;0>a&&(a=0);var o=new Array(a);for(n=0;a>n;n++)o[n]=arguments[n+0];return e.expected_args=o,e.matchers=function(){return t=o.$first(),i.get("ArgumentMatchers").$$scope.get("AnyArgsMatcher")["$==="](t)?i.get("Array"):i.get("ArgumentMatchers").$$scope.get("NoArgsMatcher")["$==="](t)?[]:o}()}),e.defn(a,"$args_match?",function(){var e=this,t=r,n=arguments.length-0;0>n&&(n=0);var a=new Array(n);for(t=0;n>t;t++)a[t]=arguments[t+0];return i.get("Support").$$scope.get("FuzzyMatcher")["$values_match?"](e.matchers,a)}),e.cdecl(i,"MATCH_ALL",a.$new(i.get("ArgumentMatchers").$$scope.get("AnyArgsMatcher").$new()))}(i.base,null)}(i.base)}(n.base)},Opal.modules["rspec/mocks/configuration"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass;return e.add_stubs(["$attr_writer","$each","$enable_should","$flatten","$include?","$enable_expect","$disable_expect","$disable_should","$should_enabled?","$<<","$expect_enabled?","$!","$patch!","$unpatch!","$syntax=","$warn_about_should!","$new","$reset_syntaxes_to_default","$configuration"]),function(t){var o,$=o=r(t,"RSpec"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"Mocks"),i=($.$$proto,$.$$scope);!function(t,$super){function r(){}var o=r=a(t,$super,"Configuration",r),$=o.$$proto,i=o.$$scope;return $.yield_receiver_to_any_instance_implementation_blocks=$.verify_doubled_constant_names=$.transfer_nested_constants=$.verify_partial_doubles=n,e.defn(o,"$initialize",function(){var e=this;return e.yield_receiver_to_any_instance_implementation_blocks=!0,e.verify_doubled_constant_names=!1,e.transfer_nested_constants=!1,e.verify_partial_doubles=!1}),e.defn(o,"$yield_receiver_to_any_instance_implementation_blocks?",function(){var e=this;return e.yield_receiver_to_any_instance_implementation_blocks}),o.$attr_writer("yield_receiver_to_any_instance_implementation_blocks"),e.defn(o,"$add_stub_and_should_receive_to",function(){var e,t,r,a=this,o=n,$=arguments.length-0;0>$&&($=0);var s=new Array($);for(o=0;$>o;o++)s[o]=arguments[o+0];return(e=(t=s).$each,e.$$p=(r=function(e){r.$$s||this;return null==e&&(e=n),i.get("Syntax").$enable_should(e)},r.$$s=a,r),e).call(t)}),e.defn(o,"$syntax=",function(){var e,t=n,r=n,a=arguments.length-0;0>a&&(a=0);var o=new Array(a);for(r=0;a>r;r++)o[r]=arguments[r+0];return t=o.$flatten(),(e=t["$include?"]("expect"))===n||e.$$is_boolean&&1!=e?i.get("Syntax").$disable_expect():i.get("Syntax").$enable_expect(),(e=t["$include?"]("should"))===n||e.$$is_boolean&&1!=e?i.get("Syntax").$disable_should():i.get("Syntax").$enable_should()}),e.defn(o,"$syntax",function(){var e,t=n;return t=[],(e=i.get("Syntax")["$should_enabled?"]())===n||e.$$is_boolean&&1!=e||t["$<<"]("should"),(e=i.get("Syntax")["$expect_enabled?"]())===n||e.$$is_boolean&&1!=e||t["$<<"]("expect"),t}),e.defn(o,"$verify_doubled_constant_names?",function(){var e=this;return e.verify_doubled_constant_names["$!"]()["$!"]()}),o.$attr_writer("verify_doubled_constant_names"),e.defn(o,"$transfer_nested_constants?",function(){var e=this;return e.transfer_nested_constants["$!"]()["$!"]()}),o.$attr_writer("transfer_nested_constants"),e.defn(o,"$verify_partial_doubles=",function(e){var t=this;return t.verify_partial_doubles=e["$!"]()["$!"]()}),e.defn(o,"$verify_partial_doubles?",function(){var e=this;return e.verify_partial_doubles}),e.defn(o,"$patch_marshal_to_support_partial_doubles=",function(e){return e!==!1&&e!==n?i.get("RSpec").$$scope.get("Mocks").$$scope.get("MarshalExtension")["$patch!"]():i.get("RSpec").$$scope.get("Mocks").$$scope.get("MarshalExtension")["$unpatch!"]()}),e.defn(o,"$reset_syntaxes_to_default",function(){var e,t,n=this;return e=[["should","expect"]],t=n,t["$syntax="].apply(t,e),e[e.length-1],i.get("RSpec").$$scope.get("Mocks").$$scope.get("Syntax")["$warn_about_should!"]()}),n&&"reset_syntaxes_to_default"}(i.base,null),e.defs($,"$configuration",function(){var e,t=this;return null==t.configuration&&(t.configuration=n),(e=t.configuration)!==!1&&e!==n?e:t.configuration=i.get("Configuration").$new()}),$.$configuration().$reset_syntaxes_to_default()}(i.base)}(t.base)},Opal.modules["rspec/mocks/error_generator"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}e.dynamic_require_severity="ignore";var a=(e.top,e),o=e.nil,$=(e.breaker,e.slice,e.module),i=e.klass,s=e.hash2;return e.add_stubs(["$new","$attr_writer","$__raise","$intro","$arg_message","$format_args","$expected_args","$format_received_args","$inspect","$message","$join","$map","$expected_part_of_expectation_error","$received_part_of_expectation_error","$%","$description","$raise","$error_message","$+","$count_message","$actual_method_call_args_description","$expected_method_call_args_description","$method_call_args_description","$>","$length","$gsub","$first","$===","$arg_list","$private","$nil?","$[]","$opts","$empty?","$arg_has_valid_description","$respond_to?","$!","$received_arg_list","$to_proc","$<","$==","$times","$abs"]),function(a){var c,u=c=$(a,"RSpec"),l=(u.$$proto,u.$$scope);!function(a){var c,u=c=$(a,"Mocks"),l=(u.$$proto,u.$$scope);e.cdecl(l,"MockExpectationError",l.get("Class").$new(l.get("Exception"))),e.cdecl(l,"ExpiredTestDoubleError",l.get("Class").$new(l.get("MockExpectationError"))),e.cdecl(l,"OutsideOfExampleError",l.get("Class").$new(l.get("StandardError"))),e.cdecl(l,"UnsupportedMatcherError",l.get("Class").$new(l.get("StandardError"))),e.cdecl(l,"NegationUnsupportedError",l.get("Class").$new(l.get("StandardError"))),e.cdecl(l,"VerifyingDoubleNotDefinedError",l.get("Class").$new(l.get("StandardError"))),function(a,$super){function $(){}var c=$=i(a,$super,"ErrorGenerator",$),u=c.$$proto,l=c.$$scope;return u.opts=u.name=u.target=o,c.$attr_writer("opts"),e.defn(c,"$initialize",function(e,t){var n=this;return n.target=e,n.name=t}),e.defn(c,"$opts",function(){var e,t=this;return(e=t.opts)!==!1&&e!==o?e:t.opts=s([],{})}),e.defn(c,"$raise_unexpected_message_error",function(t){var n,r=this,a=o,$=arguments.length-1;0>$&&($=0);var i=new Array($);for(a=0;$>a;a++)i[a]=arguments[a+1];return r.$__raise(""+r.$intro()+" received unexpected message :"+t+(n=r).$arg_message.apply(n,e.to_a(i)))}),e.defn(c,"$raise_unexpected_message_args_error",function(t){var n,r,a=this,$=o,i=o,s=o,c=arguments.length-1;0>c&&(c=0);var u=new Array(c);for(s=0;c>s;s++)u[s]=arguments[s+1];return $=(n=a).$format_args.apply(n,e.to_a(t.$expected_args())),i=(r=a).$format_received_args.apply(r,e.to_a(u)),a.$__raise(""+a.$intro()+" received "+t.$message().$inspect()+" with "+("unexpected arguments\n  expected: "+$+"\n")+("       got: "+i))}),e.defn(c,"$raise_missing_default_stub_error",function(t){var n,r,a=this,$=o,i=o,s=o,c=arguments.length-1;0>c&&(c=0);var u=new Array(c);for(s=0;c>s;s++)u[s]=arguments[s+1];return $=(n=a).$format_args.apply(n,e.to_a(t.$expected_args())),i=(r=a).$format_received_args.apply(r,e.to_a(u)),a.$__raise(""+a.$intro()+" received "+t.$message().$inspect()+" with "+("unexpected arguments\n  expected: "+$+"\n")+("       got: "+i+"\n Please stub a default value ")+"first if message might be received with other args as well. \n")}),e.defn(c,"$raise_similar_message_args_error",function(t){var n,r,a,$,i=this,s=o,c=o,u=o,l=arguments.length-1;0>l&&(l=0);var _=new Array(l);for(u=0;l>u;u++)_[u]=arguments[u+1];return s=(n=i).$format_args.apply(n,e.to_a(t.$expected_args())),c=(r=(a=_).$map,r.$$p=($=function(t){var n,r=$.$$s||this;return null==t&&(t=o),(n=r).$format_received_args.apply(n,e.to_a(t))},$.$$s=i,$),r).call(a).$join(", "),i.$__raise(""+i.$intro()+" received "+t.$message().$inspect()+" with "+("unexpected arguments\n  expected: "+s+"\n")+("       got: "+c))}),e.defn(c,"$raise_expectation_error",function(t,n,r,a,$){var i,s,c=this,u=o,l=o,_=o,p=arguments.length-5;0>p&&(p=0);var d=new Array(p);for(_=0;p>_;_++)d[_]=arguments[_+5];return u=c.$expected_part_of_expectation_error(n,$,r),l=(i=c).$received_part_of_expectation_error.apply(i,[a].concat(e.to_a(d))),c.$__raise("("+c.$intro()+")."+t+(s=c).$format_args.apply(s,e.to_a(d))+"\n    "+u+"\n    "+l)}),e.defn(c,"$raise_unimplemented_error",function(e,t){var n=this;return n.$__raise("%s does not implement: %s"["$%"]([e.$description(),t]))}),e.defn(c,"$raise_non_public_error",function(e,t){var n=this;return n.$raise(l.get("NoMethodError"),"%s method `%s' called on %s"["$%"]([t,e,n.$intro()]))}),e.defn(c,"$raise_invalid_arguments_error",function(e){var t=this;return t.$__raise(e.$error_message())}),e.defn(c,"$raise_expired_test_double_error",function(){var e=this;return e.$raise(l.get("ExpiredTestDoubleError"),""+e.$intro()+" was originally created in one example but has leaked into another example and can no longer be used. rspec-mocks' doubles are designed to only last for one example, and you need to create a new one in each example you wish to use it for.")}),e.defn(c,"$received_part_of_expectation_error",function(e){var n=this,r=o,a=arguments.length-1;0>a&&(a=0);var $=new Array(a);for(r=0;a>r;r++)$[r]=arguments[r+1];return t("received: "+n.$count_message(e),n.$actual_method_call_args_description(e,$))}),e.defn(c,"$expected_part_of_expectation_error",function(e,n,r){var a=this;return t("expected: "+a.$count_message(e,n),a.$expected_method_call_args_description(r.$expected_args()))}),e.defn(c,"$actual_method_call_args_description",function(e,t){var r,a,$,i=this;return(r=i.$method_call_args_description(t))!==!1&&r!==o?r:function(){return(a=($=n(e,0))?n(t.$length(),0):n(e,0))===o||a.$$is_boolean&&1!=a?"":" with arguments: "+t.$inspect().$gsub(/\A\[(.+)\]\z/,"(\\1)")}()}),e.defn(c,"$expected_method_call_args_description",function(t){var r,a,$=this;return(r=$.$method_call_args_description(t))!==!1&&r!==o?r:function(){return n(t.$length(),0)?" with arguments: "+(a=$).$format_args.apply(a,e.to_a(t)):""}()}),e.defn(c,"$method_call_args_description",function(e){var t=o;return function(){return t=e.$first(),l.get("ArgumentMatchers").$$scope.get("AnyArgsMatcher")["$==="](t)?" with any arguments":l.get("ArgumentMatchers").$$scope.get("NoArgsMatcher")["$==="](t)?" with no arguments":o}()}),e.defn(c,"$describe_expectation",function(t,n,r){var a,$=this,i=o,s=arguments.length-3;0>s&&(s=0);var c=new Array(s);for(i=0;s>i;i++)c[i]=arguments[i+3];return"have received "+t+(a=$).$format_args.apply(a,e.to_a(c))+" "+$.$count_message(n)}),e.defn(c,"$raise_out_of_order_error",function(e){var t=this;return t.$__raise(""+t.$intro()+" received :"+e+" out of order")}),e.defn(c,"$raise_block_failed_error",function(e,t){var n=this;return n.$__raise(""+n.$intro()+" received :"+e+" but passed block failed with: "+t)}),e.defn(c,"$raise_missing_block_error",function(t){var n,r=this;return r.$__raise(""+r.$intro()+" asked to yield |"+(n=r).$arg_list.apply(n,e.to_a(t))+"| but no block was passed")}),e.defn(c,"$raise_wrong_arity_error",function(t,n){var r,a=this;return a.$__raise(""+a.$intro()+" yielded |"+(r=a).$arg_list.apply(r,e.to_a(t))+"| to block with "+n.$description())}),e.defn(c,"$raise_only_valid_on_a_partial_double",function(e){var t=this;return t.$__raise(""+t.$intro()+" is a pure test double. `"+e+"` is only available on a partial double.")}),e.defn(c,"$raise_expectation_on_unstubbed_method",function(e){var t=this;return t.$__raise(""+t.$intro()+" expected to have received "+e+", but that object is not a spy or method has not been stubbed.")}),e.defn(c,"$raise_expectation_on_mocked_method",function(e){var t=this;return t.$__raise(""+t.$intro()+" expected to have received "+e+", but that method has been mocked instead of stubbed or spied.")}),e.defs(c,"$raise_double_negation_error",function(e){var t=this;return t.$raise("Isn't life confusing enough? You've already set a negative message expectation and now you are trying to negate it again with `never`. What does an expression like "+("`"+e+".not_to receive(:msg).never` even mean?"))}),c.$private(),e.defn(c,"$intro",function(){var e,t=this;return(e=t.name)===o||e.$$is_boolean&&1!=e?(e=l.get("TestDouble")["$==="](t.target))===o||e.$$is_boolean&&1!=e?(e=l.get("Class")["$==="](t.target))===o||e.$$is_boolean&&1!=e?(e=t.target)===o||e.$$is_boolean&&1!=e?"nil":t.target:"<"+t.target.$inspect()+" (class)>":"Double":"Double "+t.name.$inspect()}),e.defn(c,"$__raise",function(e){var t,n=this;return((t=n.$opts()["$[]"]("message")["$nil?"]())===o||t.$$is_boolean&&1!=t)&&(e=n.$opts()["$[]"]("message")),l.get("Kernel").$raise(l.get("RSpec").$$scope.get("Mocks").$$scope.get("MockExpectationError"),e)}),e.defn(c,"$arg_message",function(){var n,r=this,a=o,$=arguments.length-0;0>$&&($=0);var i=new Array($);for(a=0;$>a;a++)i[a]=arguments[a+0];return t(" with ",(n=r).$format_args.apply(n,e.to_a(i)))}),e.defn(c,"$format_args",function(){var n,r=this,a=o,$=arguments.length-0;0>$&&($=0);var i=new Array($);for(a=0;$>a;a++)i[a]=arguments[a+0];return(n=i["$empty?"]())===o||n.$$is_boolean&&1!=n?t(t("(",(n=r).$arg_list.apply(n,e.to_a(i))),")"):"(no args)"}),e.defn(c,"$arg_list",function(){var e,t,n,r=this,a=o,$=arguments.length-0;0>$&&($=0);var i=new Array($);for(a=0;$>a;a++)i[a]=arguments[a+0];return(e=(t=i).$map,e.$$p=(n=function(e){var t,r=n.$$s||this;return null==e&&(e=o),(t=r.$arg_has_valid_description(e))===o||t.$$is_boolean&&1!=t?e.$inspect():e.$description()},n.$$s=r,n),e).call(t).$join(", ")}),e.defn(c,"$arg_has_valid_description",function(e){var t;return(t=e["$respond_to?"]("description"))===o||t.$$is_boolean&&1!=t?!1:(t=e.$description()["$nil?"]()["$!"](),t!==!1&&t!==o?e.$description()["$empty?"]()["$!"]():t)}),e.defn(c,"$format_received_args",function(){var n,r=this,a=o,$=arguments.length-0;0>$&&($=0);var i=new Array($);for(a=0;$>a;a++)i[a]=arguments[a+0];return(n=i["$empty?"]())===o||n.$$is_boolean&&1!=n?t(t("(",(n=r).$received_arg_list.apply(n,e.to_a(i))),")"):"(no args)"}),e.defn(c,"$received_arg_list",function(){var e,t,n=o,r=arguments.length-0;0>r&&(r=0);var a=new Array(r);for(n=0;r>n;n++)a[n]=arguments[n+0];return(e=(t=a).$map,e.$$p="inspect".$to_proc(),e).call(t).$join(", ")}),e.defn(c,"$count_message",function(e,t){var n,a,$=this;return null==t&&(t=o),(n=(a=r(e,0))!==!1&&a!==o?a:t["$=="]("at_least"))===o||n.$$is_boolean&&1!=n?t["$=="]("at_most")?"at most "+$.$times(e):$.$times(e):"at least "+$.$times(e.$abs())}),e.defn(c,"$times",function(e){return""+e+" time"+function(){return e["$=="](1)?"":"s"}()}),o&&"times"}(l.base,null)}(l.base)}(a.base)},Opal.modules["rspec/mocks/example_methods"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.hash2;return e.add_stubs(["$require_rspec_mocks","$include","$declare_double","$for","$declare_verifying_double","$as_null_object","$double","$instance_double","$object_double","$class_double","$warn_about_expectations=","$proxy_for","$space","$stub","$hide","$new","$to_proc","$class_exec","$method_defined?","$verify_doubled_constant_names?","$configuration","$!","$defined?","$raise","$description","$===","$last","$<<"]),t.get("RSpec").$$scope.get("Support").$require_rspec_mocks("object_reference"),function(t){var o,$=o=r(t,"RSpec"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"Mocks"),i=($.$$proto,$.$$scope);!function(t){var o,$,i=o=r(t,"ExampleMethods"),s=(i.$$proto,i.$$scope);i.$include(s.get("RSpec").$$scope.get("Mocks").$$scope.get("ArgumentMatchers")),e.defn(i,"$double",function(){var t,r=n,a=arguments.length-0;0>a&&(a=0);var o=new Array(a);for(r=0;a>r;r++)o[r]=arguments[r+0];return(t=s.get("ExampleMethods")).$declare_double.apply(t,[s.get("Double")].concat(e.to_a(o)))}),e.defn(i,"$instance_double",function(t){var r,a=n,o=n,$=arguments.length-1;0>$&&($=0);var i=new Array($);for(o=0;$>o;o++)i[o]=arguments[o+1];return a=s.get("ObjectReference").$for(t),(r=s.get("ExampleMethods")).$declare_verifying_double.apply(r,[s.get("InstanceVerifyingDouble"),a].concat(e.to_a(i)))}),e.defn(i,"$class_double",function(t){var r,a=n,o=n,$=arguments.length-1;0>$&&($=0);var i=new Array($);for(o=0;$>o;o++)i[o]=arguments[o+1];return a=s.get("ObjectReference").$for(t),(r=s.get("ExampleMethods")).$declare_verifying_double.apply(r,[s.get("ClassVerifyingDouble"),a].concat(e.to_a(i)))}),e.defn(i,"$object_double",function(t){var r,a=n,o=n,$=arguments.length-1;0>$&&($=0);var i=new Array($);for(o=0;$>o;o++)i[o]=arguments[o+1];return a=s.get("ObjectReference").$for(t,"allow_direct_object_refs"),(r=s.get("ExampleMethods")).$declare_verifying_double.apply(r,[s.get("ObjectVerifyingDouble"),a].concat(e.to_a(i)))}),e.defn(i,"$spy",function(){var t,r=this,a=n,o=arguments.length-0;0>o&&(o=0);var $=new Array(o);for(a=0;o>a;a++)$[a]=arguments[a+0];return(t=r).$double.apply(t,e.to_a($)).$as_null_object()}),e.defn(i,"$instance_spy",function(){var t,r=this,a=n,o=arguments.length-0;0>o&&(o=0);var $=new Array(o);for(a=0;o>a;a++)$[a]=arguments[a+0];return(t=r).$instance_double.apply(t,e.to_a($)).$as_null_object()}),e.defn(i,"$object_spy",function(){var t,r=this,a=n,o=arguments.length-0;0>o&&(o=0);var $=new Array(o);for(a=0;o>a;a++)$[a]=arguments[a+0];return(t=r).$object_double.apply(t,e.to_a($)).$as_null_object()}),e.defn(i,"$class_spy",function(){var t,r=this,a=n,o=arguments.length-0;0>o&&(o=0);var $=new Array(o);for(a=0;o>a;a++)$[a]=arguments[a+0];return(t=r).$class_double.apply(t,e.to_a($)).$as_null_object()}),e.defn(i,"$allow_message_expectations_on_nil",function(){var e,t;return e=[!1],t=s.get("RSpec").$$scope.get("Mocks").$space().$proxy_for(n),t["$warn_about_expectations="].apply(t,e),e[e.length-1]}),e.defn(i,"$stub_const",function(e,t,n){return null==n&&(n=a([],{})),s.get("ConstantMutator").$stub(e,t,n)}),e.defn(i,"$hide_const",function(e){return s.get("ConstantMutator").$hide(e)}),e.defn(i,"$have_received",$=function(e){var t,r,a=$.$$p,o=a||n;return $.$$p=null,(t=(r=s.get("Matchers").$$scope.get("HaveReceived")).$new,t.$$p=o.$to_proc(),t).call(r,e)}),e.defs(i,"$included",function(e){var t,r,a,o=this;return(t=(r=e).$class_exec,t.$$p=(a=function(){var e,t=a.$$s||this;return(e=t["$method_defined?"]("expect"))===n||e.$$is_boolean&&1!=e?t.$include(s.get("ExpectHost")):n},a.$$s=o,a),t).call(r)}),e.defs(i,"$declare_verifying_double",function(t,r){var a,o,$=this,i=n,c=arguments.length-2;0>c&&(c=0);var u=new Array(c);for(i=0;c>i;i++)u[i]=arguments[i+2];return o=s.get("RSpec").$$scope.get("Mocks").$configuration()["$verify_doubled_constant_names?"](),(a=o!==!1&&o!==n?r["$defined?"]()["$!"]():o)===n||a.$$is_boolean&&1!=a||$.$raise(s.get("VerifyingDoubleNotDefinedError"),""+r.$description()+" is not a defined constant. Perhaps you misspelt it? Disable check with verify_doubled_constant_names configuration option."),(a=$).$declare_double.apply(a,[t,r].concat(e.to_a(u)))}),e.defs(i,"$declare_double",function(t){var r,o=n,$=arguments.length-1;0>$&&($=0);var i=new Array($);for(o=0;$>o;o++)i[o]=arguments[o+1];return((r=s.get("Hash")["$==="](i.$last()))===n||r.$$is_boolean&&1!=r)&&i["$<<"](a([],{})),(r=t).$new.apply(r,e.to_a(i))}),function(e){var t,n=t=r(e,"ExpectHost");n.$$proto,n.$$scope}(s.base)}(i.base)}(i.base)}(t.base)},Opal.modules["rspec/mocks/instance_method_stasher"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}e.dynamic_require_severity="ignore";var n=(e.top,e),r=e.nil,a=e.breaker,o=(e.slice,e.module),$=e.klass,i=e.hash2;return e.add_stubs(["$attr_reader","$<","$to_f","$!","$method_defined_directly_on_klass?","$__send__","$stashed_method_name","$private","$method_handle_for","$handle_restoration_failures","$include?","$warn_with","$inspect","$method_defined_on_klass?","$method_owned_by_klass?","$method_defined_at_any_visibility?","$owner","$instance_method","$===","$class","$=="]),function(n){var s,c=s=o(n,"RSpec"),u=(c.$$proto,c.$$scope);!function(n){var s,c=s=o(n,"Mocks"),u=(c.$$proto,c.$$scope);!function(n,$super){function o(){}var s,c,u,l,_=o=$(n,$super,"InstanceMethodStasher",o),p=_.$$proto,d=_.$$scope;return p.method_is_stashed=p.klass=p.method=p.original_method=p.object=r,e.defn(_,"$initialize",function(t,n){var a=this;return a.object=t,a.method=n,a.klass=function(e){e.$$scope,e.$$proto;return e}(e.get_singleton_class(t)),a.original_method=r,a.method_is_stashed=!1}),_.$attr_reader("original_method"),t(d.get("RUBY_VERSION").$to_f(),1.9)?(e.defn(_,"$method_is_stashed?",function(){var e=this;return e.method_is_stashed}),e.defn(_,"$stash",function(){var e,t,n=this;return(e=(t=n["$method_defined_directly_on_klass?"]()["$!"]())!==!1&&t!==r?t:n.method_is_stashed)===r||e.$$is_boolean&&1!=e?(n.klass.$__send__("alias_method",n.$stashed_method_name(),n.method),n.method_is_stashed=!0):r}),e.defn(_,"$stashed_method_name",function(){var e=this;return"obfuscated_by_rspec_mocks__"+e.method}),_.$private("stashed_method_name"),e.defn(_,"$restore",function(){var e,t=this;return(e=t.method_is_stashed)===r||e.$$is_boolean&&1!=e?r:((e=t.klass.$__send__("method_defined?",t.method))===r||e.$$is_boolean&&1!=e||t.klass.$__send__("undef_method",t.method),t.klass.$__send__("alias_method",t.method,t.$stashed_method_name()),t.klass.$__send__("remove_method",t.$stashed_method_name()),t.method_is_stashed=!1)})):(e.defn(_,"$method_is_stashed?",function(){var e=this;return e.original_method["$!"]()["$!"]()}),e.defn(_,"$stash",function(){var t,n=this;return(t=n["$method_defined_directly_on_klass?"]())===r||t.$$is_boolean&&1!=t?r:(t=n.original_method)!==!1&&t!==r?t:n.original_method=e.get("RSpec").$$scope.get("Support").$method_handle_for(n.object,n.method)}),e.defn(_,"$restore",function(){var e,t,n,a=this;return(e=a.original_method)===r||e.$$is_boolean&&1!=e?r:((e=a.klass.$__send__("method_defined?",a.method))===r||e.$$is_boolean&&1!=e||a.klass.$__send__("undef_method",a.method),(e=(t=a).$handle_restoration_failures,e.$$p=(n=function(){var e=n.$$s||this;return null==e.klass&&(e.klass=r),null==e.method&&(e.method=r),null==e.original_method&&(e.original_method=r),e.klass.$__send__("define_method",e.method,e.original_method)},n.$$s=a,n),e).call(t),a.original_method=r)})),(s=(c=d.get("RUBY_DESCRIPTION")["$include?"]("2.0.0p247"))!==!1&&c!==r?c:d.get("RUBY_DESCRIPTION")["$include?"]("2.0.0p195"))===r||s.$$is_boolean&&1!=s?e.defn(_,"$handle_restoration_failures",l=function(){var t,n=l.$$p,o=n||r;return l.$$p=null,t=e.yieldX(o,[]),t===a?t:t}):e.defn(_,"$handle_restoration_failures",u=function(){var t,n=this,o=u.$$p,$=o||r;u.$$p=null;try{return t=e.yieldX($,[]),t===a?t:t}catch(s){if(!e.rescue(s,[d.get("TypeError")]))throw s;try{return d.get("RSpec").$warn_with("RSpec failed to properly restore a partial double ("+n.object.$inspect()+") to its original state due to a known bug in MRI 2.0.0-p195 & p247 (https://bugs.ruby-lang.org/issues/8686). This object may remain screwed up for the rest of this process. Please upgrade to 2.0.0-p353 or above.",i(["call_site","use_spec_location_as_call_site"],{call_site:r,use_spec_location_as_call_site:!0}))}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}),_.$private(),e.defn(_,"$method_defined_directly_on_klass?",function(){var e,t=this;return e=t["$method_defined_on_klass?"](),e!==!1&&e!==r?t["$method_owned_by_klass?"]():e}),e.defn(_,"$method_defined_on_klass?",function(e){var t=this;return null==e&&(e=t.klass),d.get("MethodReference")["$method_defined_at_any_visibility?"](e,t.method)}),e.defn(_,"$method_owned_by_klass?",function(){var e,t=this,n=r;return n=t.klass.$instance_method(t.method).$owner(),((e=d.get("Module")["$==="](n))===r||e.$$is_boolean&&1!=e)&&(n=n.$class()),(e=n["$=="](t.klass))!==!1&&e!==r?e:t["$method_defined_on_klass?"](n)["$!"]()}),r&&"method_owned_by_klass?"}(u.base,null)}(u.base)}(n.base)},Opal.modules["rspec/mocks/matchers/expectation_customization"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass;return e.add_stubs(["$attr_accessor","$__send__","$to_proc"]),function(t){var o,$=o=r(t,"RSpec"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"Mocks"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"Matchers"),i=($.$$proto,$.$$scope);!function(t,$super){function r(){}var o=r=a(t,$super,"ExpectationCustomization",r),$=o.$$proto;o.$$scope;return $.block=$.method_name=$.args=n,o.$attr_accessor("block"),e.defn(o,"$initialize",function(e,t,n){var r=this;return r.method_name=e,r.args=t,r.block=n}),e.defn(o,"$playback_onto",function(t){var n,r,a=this;return(n=(r=t).$__send__,n.$$p=a.block.$to_proc(),n).apply(r,[a.method_name].concat(e.to_a(a.args)))}),n&&"playback_onto"}(i.base,null)}(i.base)}(i.base)}(t.base)},Opal.modules["rspec/mocks/message_expectation"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>=t:e["$>="](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?t>=e:e["$<="](t)}function a(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function o(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="ignore";var $=(e.top,e),i=e.nil,s=e.breaker,c=e.slice,u=e.module,l=e.klass,_=e.hash2;return e.add_stubs(["$to_sym","$==","$line","$raise_expectation_error","$attr_accessor","$attr_reader","$attr_writer","$protected","$opts=","$object","$method_name","$register","$new","$inner_implementation_action=","$expected_args","$negative?","$raise","$unshift","$ignoring_args?","$max","$size","$terminal_implementation_action=","$and_wrap_original","$call","$to_proc","$===","$raise_only_valid_on_a_partial_double","$inner_action","$implementation","$warn_about_stub_override","$original_method","$respond_to?","$exception","$throw","$<<","$initial_implementation_action=","$args_match?","$invoke_incrementing_actual_calls_by","$!","$!=","$>","$>=","$expected_messages_received?","$failed_fast?","$generate_error","$matches_exact_count?","$matches_at_least_count?","$matches_at_most_count?","$verify_invocation_order","$<=","$similar_messages","$empty?","$expectation_count_type","$raise_similar_message_args_error","$describe_expectation","$raise_out_of_order_error","$set_expected_received_count","$raise_double_negation_error","$times","$additional_expected_calls","$-","$+","$private","$yield_receiver_to_implementation_block?","$orig_object","$handle_order_constraint","$present?","$invoke","$initial_action=","$inner_action=","$terminal_action=","$warning","$first_non_rspec_line","$nil?","$raise_missing_block_error","$each","$valid?","$raise_wrong_arity_error","$instance_exec","$shift","$first","$last","$map","$actions","$any?","$compact","$initial_action","$terminal_action","$cannot_modify_further_error","$insert","$backtrace"]),function($){var p,d=p=u($,"RSpec"),f=(d.$$proto,d.$$scope);!function($){var p,d=p=u($,"Mocks"),f=(d.$$proto,d.$$scope);!function(t,$super){
function n(){}var r=n=l(t,$super,"SimpleMessageExpectation",n),a=r.$$proto,o=r.$$scope;return a.response=a.message=a.backtrace_line=i,e.defn(r,"$initialize",function(e,t,n,r){var a,o=this;return null==r&&(r=i),a=[e.$to_sym(),t,n,r],o.message=a[0],o.response=a[1],o.error_generator=a[2],o.backtrace_line=a[3],a,o.received=!1}),e.defn(r,"$invoke",function(){var e=this,t=i,n=arguments.length-0;0>n&&(n=0);var r=new Array(n);for(t=0;n>t;t++)r[t]=arguments[t+0];return e.received=!0,e.response}),e.defn(r,"$matches?",function(e){var t=this,n=i,r=arguments.length-1;0>r&&(r=0);var a=new Array(r);for(n=0;r>n;n++)a[n]=arguments[n+1];return t.message["$=="](e.$to_sym())}),e.defn(r,"$called_max_times?",function(){return!1}),e.defn(r,"$verify_messages_received",function(){var e,t,n,r=this;return(e=(t=o.get("InsertOntoBacktrace")).$line,e.$$p=(n=function(){var e,t=n.$$s||this;return null==t.received&&(t.received=i),null==t.error_generator&&(t.error_generator=i),null==t.message&&(t.message=i),(e=t.received)===i||e.$$is_boolean&&1!=e?t.error_generator.$raise_expectation_error(t.message,1,o.get("ArgumentListMatcher").$$scope.get("MATCH_ALL"),0,i):i},n.$$s=r,n),e).call(t,r.backtrace_line)}),i&&"verify_messages_received"}(f.base,null),function($,$super){function u(){}var p,d,f,g,h,m,v,b,y,x,w,k,S,E,R,A,O,M=u=l($,$super,"MessageExpectation",u),q=M.$$proto,z=M.$$scope;return q.error_generator=q.method_double=q.order_group=q.argument_list_matcher=q.expected_received_count=q.at_least=q.yield_receiver_to_implementation_block=q.args_to_yield=q.eval_context=q.message=q.actual_received_count=q.expected_from=q.ordered=q.at_most=q.similar_messages=q.expectation_type=q.exactly=q.failed_fast=i,M.$attr_accessor("error_generator","implementation"),M.$attr_reader("message"),M.$attr_reader("orig_object"),M.$attr_writer("expected_received_count","expected_from","argument_list_matcher"),M.$protected("expected_received_count=","expected_from=","error_generator","error_generator=","implementation="),e.defn(M,"$initialize",p=function(e,t,n,r,a,o){var $,s,c=this,u=p.$$p,l=u||i;return null==a&&(a="expectation"),null==o&&(o=_([],{})),p.$$p=null,c.error_generator=e,$=[o],s=c.error_generator,s["$opts="].apply(s,$),$[$.length-1],c.expected_from=n,c.method_double=r,c.orig_object=c.method_double.$object(),c.message=c.method_double.$method_name(),c.actual_received_count=0,c.expected_received_count=function(){return a["$=="]("expectation")?1:"any"}(),c.argument_list_matcher=z.get("ArgumentListMatcher").$$scope.get("MATCH_ALL"),c.order_group=t,a["$=="]("stub")||c.order_group.$register(c),c.expectation_type=a,c.ordered=!1,c.at_least=c.at_most=c.exactly=i,c.args_to_yield=[],c.failed_fast=i,c.eval_context=i,c.yield_receiver_to_implementation_block=!1,c.implementation=z.get("Implementation").$new(),$=[l],s=c,s["$inner_implementation_action="].apply(s,$),$[$.length-1]}),e.defn(M,"$expected_args",function(){var e=this;return e.argument_list_matcher.$expected_args()}),e.defn(M,"$and_return",d=function(e){var t,n,r,a=this,o=d.$$p,$=o||i,s=i,c=arguments.length-1;0>c&&(c=0);var u=new Array(c);for(s=0;c>s;s++)u[s]=arguments[s+1];return d.$$p=null,(t=a["$negative?"]())===i||t.$$is_boolean&&1!=t||a.$raise("`and_return` is not supported with negative message expectations"),$!==i&&a.$raise(z.get("ArgumentError"),"Implementation blocks aren't supported with `and_return`"),u.$unshift(e),((t=(n=a["$ignoring_args?"]())!==!1&&n!==i?n:(r=a.expected_received_count["$=="](0))?a.at_least:a.expected_received_count["$=="](0))===i||t.$$is_boolean&&1!=t)&&(a.expected_received_count=[a.expected_received_count,u.$size()].$max()),t=[z.get("AndReturnImplementation").$new(u)],n=a,n["$terminal_implementation_action="].apply(n,t),t[t.length-1],i}),e.defn(M,"$and_yield_receiver_to_implementation",function(){var e=this;return e.yield_receiver_to_implementation_block=!0,e}),e.defn(M,"$yield_receiver_to_implementation_block?",function(){var e=this;return e.yield_receiver_to_implementation_block}),e.defn(M,"$and_call_original",function(){var t,n,r,a=this;return(t=(n=a).$and_wrap_original,t.$$p=(r=function(t,n){var a,o,$;r.$$s||this;return null==t&&(t=i),n=c.call(arguments,1),a=r.$$p||i,r.$$p=null,(o=($=t).$call,o.$$p=a.$to_proc(),o).apply($,e.to_a(n))},r.$$s=a,r),t).call(n)}),e.defn(M,"$and_wrap_original",f=function(){var e,t=this,n=f.$$p,r=n||i;return f.$$p=null,(e=z.get("RSpec").$$scope.get("Mocks").$$scope.get("TestDouble")["$==="](t.method_double.$object()))===i||e.$$is_boolean&&1!=e?((e=t.$implementation().$inner_action())===i||e.$$is_boolean&&1!=e||t.$warn_about_stub_override(),t.implementation=z.get("AndWrapOriginalImplementation").$new(t.method_double.$original_method(),r),t.yield_receiver_to_implementation_block=!1):t.error_generator.$raise_only_valid_on_a_partial_double("and_call_original")}),e.defn(M,"$and_raise",function(e,t){var n,r,a,o,$,s=this;return null==e&&(e=z.get("RuntimeError")),null==t&&(t=i),(n=e["$respond_to?"]("exception"))===i||n.$$is_boolean&&1!=n||(e=function(){return t!==!1&&t!==i?e.$exception(t):e.$exception()}()),n=[(a=(o=z.get("Proc")).$new,a.$$p=($=function(){var t=$.$$s||this;return t.$raise(e)},$.$$s=s,$),a).call(o)],r=s,r["$terminal_implementation_action="].apply(r,n),n[n.length-1],i}),e.defn(M,"$and_throw",function(){var t,n,r,a,o,$=this,s=i,c=arguments.length-0;0>c&&(c=0);var u=new Array(c);for(s=0;c>s;s++)u[s]=arguments[s+0];return t=[(r=(a=z.get("Proc")).$new,r.$$p=(o=function(){var t,n=o.$$s||this;return(t=n).$throw.apply(t,e.to_a(u))},o.$$s=$,o),r).call(a)],n=$,n["$terminal_implementation_action="].apply(n,t),t[t.length-1],i}),e.defn(M,"$and_yield",g=function(){var t,n,r=this,a=g.$$p,o=a||i,$=i,c=arguments.length-0;0>c&&(c=0);var u=new Array(c);for($=0;c>$;$++)u[$]=arguments[$+0];return g.$$p=null,o!==!1&&o!==i&&e.yield1(o,r.eval_context=z.get("Object").$new())===s?s.$v:(r.args_to_yield["$<<"](u),t=[z.get("AndYieldImplementation").$new(r.args_to_yield,r.eval_context,r.error_generator)],n=r,n["$initial_implementation_action="].apply(n,t),t[t.length-1],r)}),e.defn(M,"$matches?",function(t){var n,r,a=this,o=i,$=arguments.length-1;0>$&&($=0);var s=new Array($);for(o=0;$>o;o++)s[o]=arguments[o+1];return(n=a.message["$=="](t))?(r=a.argument_list_matcher)["$args_match?"].apply(r,e.to_a(s)):a.message["$=="](t)}),e.defn(M,"$safe_invoke",h=function(t){var n,r,a=this,o=h.$$p,$=o||i,s=i,c=arguments.length-1;0>c&&(c=0);var u=new Array(c);for(s=0;c>s;s++)u[s]=arguments[s+1];return h.$$p=null,(n=(r=a).$invoke_incrementing_actual_calls_by,n.$$p=$.$to_proc(),n).apply(r,[1,!1,t].concat(e.to_a(u)))}),e.defn(M,"$invoke",m=function(t){var n,r,a=this,o=m.$$p,$=o||i,s=i,c=arguments.length-1;0>c&&(c=0);var u=new Array(c);for(s=0;c>s;s++)u[s]=arguments[s+1];return m.$$p=null,(n=(r=a).$invoke_incrementing_actual_calls_by,n.$$p=$.$to_proc(),n).apply(r,[1,!0,t].concat(e.to_a(u)))}),e.defn(M,"$invoke_without_incrementing_received_count",v=function(t){var n,r,a=this,o=v.$$p,$=o||i,s=i,c=arguments.length-1;0>c&&(c=0);var u=new Array(c);for(s=0;c>s;s++)u[s]=arguments[s+1];return v.$$p=null,(n=(r=a).$invoke_incrementing_actual_calls_by,n.$$p=$.$to_proc(),n).apply(r,[0,!0,t].concat(e.to_a(u)))}),e.defn(M,"$negative?",function(){var e,t=this;return(e=t.expected_received_count["$=="](0))?t.at_least["$!"]():t.expected_received_count["$=="](0)}),e.defn(M,"$called_max_times?",function(){var e,r,a,o=this;return a=o.expected_received_count["$!="]("any"),r=a!==!1&&a!==i?o.at_least["$!"]():a,e=r!==!1&&r!==i?t(o.expected_received_count,0):r,e!==!1&&e!==i?n(o.actual_received_count,o.expected_received_count):e}),e.defn(M,"$matches_name_but_not_args",function(t){var n,r,a=this,o=i,$=arguments.length-1;0>$&&($=0);var s=new Array($);for(o=0;$>o;o++)s[o]=arguments[o+1];return(n=a.message["$=="](t))?(r=a.argument_list_matcher)["$args_match?"].apply(r,e.to_a(s))["$!"]():a.message["$=="](t)}),e.defn(M,"$verify_messages_received",function(){var e,t,n,r=this;return(e=(t=z.get("InsertOntoBacktrace")).$line,e.$$p=(n=function(){var e,t,r=n.$$s||this;return(e=(t=r["$expected_messages_received?"]())!==!1&&t!==i?t:r["$failed_fast?"]())===i||e.$$is_boolean&&1!=e?r.$generate_error():i},n.$$s=r,n),e).call(t,r.expected_from)}),e.defn(M,"$expected_messages_received?",function(){var e,t,n,r=this;return(e=(t=(n=r["$ignoring_args?"]())!==!1&&n!==i?n:r["$matches_exact_count?"]())!==!1&&t!==i?t:r["$matches_at_least_count?"]())!==!1&&e!==i?e:r["$matches_at_most_count?"]()}),e.defn(M,"$ensure_expected_ordering_received!",function(){var e,t=this;return(e=t.ordered)===i||e.$$is_boolean&&1!=e||t.order_group.$verify_invocation_order(t),!0}),e.defn(M,"$ignoring_args?",function(){var e=this;return e.expected_received_count["$=="]("any")}),e.defn(M,"$matches_at_least_count?",function(){var e,t=this;return e=t.at_least,e!==!1&&e!==i?n(t.actual_received_count,t.expected_received_count):e}),e.defn(M,"$matches_at_most_count?",function(){var e,t=this;return e=t.at_most,e!==!1&&e!==i?r(t.actual_received_count,t.expected_received_count):e}),e.defn(M,"$matches_exact_count?",function(){var e=this;return e.expected_received_count["$=="](e.actual_received_count)}),e.defn(M,"$similar_messages",function(){var e,t=this;return(e=t.similar_messages)!==!1&&e!==i?e:t.similar_messages=[]}),e.defn(M,"$advise",function(){var e=this,t=i,n=arguments.length-0;0>n&&(n=0);var r=new Array(n);for(t=0;n>t;t++)r[t]=arguments[t+0];return e.$similar_messages()["$<<"](r)}),e.defn(M,"$generate_error",function(){var t,n,r=this;return(t=r.$similar_messages()["$empty?"]())===i||t.$$is_boolean&&1!=t?(n=r.error_generator).$raise_similar_message_args_error.apply(n,[r].concat(e.to_a(r.similar_messages))):(t=r.error_generator).$raise_expectation_error.apply(t,[r.message,r.expected_received_count,r.argument_list_matcher,r.actual_received_count,r.$expectation_count_type()].concat(e.to_a(r.$expected_args())))}),e.defn(M,"$expectation_count_type",function(){var e,t=this;return(e=t.at_least)===i||e.$$is_boolean&&1!=e?(e=t.at_most)===i||e.$$is_boolean&&1!=e?i:"at_most":"at_least"}),e.defn(M,"$description",function(){var t,n=this;return(t=n.error_generator).$describe_expectation.apply(t,[n.message,n.expected_received_count,n.actual_received_count].concat(e.to_a(n.$expected_args())))}),e.defn(M,"$raise_out_of_order_error",function(){var e=this;return e.error_generator.$raise_out_of_order_error(e.message)}),e.defn(M,"$with",b=function(){var t,n,r=this,a=b.$$p,o=a||i,$=i,s=arguments.length-0;0>s&&(s=0);var c=new Array(s);for($=0;s>$;$++)c[$]=arguments[$+0];return b.$$p=null,(t=c["$empty?"]())===i||t.$$is_boolean&&1!=t||r.$raise(z.get("ArgumentError"),"`with` must have at least one argument. Use `no_args` matcher to set the expectation of receiving no arguments."),t=[o],n=r,n["$inner_implementation_action="].apply(n,t),t[t.length-1],r.argument_list_matcher=(t=z.get("ArgumentListMatcher")).$new.apply(t,e.to_a(c)),r}),e.defn(M,"$exactly",y=function(e){var t,n,r=this,a=y.$$p,o=a||i;return y.$$p=null,t=[o],n=r,n["$inner_implementation_action="].apply(n,t),t[t.length-1],r.$set_expected_received_count("exactly",e),r}),e.defn(M,"$at_least",x=function(e){var t,n,r=this,a=x.$$p,o=a||i;return x.$$p=null,r.$set_expected_received_count("at_least",e),e["$=="](0)&&r.$raise("at_least(0) has been removed, use allow(...).to receive(:message) instead"),t=[o],n=r,n["$inner_implementation_action="].apply(n,t),t[t.length-1],r}),e.defn(M,"$at_most",w=function(e){var t,n,r=this,a=w.$$p,o=a||i;return w.$$p=null,t=[o],n=r,n["$inner_implementation_action="].apply(n,t),t[t.length-1],r.$set_expected_received_count("at_most",e),r}),e.defn(M,"$times",k=function(){var e,t,n=this,r=k.$$p,a=r||i;return k.$$p=null,e=[a],t=n,t["$inner_implementation_action="].apply(t,e),e[e.length-1],n}),e.defn(M,"$never",function(){var e,t=this;return(e=t["$negative?"]())===i||e.$$is_boolean&&1!=e||z.get("ErrorGenerator").$raise_double_negation_error("expect(obj)"),t.expected_received_count=0,t}),e.defn(M,"$once",S=function(){var e,t,n=this,r=S.$$p,a=r||i;return S.$$p=null,e=[a],t=n,t["$inner_implementation_action="].apply(t,e),e[e.length-1],n.$set_expected_received_count("exactly",1),n}),e.defn(M,"$twice",E=function(){var e,t,n=this,r=E.$$p,a=r||i;return E.$$p=null,e=[a],t=n,t["$inner_implementation_action="].apply(t,e),e[e.length-1],n.$set_expected_received_count("exactly",2),n}),e.defn(M,"$thrice",R=function(){var e,t,n=this,r=R.$$p,a=r||i;return R.$$p=null,e=[a],t=n,t["$inner_implementation_action="].apply(t,e),e[e.length-1],n.$set_expected_received_count("exactly",3),n}),e.defn(M,"$ordered",A=function(){var e,t,n,r=this,a=A.$$p,o=a||i;return A.$$p=null,e=[o],t=r,t["$inner_implementation_action="].apply(t,e),e[e.length-1],(e=(t=r.$additional_expected_calls()).$times,e.$$p=(n=function(){var e=n.$$s||this;return null==e.order_group&&(e.order_group=i),e.order_group.$register(e)},n.$$s=r,n),e).call(t),r.ordered=!0,r}),e.defn(M,"$additional_expected_calls",function(){var e,t,n=this;return(e=(t=n.expectation_type["$=="]("stub"))!==!1&&t!==i?t:n.exactly["$!"]())===i||e.$$is_boolean&&1!=e?a(n.expected_received_count,1):0}),e.defn(M,"$ordered?",function(){var e=this;return e.ordered}),e.defn(M,"$negative_expectation_for?",function(e){var t,n=this;return(t=n.message["$=="](e))?n["$negative?"]():n.message["$=="](e)}),e.defn(M,"$actual_received_count_matters?",function(){var e,t,n=this;return(e=(t=n.at_least)!==!1&&t!==i?t:n.at_most)!==!1&&e!==i?e:n.exactly}),e.defn(M,"$increase_actual_received_count!",function(){var e=this;return e.actual_received_count=o(e.actual_received_count,1)}),M.$private(),e.defn(M,"$invoke_incrementing_actual_calls_by",O=function(t,n,r){var a,$,s,c,u,l=this,_=O.$$p,p=_||i,d=i,f=arguments.length-3;0>f&&(f=0);var g=new Array(f);for(d=0;f>d;d++)g[d]=arguments[d+3];O.$$p=null,(a=l["$yield_receiver_to_implementation_block?"]())===i||a.$$is_boolean&&1!=a||g.$unshift(l.$orig_object()),(a=($=l["$negative?"]())!==!1&&$!==i?$:(s=(c=n!==!1&&n!==i)?(u=l.exactly)!==!1&&u!==i?u:l.at_most:n,s!==!1&&s!==i?l.actual_received_count["$=="](l.expected_received_count):s))===i||a.$$is_boolean&&1!=a||(l.actual_received_count=o(l.actual_received_count,t),l.failed_fast=!0,(a=l.error_generator).$raise_expectation_error.apply(a,[l.message,l.expected_received_count,l.argument_list_matcher,l.actual_received_count,l.$expectation_count_type()].concat(e.to_a(g)))),l.order_group.$handle_order_constraint(l);try{return($=l.$implementation()["$present?"]())===i||$.$$is_boolean&&1!=$?r!==!1&&r!==i?($=(c=r).$invoke,$.$$p=p.$to_proc(),$).apply(c,[i].concat(e.to_a(g))):i:($=(s=l.$implementation()).$call,$.$$p=p.$to_proc(),$).apply(s,e.to_a(g))}finally{l.actual_received_count=o(l.actual_received_count,t)}}),e.defn(M,"$failed_fast?",function(){var e=this;return e.failed_fast}),e.defn(M,"$set_expected_received_count",function(e,t){var n=this,r=i;return n.at_least=e["$=="]("at_least"),n.at_most=e["$=="]("at_most"),n.exactly=e["$=="]("exactly"),n.expected_received_count=function(){return r=t,z.get("Numeric")["$==="](r)?t:"once"["$==="](r)?1:"twice"["$==="](r)?2:"thrice"["$==="](r)?3:i}()}),e.defn(M,"$initial_implementation_action=",function(e){var t,n,r=this;return t=[e],n=r.$implementation(),n["$initial_action="].apply(n,t),t[t.length-1]}),e.defn(M,"$inner_implementation_action=",function(e){var t,n,r=this;return e===!1||e===i?i:((t=r.$implementation().$inner_action())===i||t.$$is_boolean&&1!=t||r.$warn_about_stub_override(),t=[e],n=r.$implementation(),n["$inner_action="].apply(n,t),t[t.length-1])}),e.defn(M,"$terminal_implementation_action=",function(e){var t,n,r=this;return t=[e],n=r.$implementation(),n["$terminal_action="].apply(n,t),t[t.length-1]}),e.defn(M,"$warn_about_stub_override",function(){var e=this;return z.get("RSpec").$warning("You're overriding a previous stub implementation of `"+e.message+"`. "+("Called from "+z.get("CallerFilter").$first_non_rspec_line()+"."))}),i&&"warn_about_stub_override"}(f.base,null),function(t,$super){function n(){}var r,a=n=l(t,$super,"AndYieldImplementation",n),o=a.$$proto,$=a.$$scope;return o.args_to_yield=o.eval_context=o.error_generator=i,e.defn(a,"$initialize",function(e,t,n){var r=this;return r.args_to_yield=e,r.eval_context=t,r.error_generator=n}),e.defn(a,"$call",r=function(){var t,n,a,o=this,s=r.$$p,c=s||i,u=i,l=i,_=i,p=arguments.length-0;0>p&&(p=0);var d=new Array(p);for(_=0;p>_;_++)d[_]=arguments[_+0];return r.$$p=null,n=o.args_to_yield["$empty?"](),(t=n!==!1&&n!==i?o.eval_context["$nil?"]():n)===i||t.$$is_boolean&&1!=t?(c!==!1&&c!==i||o.error_generator.$raise_missing_block_error(o.args_to_yield),u=i,l=$.get("Support").$$scope.get("BlockSignature").$new(c),(t=(n=o.args_to_yield).$each,t.$$p=(a=function(t){var n,r,o=a.$$s||this;return null==o.error_generator&&(o.error_generator=i),null==o.eval_context&&(o.eval_context=i),null==t&&(t=i),((n=$.get("Support").$$scope.get("StrictSignatureVerifier").$new(l,t)["$valid?"]())===i||n.$$is_boolean&&1!=n)&&o.error_generator.$raise_wrong_arity_error(t,l),u=function(){return(n=o.eval_context)===i||n.$$is_boolean&&1!=n?(n=c).$call.apply(n,e.to_a(t)):(n=(r=o.eval_context).$instance_exec,n.$$p=c.$to_proc(),n).apply(r,e.to_a(t))}()},a.$$s=o,a),t).call(n),u):i}),i&&"call"}(f.base,null),function(n,$super){function r(){}var a,o=r=l(n,$super,"AndReturnImplementation",r),$=o.$$proto;o.$$scope;return $.values_to_return=i,e.defn(o,"$initialize",function(e){var t=this;return t.values_to_return=e}),e.defn(o,"$call",a=function(){var e=this,n=(a.$$p,i),r=arguments.length-0;0>r&&(r=0);var o=new Array(r);for(n=0;r>n;n++)o[n]=arguments[n+0];return a.$$p=null,t(e.values_to_return.$size(),1)?e.values_to_return.$shift():e.values_to_return.$first()}),i&&"call"}(f.base,null),function(t,$super){function n(){}var r,a=n=l(t,$super,"Implementation",n);a.$$proto,a.$$scope;return a.$attr_accessor("initial_action","inner_action","terminal_action"),e.defn(a,"$call",r=function(){var t,n,a,o=this,$=r.$$p,s=$||i,c=i,u=arguments.length-0;0>u&&(u=0);var l=new Array(u);for(c=0;u>c;c++)l[c]=arguments[c+0];return r.$$p=null,(t=(n=o.$actions()).$map,t.$$p=(a=function(t){var n,r;a.$$s||this;return null==t&&(t=i),(n=(r=t).$call,n.$$p=s.$to_proc(),n).apply(r,e.to_a(l))},a.$$s=o,a),t).call(n).$last()}),e.defn(a,"$present?",function(){var e=this;return e.$actions()["$any?"]()}),a.$private(),e.defn(a,"$actions",function(){var e=this;return[e.$initial_action(),e.$inner_action(),e.$terminal_action()].$compact()}),i&&"actions"}(f.base,null),function(t,$super){function n(){}var r,a=n=l(t,$super,"AndWrapOriginalImplementation",n),o=a.$$proto,$=a.$$scope;return o.block=o.method=i,e.defn(a,"$initialize",function(e,t){var n=this;return n.method=e,n.block=t}),e.cdecl($,"CannotModifyFurtherError",$.get("Class").$new($.get("StandardError"))),e.defn(a,"$initial_action=",function(e){var t=this;return t.$raise(t.$cannot_modify_further_error())}),e.defn(a,"$inner_action=",function(e){var t=this;return t.$raise(t.$cannot_modify_further_error())}),e.defn(a,"$terminal_action=",function(e){var t=this;return t.$raise(t.$cannot_modify_further_error())}),e.defn(a,"$present?",function(){return!0}),e.defn(a,"$inner_action",function(){return!0}),e.defn(a,"$call",r=function(){var t,n,a=this,o=r.$$p,$=o||i,s=i,c=arguments.length-0;0>c&&(c=0);var u=new Array(c);for(s=0;c>s;s++)u[s]=arguments[s+0];return r.$$p=null,(t=(n=a.block).$call,t.$$p=$.$to_proc(),t).apply(n,[a.method].concat(e.to_a(u)))}),a.$private(),e.defn(a,"$cannot_modify_further_error",function(){return $.get("CannotModifyFurtherError").$new("This method has already been configured to call the original implementation, and cannot be modified further.")}),i&&"cannot_modify_further_error"}(f.base,null),function(t,$super){function n(){}var r,a=n=l(t,$super,"InsertOntoBacktrace",n),o=(a.$$proto,a.$$scope);return e.defs(a,"$line",r=function(t){var n,a=r.$$p,$=a||i,c=i;r.$$p=null;try{return n=e.yieldX($,[]),n===s?n:n}catch(u){if(!e.rescue(u,[o.get("RSpec").$$scope.get("Mocks").$$scope.get("MockExpectationError")]))throw u;c=u;try{return c.$backtrace().$insert(0,t),o.get("Kernel").$raise(c)}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}),i&&"line"}(f.base,null)}(f.base)}($.base)},Opal.modules["rspec/mocks/method_double"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice),a=e.module,o=e.klass,$=e.hash2;return e.add_stubs(["$attr_reader","$new","$original_method","$original_method_handle_for","$method_name","$__send__","$to_proc","$alias_method","$visibility_for","$visibility","$stash","$define_proxy_method","$save_original_method!","$class_exec","$define_method","$proxy_method_invoked","$definition_target","$message_received","$frozen?","$object_singleton_class","$show_frozen_warning","$method_is_stashed?","$restore","$restore_original_visibility","$warn_with","$inspect","$method_defined_at_any_visibility?","$each","$verify_messages_received","$expectations","$restore_original_method","$clear","$stubs","$configure_method","$message_expectation_class","$<<","$unshift","$setup_simple_method_double","$any?","$add_stub","$empty?","$raise_method_not_stubbed_error","$remove_stub_if_present","$reset","$raise","$module_prepends_supported?","$private","$usable_rspec_prepended_module","$===","$method_defined?","$new_rspec_prepended_module","$prepended_modules_of_singleton_class","$tap"]),function(t){var i,s=i=a(t,"RSpec"),c=(s.$$proto,s.$$scope);!function(t){var i,s=i=a(t,"Mocks"),c=(s.$$proto,s.$$scope);!function(t,$super){function a(){}var i,s,c,u,l,_=a=o(t,$super,"MethodDouble",a),p=_.$$proto,d=_.$$scope;return p.original_method=p.method_stasher=p.proxy=p.method_name=p.object=p.method_is_proxied=p.original_visibility=p.definition_target=n,_.$attr_reader("method_name","object","expectations","stubs"),e.defn(_,"$initialize",function(e,t,r){var a=this;return a.method_name=t,a.object=e,a.proxy=r,a.original_visibility=n,a.method_stasher=d.get("InstanceMethodStasher").$new(e,t),a.method_is_proxied=!1,a.expectations=[],a.stubs=[]}),e.defn(_,"$original_method",function(){var t,a,o,$,i,s=this;return(t=s.original_method)!==!1&&t!==n?t:s.original_method=(a=(o=s.method_stasher.$original_method())!==!1&&o!==n?o:s.proxy.$original_method_handle_for(s.$method_name()))!==!1&&a!==n?a:(o=($=d.get("Proc")).$new,o.$$p=(i=function(t){var a,o,$,s=i.$$s||this;return null==s.object&&(s.object=n),null==s.method_name&&(s.method_name=n),t=r.call(arguments,0),a=i.$$p||n,i.$$p=null,(o=($=s.object).$__send__,o.$$p=a.$to_proc(),o).apply($,["method_missing",s.method_name].concat(e.to_a(t)))},i.$$s=s,i),o).call($)}),_.$alias_method("save_original_method!","original_method"),e.defn(_,"$visibility",function(){var e=this;return e.proxy.$visibility_for(e.method_name)}),e.defn(_,"$object_singleton_class",function(){var t=this;return function(e){e.$$scope,e.$$proto;return e}(e.get_singleton_class(t.object))}),e.defn(_,"$configure_method",function(){var e,t=this;return t.original_visibility=[t.$visibility(),t.$method_name()],((e=t.method_is_proxied)===n||e.$$is_boolean&&1!=e)&&t.method_stasher.$stash(),t.$define_proxy_method()}),e.defn(_,"$define_proxy_method",function(){var t,a,o,$=this;return(t=$.method_is_proxied)===n||t.$$is_boolean&&1!=t?($["$save_original_method!"](),(t=(a=$.$definition_target()).$class_exec,t.$$p=(o=function(t,a,$){var i,s,c,u=o.$$s||this;return null==t&&(t=n),null==a&&(a=n),null==$&&($=n),(i=(s=u).$define_method,i.$$p=(c=function(a){var o,$,i,s=c.$$s||this;return a=r.call(arguments,0),o=c.$$p||n,c.$$p=null,($=(i=t).$proxy_method_invoked,$.$$p=o.$to_proc(),$).apply(i,[s].concat(e.to_a(a)))},c.$$s=u,c),i).call(s,a),u.$__send__($,a)},o.$$s=$,o),t).call(a,$,$.$method_name(),$.$visibility()),$.method_is_proxied=!0):n}),e.defn(_,"$proxy_method_invoked",i=function(t){var r,a,o=this,$=i.$$p,s=$||n,c=n,u=arguments.length-1;0>u&&(u=0);var l=new Array(u);for(c=0;u>c;c++)l[c]=arguments[c+1];return i.$$p=null,(r=(a=o.proxy).$message_received,r.$$p=s.$to_proc(),r).apply(a,[o.$method_name()].concat(e.to_a(l)))}),e.defn(_,"$restore_original_method",function(){var e,t=this;return(e=t.$object_singleton_class()["$frozen?"]())===n||e.$$is_boolean&&1!=e?(e=t.method_is_proxied)===n||e.$$is_boolean&&1!=e?n:(t.$definition_target().$__send__("remove_method",t.method_name),(e=t.method_stasher["$method_is_stashed?"]())===n||e.$$is_boolean&&1!=e||t.method_stasher.$restore(),t.$restore_original_visibility(),t.method_is_proxied=!1):t.$show_frozen_warning()}),e.defn(_,"$show_frozen_warning",function(){var e=this;return d.get("RSpec").$warn_with("WARNING: rspec-mocks was unable to restore the original `"+e.method_name+"` "+("method on "+e.object.$inspect()+" because it has been frozen.  If you reuse this ")+("object, `"+e.method_name+"` will continue to respond with its stub implementation."),$(["call_site","use_spec_location_as_call_site"],{call_site:n,use_spec_location_as_call_site:!0}))}),e.defn(_,"$restore_original_visibility",function(){var t,r,a=this;return r=a.original_visibility,(t=r!==!1&&r!==n?d.get("MethodReference")["$method_defined_at_any_visibility?"](a.$object_singleton_class(),a.method_name):r)===n||t.$$is_boolean&&1!=t?n:(t=a.$object_singleton_class()).$__send__.apply(t,e.to_a(a.original_visibility))}),e.defn(_,"$verify",function(){var e,t,r,a=this;return(e=(t=a.$expectations()).$each,e.$$p=(r=function(e){r.$$s||this;return null==e&&(e=n),e.$verify_messages_received()},r.$$s=a,r),e).call(t)}),e.defn(_,"$reset",function(){var e=this;return e.$restore_original_method(),e.$clear()}),e.defn(_,"$clear",function(){var e=this;return e.$expectations().$clear(),e.$stubs().$clear()}),e.defn(_,"$message_expectation_class",function(){return d.get("MessageExpectation")}),e.defn(_,"$add_expectation",s=function(e,t,r,a){var o,$,i=this,c=s.$$p,u=c||n,l=n;return s.$$p=null,i.$configure_method(),l=(o=($=i.$message_expectation_class()).$new,o.$$p=u.$to_proc(),o).call($,e,t,r,i,"expectation",a),i.$expectations()["$<<"](l),l}),e.defn(_,"$build_expectation",function(e,t){var r=this,a=n;return a=d.get("IGNORED_BACKTRACE_LINE"),r.$message_expectation_class().$new(e,t,a,r)}),e.defn(_,"$add_stub",c=function(e,t,r,a){var o,i,s=this,u=c.$$p,l=u||n,_=n;return null==a&&(a=$([],{})),c.$$p=null,s.$configure_method(),_=(o=(i=s.$message_expectation_class()).$new,o.$$p=l.$to_proc(),o).call(i,e,t,r,s,"stub",a),s.$stubs().$unshift(_),_}),e.defn(_,"$add_simple_stub",function(e,t){var n=this;return n.$setup_simple_method_double(e,t,n.$stubs())}),e.defn(_,"$add_simple_expectation",function(e,t,n,r){var a=this;return a.$setup_simple_method_double(e,t,a.$expectations(),n,r)}),e.defn(_,"$setup_simple_method_double",function(e,t,r,a,o){var $=this,i=n;return null==a&&(a=n),null==o&&(o=n),$.$define_proxy_method(),i=d.get("SimpleMessageExpectation").$new(e,t,a,o),r.$unshift(i),i}),e.defn(_,"$add_default_stub",u=function(){var t,r,a=this,o=u.$$p,$=o||n,i=n,s=arguments.length-0;0>s&&(s=0);var c=new Array(s);for(i=0;s>i;i++)c[i]=arguments[i+0];return u.$$p=null,(t=a.$stubs()["$any?"]())===n||t.$$is_boolean&&1!=t?(t=(r=a).$add_stub,t.$$p=$.$to_proc(),t).apply(r,e.to_a(c)):n}),e.defn(_,"$remove_stub",function(){var e,t=this;return(e=t.$stubs()["$empty?"]())===n||e.$$is_boolean&&1!=e||t.$raise_method_not_stubbed_error(),t.$remove_stub_if_present()}),e.defn(_,"$remove_stub_if_present",function(){var e,t=this;return(e=t.$expectations()["$empty?"]())===n||e.$$is_boolean&&1!=e?t.$stubs().$clear():t.$reset()}),e.defn(_,"$raise_method_not_stubbed_error",function(){var e=this;return e.$raise(d.get("MockExpectationError"),"The method `"+e.$method_name()+"` was not stubbed or was already unstubbed")}),(l=d.get("Support").$$scope.get("RubyFeatures")["$module_prepends_supported?"]())===n||l.$$is_boolean&&1!=l?(_.$private(),e.defn(_,"$definition_target",function(){var e=this;return e.$object_singleton_class()}),n&&"definition_target"):(_.$private(),e.cdecl(d,"RSpecPrependedModule",d.get("Class").$new(d.get("Module"))),e.defn(_,"$definition_target",function(){var e,t,r=this;return(e=r.definition_target)!==!1&&e!==n?e:r.definition_target=(t=r.$usable_rspec_prepended_module())!==!1&&t!==n?t:r.$object_singleton_class()}),e.defn(_,"$usable_rspec_prepended_module",function(){try{var t,r,a,o=this;return(t=(r=o.proxy.$prepended_modules_of_singleton_class()).$each,t.$$p=(a=function(t){var r,o=a.$$s||this;return null==t&&(t=n),(r=d.get("RSpecPrependedModule")["$==="](t))===n||r.$$is_boolean&&1!=r||e.ret(t),(r=t["$method_defined?"](o.$method_name()))===n||r.$$is_boolean&&1!=r?n:void e.ret(o.$new_rspec_prepended_module())},a.$$s=o,a),t).call(r),n}catch($){if($===e.returner)return $.$v;throw $}}),e.defn(_,"$new_rspec_prepended_module",function(){var e,t,r,a=this;return(e=(t=d.get("RSpecPrependedModule").$new()).$tap,e.$$p=(r=function(e){var t=r.$$s||this;return null==e&&(e=n),t.$object_singleton_class().$__send__("prepend",e)},r.$$s=a,r),e).call(t)}),n&&"new_rspec_prepended_module")}(c.base,null)}(c.base)}(t.base)},Opal.modules["rspec/mocks/method_reference"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}e.dynamic_require_severity="ignore";var n=(e.top,e),r=e.nil,a=e.breaker,o=(e.slice,e.module),$=e.klass;return e.add_stubs(["$when_loaded","$method_implemented?","$!","$implemented?","$method_defined?","$original_method","$new","$visibility_from","$private","$defined?","$find_method","$public_method_defined?","$private_method_defined?","$protected_method_defined?","$tap","$nil?","$respond_to?","$instance_method_visibility_for","$method_defined_at_any_visibility?","$==","$<","$to_i","$[]","$split","$instance_method","$dup","$method","$method_visibility_for"]),function(n){var i,s=i=o(n,"RSpec"),c=(s.$$proto,s.$$scope);!function(n){var i,s=i=o(n,"Mocks"),c=(s.$$proto,s.$$scope);!function(t,$super){function n(){}var o,i=n=$(t,$super,"MethodReference",n),s=i.$$proto,c=i.$$scope;return s.object_reference=r,e.defn(i,"$initialize",function(e,t){var n=this;return n.object_reference=e,n.method_name=t}),e.defn(i,"$implemented?",function(){var e,t,n,a=this;return(e=(t=a.object_reference).$when_loaded,e.$$p=(n=function(e){var t=n.$$s||this;return null==e&&(e=r),t["$method_implemented?"](e)},n.$$s=a,n),e).call(t)}),e.defn(i,"$unimplemented?",function(){try{var t,n,a,o=this;return(t=(n=o.object_reference).$when_loaded,t.$$p=(a=function(t){var n=a.$$s||this;null==t&&(t=r),e.ret(n["$implemented?"]()["$!"]())},a.$$s=o,a),t).call(n),!1}catch($){if($===e.returner)return $.$v;throw $}}),e.defn(i,"$defined?",function(){var e,t,n,a=this;return(e=(t=a.object_reference).$when_loaded,e.$$p=(n=function(e){var t=n.$$s||this;return null==e&&(e=r),t["$method_defined?"](e)},n.$$s=a,n),e).call(t)}),e.defn(i,"$with_signature",o=function(){var t,n=this,$=o.$$p,i=$||r,s=r;return o.$$p=null,(t=s=n.$original_method())===r||t.$$is_boolean&&1!=t?r:(t=e.yield1(i,c.get("Support").$$scope.get("MethodSignature").$new(s)),t===a?t:t)}),e.defn(i,"$visibility",function(){try{var t,n,a,o=this;return(t=(n=o.object_reference).$when_loaded,t.$$p=(a=function(t){var n=a.$$s||this;null==t&&(t=r),e.ret(n.$visibility_from(t))},a.$$s=o,a),t).call(n),"public"}catch($){if($===e.returner)return $.$v;throw $}}),i.$private(),e.defn(i,"$original_method",function(){var e,t,n,a=this;return(e=(t=a.object_reference).$when_loaded,e.$$p=(n=function(e){var t,a=n.$$s||this;return null==e&&(e=r),t=a["$defined?"](),t!==!1&&t!==r?a.$find_method(e):t},n.$$s=a,n),e).call(t)}),e.defs(i,"$instance_method_visibility_for",function(e,t){var n;return(n=e["$public_method_defined?"](t))===r||n.$$is_boolean&&1!=n?(n=e["$private_method_defined?"](t))===r||n.$$is_boolean&&1!=n?(n=e["$protected_method_defined?"](t))===r||n.$$is_boolean&&1!=n?r:"protected":"private":"public"}),function(t){t.$$scope,t.$$proto;return e.alias(t,"method_defined_at_any_visibility?","instance_method_visibility_for")}(e.get_singleton_class(i)),e.defs(i,"$method_visibility_for",function(t,n){try{var a,o,$,i=this;return(a=(o=i.$instance_method_visibility_for(function(e){e.$$scope,e.$$proto;return e}(e.get_singleton_class(t)),n)).$tap,a.$$p=($=function(a){var o,i;$.$$s||this;return null==a&&(a=r),i=a["$nil?"](),(o=i!==!1&&i!==r?t["$respond_to?"](n,!1):i)===r||o.$$is_boolean&&1!=o?r:void e.ret("public")},$.$$s=i,$),a).call(o)}catch(s){if(s===e.returner)return s.$v;throw s}}),r&&"method_visibility_for"}(c.base,null),function(n,$super){function a(){}var o,i,s=a=$(n,$super,"InstanceMethodReference",a),c=s.$$proto,u=s.$$scope;return c.method_name=r,s.$private(),e.defn(s,"$method_implemented?",function(e){var t=this;return u.get("MethodReference")["$method_defined_at_any_visibility?"](e,t.method_name)}),e.alias(s,"method_defined?","method_implemented?"),(o=(i=u.get("RUBY_PLATFORM")["$=="]("java"))?t(u.get("JRUBY_VERSION").$split(".")["$[]"](-1).$to_i(),5):u.get("RUBY_PLATFORM")["$=="]("java"))===r||o.$$is_boolean&&1!=o?e.defn(s,"$find_method",function(e){var t=this;return e.$instance_method(t.method_name);
}):e.defn(s,"$find_method",function(e){var t=this;return e.$dup().$instance_method(t.method_name)}),e.defn(s,"$visibility_from",function(e){var t=this;return u.get("MethodReference").$instance_method_visibility_for(e,t.method_name)}),r&&"visibility_from"}(c.base,c.get("MethodReference")),function(t,$super){function n(){}var a=n=$(t,$super,"ObjectMethodReference",n),o=a.$$proto,i=a.$$scope;return o.method_name=r,a.$private(),e.defn(a,"$method_implemented?",function(e){var t=this;return e["$respond_to?"](t.method_name,!0)}),e.defn(a,"$method_defined?",function(t){var n=this;return function(e){e.$$scope,e.$$proto;return e}(e.get_singleton_class(t))["$method_defined?"](n.method_name)}),e.defn(a,"$find_method",function(e){var t=this;return e.$method(t.method_name)}),e.defn(a,"$visibility_from",function(e){var t=this;return i.get("MethodReference").$method_visibility_for(e,t.method_name)}),r&&"visibility_from"}(c.base,c.get("MethodReference"))}(c.base)}(n.base)},Opal.modules["rspec/mocks/mutate_const"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="ignore";var r=(e.top,e),a=e.nil,o=(e.breaker,e.slice,e.module),$=e.klass,i=e.hash2,s=e.hash;return e.add_stubs(["$require_rspec_support","$extend","$attr_reader","$attr_accessor","$attr_writer","$name","$class","$new","$previously_defined=","$recursive_const_defined?","$stubbed=","$hidden=","$previously_defined?","$original_value=","$recursive_const_get","$constant_mutator_for","$space","$to_constant","$unmutated","$to_proc","$raise_on_invalid_const","$mutate","$[]","$include","$normalize_const_name","$split","$pop","$full_constant_name","$original_value","$reset","$join","$get_const_defined_on","$__send__","$const_set","$verify_constants_to_transfer!","$transfer_nested_constants","$each","$should_transfer_nested_constants?","$respond_to?","$raise","$===","$==","$map","$-","$constants_defined_on","$any?","$transfer_nested_constants?","$configuration","$inject","$const_defined_on?","$stub","$name_for","$private","$+","$register_constant_mutator","$lambda"]),r.get("RSpec").$$scope.get("Support").$require_rspec_support("recursive_const_methods"),function(r){var c,u=c=o(r,"RSpec"),l=(u.$$proto,u.$$scope);!function(r){var c,u=c=o(r,"Mocks"),l=(u.$$proto,u.$$scope);!function(t,$super){function n(){}var r=n=$(t,$super,"Constant",n),o=r.$$proto,i=r.$$scope;return o.previously_defined=o.stubbed=o.hidden=a,r.$extend(i.get("Support").$$scope.get("RecursiveConstMethods")),e.defn(r,"$initialize",function(e){var t=this;return t.name=e,t.previously_defined=!1,t.stubbed=!1,t.hidden=!1}),r.$attr_reader("name"),r.$attr_accessor("original_value"),r.$attr_writer("previously_defined","stubbed","hidden"),e.defn(r,"$previously_defined?",function(){var e=this;return e.previously_defined}),e.defn(r,"$mutated?",function(){var e,t=this;return(e=t.stubbed)!==!1&&e!==a?e:t.hidden}),e.defn(r,"$stubbed?",function(){var e=this;return e.stubbed}),e.defn(r,"$hidden?",function(){var e=this;return e.hidden}),e.defn(r,"$to_s",function(){var e=this;return"#<"+e.$class().$name()+" "+e.$name()+">"}),e.alias(r,"inspect","to_s"),e.defs(r,"$unmutated",function(e){var t,n,r=this,o=a;return o=r.$new(e),t=[r["$recursive_const_defined?"](e)],n=o,n["$previously_defined="].apply(n,t),t[t.length-1],t=[!1],n=o,n["$stubbed="].apply(n,t),t[t.length-1],t=[!1],n=o,n["$hidden="].apply(n,t),t[t.length-1],(t=o["$previously_defined?"]())===a||t.$$is_boolean&&1!=t||(t=[r.$recursive_const_get(e)],n=o,n["$original_value="].apply(n,t),t[t.length-1]),o}),e.defs(r,"$original",function(t){var n=this,r=a;return r=e.get("RSpec").$$scope.get("Mocks").$space().$constant_mutator_for(t),r!==!1&&r!==a?r.$to_constant():n.$unmutated(t)}),a&&"original"}(l.base,null),function(r,$super){function o(){}var c=o=$(r,$super,"ConstantMutator",o),u=(c.$$proto,c.$$scope);return c.$extend(u.get("Support").$$scope.get("RecursiveConstMethods")),e.defs(c,"$stub",function(e,t,n){var r,o,$,s=this,c=a;return null==n&&(n=i([],{})),c=function(){return(r=(o=($=s)["$recursive_const_defined?"],o.$$p=s.$raise_on_invalid_const().$to_proc(),o).call($,e))===a||r.$$is_boolean&&1!=r?u.get("UndefinedConstantSetter"):u.get("DefinedConstantReplacer")}(),s.$mutate(c.$new(e,t,n["$[]"]("transfer_nested_constants"))),t}),e.defs(c,"$hide",function(e){var t=this;return t.$mutate(u.get("ConstantHider").$new(e,a,i([],{}))),a}),function(t,$super){function n(){}var r=n=$(t,$super,"BaseMutator",n),o=r.$$proto,i=r.$$scope;return o.full_constant_name=o.context_parts=o.reset_performed=a,r.$include(i.get("Support").$$scope.get("RecursiveConstMethods")),r.$attr_reader("original_value","full_constant_name"),e.defn(r,"$initialize",function(e,t,n){var r=this;return r.full_constant_name=r.$normalize_const_name(e),r.mutated_value=t,r.transfer_nested_constants=n,r.context_parts=r.full_constant_name.$split("::"),r.const_name=r.context_parts.$pop(),r.reset_performed=!1}),e.defn(r,"$to_constant",function(){var e,t,n=this,r=a;return r=i.get("Constant").$new(n.$full_constant_name()),e=[n.$original_value()],t=r,t["$original_value="].apply(t,e),e[e.length-1],r}),e.defn(r,"$idempotently_reset",function(){var e,t=this;return((e=t.reset_performed)===a||e.$$is_boolean&&1!=e)&&t.$reset(),t.reset_performed=!0}),a&&"idempotently_reset"}(u.base,null),function(t,$super){function n(){}var r,o=n=$(t,$super,"ConstantHider",n),i=o.$$proto,s=o.$$scope;return i.context_parts=i.context=i.const_name=i.defined=i.original_value=a,e.defn(o,"$mutate",function(){var e,t=this;return(e=t.defined=t["$recursive_const_defined?"](t.$full_constant_name()))===a||e.$$is_boolean&&1!=e?a:(t.context=t.$recursive_const_get(t.context_parts.$join("::")),t.original_value=t.$get_const_defined_on(t.context,t.const_name),t.context.$__send__("remove_const",t.const_name))}),e.defn(o,"$to_constant",r=function(){var t,n,o=this,$=r.$$p,i=a,c=a,u=a;for(r.$$p=null,c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];return(t=o.defined)===a||t.$$is_boolean&&1!=t?s.get("Constant").$unmutated(o.$full_constant_name()):(i=e.find_super_dispatcher(o,"to_constant",r,$).apply(o,c),t=[!0],n=i,n["$hidden="].apply(n,t),t[t.length-1],t=[!0],n=i,n["$previously_defined="].apply(n,t),t[t.length-1],i)}),e.defn(o,"$reset",function(){var e,t=this;return(e=t.defined)===a||e.$$is_boolean&&1!=e?a:t.context.$const_set(t.const_name,t.original_value)}),a&&"reset"}(u.base,u.get("BaseMutator")),function(n,$super){function r(){}var o,i,c=r=$(n,$super,"DefinedConstantReplacer",r),u=c.$$proto,l=c.$$scope;return u.context_parts=u.context=u.const_name=u.mutated_value=u.constants_to_transfer=u.original_value=u.transfer_nested_constants=u.full_constant_name=a,e.defn(c,"$initialize",o=function(){var t=this,n=o.$$p,r=a,$=a,i=a,s=arguments.length-0;0>s&&(s=0);var c=new Array(s);for(r=0;s>r;r++)c[r]=arguments[r+0];for(o.$$p=null,$=[],i=0;i<arguments.length;i++)$[i]=arguments[i];return e.find_super_dispatcher(t,"initialize",o,n).apply(t,$),t.constants_to_transfer=[]}),e.defn(c,"$mutate",function(){var e=this;return e.context=e.$recursive_const_get(e.context_parts.$join("::")),e.original_value=e.$get_const_defined_on(e.context,e.const_name),e.constants_to_transfer=e["$verify_constants_to_transfer!"](),e.context.$__send__("remove_const",e.const_name),e.context.$const_set(e.const_name,e.mutated_value),e.$transfer_nested_constants()}),e.defn(c,"$to_constant",i=function(){var t,n,r=this,o=i.$$p,$=a,s=a,c=a;for(i.$$p=null,s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];return $=e.find_super_dispatcher(r,"to_constant",i,o).apply(r,s),t=[!0],n=$,n["$stubbed="].apply(n,t),t[t.length-1],t=[!0],n=$,n["$previously_defined="].apply(n,t),t[t.length-1],$}),e.defn(c,"$reset",function(){var e,t,n,r=this;return(e=(t=r.constants_to_transfer).$each,e.$$p=(n=function(e){var t=n.$$s||this;return null==t.mutated_value&&(t.mutated_value=a),null==e&&(e=a),t.mutated_value.$__send__("remove_const",e)},n.$$s=r,n),e).call(t),r.context.$__send__("remove_const",r.const_name),r.context.$const_set(r.const_name,r.original_value)}),e.defn(c,"$transfer_nested_constants",function(){var e,t,n,r=this;return(e=(t=r.constants_to_transfer).$each,e.$$p=(n=function(e){var t=n.$$s||this;return null==t.mutated_value&&(t.mutated_value=a),null==e&&(e=a),t.mutated_value.$const_set(e,t.$get_const_defined_on(t.$original_value(),e))},n.$$s=r,n),e).call(t)}),e.defn(c,"$verify_constants_to_transfer!",function(){var e,n,r,o,$=this,i=a,c=a;return(e=$["$should_transfer_nested_constants?"]())===a||e.$$is_boolean&&1!=e?[]:((e=(n=s($.original_value,"the original value",$.mutated_value,"the stubbed value")).$each,e.$$p=(r=function(e,t){var n,o=r.$$s||this;return null==o.full_constant_name&&(o.full_constant_name=a),null==e&&(e=a),null==t&&(t=a),(n=e["$respond_to?"]("constants"))===a||n.$$is_boolean&&1!=n?o.$raise(l.get("ArgumentError"),"Cannot transfer nested constants for "+o.full_constant_name+" "+("since "+t+" is not a class or module and only classes ")+"and modules support nested constants."):a},r.$$s=$,r),e).call(n),(e=l.get("Array")["$==="]($.transfer_nested_constants))===a||e.$$is_boolean&&1!=e?$.$constants_defined_on($.original_value):(l.get("RUBY_VERSION")["$=="]("1.8.7")&&($.transfer_nested_constants=(e=(o=$.transfer_nested_constants).$map,e.$$p="to_s".$to_proc(),e).call(o)),i=t($.transfer_nested_constants,$.$constants_defined_on($.original_value)),(e=i["$any?"]())===a||e.$$is_boolean&&1!=e||(c=t($.$constants_defined_on($.original_value),$.transfer_nested_constants),$.$raise(l.get("ArgumentError"),"Cannot transfer nested constant(s) "+i.$join(" and ")+" "+("for "+$.full_constant_name+" since they are not defined. Did you mean ")+(""+c.$join(" or ")+"?"))),$.transfer_nested_constants))}),e.defn(c,"$should_transfer_nested_constants?",function(){var e,t=this;return(e=t.transfer_nested_constants)===a||e.$$is_boolean&&1!=e?(e=l.get("RSpec").$$scope.get("Mocks").$configuration()["$transfer_nested_constants?"]())===a||e.$$is_boolean&&1!=e?!1:(e=t.original_value["$respond_to?"]("constants"),e!==!1&&e!==a?t.mutated_value["$respond_to?"]("constants"):e):!0}),a&&"should_transfer_nested_constants?"}(u.base,u.get("BaseMutator")),function(t,$super){function r(){}var o,i=r=$(t,$super,"UndefinedConstantSetter",r),s=i.$$proto,c=i.$$scope;return s.context_parts=s.parent=s.const_name=s.mutated_value=a,e.defn(i,"$mutate",function(){var e,t,n,r=this;return r.parent=(e=(t=r.context_parts).$inject,e.$$p=(n=function(e,t){var r,o=n.$$s||this;return null==e&&(e=a),null==t&&(t=a),(r=o["$const_defined_on?"](e,t))===a||r.$$is_boolean&&1!=r?c.get("ConstantMutator").$stub(o.$name_for(e,t),c.get("Module").$new()):o.$get_const_defined_on(e,t)},n.$$s=r,n),e).call(t,c.get("Object")),r.parent.$const_set(r.const_name,r.mutated_value)}),e.defn(i,"$to_constant",o=function(){var t,n,r=this,$=o.$$p,i=a,s=a,c=a;for(o.$$p=null,s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];return i=e.find_super_dispatcher(r,"to_constant",o,$).apply(r,s),t=[!0],n=i,n["$stubbed="].apply(n,t),t[t.length-1],t=[!1],n=i,n["$previously_defined="].apply(n,t),t[t.length-1],i}),e.defn(i,"$reset",function(){var e=this;return e.parent.$__send__("remove_const",e.const_name)}),i.$private(),e.defn(i,"$name_for",function(e,t){var r=a;return r=function(){return e["$=="](c.get("Object"))?"":e.$name()}(),n(n(r,"::"),t)}),a&&"name_for"}(u.base,u.get("BaseMutator")),e.defs(c,"$mutate",function(t){return e.get("RSpec").$$scope.get("Mocks").$space().$register_constant_mutator(t),t.$mutate()}),e.defs(c,"$raise_on_invalid_const",function(){var e,t,n,r=this;return(e=(t=r).$lambda,e.$$p=(n=function(e,t){var r=n.$$s||this;return null==e&&(e=a),null==t&&(t=a),r.$raise("Cannot stub constant "+t+" on "+e+" "+("since "+e+" is not a module."))},n.$$s=r,n),e).call(t)}),a&&"raise_on_invalid_const"}(l.base,null)}(l.base)}(r.base)},Opal.modules["rspec/mocks/object_reference"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=e.breaker,a=(e.slice,e.module),o=e.klass;return e.add_stubs(["$===","$new","$raise","$inspect","$name","$!","$object","$private","$original_value","$original"]),function(t){var $,i=$=a(t,"RSpec"),s=(i.$$proto,i.$$scope);!function(t){var $,i=$=a(t,"Mocks"),s=(i.$$proto,i.$$scope);!function(t,$super){function r(){}var a=r=o(t,$super,"ObjectReference",r),$=(a.$$proto,a.$$scope);return e.defs(a,"$for",function(e,t){var r=this,a=n;return null==t&&(t=!1),function(){return a=e,$.get("Module")["$==="](a)?$.get("DirectModuleReference").$new(e):$.get("String")["$==="](a)?$.get("NamedObjectReference").$new(e):t!==!1&&t!==n?$.get("DirectObjectReference").$new(e):r.$raise($.get("ArgumentError"),"Module or String expected, got "+e.$inspect())}()}),n&&"for"}(s.base,null),function(t,$super){function a(){}var $,i=a=o(t,$super,"DirectObjectReference",a),s=i.$$proto,c=i.$$scope;return s.object=n,e.defn(i,"$initialize",function(e){var t=this;return t.object=e}),e.defn(i,"$description",function(){var e=this;return e.object.$inspect()}),e.defn(i,"$const_to_replace",function(){var e=this;return e.$raise(c.get("ArgumentError"),"Can not perform constant replacement with an object.")}),e.defn(i,"$defined?",function(){return!0}),e.defn(i,"$when_loaded",$=function(){var t,a=this,o=$.$$p,i=o||n;return $.$$p=null,t=e.yield1(i,a.object),t===r?t:t}),n&&"when_loaded"}(s.base,null),function(t,$super){function r(){}var a=r=o(t,$super,"DirectModuleReference",r),$=a.$$proto;a.$$scope;return $.object=n,e.defn(a,"$const_to_replace",function(){var e=this;return e.object.$name()}),e.alias(a,"description","const_to_replace")}(s.base,s.get("DirectObjectReference")),function(t,$super){function a(){}var $,i=a=o(t,$super,"NamedObjectReference",a),s=i.$$proto,c=i.$$scope;return s.const_name=s.object=n,e.defn(i,"$initialize",function(e){var t=this;return t.const_name=e}),e.defn(i,"$defined?",function(){var e=this;return e.$object()["$!"]()["$!"]()}),e.defn(i,"$const_to_replace",function(){var e=this;return e.const_name}),e.alias(i,"description","const_to_replace"),e.defn(i,"$when_loaded",$=function(){var t,a=this,o=$.$$p,i=o||n;return $.$$p=null,(t=a.$object())===n||t.$$is_boolean&&1!=t?n:(t=e.yield1(i,a.$object()),t===r?t:t)}),i.$private(),e.defn(i,"$object",function(){var e,t=this;return(e=t.object)!==!1&&e!==n?e:t.object=c.get("Constant").$original(t.const_name).$original_value()}),n&&"object"}(s.base,null)}(s.base)}(t.base)},Opal.modules["rspec/mocks/order_group"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="ignore";var n=(e.top,e),r=e.nil,a=(e.breaker,e.slice,e.module),o=e.klass,$=e.range;return e.add_stubs(["$<<","$==","$find","$to_proc","$remaining_expectations","$each_with_index","$ordered?","$+","$include?","$ready_for?","$consume","$raise_out_of_order_error","$expectations_invoked_in_order?","$clear","$empty?","$private","$[]","$invoked_expectations","$expected_invocations","$select","$compact","$map","$expectation_for"]),function(n){var i,s=i=a(n,"RSpec"),c=(s.$$proto,s.$$scope);!function(n){var i,s=i=a(n,"Mocks"),c=(s.$$proto,s.$$scope);!function(n,$super){function a(){}var i=a=o(n,$super,"OrderGroup",a),s=i.$$proto;i.$$scope;return s.expectations=s.invocation_order=s.index=r,e.defn(i,"$initialize",function(){var e=this;return e.expectations=[],e.invocation_order=[],e.index=0}),e.defn(i,"$register",function(e){var t=this;return t.expectations["$<<"](e)}),e.defn(i,"$invoked",function(e){var t=this;return t.invocation_order["$<<"](e)}),e.defn(i,"$ready_for?",function(e){var t,n,r=this;return(t=(n=r.$remaining_expectations()).$find,t.$$p="ordered?".$to_proc(),t).call(n)["$=="](e)}),e.defn(i,"$consume",function(){try{var n,a,o,$=this;return(n=(a=$.$remaining_expectations()).$each_with_index,n.$$p=(o=function(n,a){var $,i=o.$$s||this;return null==i.index&&(i.index=r),null==n&&(n=r),null==a&&(a=r),($=n["$ordered?"]())===r||$.$$is_boolean&&1!=$?r:(i.index=t(i.index,t(a,1)),void e.ret(n))},o.$$s=$,o),n).call(a),r}catch(i){if(i===e.returner)return i.$v;throw i}}),e.defn(i,"$handle_order_constraint",function(e){var t,n,a=this;return n=e["$ordered?"](),(t=n!==!1&&n!==r?a.$remaining_expectations()["$include?"](e):n)===r||t.$$is_boolean&&1!=t?r:(t=a["$ready_for?"](e))===r||t.$$is_boolean&&1!=t?e.$raise_out_of_order_error():a.$consume()}),e.defn(i,"$verify_invocation_order",function(e){var t,n=this;return((t=n["$expectations_invoked_in_order?"]())===r||t.$$is_boolean&&1!=t)&&e.$raise_out_of_order_error(),!0}),e.defn(i,"$clear",function(){var e=this;return e.index=0,e.invocation_order.$clear(),e.expectations.$clear()}),e.defn(i,"$empty?",function(){var e=this;return e.expectations["$empty?"]()}),i.$private(),e.defn(i,"$remaining_expectations",function(){var e,t=this;return(e=t.expectations["$[]"]($(t.index,-1,!1)))!==!1&&e!==r?e:[]}),e.defn(i,"$expectations_invoked_in_order?",function(){var e=this;return e.$invoked_expectations()["$=="](e.$expected_invocations())}),e.defn(i,"$invoked_expectations",function(){var e,t,n,a=this;return(e=(t=a.expectations).$select,e.$$p=(n=function(e){var t,a=n.$$s||this;return null==a.invocation_order&&(a.invocation_order=r),null==e&&(e=r),t=e["$ordered?"](),t!==!1&&t!==r?a.invocation_order["$include?"](e):t},n.$$s=a,n),e).call(t)}),e.defn(i,"$expected_invocations",function(){var e,t,n,a=this;return(e=(t=a.invocation_order).$map,e.$$p=(n=function(e){var t=n.$$s||this;return null==e&&(e=r),t.$expectation_for(e)},n.$$s=a,n),e).call(t).$compact()}),e.defn(i,"$expectation_for",function(e){var t,n,a,o=this;return(t=(n=o.expectations).$find,t.$$p=(a=function(t){a.$$s||this;return null==t&&(t=r),e["$=="](t)},a.$$s=o,a),t).call(n)}),r&&"expectation_for"}(c.base,null)}(c.base)}(n.base)},Opal.modules["rspec/mocks/proxy"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=e.breaker,a=(e.slice,e.module),o=e.klass,$=e.hash2;return e.add_stubs(["$new","$==","$orig_object","$object","$matches?","$message","$args","$[]=","$attr_reader","$fetch","$first_non_rspec_line","$method_double_for","$null_object?","$!","$add_default_stub","$add_expectation","$to_proc","$add_simple_expectation","$build_expectation","$any?","$expectations","$raise_expectation_on_mocked_method","$stubs","$raise_expectation_on_unstubbed_method","$each","$safe_invoke","$call","$matches_name_but_not_args","$raise_unexpected_message_args_error","$add_stub","$add_simple_stub","$remove_stub","$remove_stub_if_present","$each_value","$verify","$clear","$find","$negative_expectation_for?","$invoked","$<<","$record_message_received","$find_matching_expectation","$find_matching_method_stub","$called_max_times?","$actual_received_count_matters?","$increase_actual_received_count!","$find_almost_matching_expectation","$expected_messages_received?","$advise","$invoke","$has_negative_expectation?","$find_almost_matching_stub","$raise_missing_default_stub_error","$===","$__send__","$superclass","$raise_unexpected_message_error","$module_prepends_supported?","$ancestors","$index","$[]","$prepended_modules_of","$singleton_class","$private","$to_sym","$find_best_matching_expectation_for","$__disallow_further_usage!","$any_instance_class_recorder_observing_method?","$class","$build_alias_method_name","$any_instance_recorder_for","$space","$method_handle_for","$configure_method","$method_visibility_for","$reset","$notify_received_message","$any_instance_recorders_from_ancestry_of","$already_observing?","$nil?","$superclass_proxy","$original_unbound_method_handle_from_ancestor_for","$bind","$protected","$unbind","$original_method","$proxy_for","$include","$attr_accessor","$warn_about_expectations?","$warn"]),function(t){var i,s=i=a(t,"RSpec"),c=(s.$$proto,s.$$scope);!function(t){var i,s=i=a(t,"Mocks"),c=(s.$$proto,s.$$scope);!function(t,$super){function a(){}var i,s,c,u,l,_,p,d,f,g,h=a=o(t,$super,"Proxy",a),m=h.$$proto,v=h.$$scope;return m.null_object=m.object=m.error_generator=m.order_group=m.messages_received=m.method_doubles=m.prepended_modules_of_singleton_class=n,e.cdecl(v,"SpecificMessage",(i=(s=v.get("Struct")).$new,i.$$p=(c=function(){var t=c.$$s||this;return e.def(t,"$==",function(t){var n,r,a=this;return(n=t.$orig_object()["$=="](a.$object()))?(r=t)["$matches?"].apply(r,[a.$message()].concat(e.to_a(a.$args()))):t.$orig_object()["$=="](a.$object())}),n&&"=="},c.$$s=h,c),i).call(s,"object","message","args")),e.defn(h,"$ensure_implemented",function(){var e=n,t=arguments.length-0;0>t&&(t=0);var r=new Array(t);for(e=0;t>e;e++)r[e]=arguments[e+0];return n}),e.defn(h,"$initialize",function(e,t,r,a){var o,i,s,c=this;return null==r&&(r=n),null==a&&(a=$([],{})),c.object=e,c.order_group=t,c.name=r,c.error_generator=v.get("ErrorGenerator").$new(e,r),c.messages_received=[],c.options=a,c.null_object=!1,c.method_doubles=(o=(i=v.get("Hash")).$new,o.$$p=(s=function(e,t){var r=s.$$s||this;return null==r.object&&(r.object=n),null==e&&(e=n),null==t&&(t=n),e["$[]="](t,v.get("MethodDouble").$new(r.object,t,r))},s.$$s=c,s),o).call(i)}),h.$attr_reader("object"),e.defn(h,"$null_object?",function(){var e=this;return e.null_object}),e.defn(h,"$as_null_object",function(){var e=this;return e.null_object=!0,e.object}),e.defn(h,"$original_method_handle_for",function(e){return n}),e.defn(h,"$add_message_expectation",u=function(e,t){var r,a,o,i,s,c,l=this,_=u.$$p,p=_||n,d=n,f=n;return null==t&&(t=$([],{})),u.$$p=null,d=(r=(a=t).$fetch,r.$$p=(o=function(){o.$$s||this;return v.get("CallerFilter").$first_non_rspec_line()},o.$$s=l,o),r).call(a,"expected_from"),f=l.$method_double_for(e),i=l["$null_object?"](),(r=i!==!1&&i!==n?p["$!"]():i)===n||r.$$is_boolean&&1!=r||(r=(i=f).$add_default_stub,r.$$p=(s=function(){var e=s.$$s||this;return null==e.object&&(e.object=n),e.object},s.$$s=l,s),r).call(i,l.error_generator,l.order_group,d,t),(r=(c=f).$add_expectation,r.$$p=p.$to_proc(),r).call(c,l.error_generator,l.order_group,d,t)}),e.defn(h,"$add_simple_expectation",function(e,t,n){var r=this;return r.$method_double_for(e).$add_simple_expectation(e,t,r.error_generator,n)}),e.defn(h,"$build_expectation",function(e){var t=this,r=n;return r=t.$method_double_for(e),r.$build_expectation(t.error_generator,t.order_group)}),e.defn(h,"$replay_received_message_on",l=function(t){var r,a,o,$=this,i=l.$$p,s=i||n,c=n,u=n;return l.$$p=null,c=t.$message(),u=$.$method_double_for(c),(r=u.$expectations()["$any?"]())===n||r.$$is_boolean&&1!=r||$.error_generator.$raise_expectation_on_mocked_method(c),((r=(a=$["$null_object?"]())!==!1&&a!==n?a:u.$stubs()["$any?"]())===n||r.$$is_boolean&&1!=r)&&$.error_generator.$raise_expectation_on_unstubbed_method(c),(r=(a=$.messages_received).$each,r.$$p=(o=function(r,a,$){var i,c;o.$$s||this;return null==r&&(r=n),null==a&&(a=n),null==$&&($=n),(i=(c=t)["$matches?"].apply(c,[r].concat(e.to_a(a))))===n||i.$$is_boolean&&1!=i?n:(t.$safe_invoke(n),s!==!1&&s!==n?(i=s).$call.apply(i,e.to_a(a)):n)},o.$$s=$,o),r).call(a)}),e.defn(h,"$check_for_unexpected_arguments",function(t){var r,a,o,$=this;return(r=(a=$.messages_received).$each,r.$$p=(o=function(r,a,$){var i,s,c=o.$$s||this;return null==r&&(r=n),null==a&&(a=n),null==$&&($=n),(i=(s=t).$matches_name_but_not_args.apply(s,[r].concat(e.to_a(a))))===n||i.$$is_boolean&&1!=i?n:(i=c).$raise_unexpected_message_args_error.apply(i,[t].concat(e.to_a(a)))},o.$$s=$,o),r).call(a)}),e.defn(h,"$add_stub",_=function(e,t){var r,a,o,i,s=this,c=_.$$p,u=c||n,l=n;return null==t&&(t=$([],{})),_.$$p=null,l=(r=(a=t).$fetch,r.$$p=(o=function(){o.$$s||this;return v.get("CallerFilter").$first_non_rspec_line()},o.$$s=s,o),r).call(a,"expected_from"),(r=(i=s.$method_double_for(e)).$add_stub,r.$$p=u.$to_proc(),r).call(i,s.error_generator,s.order_group,l,t)}),e.defn(h,"$add_simple_stub",function(e,t){var n=this;return n.$method_double_for(e).$add_simple_stub(e,t)}),e.defn(h,"$remove_stub",function(e){var t=this;return t.$method_double_for(e).$remove_stub()}),e.defn(h,"$remove_stub_if_present",function(e){var t=this;return t.$method_double_for(e).$remove_stub_if_present()}),e.defn(h,"$verify",function(){var e,t,r,a=this;return(e=(t=a.method_doubles).$each_value,e.$$p=(r=function(e){r.$$s||this;return null==e&&(e=n),e.$verify()},r.$$s=a,r),e).call(t)}),e.defn(h,"$reset",function(){var e=this;return e.messages_received.$clear()}),e.defn(h,"$received_message?",p=function(e){var t,r,a,o=this,$=p.$$p,i=$||n,s=n,c=arguments.length-1;0>c&&(c=0);var u=new Array(c);for(s=0;c>s;s++)u[s]=arguments[s+1];return p.$$p=null,(t=(r=o.messages_received)["$any?"],t.$$p=(a=function(t){a.$$s||this;return null==t&&(t=n),t["$=="]([e,u,i])},a.$$s=o,a),t).call(r)}),e.defn(h,"$has_negative_expectation?",function(e){var t,r,a,o=this;return(t=(r=o.$method_double_for(e).$expectations()).$find,t.$$p=(a=function(t){a.$$s||this;return null==t&&(t=n),t["$negative_expectation_for?"](e)},a.$$s=o,a),t).call(r)}),e.defn(h,"$record_message_received",d=function(e){var t=this,r=d.$$p,a=r||n,o=n,$=arguments.length-1;0>$&&($=0);var i=new Array($);for(o=0;$>o;o++)i[o]=arguments[o+1];return d.$$p=null,t.order_group.$invoked(v.get("SpecificMessage").$new(t.$object(),e,i)),t.messages_received["$<<"]([e,i,a])}),e.defn(h,"$message_received",f=function(t){var r,a,o,$,i,s,c,u,l,_,p,d,g,h,m,b,y=this,x=f.$$p,w=x||n,k=n,S=n,E=n,R=arguments.length-1;0>R&&(R=0);var A=new Array(R);for(E=0;R>E;E++)A[E]=arguments[E+1];return f.$$p=null,(r=(a=y).$record_message_received,r.$$p=w.$to_proc(),r).apply(a,[t].concat(e.to_a(A))),k=(r=y).$find_matching_expectation.apply(r,[t].concat(e.to_a(A))),S=(o=y).$find_matching_method_stub.apply(o,[t].concat(e.to_a(A))),s=(c=S!==!1&&S!==n)?k:S,($=(i=s!==!1&&s!==n?k["$called_max_times?"]():s)!==!1&&i!==n?i:(s=S!==!1&&S!==n)?k["$!"]():S)===n||$.$$is_boolean&&1!=$?k!==!1&&k!==n?(s=(u=k).$invoke,s.$$p=w.$to_proc(),s).apply(u,[S].concat(e.to_a(A))):(s=k=(l=y).$find_almost_matching_expectation.apply(l,[t].concat(e.to_a(A))))===n||s.$$is_boolean&&1!=s?(p=S=(d=y).$find_almost_matching_stub.apply(d,[t].concat(e.to_a(A))))===n||p.$$is_boolean&&1!=p?(h=v.get("Class")["$==="](y.object))===n||h.$$is_boolean&&1!=h?(h=(b=y.object).$__send__,h.$$p=w.$to_proc(),h).apply(b,["method_missing",t].concat(e.to_a(A))):(h=(m=y.object.$superclass()).$__send__,h.$$p=w.$to_proc(),h).apply(m,[t].concat(e.to_a(A))):((p=S).$advise.apply(p,e.to_a(A)),(g=y).$raise_missing_default_stub_error.apply(g,[S].concat(e.to_a(A)))):(((s=k["$expected_messages_received?"]())===n||s.$$is_boolean&&1!=s)&&((s=y["$null_object?"]())===n||s.$$is_boolean&&1!=s||(s=k).$advise.apply(s,e.to_a(A))),(_=(p=y["$null_object?"]())!==!1&&p!==n?p:y["$has_negative_expectation?"](t)["$!"]())===n||_.$$is_boolean&&1!=_?n:(_=y).$raise_unexpected_message_args_error.apply(_,[k].concat(e.to_a(A)))):(($=(i=k!==!1&&k!==n)?k["$actual_received_count_matters?"]():k)===n||$.$$is_boolean&&1!=$||k["$increase_actual_received_count!"](),($=k=(i=y).$find_almost_matching_expectation.apply(i,[t].concat(e.to_a(A))))===n||$.$$is_boolean&&1!=$||(($=k["$expected_messages_received?"]())===n||$.$$is_boolean&&1!=$)&&($=k).$advise.apply($,e.to_a(A)),(s=(c=S).$invoke,s.$$p=w.$to_proc(),s).apply(c,[n].concat(e.to_a(A))))}),e.defn(h,"$raise_unexpected_message_error",function(t){var r,a=this,o=n,$=arguments.length-1;0>$&&($=0);var i=new Array($);for(o=0;$>o;o++)i[o]=arguments[o+1];return(r=a.error_generator).$raise_unexpected_message_error.apply(r,[t].concat(e.to_a(i)))}),e.defn(h,"$raise_unexpected_message_args_error",function(t){var r,a=this,o=n,$=arguments.length-1;0>$&&($=0);var i=new Array($);for(o=0;$>o;o++)i[o]=arguments[o+1];return(r=a.error_generator).$raise_unexpected_message_args_error.apply(r,[t].concat(e.to_a(i)))}),e.defn(h,"$raise_missing_default_stub_error",function(t){var r,a=this,o=n,$=arguments.length-1;0>$&&($=0);var i=new Array($);for(o=0;$>o;o++)i[o]=arguments[o+1];return(r=a.error_generator).$raise_missing_default_stub_error.apply(r,[t].concat(e.to_a(i)))}),e.defn(h,"$visibility_for",function(e){return"public"}),(i=v.get("Support").$$scope.get("RubyFeatures")["$module_prepends_supported?"]())===n||i.$$is_boolean&&1!=i||(e.defs(h,"$prepended_modules_of",function(e){var t,r=n,a=n;return r=e.$ancestors(),a=(t=r.$index(e))!==!1&&t!==n?t:0,r["$[]"](0,a)}),e.defn(h,"$prepended_modules_of_singleton_class",function(){var e,t=this;return(e=t.prepended_modules_of_singleton_class)!==!1&&e!==n?e:t.prepended_modules_of_singleton_class=v.get("RSpec").$$scope.get("Mocks").$$scope.get("Proxy").$prepended_modules_of(t.object.$singleton_class())})),h.$private(),e.defn(h,"$method_double_for",function(e){var t=this;return t.method_doubles["$[]"](e.$to_sym())}),e.defn(h,"$find_matching_expectation",function(t){var r,a,o,$=this,i=n,s=arguments.length-1;0>s&&(s=0);var c=new Array(s);for(i=0;s>i;i++)c[i]=arguments[i+1];return(r=(a=$).$find_best_matching_expectation_for,r.$$p=(o=function(r){var a;o.$$s||this;return null==r&&(r=n),(a=r)["$matches?"].apply(a,[t].concat(e.to_a(c)))},o.$$s=$,o),r).call(a,t)}),e.defn(h,"$find_almost_matching_expectation",function(t){var r,a,o,$=this,i=n,s=arguments.length-1;0>s&&(s=0);var c=new Array(s);for(i=0;s>i;i++)c[i]=arguments[i+1];return(r=(a=$).$find_best_matching_expectation_for,r.$$p=(o=function(r){var a;o.$$s||this;return null==r&&(r=n),(a=r).$matches_name_but_not_args.apply(a,[t].concat(e.to_a(c)))},o.$$s=$,o),r).call(a,t)}),e.defn(h,"$find_best_matching_expectation_for",g=function(t){try{var a,o,$,i=this,s=g.$$p,c=s||n,u=n;return g.$$p=null,u=n,(a=(o=i.$method_double_for(t).$expectations()).$each,a.$$p=($=function(t){var a,o;$.$$s||this;return null==t&&(t=n),(a=(o=e.yield1(c,t))===r?r.$v:o)===n||a.$$is_boolean&&1!=a?n:(((a=t["$called_max_times?"]())===n||a.$$is_boolean&&1!=a)&&e.ret(t),(a=u)!==!1&&a!==n?a:u=t)},$.$$s=i,$),a).call(o),u}catch(l){if(l===e.returner)return l.$v;throw l}}),e.defn(h,"$find_matching_method_stub",function(t){var r,a,o,$=this,i=n,s=arguments.length-1;0>s&&(s=0);var c=new Array(s);for(i=0;s>i;i++)c[i]=arguments[i+1];return(r=(a=$.$method_double_for(t).$stubs()).$find,r.$$p=(o=function(r){var a;o.$$s||this;return null==r&&(r=n),(a=r)["$matches?"].apply(a,[t].concat(e.to_a(c)))},o.$$s=$,o),r).call(a)}),e.defn(h,"$find_almost_matching_stub",function(t){var r,a,o,$=this,i=n,s=arguments.length-1;0>s&&(s=0);var c=new Array(s);for(i=0;s>i;i++)c[i]=arguments[i+1];return(r=(a=$.$method_double_for(t).$stubs()).$find,r.$$p=(o=function(r){var a;o.$$s||this;return null==r&&(r=n),(a=r).$matches_name_but_not_args.apply(a,[t].concat(e.to_a(c)))},o.$$s=$,o),r).call(a)}),n&&"find_almost_matching_stub"}(c.base,null),function(t,$super){function r(){}var a,$=r=o(t,$super,"TestDoubleProxy",r),i=$.$$proto;$.$$scope;return i.method_doubles=n,e.defn($,"$reset",a=function(){var t=this,r=a.$$p,o=n,$=n;for(a.$$p=null,o=[],$=0;$<arguments.length;$++)o[$]=arguments[$];return t.method_doubles.$clear(),t.$object()["$__disallow_further_usage!"](),e.find_super_dispatcher(t,"reset",a,r).apply(t,o)}),n&&"reset"}(c.base,c.get("Proxy")),function(t,$super){function r(){}var a,$,i,s,c=r=o(t,$super,"PartialDoubleProxy",r),u=c.$$proto,l=c.$$scope;return u.object=u.method_doubles=n,e.defn(c,"$original_method_handle_for",function(t){var r,a=this;try{return(r=a["$any_instance_class_recorder_observing_method?"](a.object.$class(),t))===n||r.$$is_boolean&&1!=r||(t=e.get("RSpec").$$scope.get("Mocks").$space().$any_instance_recorder_for(a.object.$class()).$build_alias_method_name(t)),e.get("RSpec").$$scope.get("Support").$method_handle_for(a.object,t)}catch(o){if(!e.rescue(o,[l.get("NameError")]))throw o;try{return n}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}),e.defn(c,"$add_simple_expectation",a=function(t,r,o){var $=this,i=a.$$p,s=n,c=n;for(a.$$p=null,s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];return $.$method_double_for(t).$configure_method(),e.find_super_dispatcher($,"add_simple_expectation",a,i).apply($,s)}),e.defn(c,"$add_simple_stub",$=function(t,r){var a=this,o=$.$$p,i=n,s=n;for($.$$p=null,i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return a.$method_double_for(t).$configure_method(),e.find_super_dispatcher(a,"add_simple_stub",$,o).apply(a,i)}),e.defn(c,"$visibility_for",function(e){var t,r=this;return(t=l.get("MethodReference").$method_visibility_for(r.object,e))!==!1&&t!==n?t:"public"}),e.defn(c,"$reset",i=function(){var t,r,a,o=this,$=i.$$p,s=n,c=n;for(i.$$p=null,s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];return(t=(r=o.method_doubles).$each_value,t.$$p=(a=function(e){a.$$s||this;return null==e&&(e=n),e.$reset()},a.$$s=o,a),t).call(r),e.find_super_dispatcher(o,"reset",i,$).apply(o,s)}),e.defn(c,"$message_received",s=function(t){var r,a,o,$=this,i=s.$$p,c=i||n,u=n,_=n,p=n,d=arguments.length-1;0>d&&(d=0);var f=new Array(d);for(u=0;d>u;u++)f[u]=arguments[u+1];for(s.$$p=null,_=[],p=0;p<arguments.length;p++)_[p]=arguments[p];return(r=(a=l.get("RSpec").$$scope.get("Mocks").$space().$any_instance_recorders_from_ancestry_of($.$object())).$each,
r.$$p=(o=function(e){var r=o.$$s||this;return null==e&&(e=n),e.$notify_received_message(r.$object(),t,f,c)},o.$$s=$,o),r).call(a),e.find_super_dispatcher($,"message_received",s,i).apply($,_)}),c.$private(),e.defn(c,"$any_instance_class_recorder_observing_method?",function(t,r){var a,o,$=this,i=n,s=n,c=n;return i=!0,s=e.get("RSpec").$$scope.get("Mocks").$space().$any_instance_recorder_for(t,i),(a=(o=s!==!1&&s!==n)?s["$already_observing?"](r):s)===n||a.$$is_boolean&&1!=a?(c=t.$superclass(),(a=c["$nil?"]())===n||a.$$is_boolean&&1!=a?$["$any_instance_class_recorder_observing_method?"](c,r):!1):!0}),n&&"any_instance_class_recorder_observing_method?"}(c.base,c.get("Proxy")),function(t){var r,o,$,i=r=a(t,"PartialClassDoubleProxyMethods");i.$$proto,i.$$scope;e.defn(i,"$initialize",o=function(t){var r=this,a=(o.$$p,n),$=arguments.length-1;0>$&&($=0);var i=new Array($);for(a=0;$>a;a++)i[a]=arguments[a+1];return o.$$p=null,r.source_space=t,e.find_super_dispatcher(r,"initialize",o,null).apply(r,e.to_a(i))}),e.defn(i,"$original_method_handle_for",$=function(t){var r,a=this,o=$.$$p,i=n,s=n,c=n;for($.$$p=null,s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];return r=a.$superclass_proxy(),i=r!==!1&&r!==n?a.$superclass_proxy().$original_unbound_method_handle_from_ancestor_for(t.$to_sym()):r,i===!1||i===n?e.find_super_dispatcher(a,"original_method_handle_for",$,o).apply(a,s):i.$bind(a.$object())}),i.$protected(),e.defn(i,"$original_unbound_method_handle_from_ancestor_for",function(t){try{var r,a,o,$=this,i=n;return null==$.method_doubles&&($.method_doubles=n),i=(r=(a=$.method_doubles).$fetch,r.$$p=(o=function(){var r,a=o.$$s||this;e.ret((r=a.$superclass_proxy(),r!==!1&&r!==n?a.$superclass_proxy().$original_unbound_method_handle_from_ancestor_for(t):r))},o.$$s=$,o),r).call(a,t),i.$original_method().$unbind()}catch(s){if(s===e.returner)return s.$v;throw s}}),e.defn(i,"$superclass_proxy",function(){var e,t,r=this,a=n;return null==r.superclass_proxy&&(r.superclass_proxy=n),null==r.source_space&&(r.source_space=n),t=r.superclass_proxy,(e=null!=t&&t!==n?"instance-variable":n)===n||e.$$is_boolean&&1!=e?(e=a=r.$object().$superclass())===n||e.$$is_boolean&&1!=e?r.superclass_proxy=n:r.superclass_proxy=r.source_space.$proxy_for(a):r.superclass_proxy})}(c.base),function(e,$super){function t(){}var n=t=o(e,$super,"PartialClassDoubleProxy",t),r=(n.$$proto,n.$$scope);return n.$include(r.get("PartialClassDoubleProxyMethods"))}(c.base,c.get("PartialDoubleProxy")),function(t,$super){function r(){}var a,i,s,c,u=r=o(t,$super,"ProxyForNil",r),l=(u.$$proto,u.$$scope);return e.defn(u,"$initialize",a=function(t){var r=this;a.$$p;return a.$$p=null,r.warn_about_expectations=!0,e.find_super_dispatcher(r,"initialize",a,null).apply(r,[n,t])}),u.$attr_accessor("warn_about_expectations"),e.alias(u,"warn_about_expectations?","warn_about_expectations"),e.defn(u,"$add_message_expectation",i=function(t,r){var a,o=this,s=i.$$p,c=n,u=n;for(null==r&&(r=$([],{})),i.$$p=null,c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];return(a=o["$warn_about_expectations?"]())===n||a.$$is_boolean&&1!=a||o.$warn(t),e.find_super_dispatcher(o,"add_message_expectation",i,s).apply(o,c)}),e.defn(u,"$add_negative_message_expectation",s=function(t,r){var a,o=this,$=s.$$p,i=n,c=n;for(s.$$p=null,i=[],c=0;c<arguments.length;c++)i[c]=arguments[c];return(a=o["$warn_about_expectations?"]())===n||a.$$is_boolean&&1!=a||o.$warn(r),e.find_super_dispatcher(o,"add_negative_message_expectation",s,$).apply(o,i)}),e.defn(u,"$add_stub",c=function(t,r){var a,o=this,i=c.$$p,s=n,u=n;for(null==r&&(r=$([],{})),c.$$p=null,s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];return(a=o["$warn_about_expectations?"]())===n||a.$$is_boolean&&1!=a||o.$warn(t),e.find_super_dispatcher(o,"add_stub",c,i).apply(o,s)}),u.$private(),e.defn(u,"$warn",function(e){var t=n;return t=l.get("CallerFilter").$first_non_rspec_line(),l.get("Kernel").$warn("An expectation of :"+e+" was set on nil. Called from "+t+". Use allow_message_expectations_on_nil to disable warnings.")}),n&&"warn"}(c.base,c.get("PartialDoubleProxy"))}(c.base)}(t.base)},Opal.modules.securerandom=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module);return e.add_stubs(["$gsub"]),function(t){var a,o=a=r(t,"SecureRandom");o.$$proto,o.$$scope;e.defs(o,"$uuid",function(){var e,t,r,a=this;return(e=(t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx").$gsub,e.$$p=(r=function(e){r.$$s||this;null==e&&(e=n);var t=16*Math.random()|0,a="x"==e?t:3&t|8;return a.toString(16)},r.$$s=a,r),e).call(t,/[xy]/)})}(t.base)},Opal.modules["rspec/mocks/space"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="ignore";var n=(e.top,e),r=e.nil,a=e.breaker,o=(e.slice,e.module),$=e.klass,i=e.hash2;return e.add_stubs(["$raise_lifecycle_message","$new","$private","$raise","$attr_reader","$new_mutex","$each","$verify","$values","$proxies","$each_value","$any_instance_recorders","$reset","$idempotently_reset","$reverse","$stop_all_observation!","$clear","$<<","$find","$==","$full_constant_name","$synchronize","$__id__","$fetch","$any_instance_recorder_not_found_for","$any_instance_mutex","$any_instance_recorder_for","$proxies_of","$select","$===","$object","$id_for","$proxy_not_found_for","$proxy_mutex","$key?","$empty?","$compact","$map","$[]","$ancestors","$[]=","$__build_mock_proxy_unless_expired","$verify_partial_doubles?","$configuration","$!","$method_defined?","$require","$equal?","$_id2ref","$instance_exec","$uuid","$+","$constant_mutator_for","$registered?"]),function(n){var s,c=s=o(n,"RSpec"),u=(c.$$proto,c.$$scope);!function(n){var s,c=s=o(n,"Mocks"),u=(c.$$proto,c.$$scope);!function(t,$super){function n(){}var a=n=$(t,$super,"RootSpace",n),o=(a.$$proto,a.$$scope);return e.defn(a,"$proxy_for",function(){var e=this,t=r,n=arguments.length-0;0>n&&(n=0);var a=new Array(n);for(t=0;n>t;t++)a[t]=arguments[t+0];return e.$raise_lifecycle_message()}),e.defn(a,"$any_instance_recorder_for",function(){var e=this,t=r,n=arguments.length-0;0>n&&(n=0);var a=new Array(n);for(t=0;n>t;t++)a[t]=arguments[t+0];return e.$raise_lifecycle_message()}),e.defn(a,"$any_instance_proxy_for",function(){var e=this,t=r,n=arguments.length-0;0>n&&(n=0);var a=new Array(n);for(t=0;n>t;t++)a[t]=arguments[t+0];return e.$raise_lifecycle_message()}),e.defn(a,"$register_constant_mutator",function(e){var t=this;return t.$raise_lifecycle_message()}),e.defn(a,"$any_instance_recorders_from_ancestry_of",function(e){var t=this;return t.$raise_lifecycle_message()}),e.defn(a,"$reset_all",function(){return r}),e.defn(a,"$verify_all",function(){return r}),e.defn(a,"$registered?",function(e){return!1}),e.defn(a,"$new_scope",function(){return o.get("Space").$new()}),a.$private(),e.defn(a,"$raise_lifecycle_message",function(){var e=this;return e.$raise(o.get("OutsideOfExampleError"),"The use of doubles or partial doubles from rspec-mocks outside of the per-test lifecycle is not supported.")}),r&&"raise_lifecycle_message"}(u.base,null),function(t,$super){function n(){}var s,c,u=n=$(t,$super,"Space",n),l=u.$$proto,_=u.$$scope;return l.constant_mutators=l.expectation_ordering=r,u.$attr_reader("proxies","any_instance_recorders","proxy_mutex","any_instance_mutex"),e.defn(u,"$initialize",function(){var e=this;return e.proxies=i([],{}),e.any_instance_recorders=i([],{}),e.constant_mutators=[],e.expectation_ordering=_.get("OrderGroup").$new(),e.proxy_mutex=e.$new_mutex(),e.any_instance_mutex=e.$new_mutex()}),e.defn(u,"$new_scope",function(){var e=this;return _.get("NestedSpace").$new(e)}),e.defn(u,"$verify_all",function(){var e,t,n,a,o,$=this;return(e=(t=$.$proxies().$values()).$each,e.$$p=(n=function(e){n.$$s||this;return null==e&&(e=r),e.$verify()},n.$$s=$,n),e).call(t),(e=(a=$.$any_instance_recorders()).$each_value,e.$$p=(o=function(e){o.$$s||this;return null==e&&(e=r),e.$verify()},o.$$s=$,o),e).call(a)}),e.defn(u,"$reset_all",function(){var e,t,n,a,o,$,i,s=this;return(e=(t=s.$proxies()).$each_value,e.$$p=(n=function(e){n.$$s||this;return null==e&&(e=r),e.$reset()},n.$$s=s,n),e).call(t),(e=(a=s.constant_mutators.$reverse()).$each,e.$$p=(o=function(e){o.$$s||this;return null==e&&(e=r),e.$idempotently_reset()},o.$$s=s,o),e).call(a),(e=($=s.$any_instance_recorders()).$each_value,e.$$p=(i=function(e){i.$$s||this;return null==e&&(e=r),e["$stop_all_observation!"]()},i.$$s=s,i),e).call($),s.$any_instance_recorders().$clear()}),e.defn(u,"$register_constant_mutator",function(e){var t=this;return t.constant_mutators["$<<"](e)}),e.defn(u,"$constant_mutator_for",function(e){var t,n,a,o=this;return(t=(n=o.constant_mutators).$find,t.$$p=(a=function(t){a.$$s||this;return null==t&&(t=r),t.$full_constant_name()["$=="](e)},a.$$s=o,a),t).call(n)}),e.defn(u,"$any_instance_recorder_for",function(t,n){try{var a,o,$,i=this;return null==n&&(n=!1),(a=(o=i.$any_instance_mutex()).$synchronize,a.$$p=($=function(){var a,o,i,s=$.$$s||this,c=r;return c=t.$__id__(),(a=(o=s.$any_instance_recorders()).$fetch,a.$$p=(i=function(){var a=i.$$s||this;return n!==!1&&n!==r&&e.ret(r),a.$any_instance_recorder_not_found_for(c,t)},i.$$s=s,i),a).call(o,c)},$.$$s=i,$),a).call(o)}catch(s){if(s===e.returner)return s.$v;throw s}}),e.defn(u,"$any_instance_proxy_for",function(e){var t=this;return _.get("AnyInstance").$$scope.get("Proxy").$new(t.$any_instance_recorder_for(e),t.$proxies_of(e))}),e.defn(u,"$proxies_of",function(e){var t,n,a,o=this;return(t=(n=o.$proxies().$values()).$select,t.$$p=(a=function(t){a.$$s||this;return null==t&&(t=r),e["$==="](t.$object())},a.$$s=o,a),t).call(n)}),e.defn(u,"$proxy_for",function(e){var t,n,a,o=this;return(t=(n=o.$proxy_mutex()).$synchronize,t.$$p=(a=function(){var t,n,o,$=a.$$s||this,i=r;return i=$.$id_for(e),(t=(n=$.$proxies()).$fetch,t.$$p=(o=function(){var t=o.$$s||this;return t.$proxy_not_found_for(i,e)},o.$$s=$,o),t).call(n,i)},a.$$s=o,a),t).call(n)}),e.alias(u,"ensure_registered","proxy_for"),e.defn(u,"$registered?",function(e){var t=this;return t.$proxies()["$key?"](t.$id_for(e))}),e.defn(u,"$any_instance_recorders_from_ancestry_of",function(t){var n,a,o,$=this;return(n=$.$any_instance_recorders()["$empty?"]())===r||n.$$is_boolean&&1!=n?(n=(a=function(e){e.$$scope,e.$$proto;return e.$ancestors()}(e.get_singleton_class(t))).$map,n.$$p=(o=function(e){var t=o.$$s||this;return null==e&&(e=r),t.$any_instance_recorders()["$[]"](e.$__id__())},o.$$s=$,o),n).call(a).$compact():[]}),u.$private(),e.defn(u,"$new_mutex",function(){var t;return(t=null==e.Object.$$scope.Mutex?r:"constant")===r||t.$$is_boolean&&1!=t?_.get("FakeMutex"):e.get("Mutex").$new()}),function(t){var n,$,i=n=o(t,"FakeMutex");i.$$proto,i.$$scope;e.defs(i,"$synchronize",$=function(){var t,n=$.$$p,o=n||r;return $.$$p=null,t=e.yieldX(o,[]),t===a?t:t})}(_.base),e.defn(u,"$proxy_not_found_for",function(e,t){var n,a=this,o=r;return a.$proxies()["$[]="](e,function(){return o=t,_.get("NilClass")["$==="](o)?_.get("ProxyForNil").$new(a.expectation_ordering):_.get("TestDouble")["$==="](o)?t.$__build_mock_proxy_unless_expired(a.expectation_ordering):_.get("Class")["$==="](o)?(n=_.get("RSpec").$$scope.get("Mocks").$configuration()["$verify_partial_doubles?"]())===r||n.$$is_boolean&&1!=n?_.get("PartialClassDoubleProxy").$new(a,t,a.expectation_ordering):_.get("VerifyingPartialClassDoubleProxy").$new(a,t,a.expectation_ordering):(n=_.get("RSpec").$$scope.get("Mocks").$configuration()["$verify_partial_doubles?"]())===r||n.$$is_boolean&&1!=n?_.get("PartialDoubleProxy").$new(t,a.expectation_ordering):_.get("VerifyingPartialDoubleProxy").$new(t,a.expectation_ordering)}())}),e.defn(u,"$any_instance_recorder_not_found_for",function(e,t){var n=this;return n.$any_instance_recorders()["$[]="](e,_.get("AnyInstance").$$scope.get("Recorder").$new(t))}),c=null==e.Object.$$scope.BasicObject?r:"constant",(s=c!==!1&&c!==r?e.get("BasicObject")["$method_defined?"]("__id__")["$!"]():c)===r||s.$$is_boolean&&1!=s?(e.defn(u,"$id_for",function(e){return e.$__id__()}),r&&"id_for"):(u.$require("securerandom"),e.defn(u,"$id_for",function(t){var n,a,o,$=this,i=r;return i=t.$__id__(),(n=t["$equal?"](e.get("ObjectSpace").$_id2ref(i)))===r||n.$$is_boolean&&1!=n?(n=(a=t).$instance_exec,n.$$p=(o=function(){var t,n=o.$$s||this;return null==n.__id_for_rspec_mocks_space&&(n.__id_for_rspec_mocks_space=r),(t=n.__id_for_rspec_mocks_space)!==!1&&t!==r?t:n.__id_for_rspec_mocks_space=e.get("SecureRandom").$uuid()},o.$$s=$,o),n).call(a):i}),r&&"id_for")}(u.base,null),function(n,$super){function a(){}var o,i,s,c,u,l,_=a=$(n,$super,"NestedSpace",a),p=_.$$proto;_.$$scope;return p.parent=r,e.defn(_,"$initialize",o=function(t){var n=this;o.$$p;return o.$$p=null,n.parent=t,e.find_super_dispatcher(n,"initialize",o,null).apply(n,[])}),e.defn(_,"$proxies_of",i=function(n){var a=this,o=i.$$p,$=r,s=r;for(i.$$p=null,$=[],s=0;s<arguments.length;s++)$[s]=arguments[s];return t(e.find_super_dispatcher(a,"proxies_of",i,o).apply(a,$),a.parent.$proxies_of(n))}),e.defn(_,"$constant_mutator_for",s=function(t){var n,a=this,o=s.$$p,$=r,i=r;for(s.$$p=null,$=[],i=0;i<arguments.length;i++)$[i]=arguments[i];return(n=e.find_super_dispatcher(a,"constant_mutator_for",s,o).apply(a,$))!==!1&&n!==r?n:a.parent.$constant_mutator_for(t)}),e.defn(_,"$registered?",c=function(t){var n,a=this,o=c.$$p,$=r,i=r;for(c.$$p=null,$=[],i=0;i<arguments.length;i++)$[i]=arguments[i];return(n=e.find_super_dispatcher(a,"registered?",c,o).apply(a,$))!==!1&&n!==r?n:a.parent["$registered?"](t)}),_.$private(),e.defn(_,"$proxy_not_found_for",u=function(t,n){var a,o=this,$=u.$$p,i=r,s=r;for(u.$$p=null,i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return(a=o.parent.$proxies()["$[]"](t))!==!1&&a!==r?a:e.find_super_dispatcher(o,"proxy_not_found_for",u,$).apply(o,i)}),e.defn(_,"$any_instance_recorder_not_found_for",l=function(t,n){var a,o=this,$=l.$$p,i=r,s=r;for(l.$$p=null,i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return(a=o.parent.$any_instance_recorders()["$[]"](t))!==!1&&a!==r?a:e.find_super_dispatcher(o,"any_instance_recorder_not_found_for",l,$).apply(o,i)}),r&&"any_instance_recorder_not_found_for"}(u.base,u.get("Space"))}(u.base)}(n.base)},Opal.modules["rspec/mocks/syntax"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.dynamic_require_severity="ignore";var n,r=(e.top,e),a=e.nil,o=(e.breaker,e.slice,e.module),$=e.hash2,i=e.klass;return e.add_stubs(["$deprecate","$==","$default_should_syntax_host","$should_enabled?","$class_exec","$warn_unless_should_configured","$expect_message","$to_proc","$never","$===","$each","$and_return","$stub","$allow_message","$remove_stub","$proxy_for","$space","$stub_chain_on","$as_null_object","$received_message?","$respond_to?","$any_instance_proxy_for","$expect_enabled?","$new","$warn_about_block","$method_defined?","$>","$to_f","$last","$ancestors"]),function(n){var r,i=r=o(n,"RSpec"),s=(i.$$proto,i.$$scope);!function(n){var r,i=r=o(n,"Mocks"),s=(i.$$proto,i.$$scope);!function(n){var r,i=r=o(n,"Syntax"),s=(i.$$proto,i.$$scope);e.defs(i,"$warn_about_should!",function(){var e=this;return e.warn_about_should=!0}),e.defs(i,"$warn_unless_should_configured",function(e,t){var n,r=this;return null==r.warn_about_should&&(r.warn_about_should=a),null==t&&(t="the new `:expect` syntax or explicitly enable `:should`"),(n=r.warn_about_should)===a||n.$$is_boolean&&1!=n?a:(s.get("RSpec").$deprecate("Using `"+e+"` from rspec-mocks' old `:should` syntax without explicitly enabling the syntax",$(["replacement"],{replacement:t})),r.warn_about_should=!1)}),e.defs(i,"$enable_should",function(t){var n,r,o,i=this;return null==t&&(t=i.$default_should_syntax_host()),t["$=="](i.$default_should_syntax_host())&&(i.warn_about_should=!1),(n=i["$should_enabled?"](t))===a||n.$$is_boolean&&1!=n?(n=(r=t).$class_exec,n.$$p=(o=function(){var t,n,r,i,c,u,l,_,p=o.$$s||this;return e.def(p,"$should_receive",t=function(n,r){var o,i,s=this,c=t.$$p,u=c||a;return null==r&&(r=$([],{})),t.$$p=null,e.get("RSpec").$$scope.get("Mocks").$$scope.get("Syntax").$warn_unless_should_configured("should_receive"),(o=(i=e.get("RSpec").$$scope.get("Mocks")).$expect_message,o.$$p=u.$to_proc(),o).call(i,s,n,r)}),e.def(p,"$should_not_receive",n=function(t){var r,o,i=this,s=n.$$p,c=s||a;return n.$$p=null,e.get("RSpec").$$scope.get("Mocks").$$scope.get("Syntax").$warn_unless_should_configured("should_not_receive"),(r=(o=e.get("RSpec").$$scope.get("Mocks")).$expect_message,r.$$p=c.$to_proc(),r).call(o,i,t,$([],{})).$never()}),e.def(p,"$stub",r=function(t,n){var o,i,s,c,u=this,l=r.$$p,_=l||a;return null==n&&(n=$([],{})),r.$$p=null,e.get("RSpec").$$scope.get("Mocks").$$scope.get("Syntax").$warn_unless_should_configured("stub"),(o=e.get("Hash")["$==="](t))===a||o.$$is_boolean&&1!=o?(o=(c=e.get("RSpec").$$scope.get("Mocks")).$allow_message,o.$$p=_.$to_proc(),o).call(c,u,t,n):(o=(i=t).$each,o.$$p=(s=function(e,t){var n=s.$$s||this;return null==e&&(e=a),null==t&&(t=a),n.$stub(e).$and_return(t)},s.$$s=u,s),o).call(i)}),e.def(p,"$unstub",function(t){var n=this;return e.get("RSpec").$$scope.get("Mocks").$$scope.get("Syntax").$warn_unless_should_configured("unstub","`allow(...).to_receive(...).and_call_original` or explicitly enable `:should`"),e.get("RSpec").$$scope.get("Mocks").$space().$proxy_for(n).$remove_stub(t)}),e.def(p,"$stub_chain",i=function(){var t,n,r=this,o=i.$$p,$=o||a,s=a,c=arguments.length-0;0>c&&(c=0);var u=new Array(c);for(s=0;c>s;s++)u[s]=arguments[s+0];return i.$$p=null,e.get("RSpec").$$scope.get("Mocks").$$scope.get("Syntax").$warn_unless_should_configured("stub_chain"),(t=(n=e.get("RSpec").$$scope.get("Mocks").$$scope.get("StubChain")).$stub_chain_on,t.$$p=$.$to_proc(),t).apply(n,[r].concat(e.to_a(u)))}),e.def(p,"$as_null_object",function(){var t=this;return e.get("RSpec").$$scope.get("Mocks").$$scope.get("Syntax").$warn_unless_should_configured("as_null_object"),t._null_object=!0,e.get("RSpec").$$scope.get("Mocks").$space().$proxy_for(t).$as_null_object()}),e.def(p,"$null_object?",function(){var t,n=this;return e.get("RSpec").$$scope.get("Mocks").$$scope.get("Syntax").$warn_unless_should_configured("null_object?"),t=n._null_object,null!=t&&t!==a?"instance-variable":a}),e.def(p,"$received_message?",c=function(t){var n,r,o=this,$=c.$$p,i=$||a,s=a,u=arguments.length-1;0>u&&(u=0);var l=new Array(u);for(s=0;u>s;s++)l[s]=arguments[s+1];return c.$$p=null,e.get("RSpec").$$scope.get("Mocks").$$scope.get("Syntax").$warn_unless_should_configured("received_message?"),(n=(r=e.get("RSpec").$$scope.get("Mocks").$space().$proxy_for(o))["$received_message?"],n.$$p=i.$to_proc(),n).apply(r,[t].concat(e.to_a(l)))}),(u=s.get("Class")["$respond_to?"]("any_instance"))===a||u.$$is_boolean&&1!=u?(u=(l=s.get("Class")).$class_exec,u.$$p=(_=function(){var t=_.$$s||this;return e.def(t,"$any_instance",function(){var t=this;return e.get("RSpec").$$scope.get("Mocks").$$scope.get("Syntax").$warn_unless_should_configured("any_instance"),e.get("RSpec").$$scope.get("Mocks").$space().$any_instance_proxy_for(t)}),a&&"any_instance"},_.$$s=p,_),u).call(l):a},o.$$s=i,o),n).call(r):a}),e.defs(i,"$disable_should",function(t){var n,r,o,$,i,c=this;return null==t&&(t=c.$default_should_syntax_host()),(n=c["$should_enabled?"](t))===a||n.$$is_boolean&&1!=n?a:((n=(r=t).$class_exec,n.$$p=(o=function(){var t=o.$$s||this;return e.udef(t,"$should_receive"),e.udef(t,"$should_not_receive"),e.udef(t,"$stub"),e.udef(t,"$unstub"),e.udef(t,"$stub_chain"),e.udef(t,"$as_null_object"),e.udef(t,"$null_object?"),e.udef(t,"$received_message?")},o.$$s=c,o),n).call(r),(n=($=s.get("Class")).$class_exec,n.$$p=(i=function(){var t=i.$$s||this;return e.udef(t,"$any_instance")},i.$$s=c,i),n).call($))}),e.defs(i,"$enable_expect",function(t){var n,r,o,$,i,c=this;return null==t&&(t=e.get("RSpec").$$scope.get("Mocks").$$scope.get("ExampleMethods")),(n=c["$expect_enabled?"](t))===a||n.$$is_boolean&&1!=n?((n=(r=t).$class_exec,n.$$p=(o=function(){var t,n,r,$=o.$$s||this;return e.def($,"$receive",t=function(e){var n=t.$$p,r=n||a;return t.$$p=null,s.get("Matchers").$$scope.get("Receive").$new(e,r)}),e.def($,"$receive_messages",n=function(e){var t=n.$$p,r=t||a,o=a;return n.$$p=null,o=s.get("Matchers").$$scope.get("ReceiveMessages").$new(e),r!==a&&o.$warn_about_block(),o}),e.def($,"$receive_message_chain",r=function(){var e,t,n=r.$$p,o=n||a,$=a,i=arguments.length-0;0>i&&(i=0);var c=new Array(i);for($=0;i>$;$++)c[$]=arguments[$+0];return r.$$p=null,(e=(t=s.get("Matchers").$$scope.get("ReceiveMessageChain")).$new,e.$$p=o.$to_proc(),e).call(t,c)}),e.def($,"$allow",function(e){return s.get("AllowanceTarget").$new(e)}),e.def($,"$expect_any_instance_of",function(e){return s.get("AnyInstanceExpectationTarget").$new(e)}),e.def($,"$allow_any_instance_of",function(e){return s.get("AnyInstanceAllowanceTarget").$new(e)}),a&&"allow_any_instance_of"},o.$$s=c,o),n).call(r),(n=($=s.get("RSpec").$$scope.get("Mocks").$$scope.get("ExampleMethods").$$scope.get("ExpectHost")).$class_exec,n.$$p=(i=function(){var t=i.$$s||this;return e.def(t,"$expect",function(e){return s.get("ExpectationTarget").$new(e)}),a&&"expect"},i.$$s=c,i),n).call($)):a}),e.defs(i,"$disable_expect",function(t){var n,r,o,$,i,c=this;return null==t&&(t=e.get("RSpec").$$scope.get("Mocks").$$scope.get("ExampleMethods")),(n=c["$expect_enabled?"](t))===a||n.$$is_boolean&&1!=n?a:((n=(r=t).$class_exec,n.$$p=(o=function(){var t=o.$$s||this;return e.udef(t,"$receive"),e.udef(t,"$receive_messages"),e.udef(t,"$receive_message_chain"),e.udef(t,"$allow"),e.udef(t,"$expect_any_instance_of"),e.udef(t,"$allow_any_instance_of")},o.$$s=c,o),n).call(r),(n=($=s.get("RSpec").$$scope.get("Mocks").$$scope.get("ExampleMethods").$$scope.get("ExpectHost")).$class_exec,n.$$p=(i=function(){var t=i.$$s||this;return e.udef(t,"$expect")},i.$$s=c,i),n).call($))}),e.defs(i,"$should_enabled?",function(e){var t=this;return null==e&&(e=t.$default_should_syntax_host()),e["$method_defined?"]("should_receive")}),e.defs(i,"$expect_enabled?",function(t){return null==t&&(t=e.get("RSpec").$$scope.get("Mocks").$$scope.get("ExampleMethods")),t["$method_defined?"]("allow")}),e.defs(i,"$default_should_syntax_host",function(){var n,r,o;return o=null!=s.JRUBY_VERSION,r=o!==!1&&o!==a?s.get("JRUBY_VERSION")["$=="]("1.7.4"):o,(n=r!==!1&&r!==a?t(s.get("RUBY_VERSION").$to_f(),1.8):r)===a||n.$$is_boolean&&1!=n?(n=null==e.Object.$$scope.BasicObject?a:"constant")===a||n.$$is_boolean&&1!=n?s.get("Object"):s.get("Object").$ancestors().$last()["$=="](e.get("BasicObject"))?e.get("BasicObject"):s.get("Object"):e.get("BasicObject")})}(s.base)}(s.base)}(r.base),(n=null!=r.BasicObject)===a||n.$$is_boolean&&1!=n||!function(e,$super){function t(){}var n=t=i(e,$super,"BasicObject",t);n.$$proto,n.$$scope;return a}(r.base,null),function(e,$super){function t(){}var n=t=i(e,$super,"Class",t);n.$$proto,n.$$scope;return a}(r.base,null)},Opal.modules["rspec/mocks/targets"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice),a=e.module,o=e.klass,$=e.hash2;return e.add_stubs(["$define_method","$matcher_allowed?","$raise_unsupported_matcher","$define_matcher","$to_proc","$fetch","$===","$raise_negation_unsupported","$private","$start_with?","$name","$class","$freeze","$__send__","$raise","$expression","$delegate_to","$disallow_negation","$delegate_not_to"]),function(t){var i,s=i=a(t,"RSpec"),c=(s.$$proto,s.$$scope);!function(t){var i,s=i=a(t,"Mocks"),c=(s.$$proto,s.$$scope);!function(t,$super){function a(){}var i,s=a=o(t,$super,"TargetBase",a),c=s.$$proto,u=s.$$scope;return c.target=n,e.defn(s,"$initialize",function(e){var t=this;return t.target=e}),e.defs(s,"$delegate_to",function(e){var t,r,a,o=this;return(t=(r=o).$define_method,t.$$p=(a=function(t){var r,o,$,i=a.$$s||this;return null==t&&(t=n),r=a.$$p||n,a.$$p=null,((o=i["$matcher_allowed?"](t))===n||o.$$is_boolean&&1!=o)&&i.$raise_unsupported_matcher("to",t),(o=($=i).$define_matcher,o.$$p=r.$to_proc(),o).call($,t,e)},a.$$s=o,a),t).call(r,"to")}),e.defs(s,"$delegate_not_to",function(e,t){var r,a,o,i=this,s=n;return null==t&&(t=$([],{})),s=t.$fetch("from"),(r=(a=i).$define_method,r.$$p=(o=function(t){var r,a,$,i=o.$$s||this,c=n;return null==t&&(t=n),r=o.$$p||n,o.$$p=null,function(){return c=t,u.get("Matchers").$$scope.get("Receive")["$==="](c)?(a=($=i).$define_matcher,a.$$p=r.$to_proc(),a).call($,t,e):u.get("Matchers").$$scope.get("ReceiveMessages")["$==="](c)||u.get("Matchers").$$scope.get("ReceiveMessageChain")["$==="](c)?i.$raise_negation_unsupported(s,t):i.$raise_unsupported_matcher(s,t)}()},o.$$s=i,o),r).call(a,s)}),e.defs(s,"$disallow_negation",function(e){var t,a,o,$=this;return(t=(a=$).$define_method,t.$$p=(o=function(t,a){var $=o.$$s||this;return null==t&&(t=n),a=r.call(arguments,1),$.$raise_negation_unsupported(e,t)},o.$$s=$,o),t).call(a,e)}),s.$private(),e.defn(s,"$matcher_allowed?",function(e){return e.$class().$name()["$start_with?"]("RSpec::Mocks::Matchers".$freeze())}),e.defn(s,"$define_matcher",i=function(e,t){var r,a,o=this,$=i.$$p,s=$||n;return i.$$p=null,(r=(a=e).$__send__,r.$$p=s.$to_proc(),r).call(a,t,o.target)}),e.defn(s,"$raise_unsupported_matcher",function(e,t){var n=this;return n.$raise(u.get("UnsupportedMatcherError"),"only the `receive` or `receive_messages` matchers are supported "+("with `"+n.$expression()+"(...)."+e+"`, but you have provided: "+t))}),e.defn(s,"$raise_negation_unsupported",function(e,t){var n=this;return n.$raise(u.get("NegationUnsupportedError"),"`"+n.$expression()+"(...)."+e+" "+t.$name()+"` is not supported since it doesn't really make sense. What would it even mean?")}),e.defn(s,"$expression",function(){var e=this;return e.$class().$$scope.get("EXPRESSION")}),n&&"expression"}(c.base,null),function(t,$super){function n(){}var r=n=o(t,$super,"AllowanceTarget",n),a=(r.$$proto,r.$$scope);return e.cdecl(a,"EXPRESSION","allow"),r.$delegate_to("setup_allowance"),r.$disallow_negation("not_to"),r.$disallow_negation("to_not")}(c.base,c.get("TargetBase")),function(t,$super){function n(){}var r=n=o(t,$super,"ExpectationTarget",n),a=(r.$$proto,r.$$scope);return e.cdecl(a,"EXPRESSION","expect"),r.$delegate_to("setup_expectation"),r.$delegate_not_to("setup_negative_expectation",$(["from"],{from:"not_to"})),r.$delegate_not_to("setup_negative_expectation",$(["from"],{from:"to_not"}))}(c.base,c.get("TargetBase")),function(t,$super){function n(){}var r=n=o(t,$super,"AnyInstanceAllowanceTarget",n),a=(r.$$proto,r.$$scope);return e.cdecl(a,"EXPRESSION","allow_any_instance_of"),r.$delegate_to("setup_any_instance_allowance"),r.$disallow_negation("not_to"),r.$disallow_negation("to_not")}(c.base,c.get("TargetBase")),function(t,$super){function n(){}var r=n=o(t,$super,"AnyInstanceExpectationTarget",n),a=(r.$$proto,r.$$scope);return e.cdecl(a,"EXPRESSION","expect_any_instance_of"),r.$delegate_to("setup_any_instance_expectation"),r.$delegate_not_to("setup_any_instance_negative_expectation",$(["from"],{from:"not_to"})),r.$delegate_not_to("setup_any_instance_negative_expectation",$(["from"],{from:"to_not"}))}(c.base,c.get("TargetBase"))}(c.base)}(t.base)},Opal.modules["rspec/mocks/test_double"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.hash2,o=e.klass;return e.add_stubs(["$===","$empty?","$assign_stubs","$as_null_object","$__mock_proxy","$null_object?","$==","$class","$%","$object_id","$inspect","$gsub","$__raise_expired_error","$__build_mock_proxy","$warn_with","$private","$record_message_received","$to_proc","$to_s","$visibility_for","$raise_non_public_error","$new","$include?","$raise","$raise_unexpected_message_error","$each_pair","$add_simple_stub","$proxy_for","$space","$raise_expired_test_double_error","$include"]),function(t){var $,i=$=r(t,"RSpec"),s=(i.$$proto,i.$$scope);!function(t){var $,i=$=r(t,"Mocks"),s=(i.$$proto,i.$$scope);!function(t){var o,$,i,s,c=o=r(t,"TestDouble"),u=(c.$$proto,c.$$scope);e.defn(c,"$initialize",function(e,t){var r,o,$=this;return null==e&&(e=n),null==t&&(t=a([],{})),$.__expired=!1,o=u.get("Hash")["$==="](e),(r=o!==!1&&o!==n?t["$empty?"]():o)===n||r.$$is_boolean&&1!=r?$.name=e:(t=e,$.name=n),$.$assign_stubs(t)}),e.defn(c,"$as_null_object",function(){var e=this;return e.$__mock_proxy().$as_null_object()}),e.defn(c,"$null_object?",function(){var e=this;return e.$__mock_proxy()["$null_object?"]()}),e.defn(c,"$==",function(e){var t=this;return e["$=="](t.$__mock_proxy())}),e.defn(c,"$inspect",function(){var e=this;return null==e.name&&(e.name=n),"#<"+e.$class()+":"+"0x%x"["$%"](e.$object_id())+" @name="+e.name.$inspect()+">"}),e.defn(c,"$to_s",function(){var e=this;return e.$inspect().$gsub("<","[").$gsub(">","]")}),e.defn(c,"$respond_to?",$=function(t,r){var a,o=this,i=$.$$p,s=n,c=n;for(null==r&&(r=!1),$.$$p=null,s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];return(a=o.$__mock_proxy()["$null_object?"]())===n||a.$$is_boolean&&1!=a?e.find_super_dispatcher(o,"respond_to?",$,i).apply(o,s):!0}),e.defn(c,"$__build_mock_proxy_unless_expired",function(e){var t,r=this;return(t=r.$__raise_expired_error())!==!1&&t!==n?t:r.$__build_mock_proxy(e)}),e.defn(c,"$__disallow_further_usage!",function(){var e=this;return e.__expired=!0}),e.defn(c,"$freeze",function(){return u.get("RSpec").$warn_with("WARNING: you attempted to freeze a test double. This is explicitly a no-op as freezing doubles can lead to undesired behaviour when resetting tests.")}),c.$private(),e.defn(c,"$method_missing",i=function(t){var r,a,o,$=this,s=i.$$p,c=s||n,l=n,_=n,p=n,d=n;null==$.name&&($.name=n);var f=arguments.length-1;0>f&&(f=0);var g=new Array(f);for(d=0;f>d;d++)g[d]=arguments[d+1];return i.$$p=null,l=$.$__mock_proxy(),(r=(a=l).$record_message_received,r.$$p=c.$to_proc(),r).apply(a,[t].concat(e.to_a(g))),(r=l["$null_object?"]())===n||r.$$is_boolean&&1!=r?(p=l.$visibility_for(t),(r=(o=p["$=="]("private"))!==!1&&o!==n?o:p["$=="]("protected"))===n||r.$$is_boolean&&1!=r||u.get("ErrorGenerator").$new($,$.name).$raise_non_public_error(t,p),(r=["to_a","to_ary"]["$include?"](t))===n||r.$$is_boolean&&1!=r||$.$raise(u.get("NoMethodError")),(r=l).$raise_unexpected_message_error.apply(r,[t].concat(e.to_a(g)))):(_=t,"to_int"["$==="](_)?0:"to_a"["$==="](_)||"to_ary"["$==="](_)?n:"to_str"["$==="](_)?$.$to_s():$)}),e.defn(c,"$assign_stubs",function(e){var t,r,a,o=this;return(t=(r=e).$each_pair,t.$$p=(a=function(e,t){var r=a.$$s||this;return null==e&&(e=n),null==t&&(t=n),r.$__mock_proxy().$add_simple_stub(e,t)},a.$$s=o,a),t).call(r)}),e.defn(c,"$__mock_proxy",function(){var t=this;return e.get("RSpec").$$scope.get("Mocks").$space().$proxy_for(t)}),e.defn(c,"$__build_mock_proxy",function(e){var t=this;return null==t.name&&(t.name=n),u.get("TestDoubleProxy").$new(t,e,t.name)}),e.defn(c,"$__raise_expired_error",function(){var e,t=this;return null==t.__expired&&(t.__expired=n),null==t.name&&(t.name=n),(e=t.__expired)===n||e.$$is_boolean&&1!=e?!1:u.get("ErrorGenerator").$new(t,t.name).$raise_expired_test_double_error()}),e.defn(c,"$initialize_copy",s=function(t){var r,a=this,o=s.$$p,$=n,i=n;for(s.$$p=null,$=[],i=0;i<arguments.length;i++)$[i]=arguments[i];return(r=t["$null_object?"]())===n||r.$$is_boolean&&1!=r||a.$as_null_object(),e.find_super_dispatcher(a,"initialize_copy",s,o).apply(a,$)})}(s.base),function(e,$super){function t(){}var n=t=o(e,$super,"Double",t),r=(n.$$proto,n.$$scope);return n.$include(r.get("TestDouble"))}(s.base,null)}(s.base)}(t.base)},Opal.modules["rspec/mocks/verifying_double"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}e.dynamic_require_severity="ignore";var n=e.top,r=e,a=e.nil,o=(e.breaker,e.slice,e.module),$=e.gvars,i=e.klass,s=e.hash2;return e.add_stubs(["$require_rspec_mocks","$require","$null_object?","$[]","$method_reference","$__mock_proxy","$visibility","$===","$<","$to_f","$!","$unimplemented?","$==","$ensure_implemented","$ensure_publicly_implemented","$new","$__send__","$to_proc","$include","$description","$stub","$const_to_replace","$private"]),r.get("RSpec").$$scope.get("Support").$require_rspec_mocks("verifying_proxy"),n.$require("stringio"),function(n){var r,c=r=o(n,"RSpec"),u=(c.$$proto,c.$$scope);!function(n){var r,c=r=o(n,"Mocks"),u=(c.$$proto,c.$$scope);!function(n){var r,i,s,c,u,l,_,p=r=o(n,"VerifyingDouble"),d=(p.$$proto,p.$$scope),f=a;null==$.stderr&&($.stderr=a),e.defn(p,"$respond_to?",i=function(n,r){var o,$=this,s=i.$$p,c=a,u=a,l=a,_=a;for(null==r&&(r=!1),i.$$p=null,l=[],_=0;_<arguments.length;_++)l[_]=arguments[_];return(o=$["$null_object?"]())===a||o.$$is_boolean&&1!=o?e.find_super_dispatcher($,"respond_to?",i,s).apply($,l):(c=$.$__mock_proxy().$method_reference()["$[]"](n),function(){return u=c.$visibility(),"public"["$==="](u)?!0:"private"["$==="](u)?r:"protected"["$==="](u)?(o=r)!==!1&&o!==a?o:t(d.get("RUBY_VERSION").$to_f(),2):c["$unimplemented?"]()["$!"]();
}())}),e.defn(p,"$method_missing",s=function(t){var n,r=this,o=s.$$p,$=a,i=a,c=a;null==r.__sending_message&&(r.__sending_message=a);var u=arguments.length-1;0>u&&(u=0);var l=new Array(u);for($=0;u>$;$++)l[$]=arguments[$+1];for(s.$$p=null,i=[],c=0;c<arguments.length;c++)i[c]=arguments[c];return(n=r["$null_object?"]())===a||n.$$is_boolean&&1!=n||(r.__sending_message["$=="](t)?r.$__mock_proxy().$ensure_implemented(t):r.$__mock_proxy().$ensure_publicly_implemented(t,r)),e.find_super_dispatcher(r,"method_missing",s,o).apply(r,i)}),c=[$.stderr,d.get("StringIO").$new()],f=c[0],$.stderr=c[1],c,e.defn(p,"$__send__",u=function(t){var n=this,r=u.$$p,o=a,$=a,i=a,s=arguments.length-1;0>s&&(s=0);var c=new Array(s);for(o=0;s>o;o++)c[o]=arguments[o+1];for(u.$$p=null,$=[],i=0;i<arguments.length;i++)$[i]=arguments[i];try{return n.__sending_message=t,e.find_super_dispatcher(n,"__send__",u,r).apply(n,$)}finally{n.__sending_message=a}}),$.stderr=f,e.defn(p,"$send",l=function(t){var n,r,o=this,$=l.$$p,i=$||a,s=a,c=arguments.length-1;0>c&&(c=0);var u=new Array(c);for(s=0;c>s;s++)u[s]=arguments[s+1];return l.$$p=null,(n=(r=o).$__send__,n.$$p=i.$to_proc(),n).apply(r,[t].concat(e.to_a(u)))}),e.defn(p,"$initialize",_=function(){var t=this,n=_.$$p,r=a,o=a,$=a,i=arguments.length-0;0>i&&(i=0);var s=new Array(i);for(r=0;i>r;r++)s[r]=arguments[r+0];for(_.$$p=null,o=[],$=0;$<arguments.length;$++)o[$]=arguments[$];return e.find_super_dispatcher(t,"initialize",_,n).apply(t,o),t.__sending_message=a})}(u.base),function(t,$super){function n(){}var r,o=n=i(t,$super,"InstanceVerifyingDouble",n),$=o.$$proto,s=o.$$scope;return $.name=$.doubled_module=a,o.$include(s.get("TestDouble")),o.$include(s.get("VerifyingDouble")),e.defn(o,"$initialize",r=function(t){var n=this,o=(r.$$p,a),$=arguments.length-1;0>$&&($=0);var i=new Array($);for(o=0;$>o;o++)i[o]=arguments[o+1];return r.$$p=null,n.doubled_module=t,e.find_super_dispatcher(n,"initialize",r,null).apply(n,[""+t.$description()+" (instance)"].concat(e.to_a(i)))}),e.defn(o,"$__build_mock_proxy",function(e){var t=this;return s.get("VerifyingProxy").$new(t,e,t.name,t.doubled_module,s.get("InstanceMethodReference"))}),a&&"__build_mock_proxy"}(u.base,null),function(t){var n,r,$=n=o(t,"ObjectVerifyingDoubleMethods"),i=($.$$proto,$.$$scope);$.$include(i.get("TestDouble")),$.$include(i.get("VerifyingDouble")),e.defn($,"$as_stubbed_const",function(e){var t=this;return null==t.doubled_module&&(t.doubled_module=a),null==e&&(e=s([],{})),i.get("ConstantMutator").$stub(t.doubled_module.$const_to_replace(),t,e),t}),$.$private(),e.defn($,"$initialize",r=function(t){var n=this,o=(r.$$p,a),$=arguments.length-1;0>$&&($=0);var i=new Array($);for(o=0;$>o;o++)i[o]=arguments[o+1];return r.$$p=null,n.doubled_module=t,e.find_super_dispatcher(n,"initialize",r,null).apply(n,[t.$description()].concat(e.to_a(i)))}),e.defn($,"$__build_mock_proxy",function(e){var t=this;return null==t.name&&(t.name=a),null==t.doubled_module&&(t.doubled_module=a),i.get("VerifyingProxy").$new(t,e,t.name,t.doubled_module,i.get("ObjectMethodReference"))})}(u.base),function(e,$super){function t(){}var n=t=i(e,$super,"ObjectVerifyingDouble",t),r=(n.$$proto,n.$$scope);return n.$include(r.get("ObjectVerifyingDoubleMethods"))}(u.base,null),function(e,$super){function t(){}var n=t=i(e,$super,"ClassVerifyingDouble",t),r=(n.$$proto,n.$$scope);return n.$include(r.get("ObjectVerifyingDoubleMethods"))}(u.base,u.get("Module"))}(u.base)}(r.base)},Opal.modules["rspec/mocks/verifying_message_expecation"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.dynamic_require_severity="ignore";var n=(e.top,e),r=e.nil,a=(e.breaker,e.slice,e.module),o=e.klass;return e.add_stubs(["$require_rspec_support","$attr_accessor","$===","$first","$>","$length","$validate_expected_arguments!","$private","$nil?","$method_reference","$with_signature","$new","$valid?","$raise_invalid_arguments_error"]),n.get("RSpec").$$scope.get("Support").$require_rspec_support("method_signature_verifier"),function(n){var $,i=$=a(n,"RSpec"),s=(i.$$proto,i.$$scope);!function(n){var $,i=$=a(n,"Mocks"),s=(i.$$proto,i.$$scope);!function(n,$super){function a(){}var $,i,s=a=o(n,$super,"VerifyingMessageExpectation",a),c=(s.$$proto,s.$$scope);return s.$attr_accessor("method_reference"),e.defn(s,"$initialize",$=function(){var t=this,n=$.$$p,a=r,o=r,i=r,s=arguments.length-0;0>s&&(s=0);var c=new Array(s);for(a=0;s>a;a++)c[a]=arguments[a+0];for($.$$p=null,o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return e.find_super_dispatcher(t,"initialize",$,n).apply(t,o)}),e.defn(s,"$with",i=function(){var n,a=this,o=i.$$p,$=r,s=r,u=r,l=r,_=arguments.length-0;0>_&&(_=0);var p=new Array(_);for(s=0;_>s;s++)p[s]=arguments[s+0];for(i.$$p=null,u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];return((n=c.get("ArgumentMatchers").$$scope.get("AnyArgsMatcher")["$==="](p.$first()))===r||n.$$is_boolean&&1!=n)&&($=function(){return(n=c.get("ArgumentMatchers").$$scope.get("NoArgsMatcher")["$==="](p.$first()))===r||n.$$is_boolean&&1!=n?t(p.$length(),0)?p:e.find_super_dispatcher(a,"with",i,o).apply(a,u):[]}(),a["$validate_expected_arguments!"]($)),e.find_super_dispatcher(a,"with",i,o).apply(a,u)}),s.$private(),e.defn(s,"$validate_expected_arguments!",function(e){var t,n,a,o=this;return(t=o.$method_reference()["$nil?"]())===r||t.$$is_boolean&&1!=t?(t=(n=o.$method_reference()).$with_signature,t.$$p=(a=function(t){var n,o=a.$$s||this,$=r;return null==o.error_generator&&(o.error_generator=r),null==t&&(t=r),$=c.get("Support").$$scope.get("LooseSignatureVerifier").$new(t,e),(n=$["$valid?"]())===r||n.$$is_boolean&&1!=n?(o.failed_fast=!0,o.error_generator.$raise_invalid_arguments_error($)):r},a.$$s=o,a),t).call(n):r}),r&&"validate_expected_arguments!"}(s.base,s.get("MessageExpectation"))}(s.base)}(n.base)},Opal.modules["rspec/mocks/verifying_proxy"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=e.breaker,a=(e.slice,e.module),o=e.hash2,$=e.klass;return e.add_stubs(["$require_rspec_mocks","$ensure_implemented","$unimplemented?","$[]","$method_reference","$raise_unimplemented_error","$visibility","$==","$raise_non_public_error","$include","$new","$[]=","$tap","$method_reference=","$to_proc","$validate_arguments!","$private","$with_signature","$valid?","$raise","$error_message","$respond_to?","$save_original_method!","$original_method","$!"]),t.get("RSpec").$$scope.get("Support").$require_rspec_mocks("verifying_message_expecation"),t.get("RSpec").$$scope.get("Support").$require_rspec_mocks("method_reference"),function(t){var i,s=i=a(t,"RSpec"),c=(s.$$proto,s.$$scope);!function(t){var i,s=i=a(t,"Mocks"),c=(s.$$proto,s.$$scope);!function(t){var r,$,i,s,c=r=a(t,"VerifyingProxyMethods");c.$$proto,c.$$scope;e.defn(c,"$add_stub",$=function(t,r){var a=this,i=$.$$p,s=n,c=n;for(null==r&&(r=o([],{})),$.$$p=null,s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];return a.$ensure_implemented(t),e.find_super_dispatcher(a,"add_stub",$,i).apply(a,s)}),e.defn(c,"$add_simple_stub",i=function(t){var r=this,a=i.$$p,o=n,$=n,s=n,c=arguments.length-1;0>c&&(c=0);var u=new Array(c);for(o=0;c>o;o++)u[o]=arguments[o+1];for(i.$$p=null,$=[],s=0;s<arguments.length;s++)$[s]=arguments[s];return r.$ensure_implemented(t),e.find_super_dispatcher(r,"add_simple_stub",i,a).apply(r,$)}),e.defn(c,"$add_message_expectation",s=function(t,r){var a=this,$=s.$$p,i=n,c=n;for(null==r&&(r=o([],{})),s.$$p=null,i=[],c=0;c<arguments.length;c++)i[c]=arguments[c];return a.$ensure_implemented(t),e.find_super_dispatcher(a,"add_message_expectation",s,$).apply(a,i)}),e.defn(c,"$ensure_implemented",function(e){var t,r=this;return null==r.error_generator&&(r.error_generator=n),null==r.doubled_module&&(r.doubled_module=n),(t=r.$method_reference()["$[]"](e)["$unimplemented?"]())===n||t.$$is_boolean&&1!=t?n:r.error_generator.$raise_unimplemented_error(r.doubled_module,e)}),e.defn(c,"$ensure_publicly_implemented",function(e,t){var r=this,a=n;return null==r.error_generator&&(r.error_generator=n),r.$ensure_implemented(e),a=r.$method_reference()["$[]"](e).$visibility(),a["$=="]("public")?n:r.error_generator.$raise_non_public_error(e,a)})}(c.base),function(t,$super){function r(){}var a,o=r=$(t,$super,"VerifyingProxy",r),i=o.$$proto,s=o.$$scope;return i.method_reference=n,o.$include(s.get("VerifyingProxyMethods")),e.defn(o,"$initialize",a=function(t,r,o,$,i){var c,u,l,_=this;a.$$p;return a.$$p=null,e.find_super_dispatcher(_,"initialize",a,null).apply(_,[t,r,o]),_.object=t,_.doubled_module=$,_.method_reference_class=i,_.method_doubles=(c=(u=s.get("Hash")).$new,c.$$p=(l=function(e,t){var r=l.$$s||this;return null==r.object&&(r.object=n),null==e&&(e=n),null==t&&(t=n),e["$[]="](t,s.get("VerifyingMethodDouble").$new(r.object,t,r,r.$method_reference()["$[]"](t)))},l.$$s=_,l),c).call(u)}),e.defn(o,"$method_reference",function(){var e,t,r,a,o=this;return(e=o.method_reference)!==!1&&e!==n?e:o.method_reference=(t=(r=s.get("Hash")).$new,t.$$p=(a=function(e,t){var r=a.$$s||this;return null==r.method_reference_class&&(r.method_reference_class=n),null==r.doubled_module&&(r.doubled_module=n),null==e&&(e=n),null==t&&(t=n),e["$[]="](t,r.method_reference_class.$new(r.doubled_module,t))},a.$$s=o,a),t).call(r)}),e.defn(o,"$visibility_for",function(e){var t=this;return t.$method_reference()["$[]"](e).$visibility()}),n&&"visibility_for"}(c.base,c.get("TestDoubleProxy")),function(t,$super){function r(){}var a,o=r=$(t,$super,"VerifyingPartialDoubleProxy",r),i=o.$$proto,s=o.$$scope;return i.method_doubles=n,o.$include(s.get("VerifyingProxyMethods")),e.defn(o,"$initialize",a=function(t,r){var o,$,i,c=this;a.$$p;return a.$$p=null,e.find_super_dispatcher(c,"initialize",a,null).apply(c,[t,r]),c.doubled_module=s.get("DirectObjectReference").$new(t),c.method_doubles=(o=($=s.get("Hash")).$new,o.$$p=(i=function(e,r){var a=i.$$s||this;return null==e&&(e=n),null==r&&(r=n),e["$[]="](r,s.get("VerifyingExistingMethodDouble").$new(t,r,a))},i.$$s=c,i),o).call($)}),e.defn(o,"$method_reference",function(){var e=this;return e.method_doubles}),n&&"method_reference"}(c.base,c.get("PartialDoubleProxy")),function(e,$super){function t(){}var n=t=$(e,$super,"VerifyingPartialClassDoubleProxy",t),r=(n.$$proto,n.$$scope);return n.$include(r.get("PartialClassDoubleProxyMethods"))}(c.base,c.get("VerifyingPartialDoubleProxy")),function(t,$super){function r(){}var a,o,i,s,c=r=$(t,$super,"VerifyingMethodDouble",r),u=c.$$proto,l=c.$$scope;return u.method_reference=n,e.defn(c,"$initialize",a=function(t,n,r,o){var $=this;a.$$p;return a.$$p=null,e.find_super_dispatcher($,"initialize",a,null).apply($,[t,n,r]),$.method_reference=o}),e.defn(c,"$message_expectation_class",function(){return l.get("VerifyingMessageExpectation")}),e.defn(c,"$add_expectation",o=function(){var t,r,a,$=this,i=o.$$p,s=i||n,c=n,u=arguments.length-0;0>u&&(u=0);var l=new Array(u);for(c=0;u>c;c++)l[c]=arguments[c+0];return o.$$p=null,(t=(r=e.find_super_dispatcher($,"add_expectation",o,null).apply($,e.to_a(l).concat(s.$to_proc()))).$tap,t.$$p=(a=function(e){var t,r,o=a.$$s||this;return null==o.method_reference&&(o.method_reference=n),null==e&&(e=n),t=[o.method_reference],r=e,r["$method_reference="].apply(r,t),t[t.length-1]},a.$$s=$,a),t).call(r)}),e.defn(c,"$add_stub",i=function(){var t,r,a,o=this,$=i.$$p,s=$||n,c=n,u=arguments.length-0;0>u&&(u=0);var l=new Array(u);for(c=0;u>c;c++)l[c]=arguments[c+0];return i.$$p=null,(t=(r=e.find_super_dispatcher(o,"add_stub",i,null).apply(o,e.to_a(l).concat(s.$to_proc()))).$tap,t.$$p=(a=function(e){var t,r,o=a.$$s||this;return null==o.method_reference&&(o.method_reference=n),null==e&&(e=n),t=[o.method_reference],r=e,r["$method_reference="].apply(r,t),t[t.length-1]},a.$$s=o,a),t).call(r)}),e.defn(c,"$proxy_method_invoked",s=function(t){var r=this,a=s.$$p,o=n,$=n,i=n,c=arguments.length-1;0>c&&(c=0);var u=new Array(c);for(o=0;c>o;o++)u[o]=arguments[o+1];for(s.$$p=null,$=[],i=0;i<arguments.length;i++)$[i]=arguments[i];return r["$validate_arguments!"](u),e.find_super_dispatcher(r,"proxy_method_invoked",s,a).apply(r,$)}),c.$private(),e.defn(c,"$validate_arguments!",function(e){var t,r,a,o=this;return(t=(r=o.method_reference).$with_signature,t.$$p=(a=function(t){var r,o=a.$$s||this,$=n;return null==t&&(t=n),$=l.get("Support").$$scope.get("StrictSignatureVerifier").$new(t,e),(r=$["$valid?"]())===n||r.$$is_boolean&&1!=r?o.$raise(l.get("ArgumentError"),$.$error_message()):n},a.$$s=o,a),t).call(r)}),n&&"validate_arguments!"}(c.base,c.get("MethodDouble")),function(t,$super){function a(){}var o,i,s=a=$(t,$super,"VerifyingExistingMethodDouble",a),c=s.$$proto,u=s.$$scope;return c.valid_method=n,e.defn(s,"$initialize",o=function(t,n,r){var a=this;o.$$p;return o.$$p=null,e.find_super_dispatcher(a,"initialize",o,null).apply(a,[t,n,r,a]),a.valid_method=t["$respond_to?"](n,!0),a["$save_original_method!"]()}),e.defn(s,"$with_signature",i=function(){var t,a=this,o=i.$$p,$=o||n;return i.$$p=null,t=e.yield1($,u.get("Support").$$scope.get("MethodSignature").$new(a.$original_method())),t===r?t:t}),e.defn(s,"$unimplemented?",function(){var e=this;return e.valid_method["$!"]()}),n&&"unimplemented?"}(c.base,c.get("VerifyingMethodDouble"))}(c.base)}(t.base)},Opal.modules["rspec/mocks/version"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=(e.nil,e.breaker,e.slice,e.module);return function(t){var r,a=r=n(t,"RSpec"),o=(a.$$proto,a.$$scope);!function(t){var r,a=r=n(t,"Mocks"),o=(a.$$proto,a.$$scope);!function(t){var r,a=r=n(t,"Version"),o=(a.$$proto,a.$$scope);e.cdecl(o,"STRING","3.1.3")}(o.base)}(o.base)}(t.base)},Opal.modules["rspec/support/caller_filter"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>=t:e["$>="](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}e.dynamic_require_severity="ignore";var a=(e.top,e),o=e.nil,$=(e.breaker,e.slice,e.module),i=e.klass;return e.add_stubs(["$join","$+","$union","$>=","$caller","$raise","$find","$!~","$*"]),function(a){var s,c=s=$(a,"RSpec"),u=(c.$$proto,c.$$scope);!function(a,$super){function $(){}var s=$=i(a,$super,"CallerFilter",$),c=(s.$$proto,s.$$scope);return e.cdecl(c,"RSPEC_LIBS",["core","mocks","expectations","support","matchers","rails"]),e.cdecl(c,"ADDITIONAL_TOP_LEVEL_FILES",["autorun"]),e.cdecl(c,"LIB_REGEX",new RegExp("/lib/rspec/("+t(c.get("RSPEC_LIBS"),c.get("ADDITIONAL_TOP_LEVEL_FILES")).$join("|")+")(\\.rb|/)")),e.cdecl(c,"IGNORE_REGEX",c.get("Regexp").$union(c.get("LIB_REGEX"),"rubygems/core_ext/kernel_require.rb")),n(c.get("RUBY_VERSION"),"2.0.0")?(e.defs(s,"$first_non_rspec_line",function(){var e,n,a,$=this,i=o,s=o,u=o,l=o;for(i=5,s=1,u=o;u===!1||u===o;)l=$.$caller(s,i),l!==!1&&l!==o||$.$raise("No non-lib lines in stack"),u=(e=(n=l).$find,e.$$p=(a=function(e){a.$$s||this;return null==e&&(e=o),e["$!~"](c.get("IGNORE_REGEX"))},a.$$s=$,a),e).call(n),s=t(s,i),i=r(i,2);return u}),o&&"first_non_rspec_line"):(e.defs(s,"$first_non_rspec_line",function(){var e,t,n,r=this;return(e=(t=r.$caller()).$find,e.$$p=(n=function(e){n.$$s||this;return null==e&&(e=o),e["$!~"](c.get("IGNORE_REGEX"))},n.$$s=r,n),e).call(t)}),o&&"first_non_rspec_line")}(u.base,null)}(a.base)},Opal.modules["rspec/support/differ"]=function(e){e.dynamic_require_severity="ignore";var t=e.top,n=e,r=e.nil,a=(e.breaker,e.slice,e.module),o=e.klass,$=e.hash2;return e.add_stubs(["$require_rspec_support","$require","$all_strings?","$any_multiline_strings?","$diff_as_string","$coerce_to_string","$no_procs?","$no_numbers?","$diff_as_object","$to_s","$pick_encoding","$new","$each_cons","$overlaps?","$add_old_hunk_to_hunk","$add_to_output","$diff","$format_type","$hunks","$last","$finalize_output","$color_diff","$handle_encoding_errors","$object_to_string","$attr_reader","$alias_method","$fetch","$lambda","$private","$none?","$===","$safely_flatten","$all?","$any?","$multiline?","$join","$diffably_stringify","$map","$inspect","$gsub","$method_defined?","$include?","$encode","$encoding","$<<","$merge","$==","$flatten","$color","$color?","$chr","$[]","$green","$red","$blue","$normal","$lines","$call","$singleline_pp","$sort_by","$keys","$=~","$pp","$compatible?","$default_external","$!=","$source_encoding"]),n.get("RSpec").$$scope.get("Support").$require_rspec_support("encoded_string"),n.get("RSpec").$$scope.get("Support").$require_rspec_support("hunk_generator"),t.$require("pp"),function(t){var n,i=n=a(t,"RSpec"),s=(i.$$proto,i.$$scope);!function(t){var n,i=n=a(t,"Support"),s=(i.$$proto,i.$$scope);!function(t,$super){function n(){}var a,i=n=o(t,$super,"Differ",n),s=i.$$proto,c=i.$$scope;return s.encoding=s.hunks=s.actual=s.expected=s.object_preparer=r,e.defn(i,"$diff",function(e,t){var n,a,o=this,$=r;return $="",(n=(a=e!==!1&&e!==r)?t:e)===r||n.$$is_boolean&&1!=n||((n=o["$all_strings?"](e,t))===r||n.$$is_boolean&&1!=n?(a=o["$no_procs?"](e,t),(n=a!==!1&&a!==r?o["$no_numbers?"](e,t):a)===r||n.$$is_boolean&&1!=n||($=o.$diff_as_object(e,t))):(n=o["$any_multiline_strings?"](e,t))===r||n.$$is_boolean&&1!=n||($=o.$diff_as_string(o.$coerce_to_string(e),o.$coerce_to_string(t)))),$.$to_s()}),e.defn(i,"$diff_as_string",function(t,n){var a,o,$,i=this,s=r;try{return i.encoding=i.$pick_encoding(t,n),i.actual=c.get("EncodedString").$new(t,i.encoding),i.expected=c.get("EncodedString").$new(n,i.encoding),s=c.get("EncodedString").$new("\n",i.encoding),(a=(o=i.$hunks()).$each_cons,a.$$p=($=function(e,t){var n,a=$.$$s||this;null==e&&(e=r),null==t&&(t=r);try{return(n=t["$overlaps?"](e))===r||n.$$is_boolean&&1!=n?a.$add_to_output(s,e.$diff(a.$format_type()).$to_s()):a.$add_old_hunk_to_hunk(t,e)}finally{a.$add_to_output(s,"\n")}},$.$$s=i,$),a).call(o,2),(a=i.$hunks().$last())===r||a.$$is_boolean&&1!=a||i.$finalize_output(s,i.$hunks().$last().$diff(i.$format_type()).$to_s()),i.$color_diff(s)}catch(u){if(!e.rescue(u,[c.get("Encoding").$$scope.get("CompatibilityError")]))throw u;try{return i.$handle_encoding_errors()}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}),e.defn(i,"$diff_as_object",function(e,t){var n=this,a=r,o=r;return a=n.$object_to_string(e),o=n.$object_to_string(t),n.$diff_as_string(a,o)}),i.$attr_reader("color"),i.$alias_method("color?","color"),e.defn(i,"$initialize",function(e){var t,n,a,o=this;return null==e&&(e=$([],{})),o.color=e.$fetch("color",!1),o.object_preparer=e.$fetch("object_preparer",(t=(n=o).$lambda,t.$$p=(a=function(e){a.$$s||this;return null==e&&(e=r),e},a.$$s=o,a),t).call(n))}),i.$private(),e.defn(i,"$no_procs?",function(){var e,t,n,a=this,o=r,$=arguments.length-0;0>$&&($=0);var i=new Array($);for(o=0;$>o;o++)i[o]=arguments[o+0];return(e=(t=a.$safely_flatten(i))["$none?"],e.$$p=(n=function(e){n.$$s||this;return null==e&&(e=r),c.get("Proc")["$==="](e)},n.$$s=a,n),e).call(t)}),e.defn(i,"$all_strings?",function(){var e,t,n,a=this,o=r,$=arguments.length-0;0>$&&($=0);var i=new Array($);for(o=0;$>o;o++)i[o]=arguments[o+0];return(e=(t=a.$safely_flatten(i))["$all?"],e.$$p=(n=function(e){n.$$s||this;return null==e&&(e=r),c.get("String")["$==="](e)},n.$$s=a,n),e).call(t)}),e.defn(i,"$any_multiline_strings?",function(){var t,n,a,o,$,i=this,s=r,c=arguments.length-0;0>c&&(c=0);var u=new Array(c);for(s=0;c>s;s++)u[s]=arguments[s+0];return t=(n=i)["$all_strings?"].apply(n,e.to_a(u)),t!==!1&&t!==r?(a=(o=i.$safely_flatten(u))["$any?"],a.$$p=($=function(e){var t=$.$$s||this;return null==e&&(e=r),t["$multiline?"](e)},$.$$s=i,$),a).call(o):t}),e.defn(i,"$no_numbers?",function(){var e,t,n,a=this,o=r,$=arguments.length-0;0>$&&($=0);var i=new Array($);for(o=0;$>o;o++)i[o]=arguments[o+0];return(e=(t=a.$safely_flatten(i))["$none?"],e.$$p=(n=function(e){n.$$s||this;return null==e&&(e=r),c.get("Numeric")["$==="](e)},n.$$s=a,n),e).call(t)}),e.defn(i,"$coerce_to_string",function(e){var t,n=this;return(t=c.get("Array")["$==="](e))===r||t.$$is_boolean&&1!=t?e:n.$diffably_stringify(e).$join("\n")}),e.defn(i,"$diffably_stringify",function(e){var t,n,a,o=this;return(t=(n=e).$map,t.$$p=(a=function(e){var t;a.$$s||this;return null==e&&(e=r),(t=c.get("Array")["$==="](e))===r||t.$$is_boolean&&1!=t?e.$to_s().$gsub("\n","\\n"):e.$inspect()},a.$$s=o,a),t).call(n)}),(a=c.get("String")["$method_defined?"]("encoding"))===r||a.$$is_boolean&&1!=a?e.defn(i,"$multiline?",function(e){return e["$include?"]("\n")}):e.defn(i,"$multiline?",function(e){return e["$include?"]("\n".$encode(e.$encoding()))}),e.defn(i,"$hunks",function(){var e,t=this;return(e=t.hunks)!==!1&&e!==r?e:t.hunks=c.get("HunkGenerator").$new(t.actual,t.expected).$hunks()}),e.defn(i,"$finalize_output",function(e,t){var n=this;return n.$add_to_output(e,t),n.$add_to_output(e,"\n")}),e.defn(i,"$add_to_output",function(e,t){return e["$<<"](t)}),e.defn(i,"$add_old_hunk_to_hunk",function(e,t){return e.$merge(t)}),e.defn(i,"$safely_flatten",function(e){for(var t;(t=e["$=="](e.$flatten(1)))===r||t.$$is_boolean&&1!=t;)e=e.$flatten(1);return e}),e.defn(i,"$format_type",function(){return"unified"}),e.defn(i,"$color",function(e,t){return"e["+t+"m"+e+"e[0m"}),e.defn(i,"$red",function(e){var t=this;return t.$color(e,31)}),e.defn(i,"$green",function(e){var t=this;return t.$color(e,32)}),e.defn(i,"$blue",function(e){var t=this;return t.$color(e,34)}),e.defn(i,"$normal",function(e){var t=this;return t.$color(e,0)}),e.defn(i,"$color_diff",function(e){var t,n,a,o=this;return(t=o["$color?"]())===r||t.$$is_boolean&&1!=t?e:(t=(n=e.$lines()).$map,t.$$p=(a=function(e){var t=a.$$s||this,n=r;return null==e&&(e=r),function(){return n=e["$[]"](0).$chr(),"+"["$==="](n)?t.$green(e):"-"["$==="](n)?t.$red(e):"@"["$==="](n)&&e["$[]"](1).$chr()["$=="]("@")?t.$blue(e):t.$normal(e)}()},a.$$s=o,a),t).call(n).$join()}),e.defn(i,"$object_to_string",function(e){var t,n,a,o,$,i,s=this,u=r;return e=s.object_preparer.$call(e),function(){return u=e,c.get("Hash")["$==="](u)?(t=(n=(o=($=e.$keys()).$sort_by,o.$$p=(i=function(e){i.$$s||this;return null==e&&(e=r),e.$to_s()},i.$$s=s,i),o).call($)).$map,t.$$p=(a=function(t){var n=(a.$$s||this,r),o=r;return null==t&&(t=r),n=c.get("PP").$singleline_pp(t,""),o=c.get("PP").$singleline_pp(e["$[]"](t),""),""+n+" => "+o+","},a.$$s=s,a),t).call(n).$join("\n"):c.get("String")["$==="](u)?(t=e["$=~"](/\n/))===r||t.$$is_boolean&&1!=t?e.$inspect():e:c.get("PP").$pp(e,"")}()}),(a=c.get("String")["$method_defined?"]("encoding"))===r||a.$$is_boolean&&1!=a?e.defn(i,"$pick_encoding",function(e,t){return r}):e.defn(i,"$pick_encoding",function(e,t){var n;return(n=c.get("Encoding")["$compatible?"](e,t))!==!1&&n!==r?n:c.get("Encoding").$default_external()}),e.defn(i,"$handle_encoding_errors",function(){var e,t=this;return(e=t.actual.$source_encoding()["$!="](t.expected.$source_encoding()))===r||e.$$is_boolean&&1!=e?"Could not produce a diff because of the encoding of the string "+("("+t.expected.$source_encoding()+")"):"Could not produce a diff because the encoding of the actual string "+("("+t.actual.$source_encoding()+") differs from the encoding of the expected ")+("string ("+t.expected.$source_encoding()+")")}),r&&"handle_encoding_errors"}(s.base,null)}(s.base)}(n.base)},Opal.modules["rspec/support/directory_maker"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass;return e.add_stubs(["$require_rspec_support","$generate_stack","$each","$generate_path","$directory_exists?","$mkdir","$raise","$message","$split","$windows_file_path?","$start_with?","$==","$[]","$join","$exist?","$directory?","$private_class_method"]),t.get("RSpec").$$scope.get("Support").$require_rspec_support("os"),function(t){var o,$=o=r(t,"RSpec"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"Support"),i=($.$$proto,$.$$scope);!function(t,$super){function r(){}var o,$=r=a(t,$super,"DirectoryMaker",r),i=($.$$proto,$.$$scope);return e.defs($,"$mkdir_p",function(t){var r,a,o,$=this,s=n;return s=$.$generate_stack(t),(r=(a=t.$split(i.get("File").$$scope.get("SEPARATOR"))).$each,r.$$p=(o=function(t){var r,a=o.$$s||this,$=n;null==t&&(t=n),s=a.$generate_path(s,t);try{return(r=a["$directory_exists?"](s))===n||r.$$is_boolean&&1!=r?i.get("Dir").$mkdir(s):n}catch(c){if(!e.rescue(c,[i.get("Errno").$$scope.get("ENOTDIR")]))throw c;$=c;try{return a.$raise(i.get("Errno").$$scope.get("EEXIST"),$.$message())}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}},o.$$s=$,o),r).call(a)}),(o=i.get("OS")["$windows_file_path?"]())===n||o.$$is_boolean&&1!=o?(e.defs($,"$generate_stack",function(e){var t;return(t=e["$start_with?"](i.get("File").$$scope.get("SEPARATOR")))===n||t.$$is_boolean&&1!=t?".":i.get("File").$$scope.get("SEPARATOR")}),e.defs($,"$generate_path",function(e,t){return i.get("File").$join(e,t)})):(e.defs($,"$generate_stack",function(e){var t;return(t=e["$start_with?"](i.get("File").$$scope.get("SEPARATOR")))===n||t.$$is_boolean&&1!=t?e["$[]"](1)["$=="](":")?"":".":i.get("File").$$scope.get("SEPARATOR")}),e.defs($,"$generate_path",function(e,t){return e["$=="]("")?t:e["$=="](i.get("File").$$scope.get("SEPARATOR"))?i.get("File").$join("",t):i.get("File").$join(e,t)})),e.defs($,"$directory_exists?",function(e){var t;return t=i.get("File")["$exist?"](e),t!==!1&&t!==n?i.get("File")["$directory?"](e):t}),$.$private_class_method("directory_exists?"),$.$private_class_method("generate_stack"),$.$private_class_method("generate_path")}(i.base,null)}(i.base)}(t.base)},Opal.modules["rspec/support/encoded_string"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice),a=e.module,o=e.klass,$=e.hash2;return e.add_stubs(["$detect_source_encoding","$matching_encoding","$attr_reader","$&","$map","$to_proc","$instance_methods","$each","$define_method","$__send__","$<<","$split","$method_defined?","$private","$encode","$normalize_missing","$force_encoding","$==","$to_s","$gsub","$encoding"]),function(t){var i,s=i=a(t,"RSpec"),c=(s.$$proto,s.$$scope);!function(t){var i,s=i=a(t,"Support"),c=(s.$$proto,s.$$scope);!function(t,$super){function a(){}var i,s,c,u,l=a=o(t,$super,"EncodedString",a),_=l.$$proto,p=l.$$scope,d=n;return _.string=_.encoding=n,e.cdecl(p,"MRI_UNICODE_UNKOWN_CHARACTER","\xef\xbf\xbd"),e.defn(l,"$initialize",function(e,t){var r=this;return null==t&&(t=n),r.encoding=t,r.source_encoding=r.$detect_source_encoding(e),r.string=r.$matching_encoding(e)}),l.$attr_reader("source_encoding"),d=(i=(s=p.get("String").$instance_methods()).$map,i.$$p="to_s".$to_proc(),i).call(s)["$&"](["eql?","lines","==","encoding","empty?"]),(i=(c=d).$each,i.$$p=(u=function(t){var a,o,$,i=u.$$s||this;return null==t&&(t=n),(a=(o=i).$define_method,a.$$p=($=function(a){var o,i,s,c=$.$$s||this;return null==c.string&&(c.string=n),a=r.call(arguments,0),o=$.$$p||n,$.$$p=null,(i=(s=c.string).$__send__,i.$$p=o.$to_proc(),i).apply(s,[t].concat(e.to_a(a)))},$.$$s=i,$),a).call(o,t)},u.$$s=l,u),i).call(c),e.defn(l,"$<<",function(e){var t=this;return t.string["$<<"](t.$matching_encoding(e))}),e.defn(l,"$split",function(e){var t=this;return t.string.$split(t.$matching_encoding(e))}),e.defn(l,"$to_s",function(){var e=this;return e.string}),e.alias(l,"to_str","to_s"),(i=p.get("String")["$method_defined?"]("encoding"))===n||i.$$is_boolean&&1!=i?(l.$private(),e.defn(l,"$matching_encoding",function(e){return e}),e.defn(l,"$detect_source_encoding",function(e){return"US-ASCII"}),n&&"detect_source_encoding"):(l.$private(),e.defn(l,"$matching_encoding",function(t){var n=this;try{return t.$encode(n.encoding)}catch(r){if(e.rescue(r,[p.get("Encoding").$$scope.get("UndefinedConversionError"),p.get("Encoding").$$scope.get("InvalidByteSequenceError")]))try{return n.$normalize_missing(t.$encode(n.encoding,$(["invalid","undef"],{invalid:"replace",undef:"replace"})))}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}else{if(!e.rescue(r,[p.get("Encoding").$$scope.get("ConverterNotFoundError")]))throw r;try{n.$normalize_missing(t.$force_encoding(n.encoding).$encode($(["invalid"],{invalid:"replace"})))}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}}),e.defn(l,"$normalize_missing",function(e){var t=this;return t.encoding.$to_s()["$=="]("UTF-8")?e.$gsub(p.get("MRI_UNICODE_UNKOWN_CHARACTER").$force_encoding(t.encoding),"?"):e}),e.defn(l,"$detect_source_encoding",function(e){return e.$encoding()}),n&&"detect_source_encoding")}(c.base,null)}(c.base)}(t.base)},Opal.modules["rspec/support/hunk_generator"]=function(e){e.dynamic_require_severity="ignore";var t=e.top,n=e,r=e.nil,a=(e.breaker,e.slice,e.module),o=e.klass;return e.add_stubs(["$require","$map","$build_hunk","$diffs","$private","$diff","$expected_lines","$actual_lines","$map!","$chomp","$split","$tap","$file_length_difference","$new","$context_lines"]),t.$require("diff/lcs"),t.$require("diff/lcs/hunk"),function(t){var n,$=n=a(t,"RSpec"),i=($.$$proto,$.$$scope);!function(t){var n,$=n=a(t,"Support"),i=($.$$proto,$.$$scope);!function(t,$super){function n(){}var a=n=o(t,$super,"HunkGenerator",n),$=a.$$proto,i=a.$$scope;return $.hunks=$.expected=$.actual=$.file_length_difference=r,e.defn(a,"$initialize",function(e,t){var n=this;return n.actual=e,n.expected=t}),e.defn(a,"$hunks",function(){var e,t,n,a,o=this;return o.file_length_difference=0,(e=o.hunks)!==!1&&e!==r?e:o.hunks=(t=(n=o.$diffs()).$map,t.$$p=(a=function(e){var t=a.$$s||this;return null==e&&(e=r),t.$build_hunk(e)},a.$$s=o,a),t).call(n)}),a.$private(),e.defn(a,"$diffs",function(){var e=this;return i.get("Diff").$$scope.get("LCS").$diff(e.$expected_lines(),e.$actual_lines())}),e.defn(a,"$expected_lines",function(){var e,t,n,a=this;return(e=(t=a.expected.$split("\n"))["$map!"],e.$$p=(n=function(e){n.$$s||this;return null==e&&(e=r),e.$chomp()},n.$$s=a,n),e).call(t)}),e.defn(a,"$actual_lines",function(){var e,t,n,a=this;return(e=(t=a.actual.$split("\n"))["$map!"],e.$$p=(n=function(e){n.$$s||this;return null==e&&(e=r),e.$chomp()},n.$$s=a,n),e).call(t)}),e.defn(a,"$build_hunk",function(e){var t,n,a,o=this;return(t=(n=i.get("Diff").$$scope.get("LCS").$$scope.get("Hunk").$new(o.$expected_lines(),o.$actual_lines(),e,o.$context_lines(),o.file_length_difference)).$tap,t.$$p=(a=function(e){var t=a.$$s||this;return null==e&&(e=r),t.file_length_difference=e.$file_length_difference()},a.$$s=o,a),t).call(n)}),e.defn(a,"$context_lines",function(){return 3}),r&&"context_lines"}(i.base,null)}(i.base)}(n.base)},Opal.modules["rspec/support/method_signature_verifier"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?t>=e:e["$<="](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function a(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}function o(e,t){return"number"==typeof e&&"number"==typeof t?e/t:e["$/"](t)}e.dynamic_require_severity="ignore";var $=e.top,i=e,s=e.nil,c=(e.breaker,e.slice,e.module),u=e.klass;return e.add_stubs(["$require","$require_rspec_support","$attr_reader","$classify_parameters","$max_non_kw_args","$===","$min_non_kw_args","$to_s","$<=","$optional_and_splat_args_supported?","$==","$non_kw_args_arity_description","$<<","$any?","$join","$map","$to_proc","$-","$last","$could_contain_kw_args?","$count","$each","$+","$parameters","$arity","$<","$~","$/","$split_args","$empty?","$missing_kw_args","$invalid_kw_args","$valid_non_kw_args?","$%","$!","$length","$non_kw_args","$private","$missing_kw_args_from","$kw_args","$invalid_kw_args_from","$has_kw_args_in?","$keys","$pop","$is_a_matcher?","$new"]),$.$require("rspec/support"),i.get("RSpec").$$scope.get("Support").$require_rspec_support("ruby_features"),i.get("RSpec").$$scope.get("Support").$require_rspec_support("matcher_definition"),function($){var i,l=i=c($,"RSpec"),_=(l.$$proto,l.$$scope);!function($){var i,l=i=c($,"Support"),_=(l.$$proto,l.$$scope);!function($,$super){function i(){}var c,l=i=u($,$super,"MethodSignature",i),_=l.$$proto,p=l.$$scope;return _.description=_.optional_kw_args=_.required_kw_args=_.allows_any_kw_args=_.allowed_kw_args=_.method=_.min_non_kw_args=s,l.$attr_reader("min_non_kw_args","max_non_kw_args"),e.defn(l,"$initialize",function(e){var t=this;return t.method=e,t.$classify_parameters()}),e.defn(l,"$non_kw_args_arity_description",function(){var e=this,t=s;return function(){return t=e.$max_non_kw_args(),e.$min_non_kw_args()["$==="](t)?e.$min_non_kw_args().$to_s():p.get("INFINITY")["$==="](t)?""+e.$min_non_kw_args()+" or more":""+e.$min_non_kw_args()+" to "+e.$max_non_kw_args()}()}),e.defn(l,"$valid_non_kw_args?",function(e){var n,r=this;return(n=t(r.$min_non_kw_args(),e))?t(e,r.$max_non_kw_args()):t(r.$min_non_kw_args(),e)}),(c=p.get("RubyFeatures")["$optional_and_splat_args_supported?"]())===s||c.$$is_boolean&&1!=c?(e.defn(l,"$description",function(){var e=this;return"arity of "+e.$non_kw_args_arity_description()}),e.defn(l,"$missing_kw_args_from",function(e){return[]}),e.defn(l,"$invalid_kw_args_from",function(e){
return[]}),e.defn(l,"$has_kw_args_in?",function(e){return!1}),e.defn(l,"$could_contain_kw_args?",function(){return!1}),e.defn(l,"$classify_parameters",function(){var e=this,t=s;return t=e.method.$arity(),a(t,0)?(e.min_non_kw_args=t["$~"](),e.max_non_kw_args=p.get("INFINITY")):(e.min_non_kw_args=t,e.max_non_kw_args=t)})):(e.defn(l,"$description",function(){var e,t,n,r,a=this,o=s;return(e=a.description)!==!1&&e!==s?e:a.description=function(){return o=[],a.$non_kw_args_arity_description()["$=="]("0")||o["$<<"]("arity of "+a.$non_kw_args_arity_description()),(t=a.optional_kw_args["$any?"]())===s||t.$$is_boolean&&1!=t||o["$<<"]("optional keyword args ("+(t=(n=a.optional_kw_args).$map,t.$$p="inspect".$to_proc(),t).call(n).$join(", ")+")"),(t=a.required_kw_args["$any?"]())===s||t.$$is_boolean&&1!=t||o["$<<"]("required keyword args ("+(t=(r=a.required_kw_args).$map,t.$$p="inspect".$to_proc(),t).call(r).$join(", ")+")"),(t=a.allows_any_kw_args)===s||t.$$is_boolean&&1!=t||o["$<<"]("any additional keyword args"),o.$join(" and ")}()}),e.defn(l,"$missing_kw_args_from",function(e){var t=this;return n(t.required_kw_args,e)}),e.defn(l,"$invalid_kw_args_from",function(e){var t,r=this;return(t=r.allows_any_kw_args)===s||t.$$is_boolean&&1!=t?n(e,r.allowed_kw_args):[]}),e.defn(l,"$has_kw_args_in?",function(e){var t,n=this;return t=p.get("Hash")["$==="](e.$last()),t!==!1&&t!==s?n["$could_contain_kw_args?"](e):t}),e.defn(l,"$could_contain_kw_args?",function(e){var n,r=this;return t(e.$count(),r.$min_non_kw_args())?!1:(n=r.allows_any_kw_args)!==!1&&n!==s?n:r.allowed_kw_args["$any?"]()}),e.defn(l,"$classify_parameters",function(){var e,t,n,a=this,o=s;return o=a.min_non_kw_args=0,e=[[],[]],a.optional_kw_args=e[0],a.required_kw_args=e[1],e,a.allows_any_kw_args=!1,(e=(t=a.method.$parameters()).$each,e.$$p=(n=function(e,t){var a=n.$$s||this,$=s;return null==a.required_kw_args&&(a.required_kw_args=s),null==a.optional_kw_args&&(a.optional_kw_args=s),null==a.min_non_kw_args&&(a.min_non_kw_args=s),null==e&&(e=s),null==t&&(t=s),function(){return $=e,"keyreq"["$==="]($)?a.required_kw_args["$<<"](t):"key"["$==="]($)?a.optional_kw_args["$<<"](t):"keyrest"["$==="]($)?a.allows_any_kw_args=!0:"req"["$==="]($)?a.min_non_kw_args=r(a.min_non_kw_args,1):"opt"["$==="]($)?o=r(o,1):"rest"["$==="]($)?o=p.get("INFINITY"):s}()},n.$$s=a,n),e).call(t),a.max_non_kw_args=r(a.min_non_kw_args,o),a.allowed_kw_args=r(a.required_kw_args,a.optional_kw_args)})),e.cdecl(p,"INFINITY",o(1,0))}(_.base,null),function(t,$super){function n(){}var r,a,o=n=u(t,$super,"BlockSignature",n),$=o.$$proto,i=o.$$scope;return $.max_non_kw_args=s,(r=i.get("RubyFeatures")["$optional_and_splat_args_supported?"]())===s||r.$$is_boolean&&1!=r?s:(e.defn(o,"$classify_parameters",a=function(){var t=this,n=a.$$p,r=s,o=s;for(a.$$p=null,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return e.find_super_dispatcher(t,"classify_parameters",a,n).apply(t,r),t.max_non_kw_args["$=="](i.get("INFINITY"))?s:t.min_non_kw_args=t.max_non_kw_args}),s&&"classify_parameters")}(_.base,_.get("MethodSignature")),function(t,$super){function n(){}var r=n=u(t,$super,"MethodSignatureVerifier",n),a=r.$$proto;r.$$scope;return a.signature=s,r.$attr_reader("non_kw_args","kw_args"),e.defn(r,"$initialize",function(t,n){var r,a,o,$=this;return $.signature=t,a=(o=$).$split_args.apply(o,e.to_a(n)),r=e.to_ary(a),$.non_kw_args=null==r[0]?s:r[0],$.kw_args=null==r[1]?s:r[1],a}),e.defn(r,"$valid?",function(){var e,t,n=this;return t=n.$missing_kw_args()["$empty?"](),e=t!==!1&&t!==s?n.$invalid_kw_args()["$empty?"]():t,e!==!1&&e!==s?n["$valid_non_kw_args?"]():e}),e.defn(r,"$error_message",function(){var e,t=this;return(e=t.$missing_kw_args()["$any?"]())===s||e.$$is_boolean&&1!=e?(e=t.$invalid_kw_args()["$any?"]())===s||e.$$is_boolean&&1!=e?(e=t["$valid_non_kw_args?"]()["$!"]())===s||e.$$is_boolean&&1!=e?s:"Wrong number of arguments. Expected %s, got %s."["$%"]([t.signature.$non_kw_args_arity_description(),t.$non_kw_args().$length()]):"Invalid keyword arguments provided: %s"["$%"]([t.$invalid_kw_args().$join(", ")]):"Missing required keyword arguments: %s"["$%"]([t.$missing_kw_args().$join(", ")])}),r.$private(),e.defn(r,"$valid_non_kw_args?",function(){var e=this;return e.signature["$valid_non_kw_args?"](e.$non_kw_args().$length())}),e.defn(r,"$missing_kw_args",function(){var e=this;return e.signature.$missing_kw_args_from(e.$kw_args())}),e.defn(r,"$invalid_kw_args",function(){var e=this;return e.signature.$invalid_kw_args_from(e.$kw_args())}),e.defn(r,"$split_args",function(){var e,t=this,n=s,r=s,a=arguments.length-0;0>a&&(a=0);var o=new Array(a);for(r=0;a>r;r++)o[r]=arguments[r+0];return n=function(){return(e=t.signature["$has_kw_args_in?"](o))===s||e.$$is_boolean&&1!=e?[]:o.$pop().$keys()}(),[o,n]}),s&&"split_args"}(_.base,null),e.cdecl(_,"StrictSignatureVerifier",_.get("MethodSignatureVerifier")),function(t,$super){function n(){}var r,a=n=u(t,$super,"LooseSignatureVerifier",n),o=a.$$proto,$=a.$$scope;return o.signature=s,a.$private(),e.defn(a,"$split_args",r=function(){var t,n,a=this,o=(r.$$p,s),i=arguments.length-0;0>i&&(i=0);var c=new Array(i);for(o=0;i>o;o++)c[o]=arguments[o+0];return r.$$p=null,n=$.get("RSpec").$$scope.get("Support")["$is_a_matcher?"](c.$last()),(t=n!==!1&&n!==s?a.signature["$could_contain_kw_args?"](c):n)===s||t.$$is_boolean&&1!=t||(c.$pop(),a.signature=$.get("SignatureWithKeywordArgumentsMatcher").$new(a.signature)),e.find_super_dispatcher(a,"split_args",r,null).apply(a,e.to_a(c))}),function(t,$super){function n(){}var r=n=u(t,$super,"SignatureWithKeywordArgumentsMatcher",n),a=r.$$proto;r.$$scope;return a.signature=s,e.defn(r,"$initialize",function(e){var t=this;return t.signature=e}),e.defn(r,"$missing_kw_args_from",function(e){return[]}),e.defn(r,"$invalid_kw_args_from",function(e){return[]}),e.defn(r,"$non_kw_args_arity_description",function(){var e=this;return e.signature.$non_kw_args_arity_description()}),e.defn(r,"$valid_non_kw_args?",function(){var t,n=this,r=s,a=arguments.length-0;0>a&&(a=0);var o=new Array(a);for(r=0;a>r;r++)o[r]=arguments[r+0];return(t=n.signature)["$valid_non_kw_args?"].apply(t,e.to_a(o))}),e.defn(r,"$has_kw_args_in?",function(e){var t=this;return t.signature["$has_kw_args_in?"](e)}),s&&"has_kw_args_in?"}($.base,null)}(_.base,_.get("MethodSignatureVerifier"))}(_.base)}(i.base)},Opal.modules["rspec/support/os"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=(e.nil,e.breaker,e.slice,e.module);return e.add_stubs(["$=~","$[]","$module_function","$=="]),function(t){var r,a=r=n(t,"RSpec"),o=(a.$$proto,a.$$scope);!function(t){var r,a=r=n(t,"Support"),o=(a.$$proto,a.$$scope);!function(t){var r,a=r=n(t,"OS"),o=(a.$$proto,a.$$scope);e.defn(a,"$windows?",function(){return o.get("RbConfig").$$scope.get("CONFIG")["$[]"]("host_os")["$=~"](/cygwin|mswin|mingw|bccwin|wince|emx/)}),a.$module_function("windows?"),e.defn(a,"$windows_file_path?",function(){return e.get("File").$$scope.get("ALT_SEPARATOR")["$=="]("\\")}),a.$module_function("windows_file_path?")}(o.base)}(o.base)}(t.base)},Opal.modules["rspec/support/recursive_const_methods"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=e.breaker,a=(e.slice,e.module);return e.add_stubs(["$==","$arity","$method","$const_defined?","$const_defined_on?","$const_get","$raise","$name","$select","$constants","$inject","$get_const_defined_on","$split","$normalize_const_name","$!","$===","$join","$sub"]),function(t){var o,$=o=a(t,"RSpec"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=a(t,"Support"),i=($.$$proto,$.$$scope);!function(t){var o,$,i=o=a(t,"RecursiveConstMethods"),s=(i.$$proto,i.$$scope);s.get("Module").$method("const_defined?").$arity()["$=="](1)?(e.defn(i,"$const_defined_on?",function(e,t){return e["$const_defined?"](t)}),e.defn(i,"$get_const_defined_on",function(e,t){var r,a=this;return(r=a["$const_defined_on?"](e,t))===n||r.$$is_boolean&&1!=r?a.$raise(s.get("NameError"),"uninitialized constant "+e.$name()+"::"+t):e.$const_get(t)}),e.defn(i,"$constants_defined_on",function(e){var t,r,a,o=this;return(t=(r=e.$constants()).$select,t.$$p=(a=function(t){var r=a.$$s||this;return null==t&&(t=n),r["$const_defined_on?"](e,t)},a.$$s=o,a),t).call(r)})):(e.defn(i,"$const_defined_on?",function(e,t){return e["$const_defined?"](t,!1)}),e.defn(i,"$get_const_defined_on",function(e,t){return e.$const_get(t,!1)}),e.defn(i,"$constants_defined_on",function(e){return e.$constants(!1)})),e.defn(i,"$recursive_const_get",function(e){var t,r,a,o=this;return(t=(r=o.$normalize_const_name(e).$split("::")).$inject,t.$$p=(a=function(e,t){var r=a.$$s||this;return null==e&&(e=n),null==t&&(t=n),r.$get_const_defined_on(e,t)},a.$$s=o,a),t).call(r,s.get("Object"))}),e.defn(i,"$recursive_const_defined?",$=function(t){try{var a,o,i,c=this,u=$.$$p,l=u||n,_=n;return $.$$p=null,_=c.$normalize_const_name(t).$split("::"),(a=(o=_).$inject,a.$$p=(i=function(t,a){var o,$,c=i.$$s||this,u=t[0],_=t[1];return null==a&&(a=n),(o=($=l!==n)?s.get("Module")["$==="](u)["$!"]():l!==n)===n||o.$$is_boolean&&1!=o||e.yieldX(l,[_,a])!==r?(((o=c["$const_defined_on?"](u,a))===n||o.$$is_boolean&&1!=o)&&e.ret(!1),[c.$get_const_defined_on(u,a),[u,a].$join("::")]):r.$v},i.$$s=c,i),a).call(o,[s.get("Object"),""])}catch(p){if(p===e.returner)return p.$v;throw p}}),e.defn(i,"$normalize_const_name",function(e){return e.$sub(/\A::/,"")})}(i.base)}(i.base)}(t.base)},Opal.modules["rspec/support/version"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=(e.nil,e.breaker,e.slice,e.module);return function(t){var r,a=r=n(t,"RSpec"),o=(a.$$proto,a.$$scope);!function(t){var r,a=r=n(t,"Support"),o=(a.$$proto,a.$$scope);!function(t){var r,a=r=n(t,"Version"),o=(a.$$proto,a.$$scope);e.cdecl(o,"STRING","3.1.2")}(o.base)}(o.base)}(t.base)},Opal.modules.strscan=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.klass);return e.add_stubs(["$attr_reader","$anchor","$scan_until","$length","$size","$rest","$pos=","$private"]),function(t,$super){function a(){}var o=a=r(t,$super,"StringScanner",a),$=o.$$proto;o.$$scope;return $.pos=$.string=$.working=$.matched=$.prev_pos=$.match=n,o.$attr_reader("pos"),o.$attr_reader("matched"),e.defn(o,"$initialize",function(e){var t=this;return t.string=e,t.pos=0,t.matched=n,t.working=e,t.match=[]}),o.$attr_reader("string"),e.defn(o,"$beginning_of_line?",function(){var e=this;return 0===e.pos||"\n"===e.string.charAt(e.pos-1)}),e.alias(o,"bol?","beginning_of_line?"),e.defn(o,"$scan",function(e){var t=this;e=t.$anchor(e);var r=e.exec(t.working);return null==r?t.matched=n:"object"==typeof r?(t.prev_pos=t.pos,t.pos+=r[0].length,t.working=t.working.substring(r[0].length),t.matched=r[0],t.match=r,r[0]):"string"==typeof r?(t.pos+=r.length,t.working=t.working.substring(r.length),r):n}),e.defn(o,"$scan_until",function(e){var t=this;e=t.$anchor(e);for(var r,a=t.pos,o=t.working;;){if(r=e.exec(o),a+=1,o=o.substr(1),null!=r)return t.matched=t.string.substr(t.pos,a-t.pos-1+r[0].length),t.prev_pos=a-1,t.pos=a,t.working=o.substr(r[0].length),t.matched;if(0===o.length)return t.matched=n}}),e.defn(o,"$[]",function(e){var t=this,r=t.match;return 0>e&&(e+=r.length),0>e||e>=r.length?n:null==r[e]?n:r[e]}),e.defn(o,"$check",function(e){var t=this;e=t.$anchor(e);var r=e.exec(t.working);return null==r?t.matched=n:t.matched=r[0]}),e.defn(o,"$check_until",function(e){var t=this,r=t.prev_pos,a=t.pos,o=t.$scan_until(e);return o!==n&&(t.matched=o.substr(-1),t.working=t.string.substr(a)),t.prev_pos=r,t.pos=a,o}),e.defn(o,"$peek",function(e){var t=this;return t.working.substring(0,e)}),e.defn(o,"$eos?",function(){var e=this;return 0===e.working.length}),e.defn(o,"$exist?",function(e){var t=this,r=e.exec(t.working);return null==r?n:0==r.index?0:r.index+1}),e.defn(o,"$skip",function(e){var t=this;e=t.$anchor(e);var r=e.exec(t.working);if(null==r)return t.matched=n;var a=r[0],o=a.length;return t.matched=a,t.prev_pos=t.pos,t.pos+=o,t.working=t.working.substring(o),o}),e.defn(o,"$skip_until",function(e){var t=this,r=t.$scan_until(e);return r===n?n:(t.matched=r.substr(-1),r.length)}),e.defn(o,"$get_byte",function(){var e=this,t=n;return e.pos<e.string.length?(e.prev_pos=e.pos,e.pos+=1,t=e.matched=e.working.substring(0,1),e.working=e.working.substring(1)):e.matched=n,t}),e.alias(o,"getch","get_byte"),e.defn(o,"$match?",function(e){var t=this;e=t.$anchor(e);var r=e.exec(t.working);return null==r?n:(t.prev_pos=t.pos,r[0].length)}),e.defn(o,"$pos=",function(e){var t=this;return 0>e&&(e+=t.string.$length()),t.pos=e,t.working=t.string.slice(e)}),e.defn(o,"$post_match",function(){var e=this;return e.matched===n?n:e.string.substr(e.pos)}),e.defn(o,"$pre_match",function(){var e=this;return e.matched===n?n:e.string.substr(0,e.prev_pos)}),e.defn(o,"$reset",function(){var e=this;return e.working=e.string,e.matched=n,e.pos=0}),e.defn(o,"$rest",function(){var e=this;return e.working}),e.defn(o,"$rest?",function(){var e=this;return 0!==e.working.length}),e.defn(o,"$rest_size",function(){var e=this;return e.$rest().$size()}),e.defn(o,"$terminate",function(){var e,t,r=this;return r.match=n,e=[r.string.$length()],t=r,t["$pos="].apply(t,e),e[e.length-1]}),e.defn(o,"$unscan",function(){var e=this;return e.pos=e.prev_pos,e.prev_pos=n,e.match=n,e}),o.$private(),e.defn(o,"$anchor",function(e){return new RegExp("^(?:"+e.toString().substr(1,e.toString().length-2)+")")}),n&&"anchor"}(t.base,null)},Opal.modules["opal/rspec/requires"]=function(e){e.dynamic_require_severity="ignore";var t=e.top;e.nil,e.breaker,e.slice;return e.add_stubs(["$require"]),t.$require("cgi/util"),t.$require("diff/lcs"),t.$require("diff/lcs/block"),t.$require("diff/lcs/callbacks"),t.$require("diff/lcs/change"),t.$require("diff/lcs/hunk"),t.$require("diff/lcs/internals"),t.$require("erb"),t.$require("json"),t.$require("optparse"),t.$require("pathname"),t.$require("pp"),t.$require("prettyprint"),t.$require("rbconfig"),t.$require("rspec"),t.$require("rspec/core"),t.$require("rspec/core/backport_random"),t.$require("rspec/core/backtrace_formatter"),t.$require("rspec/core/configuration"),t.$require("rspec/core/configuration_options"),t.$require("rspec/core/dsl"),t.$require("rspec/core/example"),t.$require("rspec/core/example_group"),t.$require("rspec/core/filter_manager"),t.$require("rspec/core/flat_map"),t.$require("rspec/core/formatters"),t.$require("rspec/core/formatters/base_formatter"),t.$require("rspec/core/formatters/base_text_formatter"),t.$require("rspec/core/formatters/console_codes"),t.$require("rspec/core/formatters/deprecation_formatter"),t.$require("rspec/core/formatters/documentation_formatter"),t.$require("rspec/core/formatters/helpers"),t.$require("rspec/core/formatters/html_printer"),t.$require("rspec/core/formatters/json_formatter"),t.$require("rspec/core/formatters/progress_formatter"),t.$require("rspec/core/hooks"),t.$require("rspec/core/memoized_helpers"),t.$require("rspec/core/metadata"),t.$require("rspec/core/metadata_filter"),t.$require("rspec/core/mocking_adapters/rspec"),t.$require("rspec/core/notifications"),t.$require("rspec/core/option_parser"),t.$require("rspec/core/ordering"),t.$require("rspec/core/pending"),t.$require("rspec/core/reporter"),t.$require("rspec/core/ruby_project"),t.$require("rspec/core/runner"),t.$require("rspec/core/shared_example_group"),t.$require("rspec/core/version"),t.$require("rspec/core/warnings"),t.$require("rspec/core/world"),t.$require("rspec/expectations"),t.$require("rspec/expectations/configuration"),t.$require("rspec/expectations/expectation_target"),t.$require("rspec/expectations/fail_with"),t.$require("rspec/expectations/handler"),t.$require("rspec/expectations/syntax"),t.$require("rspec/expectations/version"),t.$require("rspec/matchers"),t.$require("rspec/matchers/aliased_matcher"),t.$require("rspec/matchers/built_in"),t.$require("rspec/matchers/built_in/all"),t.$require("rspec/matchers/built_in/base_matcher"),t.$require("rspec/matchers/built_in/be"),t.$require("rspec/matchers/built_in/be_between"),t.$require("rspec/matchers/built_in/be_instance_of"),t.$require("rspec/matchers/built_in/be_kind_of"),t.$require("rspec/matchers/built_in/be_within"),t.$require("rspec/matchers/built_in/change"),t.$require("rspec/matchers/built_in/compound"),t.$require("rspec/matchers/built_in/contain_exactly"),t.$require("rspec/matchers/built_in/cover"),t.$require("rspec/matchers/built_in/eq"),t.$require("rspec/matchers/built_in/eql"),t.$require("rspec/matchers/built_in/equal"),t.$require("rspec/matchers/built_in/exist"),t.$require("rspec/matchers/built_in/has"),t.$require("rspec/matchers/built_in/have_attributes"),t.$require("rspec/matchers/built_in/include"),t.$require("rspec/matchers/built_in/match"),t.$require("rspec/matchers/built_in/operators"),t.$require("rspec/matchers/built_in/output"),t.$require("rspec/matchers/built_in/raise_error"),t.$require("rspec/matchers/built_in/respond_to"),t.$require("rspec/matchers/built_in/satisfy"),t.$require("rspec/matchers/built_in/start_and_end_with"),t.$require("rspec/matchers/built_in/throw_symbol"),t.$require("rspec/matchers/built_in/yield"),t.$require("rspec/matchers/composable"),t.$require("rspec/matchers/dsl"),t.$require("rspec/matchers/generated_descriptions"),t.$require("rspec/matchers/matcher_delegator"),t.$require("rspec/matchers/pretty"),t.$require("rspec/mocks"),t.$require("rspec/mocks/any_instance"),t.$require("rspec/mocks/any_instance/chain"),t.$require("rspec/mocks/any_instance/expect_chain_chain"),t.$require("rspec/mocks/any_instance/expectation_chain"),t.$require("rspec/mocks/any_instance/message_chains"),t.$require("rspec/mocks/any_instance/proxy"),t.$require("rspec/mocks/any_instance/recorder"),t.$require("rspec/mocks/any_instance/stub_chain"),t.$require("rspec/mocks/any_instance/stub_chain_chain"),t.$require("rspec/mocks/argument_list_matcher"),t.$require("rspec/mocks/argument_matchers"),t.$require("rspec/mocks/configuration"),t.$require("rspec/mocks/error_generator"),t.$require("rspec/mocks/example_methods"),t.$require("rspec/mocks/instance_method_stasher"),t.$require("rspec/mocks/matchers/expectation_customization"),t.$require("rspec/mocks/message_expectation"),t.$require("rspec/mocks/method_double"),t.$require("rspec/mocks/method_reference"),t.$require("rspec/mocks/mutate_const"),t.$require("rspec/mocks/object_reference"),t.$require("rspec/mocks/order_group"),t.$require("rspec/mocks/proxy"),t.$require("rspec/mocks/space"),t.$require("rspec/mocks/syntax"),t.$require("rspec/mocks/targets"),t.$require("rspec/mocks/test_double"),t.$require("rspec/mocks/verifying_double"),t.$require("rspec/mocks/verifying_message_expecation"),t.$require("rspec/mocks/verifying_proxy"),t.$require("rspec/mocks/version"),t.$require("rspec/support"),t.$require("rspec/support/caller_filter"),t.$require("rspec/support/differ"),t.$require("rspec/support/directory_maker"),t.$require("rspec/support/encoded_string"),t.$require("rspec/support/fuzzy_matcher"),t.$require("rspec/support/hunk_generator"),t.$require("rspec/support/matcher_definition"),t.$require("rspec/support/method_signature_verifier"),t.$require("rspec/support/os"),t.$require("rspec/support/recursive_const_methods"),t.$require("rspec/support/ruby_features"),t.$require("rspec/support/version"),t.$require("rspec/support/warnings"),t.$require("rspec/version"),t.$require("set"),t.$require("shellwords"),t.$require("stringio"),t.$require("strscan")},Opal.modules.encoding=function(e){e.dynamic_require_severity="ignore";var t=e.top;e.nil,e.breaker,e.slice;return e.add_stubs(["$warn"]),t.$warn("DEPRECATION: encoding is now part of the core library, requiring it is deprecated")},Opal.modules.thread=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=e.breaker,a=(e.slice,e.klass),o=e.hash2;return e.add_stubs(["$allocate","$core_initialize!","$current","$fail","$[]","$coerce_key_name","$[]=","$key?","$keys","$private","$coerce_to!","$public","$clear","$empty?","$size","$shift","$push","$each","$to_proc","$locked?","$lock","$unlock"]),function(e,$super){function t(){}var r=t=a(e,$super,"ThreadError",t);r.$$proto,r.$$scope;return n}(t.base,t.get("StandardError")),function(t,$super){function r(){}var $=r=a(t,$super,"Thread",r),i=$.$$proto,s=$.$$scope;return i.fiber_locals=i.thread_locals=n,e.defs($,"$current",function(){var e,t=this;return null==t.current&&(t.current=n),((e=t.current)===n||e.$$is_boolean&&1!=e)&&(t.current=t.$allocate(),t.current["$core_initialize!"]()),t.current}),e.defs($,"$list",function(){var e=this;return[e.$current()]}),e.defn($,"$initialize",function(){var e=this,t=n,r=arguments.length-0;0>r&&(r=0);var a=new Array(r);for(t=0;r>t;t++)a[t]=arguments[t+0];return e.$fail(s.get("NotImplementedError"),"Thread creation not available")}),e.defn($,"$[]",function(e){var t=this;return t.fiber_locals["$[]"](t.$coerce_key_name(e))}),e.defn($,"$[]=",function(e,t){var n=this;return n.fiber_locals["$[]="](n.$coerce_key_name(e),t)}),e.defn($,"$key?",function(e){var t=this;return t.fiber_locals["$key?"](t.$coerce_key_name(e))}),e.defn($,"$keys",function(){var e=this;return e.fiber_locals.$keys()}),e.defn($,"$thread_variable_get",function(e){var t=this;return t.thread_locals["$[]"](t.$coerce_key_name(e))}),e.defn($,"$thread_variable_set",function(e,t){var n=this;return n.thread_locals["$[]="](n.$coerce_key_name(e),t)}),e.defn($,"$thread_variable?",function(e){var t=this;return t.thread_locals["$key?"](t.$coerce_key_name(e))}),e.defn($,"$thread_variables",function(){var e=this;return e.thread_locals.$keys()}),$.$private(),e.defn($,"$core_initialize!",function(){var e=this;return e.thread_locals=o([],{}),e.fiber_locals=o([],{})}),e.defn($,"$coerce_key_name",function(e){return s.get("Opal")["$coerce_to!"](e,s.get("String"),"to_s")}),$.$public(),function(t,$super){function r(){}var o,$=r=a(t,$super,"Queue",r),i=$.$$proto,s=$.$$scope;return i.storage=n,e.defn($,"$initialize",function(){var e=this;return e.$clear()}),e.defn($,"$clear",function(){var e=this;return e.storage=[]}),e.defn($,"$empty?",function(){var e=this;return e.storage["$empty?"]()}),e.defn($,"$size",function(){var e=this;return e.storage.$size()}),e.alias($,"length","size"),e.defn($,"$pop",function(e){var t,r=this;return null==e&&(e=!1),(t=r["$empty?"]())===n||t.$$is_boolean&&1!=t||(e!==!1&&e!==n&&r.$fail(s.get("ThreadError"),"Queue empty"),r.$fail(s.get("ThreadError"),"Deadlock")),r.storage.$shift()}),e.alias($,"shift","pop"),e.alias($,"deq","pop"),e.defn($,"$push",function(e){var t=this;return t.storage.$push(e)}),e.alias($,"<<","push"),e.alias($,"enq","push"),e.defn($,"$each",o=function(){var e,t,r=this,a=o.$$p,$=a||n;return o.$$p=null,(e=(t=r.storage).$each,e.$$p=$.$to_proc(),e).call(t)}),n&&"each"}(s.base,null)}(t.base,null),e.cdecl(t,"Queue",t.get("Thread").$$scope.get("Queue")),function(t,$super){function o(){}var $,i=o=a(t,$super,"Mutex",o),s=i.$$proto,c=i.$$scope;return s.locked=n,e.defn(i,"$initialize",function(){var e=this;return e.locked=!1}),e.defn(i,"$lock",function(){var e,t=this;return(e=t.locked)===n||e.$$is_boolean&&1!=e||t.$fail(c.get("ThreadError"),"Deadlock"),t.locked=!0,t}),e.defn(i,"$locked?",function(){var e=this;return e.locked}),e.defn(i,"$owned?",function(){var e=this;return e.locked}),e.defn(i,"$try_lock",function(){var e,t=this;return(e=t["$locked?"]())===n||e.$$is_boolean&&1!=e?(t.$lock(),!0):!1}),e.defn(i,"$unlock",function(){var e,t=this;return((e=t.locked)===n||e.$$is_boolean&&1!=e)&&t.$fail(c.get("ThreadError"),"Mutex not locked"),t.locked=!1,t}),e.defn(i,"$synchronize",$=function(){var t,a=this,o=$.$$p,i=o||n;$.$$p=null,a.$lock();try{return t=e.yieldX(i,[]),t===r?t:t}finally{a.$unlock()}}),n&&"synchronize"}(t.base,null)},Opal.modules["opal/rspec/fixes/rspec/core/example_group"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}e.dynamic_require_severity="ignore";var n,r=(e.top,e),a=e.nil,o=(e.breaker,e.slice,e.klass);return e.add_stubs(["$class_descendant_of_self_fixed?","$select","$<","$!=","$ancestors"]),(n=r.get("Opal").$$scope.get("RSpec").$$scope.get("Compatibility")["$class_descendant_of_self_fixed?"]())===a||n.$$is_boolean&&1!=n?function(n,$super){function r(){}var $=r=o(n,$super,"ExampleGroup",r),i=($.$$proto,$.$$scope);return e.defs($,"$parent_groups",function(){var e,n,r,o,$=this;return null==$.parent_groups&&($.parent_groups=a),(e=$.parent_groups)!==!1&&e!==a?e:$.parent_groups=(n=(r=$.$ancestors()).$select,n.$$p=(o=function(e){var n;o.$$s||this;return null==e&&(e=a),(n=t(e,i.get("RSpec").$$scope.get("Core").$$scope.get("ExampleGroup")))?e["$!="](i.get("RSpec").$$scope.get("Core").$$scope.get("ExampleGroup")):t(e,i.get("RSpec").$$scope.get("Core").$$scope.get("ExampleGroup"))},o.$$s=$,o),n).call(r)}),a&&"parent_groups"}(e.get("RSpec").$$scope.get("Core"),null):a},Opal.modules["opal/rspec/fixes/rspec/core/example"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="ignore";var n=(e.top,e),r=e.nil,a=(e.breaker,e.slice,e.klass);return e.add_stubs(["$empty?","$[]","$metadata","$generated_description","$[]=","$+","$set_exception","$clear_generated_description"]),function(n,$super){function o(){}var $=o=a(n,$super,"Example",o),i=($.$$proto,$.$$scope);return e.defn($,"$assign_generated_description",function(){var n,a,o=this,$=r,s=r;try{try{return a=o.$metadata()["$[]"]("description")["$empty?"](),(n=a!==!1&&a!==r?$=i.get("RSpec").$$scope.get("Matchers").$generated_description():a)===r||n.$$is_boolean&&1!=n?r:(o.$metadata()["$[]="]("description",$),o.$metadata()["$[]="]("full_description",t(o.$metadata()["$[]"]("full_description"),$)))}catch(c){if(!e.rescue(c,[i.get("Exception")]))throw c;s=c;try{return o.$set_exception(s,"while assigning the example description")}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}finally{i.get("RSpec").$$scope.get("Matchers").$clear_generated_description()}}),function(t,$super){function n(){}var o=n=a(t,$super,"ExecutionResult",n);o.$$proto,o.$$scope;return e.defn(o,"$initialize",function(){return r}),r&&"initialize"}(i.base,null)}(n.get("RSpec").$$scope.get("Core"),null)},Opal.modules["opal/rspec/fixes/rspec/core/reporter"]=function(e){e.dynamic_require_severity="ignore";var t,n=(e.top,e),r=e.nil,a=(e.breaker,e.slice,e.klass);return e.add_stubs(["$is_set_coerced_to_array?","$is_a?","$[]","$to_a","$each","$<<","$to_sym"]),(t=n.get("Opal").$$scope.get("RSpec").$$scope.get("Compatibility")["$is_set_coerced_to_array?"]())===r||t.$$is_boolean&&1!=t?function(t,$super){function n(){}var o=n=a(t,$super,"Reporter",n),$=(o.$$proto,o.$$scope);return e.defn(o,"$register_listener",function(e){var t,n,a,o=this,i=r,s=arguments.length-1;0>s&&(s=0);var c=new Array(s);for(i=0;s>i;i++)c[i]=arguments[i+1];return(t=c["$[]"](0)["$is_a?"]($.get("Set")))===r||t.$$is_boolean&&1!=t||(c=c["$[]"](0).$to_a()),(t=(n=c).$each,t.$$p=(a=function(t){var n=a.$$s||this;return null==n.listeners&&(n.listeners=r),null==t&&(t=r),n.listeners["$[]"](t.$to_sym())["$<<"](e)},a.$$s=o,a),t).call(n),!0}),r&&"register_listener"}(n.get("RSpec").$$scope.get("Core"),null):r},Opal.modules["opal/rspec/fixes/rspec/core/formatters/backtrace_formatter"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e.nil),n=(e.breaker,e.slice,e.klass),r=e.hash2;return e.add_stubs(["$alias_method","$original_format_backtrace","$clean_js_backtrace","$select","$match"]),function(a,$super){function o(){}var $=o=n(a,$super,"BacktraceFormatter",o);$.$$proto,$.$$scope;return e.defn($,"$backtrace_line",function(e){return t}),$.$alias_method("original_format_backtrace","format_backtrace"),e.defn($,"$format_backtrace",function(e,t){var n=this;return null==t&&(t=r([],{})),n.$original_format_backtrace(n.$clean_js_backtrace(e),t)}),e.defn($,"$clean_js_backtrace",function(e){var n,r,a,o=this,$=t;return $=/\s*at.*/,(n=(r=e).$select,n.$$p=(a=function(e){a.$$s||this;return null==e&&(e=t),$.$match(e)},a.$$s=o,a),n).call(r)}),t&&"clean_js_backtrace"}(e.get("RSpec").$$scope.get("Core"),null)},Opal.modules["opal/rspec/fixes/rspec/core/formatters/deprecation_formatter"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="ignore";var n=(e.top,e),r=e.nil,a=(e.breaker,e.slice,e.klass);return e.add_stubs(["$class_eval","$+","$deprecated","$replacement","$call_site"]),function(n,$super){function o(){}var $,i,s,c,u,l=o=a(n,$super,"DeprecationFormatter",o),_=(l.$$proto,l.$$scope);return($=(i=_.get("SpecifiedDeprecationMessage")).$class_eval,$.$$p=(s=function(){var n=s.$$s||this;return e.def(n,"$too_many_warnings_message",function(){return t("Too many similar deprecation messages reported, disregarding further reports. ",_.get("DEPRECATION_STREAM_NOTICE"))}),r&&"too_many_warnings_message"},s.$$s=l,s),$).call(i),($=(c=_.get("GeneratedDeprecationMessage")).$class_eval,$.$$p=(u=function(){var n=u.$$s||this;return e.def(n,"$to_s",function(){var e,n=this,a=r;return null==n.data&&(n.data=r),a=""+n.data.$deprecated()+" is deprecated.",(e=n.data.$replacement())===r||e.$$is_boolean&&1!=e||(a=t(a," Use "+n.data.$replacement()+" instead.")),(e=n.data.$call_site())===r||e.$$is_boolean&&1!=e||(a=t(a," Called from "+n.data.$call_site()+".")),a}),r&&"to_s"},u.$$s=l,u),$).call(c)}(n.get("RSpec").$$scope.get("Core").$$scope.get("Formatters"),null)},Opal.modules["opal/rspec/fixes/rspec/core/formatters/generated_deprecation_message"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="ignore";var n,r,a,o=e.top,$=e,i=e.nil;e.breaker,e.slice;return e.add_stubs(["$class_eval","$deprecated","$replacement","$+","$call_site","$type"]),(n=(r=$.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("DeprecationFormatter").$$scope.get("GeneratedDeprecationMessage")).$class_eval,n.$$p=(a=function(){var n=a.$$s||this;return e.def(n,"$to_s",function(){var e,n=this,r=i;return null==n.data&&(n.data=i),r=""+n.data.$deprecated()+" is deprecated.",(e=n.data.$replacement())===i||e.$$is_boolean&&1!=e||(r=t(r," Use "+n.data.$replacement()+" instead.")),(e=n.data.$call_site())===i||e.$$is_boolean&&1!=e||(r=t(r," Called from "+n.data.$call_site()+".")),r}),e.def(n,"$too_many_warnings_message",function(){var e=this,n=i;return n="Too many uses of deprecated '"+e.$type()+"'. ",n=t(n,$.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("DeprecationFormatter").$$scope.get("DEPRECATION_STREAM_NOTICE"))}),i&&"too_many_warnings_message"},a.$$s=o,a),n).call(r)},Opal.modules["opal/rspec/fixes/rspec/core/formatters/console_codes"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="ignore";var n=(e.top,e.nil),r=(e.breaker,e.slice,e.module);return e.add_stubs(["$color_enabled?","$configuration","$+","$console_code_for"]),function(a){var o,$=o=r(a,"ConsoleCodes"),i=($.$$proto,$.$$scope);e.defn($,"$wrap",function(e,r){var a,o=this;return(a=i.get("RSpec").$configuration()["$color_enabled?"]())===n||a.$$is_boolean&&1!=a?e:t(t(t("","["+o.$console_code_for(r)+"m"+e),""),"[0m")})}(e.get("RSpec").$$scope.get("Core").$$scope.get("Formatters"))},Opal.modules["opal/rspec/fixes/rspec/core/formatters/loader"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e.nil),n=(e.breaker,e.slice,e.klass);return e.add_stubs(["$is_a?","$=~","$dup","$to_s","$gsub","$tr","$downcase","$===","$string_const?","$inject","$const_get","$split","$require","$path_for","$raise"]),function(r,$super){function a(){}var o=a=n(r,$super,"Loader",a),$=(o.$$proto,o.$$scope);return e.defn(o,"$string_const?",function(e){var n;return n=e["$is_a?"]($.get("String")),n!==!1&&n!==t?/^[A-Z][a-zA-Z0-9_:]*$/["$=~"](e):n}),e.defn(o,"$underscore",function(e){var n=t;return n=e.$to_s().$dup(),n=n.$gsub(/::/,"/"),n=n.$gsub(/([A-Z]+)([A-Z][a-z])/,"\\1_\\2"),n=n.$gsub(/([a-z\d])([A-Z])/,"\\1_\\2"),n=n.$tr("-","_"),n.$downcase()}),e.defn(o,"$custom_formatter",function(n){var r,a,o,i,s=this;if(!((r=$.get("Class")["$==="](n))===t||r.$$is_boolean&&1!=r))return n;if((r=s["$string_const?"](n))===t||r.$$is_boolean&&1!=r)return t;for(;(a=!0)!==t&&(!a.$$is_boolean||1==a);)try{return(a=(o=n.$gsub(/^::/,"").$split("::")).$inject,a.$$p=(i=function(e,n){i.$$s||this;return null==e&&(e=t),null==n&&(n=t),e.$const_get(n)},i.$$s=s,i),a).call(o,$.get("Object"))}catch(c){if(!e.rescue(c,[$.get("NameError")]))throw c;try{((a=s.$require(s.$path_for(n)))===t||a.$$is_boolean&&1!=a)&&s.$raise()}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}}),t&&"custom_formatter"}(e.get("RSpec").$$scope.get("Core").$$scope.get("Formatters"),null)},Opal.modules["opal/rspec/fixes/rspec/core/formatters/json_formatter"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e.nil),n=(e.breaker,e.slice,e.klass),r=e.gvars;return e.add_stubs(["$write","$output","$to_json","$===","$closed?","$==","$close"]),
function(a,$super){function o(){}var $=o=n(a,$super,"JsonFormatter",o),i=$.$$proto,s=$.$$scope;return i.output_hash=t,e.defn($,"$close",function(e){var n,a,o=this;return null==r.stdout&&(r.stdout=t),o.$output().$write(o.output_hash.$to_json()),(n=s.get("IO")["$==="](o.$output()))===t||n.$$is_boolean&&1!=n?t:(n=(a=o.$output()["$closed?"]())!==!1&&a!==t?a:o.$output()["$=="](r.stdout))===t||n.$$is_boolean&&1!=n?o.$output().$close():t}),t&&"close"}(e.get("RSpec").$$scope.get("Core").$$scope.get("Formatters"),null)},Opal.modules["opal/rspec/fixes/rspec/core/formatters"]=function(e){e.dynamic_require_severity="ignore";var t=e.top;e.nil,e.breaker,e.slice;return t.$require("opal/rspec/fixes/rspec/core/formatters/../formatters/backtrace_formatter"),t.$require("opal/rspec/fixes/rspec/core/formatters/../formatters/deprecation_formatter"),t.$require("opal/rspec/fixes/rspec/core/formatters/../formatters/generated_deprecation_message"),t.$require("opal/rspec/fixes/rspec/core/formatters/../formatters/console_codes"),t.$require("opal/rspec/fixes/rspec/core/formatters/../formatters/loader"),t.$require("opal/rspec/fixes/rspec/core/formatters/../formatters/json_formatter")},Opal.modules["opal/rspec/fixes/rspec/core/notifications/examples_notification"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="ignore";var n=(e.top,e.nil),r=(e.breaker,e.slice,e.module),a=e.klass;return e.add_stubs(["$each_with_index","$+","$fully_formatted","$next","$failure_notifications","$each","$backtrace_line","$backtrace_formatter","$configuration","$location","$wrap","$full_description","$pending_message","$execution_result","$pending_examples"]),function(o){var $,i=$=r(o,"Notifications"),s=(i.$$proto,i.$$scope);!function(r,$super){function o(){}var $=o=a(r,$super,"ExamplesNotification",o),i=($.$$proto,$.$$scope);return e.defn($,"$fully_formatted_failed_examples",function(r){var a,o,$,i=this,s=n;return null==r&&(r=e.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("ConsoleCodes")),s="\nFailures:\n",(a=(o=i.$failure_notifications()).$each_with_index,a.$$p=($=function(e,a){$.$$s||this;return null==e&&(e=n),null==a&&(a=n),s=t(s,e.$fully_formatted(a.$next(),r))},$.$$s=i,$),a).call(o),s}),e.defn($,"$fully_formatted_pending_examples",function(r){var a,o,$,s=this,c=n;return null==r&&(r=e.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("ConsoleCodes")),c="\nPending:\n",(a=(o=s.$pending_examples()).$each,a.$$p=($=function(e){var a=($.$$s||this,n);return null==e&&(e=n),a=i.get("RSpec").$configuration().$backtrace_formatter().$backtrace_line(e.$location()),c=t(c,"  "+r.$wrap(e.$full_description(),"pending")+"\n"+("    # "+r.$wrap(e.$execution_result().$pending_message(),"detail")+"\n")+("    # "+r.$wrap(a,"detail")+"\n"))},$.$$s=s,$),a).call(o),c}),n&&"fully_formatted_pending_examples"}(s.base,null)}(e.get("RSpec").$$scope.get("Core"))},Opal.modules["opal/rspec/fixes/rspec/core/notifications/failed_example_notification"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="ignore";var n=(e.top,e.nil),r=(e.breaker,e.slice,e.module),a=e.klass;return e.add_stubs(["$description","$each","$+","$new","$encoding_of","$colorized_message_lines","$colorized_formatted_backtrace"]),function(o){var $,i=$=r(o,"Notifications"),s=(i.$$proto,i.$$scope);!function(r,$super){function o(){}var $=o=a(r,$super,"FailedExampleNotification",o),i=($.$$proto,$.$$scope);return e.defn($,"$fully_formatted",function(r,a){var o,$,s,c,u,l=this,_=n;return null==a&&(a=e.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("ConsoleCodes")),_="\n  "+r+") "+l.$description()+"\n",(o=($=l.$colorized_message_lines(a)).$each,o.$$p=(s=function(e){var r=s.$$s||this;return null==e&&(e=n),_=t(_,i.get("RSpec").$$scope.get("Support").$$scope.get("EncodedString").$new("     "+e+"\n",r.$encoding_of(_)))},s.$$s=l,s),o).call($),(o=(c=l.$colorized_formatted_backtrace(a)).$each,o.$$p=(u=function(e){var r=u.$$s||this;return null==e&&(e=n),_=t(_,i.get("RSpec").$$scope.get("Support").$$scope.get("EncodedString").$new("     "+e+"\n",r.$encoding_of(_)))},u.$$s=l,u),o).call(c),_}),n&&"fully_formatted"}(s.base,null)}(e.get("RSpec").$$scope.get("Core"))},Opal.modules["opal/rspec/fixes/rspec/core/notifications/summary_notification"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.dynamic_require_severity="ignore";var r=(e.top,e.nil),a=(e.breaker,e.slice,e.module);return e.add_stubs(["$class_eval","$pluralize","$example_count","$+","$failure_count","$>","$pending_count","$formatted_duration","$formatted_load_time","$colorized_totals_line","$empty?","$failed_examples","$colorized_rerun_commands"]),function(o){var $,i,s,c,u=$=a(o,"Notifications"),l=(u.$$proto,u.$$scope);(i=(s=l.get("SummaryNotification")).$class_eval,i.$$p=(c=function(){var a=c.$$s||this;return e.def(a,"$totals_line",function(){var e=this,a=r;return a=l.get("Formatters").$$scope.get("Helpers").$pluralize(e.$example_count(),"example"),a=t(t(a,", "),l.get("Formatters").$$scope.get("Helpers").$pluralize(e.$failure_count(),"failure")),n(e.$pending_count(),0)&&(a=t(a,", "+e.$pending_count()+" pending")),a}),e.def(a,"$fully_formatted",function(n){var a,o=this,$=r;return null==n&&(n=e.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("ConsoleCodes")),$="\nFinished in "+o.$formatted_duration()+" "+("(files took "+o.$formatted_load_time()+" to load)\n")+(""+o.$colorized_totals_line(n)+"\n"),((a=o.$failed_examples()["$empty?"]())===r||a.$$is_boolean&&1!=a)&&($=t(t($,o.$colorized_rerun_commands(n)),"\n")),$}),r&&"fully_formatted"},c.$$s=u,c),i).call(s)}(e.get("RSpec").$$scope.get("Core"))},Opal.modules["opal/rspec/fixes/rspec/core/notifications"]=function(e){e.dynamic_require_severity="ignore";var t=e.top;e.nil,e.breaker,e.slice;return t.$require("opal/rspec/fixes/rspec/core/notifications/../notifications/examples_notification"),t.$require("opal/rspec/fixes/rspec/core/notifications/../notifications/failed_example_notification"),t.$require("opal/rspec/fixes/rspec/core/notifications/../notifications/summary_notification")},Opal.modules["opal/rspec/fixes/rspec/core/ordering/random"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e.nil),n=(e.breaker,e.slice,e.klass);return function(r,$super){function a(){}var o=a=n(r,$super,"Random",a),$=(o.$$proto,o.$$scope);return e.cdecl($,"HIDE_RANDOM_WARNINGS",!1),e.defn(o,"$initialize",function(e){var n;return(n=$.get("HIDE_RANDOM_WARNINGS"))===t||n.$$is_boolean&&1!=n?console.warn("Random order is not currently supported by opal-rspec, using default order."):t}),e.defn(o,"$order",function(e){return e}),t&&"order"}(e.get("RSpec").$$scope.get("Core").$$scope.get("Ordering"),null)},Opal.modules["opal/rspec/fixes/rspec/core/ordering"]=function(e){e.dynamic_require_severity="ignore";var t=e.top;e.nil,e.breaker,e.slice;return t.$require("opal/rspec/fixes/rspec/core/ordering/../ordering/random")},Opal.modules["opal/rspec/fixes/rspec/core/metadata"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e.nil),n=(e.breaker,e.slice,e.module),r=e.klass;return e.add_stubs(["$and_works_with_lhs_nil?","$first","$[]","$metadata","$===","$delete","$user_metadata","$file_path_and_line_number_from","$caller","$relative_path","$[]=","$to_i"]),function(a){var o,$,i=o=n(a,"Metadata"),s=(i.$$proto,i.$$scope);(($=e.get("Opal").$$scope.get("RSpec").$$scope.get("Compatibility")["$and_works_with_lhs_nil?"]())===t||$.$$is_boolean&&1!=$)&&!function(n,$super){function a(){}var o=a=r(n,$super,"ExampleGroupHash",a),$=(o.$$proto,o.$$scope);return e.defn(o,"$described_class",function(){var e,n,r=this,a=t,o=t;return a=r.$metadata()["$[]"]("description_args").$first(),(e=(n=$.get("NilClass")["$==="](a))!==!1&&n!==t?n:$.get("String")["$==="](a))===t||e.$$is_boolean&&1!=e?a:(o=r.$metadata()["$[]"]("parent_example_group"),o!==!1&&o!==t?o["$[]"]("described_class"):t)}),t&&"described_class"}(s.base,null),function(n,$super){function a(){}var o=a=r(n,$super,"HashPopulator",a),$=(o.$$proto,o.$$scope);return e.defn(o,"$populate_location_attributes",function(){var n,r,a=this,o=t,i=t,s=t;return o=a.$user_metadata().$delete("caller"),r=function(){return o!==!1&&o!==t?a.$file_path_and_line_number_from(o):a.$file_path_and_line_number_from(a.$caller())}(),n=e.to_ary(r),i=null==n[0]?t:n[0],s=null==n[1]?t:n[1],r,i=$.get("Metadata").$relative_path(i),a.$metadata()["$[]="]("file_path",i),a.$metadata()["$[]="]("line_number",s.$to_i()),a.$metadata()["$[]="]("location",""+i+":"+s)}),t&&"populate_location_attributes"}(s.base,null)}(e.get("RSpec").$$scope.get("Core"))},Opal.modules["opal/rspec/fixes/rspec/core/configuration"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e.nil),n=(e.breaker,e.slice,e.klass);return function(r,$super){function a(){}var o=a=n(r,$super,"Configuration",a);o.$$proto,o.$$scope;return e.defn(o,"$files_or_directories_to_run=",function(){var e=this,n=t,r=arguments.length-0;0>r&&(r=0);var a=new Array(r);for(n=0;r>n;n++)a[n]=arguments[n+0];return e.files_or_directories_to_run=[],e.files_to_run=t}),e.defn(o,"$requires=",function(e){return t}),t&&"requires="}(e.get("RSpec").$$scope.get("Core"),null)},Opal.modules["opal/rspec/fixes/rspec/core/warnings"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="ignore";var n,r=(e.top,e),a=e.nil,o=(e.breaker,e.slice,e.module),$=e.hash2;return e.add_stubs(["$multiple_module_include_super_works_right?","$[]","$end_with?","$+","$current_example","$location","$support_warn_with"]),(n=r.get("Opal").$$scope.get("RSpec").$$scope.get("Compatibility")["$multiple_module_include_super_works_right?"]())===a||n.$$is_boolean&&1!=n?function(n){var r,i=r=o(n,"Warnings"),s=(i.$$proto,i.$$scope);e.defn(i,"$warn_with",function(e,n){var r,o=this;return null==n&&(n=$([],{})),(r=n["$[]"]("use_spec_location_as_call_site"))===a||r.$$is_boolean&&1!=r||(((r=e["$end_with?"]("."))===a||r.$$is_boolean&&1!=r)&&(e=t(e,".")),(r=s.get("RSpec").$current_example())===a||r.$$is_boolean&&1!=r||(e=t(e," Warning generated from spec at `"+s.get("RSpec").$current_example().$location()+"`."))),o.$support_warn_with(e,n)})}(e.get("RSpec").$$scope.get("Core")):a},Opal.modules["opal/rspec/fixes/rspec/core"]=function(e){e.dynamic_require_severity="ignore";var t=e.top;e.nil,e.breaker,e.slice;return t.$require("opal/rspec/fixes/rspec/core/../core/example_group"),t.$require("opal/rspec/fixes/rspec/core/../core/example"),t.$require("opal/rspec/fixes/rspec/core/../core/reporter"),t.$require("opal/rspec/fixes/rspec/core/../core/formatters"),t.$require("opal/rspec/fixes/rspec/core/../core/notifications"),t.$require("opal/rspec/fixes/rspec/core/../core/ordering"),t.$require("opal/rspec/fixes/rspec/core/../core/metadata"),t.$require("opal/rspec/fixes/rspec/core/../core/configuration"),t.$require("opal/rspec/fixes/rspec/core/../core/warnings")},Opal.modules["opal/rspec/fixes/rspec/support/encoded_string"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.klass);return function(t,$super){function a(){}var o=a=r(t,$super,"EncodedString",a),$=o.$$proto;o.$$scope;return $.string=n,e.defn(o,"$initialize",function(e,t){var r=this;return null==t&&(t=n),r.string=e}),e.defn(o,"$to_s",function(){var e=this;return e.string}),n&&"to_s"}(t.get("RSpec").$$scope.get("Support"),null)},Opal.modules["opal/rspec/fixes/rspec/support/recursive_const_methods"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e.nil,e.breaker,e.slice,e.module);return e.add_stubs(["$sub"]),function(n){var r,a=r=t(n,"RecursiveConstMethods");a.$$proto,a.$$scope;e.defn(a,"$normalize_const_name",function(e){return e.$sub(/^::/,"")})}(e.get("RSpec").$$scope.get("Support"))},Opal.modules["opal/rspec/fixes/rspec/support/warnings"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="ignore";var n=(e.top,e.nil),r=(e.breaker,e.slice,e.module),a=e.hash2;return e.add_stubs(["$fetch","$first_non_rspec_line","$[]","$+","$warn","$alias_method","$extend"]),function(o){var $,i=$=r(o,"RSpec"),s=(i.$$proto,i.$$scope);!function(o){var $,i=$=r(o,"Support"),s=(i.$$proto,i.$$scope);!function(o){var $,i=$=r(o,"Warnings"),s=(i.$$proto,i.$$scope);e.defn(i,"$warn_with",function(r,o){var $,i,c,u=this,l=n;return null==o&&(o=a([],{})),l=($=(i=o).$fetch,$.$$p=(c=function(){c.$$s||this;return s.get("CallerFilter").$first_non_rspec_line()},c.$$s=u,c),$).call(i,"call_site"),($=o["$[]"]("replacement"))===n||$.$$is_boolean&&1!=$||(r=t(r," Use "+o["$[]"]("replacement")+" instead.")),l!==!1&&l!==n&&(r=t(r," Called from "+l+".")),e.get("Kernel").$warn(r)}),i.$alias_method("support_warn_with","warn_with")}(s.base)}(s.base),i.$extend(s.get("RSpec").$$scope.get("Support").$$scope.get("Warnings"))}(e.Object)},Opal.modules["opal/rspec/fixes/rspec/support/fuzzy_matcher"]=function(e){e.dynamic_require_severity="ignore";var t,n=(e.top,e),r=e.nil,a=(e.breaker,e.slice,e.module);return e.add_stubs(["$lambda_zero_arg_throws_arg_error?","$===","$!","$arrays_match?","$to_a","$hashes_match?","$==","$is_a?"]),(t=n.get("Opal").$$scope.get("RSpec").$$scope.get("Compatibility")["$lambda_zero_arg_throws_arg_error?"]())===r||t.$$is_boolean&&1!=t?function(t){var n,o=n=a(t,"FuzzyMatcher"),$=(o.$$proto,o.$$scope);e.defs(o,"$values_match?",function(t,n){var a,o,i,s=this;if(i=$.get("Array")["$==="](t),o=i!==!1&&i!==r?$.get("Enumerable")["$==="](n):i,!((a=o!==!1&&o!==r?$.get("Struct")["$==="](n)["$!"]():o)===r||a.$$is_boolean&&1!=a))return s["$arrays_match?"](t,n.$to_a());if(o=$.get("Hash")["$==="](t),!((a=o!==!1&&o!==r?$.get("Hash")["$==="](n):o)===r||a.$$is_boolean&&1!=a))return s["$hashes_match?"](t,n);if(n["$=="](t))return!0;if((a=t["$is_a?"]($.get("Proc")))!==r&&(!a.$$is_boolean||1==a))return t["$=="](n);try{return t["$==="](n)}catch(c){if(!e.rescue(c,[$.get("ArgumentError")]))throw c;try{return!1}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}})}(e.get("RSpec").$$scope.get("Support")):r},Opal.modules["opal/rspec/fixes/rspec/support"]=function(e){e.dynamic_require_severity="ignore";var t=e.top;e.nil,e.breaker,e.slice;return t.$require("opal/rspec/fixes/rspec/support/../support/encoded_string"),t.$require("opal/rspec/fixes/rspec/support/../support/recursive_const_methods"),t.$require("opal/rspec/fixes/rspec/support/../support/warnings"),t.$require("opal/rspec/fixes/rspec/support/../support/fuzzy_matcher")},Opal.modules["opal/rspec/fixes/rspec/expectations/fail_with"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="ignore";var n=(e.top,e),r=e.nil;e.breaker,e.slice;return e.add_stubs(["$!","$raise","$+"]),e.defs(n.get("RSpec").$$scope.get("Expectations"),"$fail_with",function(e,a,o){var $,i=this;return null==a&&(a=r),null==o&&(o=r),($=e["$!"]())===r||$.$$is_boolean&&1!=$||i.$raise(n.get("ArgumentError"),t("Failure message is nil. Does your matcher define the ","appropriate failure_message_for_* method to return a string?")),i.$raise(n.get("RSpec").$$scope.get("Expectations").$$scope.get("ExpectationNotMetError"),e)}),r&&"fail_with"},Opal.modules["opal/rspec/fixes/rspec/expectations/syntax"]=function(e){e.dynamic_require_severity="ignore";var t,n=(e.top,e),r=e.nil,a=(e.breaker,e.slice,e.module);return e.add_stubs(["$undef_within_exec_works?","$expect_enabled?","$remove_method","$should_enabled?","$default_should_host"]),(t=n.get("Opal").$$scope.get("RSpec").$$scope.get("Compatibility")["$undef_within_exec_works?"]())===r||t.$$is_boolean&&1!=t?function(t){var n,o=n=a(t,"Syntax");o.$$proto,o.$$scope;e.defn(o,"$disable_expect",function(t){var n,a=this;return null==t&&(t=e.get("RSpec").$$scope.get("Matchers")),(n=a["$expect_enabled?"](t))===r||n.$$is_boolean&&1!=n?r:t.$remove_method("expect")}),e.defn(o,"$disable_should",function(e){var t,n=this;return null==e&&(e=n.$default_should_host()),(t=n["$should_enabled?"](e))===r||t.$$is_boolean&&1!=t?r:(e.$remove_method("should"),e.$remove_method("should_not"))})}(e.get("RSpec").$$scope.get("Expectations")):r},Opal.modules["opal/rspec/fixes/rspec/expectations"]=function(e){e.dynamic_require_severity="ignore";var t=e.top;e.nil,e.breaker,e.slice;return t.$require("opal/rspec/fixes/rspec/expectations/../expectations/fail_with"),t.$require("opal/rspec/fixes/rspec/expectations/../expectations/syntax")},Opal.modules["opal/rspec/fixes/rspec/matchers/pretty"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module);return e.add_stubs(["$to_s","$gsub","$tr","$downcase"]),function(t){var a,o=a=r(t,"RSpec"),$=(o.$$proto,o.$$scope);!function(t){var a,o=a=r(t,"Matchers"),$=(o.$$proto,o.$$scope);!function(t){var a,o=a=r(t,"Pretty");o.$$proto,o.$$scope;e.defn(o,"$underscore",function(e){var t=n;return t=e.$to_s(),t=t.$gsub(/([A-Z]+)([A-Z][a-z])/,"\\1_\\2"),t=t.$gsub(/([a-z\d])([A-Z])/,"\\1_\\2"),t=t.$tr("-","_"),t=t.$downcase()})}($.base)}($.base)}(t.base)},Opal.modules["opal/rspec/fixes/rspec/matchers/built_in/yield"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="ignore";var n=(e.top,e.nil),r=(e.breaker,e.slice,e.module),a=e.klass;return e.add_stubs(["$empty?","$+","$expected_arg_description"]),function(o){var $,i=$=r(o,"BuiltIn"),s=(i.$$proto,i.$$scope);!function(r,$super){function o(){}var $=o=a(r,$super,"YieldWithArgs",o),i=$.$$proto;$.$$scope;return i.expected=n,e.defn($,"$description",function(){var e,r=this,a=n;return a="yield with args",((e=r.expected["$empty?"]())===n||e.$$is_boolean&&1!=e)&&(a=t(a,"("+r.$expected_arg_description()+")")),a}),n&&"description"}(s.base,null),function(r,$super){function o(){}var $=o=a(r,$super,"YieldSuccessiveArgs",o);$.$$proto,$.$$scope;return e.defn($,"$description",function(){var e=this,r=n;return r="yield successive args",r=t(r,"("+e.$expected_arg_description()+")")}),n&&"description"}(s.base,null)}(e.get("RSpec").$$scope.get("Matchers"))},Opal.modules["opal/rspec/fixes/rspec/matchers/built_in/start_and_end_with"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="ignore";var n=(e.top,e.nil),r=(e.breaker,e.slice,e.module),a=e.klass;return e.add_stubs(["$+","$!","$respond_to?","$actual","$arity","$method","$==","$raise","$new","$check_ordered_element","$values_match?","$expected","$[]","$length","$-@"]),function(o){var $,i=$=r(o,"BuiltIn"),s=(i.$$proto,i.$$scope);!function(r,$super){function o(){}var $,i=o=a(r,$super,"StartAndEndWith",o),s=i.$$proto,c=i.$$scope;return s.actual_does_not_have_ordered_elements=n,e.defn(i,"$failure_message",$=function(){var r,a=this,o=$.$$p,i=n,s=n,c=n;for($.$$p=null,s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];return i=e.find_super_dispatcher(a,"failure_message",$,o).apply(a,s),(r=a.actual_does_not_have_ordered_elements)===n||r.$$is_boolean&&1!=r?(r=a.$actual()["$respond_to?"]("[]")["$!"]())===n||r.$$is_boolean&&1!=r||(i=t(i,", but it cannot be indexed using #[]")):i=t(i,", but it does not have ordered elements"),i}),e.defn(i,"$check_ordered_element",function(e){var t=this,r=n;return r=e.$method("[]").$arity(),r["$=="](2)?n:t.$raise(c.get("ArgumentError").$new("wrong number of arguments (2 for "+r+")"))}),n&&"check_ordered_element"}(s.base,null),function(t,$super){function r(){}var o=r=a(t,$super,"StartWith",r);o.$$proto,o.$$scope;return e.defn(o,"$subset_matches?",function(){var e=this;return e.$check_ordered_element(e.$actual()),e["$values_match?"](e.$expected(),e.$actual()["$[]"](0,e.$expected().$length()))}),n&&"subset_matches?"}(s.base,null),function(t,$super){function r(){}var o=r=a(t,$super,"EndWith",r);o.$$proto,o.$$scope;return e.defn(o,"$subset_matches?",function(){var e=this;return e.$check_ordered_element(e.$actual()),e["$values_match?"](e.$expected(),e.$actual()["$[]"](e.$expected().$length()["$-@"](),e.$expected().$length()))}),n&&"subset_matches?"}(s.base,null)}(e.get("RSpec").$$scope.get("Matchers"))},Opal.modules["opal/rspec/fixes/rspec/matchers/built_in/compound"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e.nil),n=(e.breaker,e.slice,e.klass);return e.add_stubs(["$join","$indent_multiline_message","$sub","$conjunction"]),function(r,$super){function a(){}var o=a=n(r,$super,"Compound",a);o.$$proto,o.$$scope;return e.defn(o,"$multiline_message",function(e,t){var n=this;return[n.$indent_multiline_message(e.$sub(/\n+$/,"")),"..."+n.$conjunction()+":",n.$indent_multiline_message(t.$sub(/^\n+/,""))].$join("\n\n")}),t&&"multiline_message"}(e.get("RSpec").$$scope.get("Matchers").$$scope.get("BuiltIn"),null)},Opal.modules["opal/rspec/fixes/rspec/matchers/built_in/all"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="ignore";var n=(e.top,e.nil),r=(e.breaker,e.slice,e.klass);return e.add_stubs(["$sub","$join","$map","$=~","$+","$lines"]),function(a,$super){function o(){}var $=o=r(a,$super,"All",o);$.$$proto,$.$$scope;return e.defn($,"$indent_multiline_message",function(e){var r,a,o,$=this;return e=e.$sub(/\n+$/,""),(r=(a=e.$lines()).$map,r.$$p=(o=function(e){var r;o.$$s||this;return null==e&&(e=n),(r=e["$=~"](/\S/))===n||r.$$is_boolean&&1!=r?e:t("   ",e)},o.$$s=$,o),r).call(a).$join()}),n&&"indent_multiline_message"}(e.get("RSpec").$$scope.get("Matchers").$$scope.get("BuiltIn"),null)},Opal.modules["opal/rspec/fixes/rspec/matchers/built_in"]=function(e){e.dynamic_require_severity="ignore";var t=e.top;e.nil,e.breaker,e.slice;return t.$require("opal/rspec/fixes/rspec/matchers/built_in/../built_in/yield"),t.$require("opal/rspec/fixes/rspec/matchers/built_in/../built_in/start_and_end_with"),t.$require("opal/rspec/fixes/rspec/matchers/built_in/../built_in/compound"),t.$require("opal/rspec/fixes/rspec/matchers/built_in/../built_in/all")},Opal.modules["opal/rspec/fixes/rspec/matchers"]=function(e){e.dynamic_require_severity="ignore";var t=e.top;e.nil,e.breaker,e.slice;return t.$require("opal/rspec/fixes/rspec/matchers/../matchers/pretty"),t.$require("opal/rspec/fixes/rspec/matchers/../matchers/built_in")},Opal.modules["opal/rspec/fixes/rspec/mocks/space"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.klass);return e.add_stubs(["$__id__","$include?","$name","$class","$raise","$[]=","$proxies","$is_a?","$new","$any?","$__build_mock_proxy_unless_expired","$verify_partial_doubles?","$configuration"]),function(t,$super){function a(){}var o=a=r(t,$super,"Space",a),$=o.$$proto,i=o.$$scope;return $.expectation_ordering=n,e.cdecl(i,"OPAL_NON_MOCKABLE_TYPES",["String","Number","Numeric"]),e.defn(o,"$id_for",function(e){return e.$__id__()}),e.defn(o,"$proxy_not_found_for",function(e,t){var r,a,o,$,s=this,c=n;return(r=i.get("OPAL_NON_MOCKABLE_TYPES")["$include?"](t.$class().$name()))===n||r.$$is_boolean&&1!=r||s.$raise(""+t.$class()+" "+t+" cannot be used for mocking in Opal!"),c=[i.get("InstanceVerifyingDouble"),i.get("ObjectVerifyingDouble"),i.get("ClassVerifyingDouble"),i.get("Double")],s.$proxies()["$[]="](e,function(){return(r=t["$is_a?"](i.get("NilClass")))===n||r.$$is_boolean&&1!=r?(r=(a=(o=c)["$any?"],a.$$p=($=function(e){$.$$s||this;return null==e&&(e=n),t["$is_a?"](e)},$.$$s=s,$),a).call(o))===n||r.$$is_boolean&&1!=r?(r=t["$is_a?"](i.get("Class")))===n||r.$$is_boolean&&1!=r?(r=i.get("RSpec").$$scope.get("Mocks").$configuration()["$verify_partial_doubles?"]())===n||r.$$is_boolean&&1!=r?i.get("PartialDoubleProxy").$new(t,s.expectation_ordering):i.get("VerifyingPartialDoubleProxy").$new(t,s.expectation_ordering):(r=i.get("RSpec").$$scope.get("Mocks").$configuration()["$verify_partial_doubles?"]())===n||r.$$is_boolean&&1!=r?i.get("PartialClassDoubleProxy").$new(s,t,s.expectation_ordering):i.get("VerifyingPartialClassDoubleProxy").$new(s,t,s.expectation_ordering):t.$__build_mock_proxy_unless_expired(s.expectation_ordering):i.get("ProxyForNil").$new(s.expectation_ordering)}())}),n&&"proxy_not_found_for"}(t.get("RSpec").$$scope.get("Mocks"),null)},Opal.modules["opal/rspec/fixes/rspec/mocks/error_generator"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.dynamic_require_severity="ignore";var n=(e.top,e.nil),r=(e.breaker,e.slice,e.module),a=e.klass;return e.add_stubs(["$constant_resolution_works_right?","$method_call_args_description","$>","$length","$gsub","$inspect"]),function(o){var $,i,s=$=r(o,"Mocks"),c=(s.$$proto,s.$$scope);((i=c.get("Opal").$$scope.get("RSpec").$$scope.get("Compatibility")["$constant_resolution_works_right?"]())===n||i.$$is_boolean&&1!=i)&&(!function(e,$super){function t(){}var r=t=a(e,$super,"MockExpectationError",t);r.$$proto,r.$$scope;return n}(c.base,c.get("Exception")),function(e,$super){function t(){}var r=t=a(e,$super,"ExpiredTestDoubleError",t);r.$$proto,r.$$scope;return n}(c.base,c.get("MockExpectationError")),function(e,$super){function t(){}var r=t=a(e,$super,"OutsideOfExampleError",t);r.$$proto,r.$$scope;return n}(c.base,c.get("StandardError")),function(e,$super){function t(){}var r=t=a(e,$super,"UnsupportedMatcherError",t);r.$$proto,r.$$scope;return n}(c.base,c.get("StandardError")),function(e,$super){function t(){}var r=t=a(e,$super,"NegationUnsupportedError",t);r.$$proto,r.$$scope;return n}(c.base,c.get("StandardError")),function(e,$super){function t(){}var r=t=a(e,$super,"VerifyingDoubleNotDefinedError",t);r.$$proto,r.$$scope;return n}(c.base,c.get("StandardError"))),function(r,$super){function o(){}var $=o=a(r,$super,"ErrorGenerator",o);$.$$proto,$.$$scope;return e.defn($,"$actual_method_call_args_description",function(e,r){var a,o,$,i=this;return(a=i.$method_call_args_description(r))!==!1&&a!==n?a:function(){return(o=($=t(e,0))?t(r.$length(),0):t(e,0))===n||o.$$is_boolean&&1!=o?"":" with arguments: "+r.$inspect().$gsub(/^\[(.+)\]$/,"(\\1)")}()}),n&&"actual_method_call_args_description"}(c.base,null)}(e.get("RSpec"))},Opal.modules["opal/rspec/fixes/rspec/mocks/test_double"]=function(e){e.dynamic_require_severity="ignore";var t,n=(e.top,e),r=e.nil,a=(e.breaker,e.slice,e.module);return e.add_stubs(["$multiple_module_include_super_works_right?","$__mock_proxy","$record_message_received","$to_proc","$null_object?","$===","$to_s","$visibility_for","$==","$raise_non_public_error","$new","$include?","$raise","$raise_unexpected_message_error"]),(t=n.get("Opal").$$scope.get("RSpec").$$scope.get("Compatibility")["$multiple_module_include_super_works_right?"]())===r||t.$$is_boolean&&1!=t?function(t){var n,o,$=n=a(t,"TestDouble"),i=($.$$proto,$.$$scope);e.defn($,"$call_method_missing",o=function(t){var n,a,$,s=this,c=o.$$p,u=c||r,l=r,_=r,p=r,d=r;null==s.name&&(s.name=r);var f=arguments.length-1;0>f&&(f=0);var g=new Array(f);for(d=0;f>d;d++)g[d]=arguments[d+1];return o.$$p=null,l=s.$__mock_proxy(),(n=(a=l).$record_message_received,n.$$p=u.$to_proc(),n).apply(a,[t].concat(e.to_a(g))),(n=l["$null_object?"]())===r||n.$$is_boolean&&1!=n?(p=l.$visibility_for(t),(n=($=p["$=="]("private"))!==!1&&$!==r?$:p["$=="]("protected"))===r||n.$$is_boolean&&1!=n||i.get("ErrorGenerator").$new(s,s.name).$raise_non_public_error(t,p),(n=["to_a","to_ary"]["$include?"](t))===r||n.$$is_boolean&&1!=n||s.$raise(i.get("NoMethodError")),(n=l).$raise_unexpected_message_error.apply(n,[t].concat(e.to_a(g)))):(_=t,"to_int"["$==="](_)?0:"to_a"["$==="](_)||"to_ary"["$==="](_)?r:"to_str"["$==="](_)?s.$to_s():s)})}(e.get("RSpec").$$scope.get("Mocks")):r},Opal.modules["opal/rspec/fixes/rspec/mocks/verifying_double"]=function(e){e.dynamic_require_severity="ignore";var t,n=(e.top,e),r=e.nil,a=(e.breaker,e.slice,e.module),o=e.klass;return e.add_stubs(["$multiple_module_include_super_works_right?","$null_object?","$==","$ensure_implemented","$__mock_proxy","$ensure_publicly_implemented","$call_method_missing","$to_proc","$include"]),(t=n.get("Opal").$$scope.get("RSpec").$$scope.get("Compatibility")["$multiple_module_include_super_works_right?"]())===r||t.$$is_boolean&&1!=t?(function(t){var n,o,$=n=a(t,"VerifyingDoubleFixes");$.$$proto,$.$$scope;e.defn($,"$method_missing",o=function(t){var n,a,$=this,i=o.$$p,s=i||r,c=r;null==$.__sending_message&&($.__sending_message=r);var u=arguments.length-1;0>u&&(u=0);var l=new Array(u);for(c=0;u>c;c++)l[c]=arguments[c+1];return o.$$p=null,(n=$["$null_object?"]())===r||n.$$is_boolean&&1!=n||($.__sending_message["$=="](t)?$.$__mock_proxy().$ensure_implemented(t):$.$__mock_proxy().$ensure_publicly_implemented(t,$)),(n=(a=$).$call_method_missing,n.$$p=s.$to_proc(),n).apply(a,[t].concat(e.to_a(l)))})}(n.get("Opal").$$scope.get("RSpec")),function(t){var n,r=n=a(t,"Mocks"),$=(r.$$proto,r.$$scope);!function(t){var n,r=n=a(t,"VerifyingDouble");r.$$proto,r.$$scope;r.$include(e.get("Opal").$$scope.get("RSpec").$$scope.get("VerifyingDoubleFixes"))}($.base),function(t,$super){function n(){}var r=n=o(t,$super,"ObjectVerifyingDouble",n);r.$$proto,r.$$scope;return r.$include(e.get("Opal").$$scope.get("RSpec").$$scope.get("VerifyingDoubleFixes"))}($.base,null)}(e.get("RSpec"))):r},Opal.modules["opal/rspec/fixes/rspec/mocks"]=function(e){e.dynamic_require_severity="ignore";var t=e.top;e.nil,e.breaker,e.slice;return t.$require("opal/rspec/fixes/rspec/mocks/../mocks/space"),t.$require("opal/rspec/fixes/rspec/mocks/../mocks/error_generator"),t.$require("opal/rspec/fixes/rspec/mocks/../mocks/test_double"),t.$require("opal/rspec/fixes/rspec/mocks/../mocks/verifying_double")},Opal.modules["opal/rspec/fixes/rspec/caller_filter"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.klass);return function(t,$super){function a(){}var o=a=r(t,$super,"CallerFilter",a);o.$$proto,o.$$scope;return e.defs(o,"$first_non_rspec_line",function(){return""}),n&&"first_non_rspec_line"}(t.get("RSpec"),null)},Opal.modules["opal/rspec/fixes/rspec/example_groups"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="ignore";var n,r=(e.top,e),a=e.nil,o=(e.breaker,e.slice,e.module);return e.add_stubs(["$empty?","$description","$+","$gsub","$upcase","$[]","$last_match","$lstrip","$const_defined_on?","$next","$is_constants_a_clone?","$method","$send","$dup","$call","$class"]),function(n){var r,$=r=o(n,"ExampleGroups"),i=($.$$proto,$.$$scope);e.defs($,"$base_name_for",function(e){var n,r,o,$=this,s=a;return(n=e.$description()["$empty?"]())===a||n.$$is_boolean&&1!=n?(s=t(" ",e.$description()),s=(n=(r=s).$gsub,n.$$p=(o=function(){o.$$s||this;return i.get("Regexp").$last_match()["$[]"](1).$upcase()},o.$$s=$,o),n).call(r,/[^0-9a-zA-Z]+([0-9a-zA-Z])/),s=s.$lstrip(),s=s.$gsub(/\W/,""),s=s.$gsub(/^([^A-Z]|$)/,"Nested\\1")):"Anonymous"}),e.defs($,"$disambiguate",function(e,n){var r,o,$=this;if((r=$["$const_defined_on?"](n,e))===a||r.$$is_boolean&&1!=r)return e;for(e=t(e,"_2");(o=$["$const_defined_on?"](n,e))!==a&&(!o.$$is_boolean||1==o);)e=e.$next();return e})}(r.get("RSpec")),(n=r.get("Opal").$$scope.get("RSpec").$$scope.get("Compatibility")["$is_constants_a_clone?"]())===a||n.$$is_boolean&&1!=n?function(e){var t,n,r,$,i=t=o(e,"ExampleGroups"),s=(i.$$proto,i.$$scope,a);s=i.$method("constants"),(n=(r=i.$class()).$send,n.$$p=($=function(){$.$$s||this;return s.$call().$dup()},$.$$s=i,$),n).call(r,"define_method","constants")}(r.get("RSpec")):a},Opal.modules["opal/rspec/fixes/rspec"]=function(e){e.dynamic_require_severity="ignore";var t=e.top;e.nil,e.breaker,e.slice;return t.$require("opal/rspec/fixes/rspec/../rspec/core"),t.$require("opal/rspec/fixes/rspec/../rspec/support"),t.$require("opal/rspec/fixes/rspec/../rspec/expectations"),t.$require("opal/rspec/fixes/rspec/../rspec/matchers"),t.$require("opal/rspec/fixes/rspec/../rspec/mocks"),t.$require("opal/rspec/fixes/rspec/../rspec/caller_filter"),t.$require("opal/rspec/fixes/rspec/../rspec/example_groups")},Opal.modules["opal/rspec/fixes/opal/kernel"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.range;return e.add_stubs(["$clones_singleton_methods?","$allocate","$class","$copy_instance_variables","$copy_singleton_methods","$initialize_clone","$[]","$split","$reject!","$empty?","$strip","$lambda","$map","$match","$captures"]),function(t){var o,$,i=o=r(t,"Kernel"),s=(i.$$proto,i.$$scope);(($=s.get("Opal").$$scope.get("RSpec").$$scope.get("Compatibility")["$clones_singleton_methods?"]())===n||$.$$is_boolean&&1!=$)&&(e.defn(i,"$copy_singleton_methods",function(t){var n,r=this;if(t.hasOwnProperty("$$meta")){var a=e.get_singleton_class(t).$$proto,o=e.get_singleton_class(r).$$proto;for(n in a)"$"===n.charAt(0)&&a.hasOwnProperty(n)&&(o[n]=a[n]);
}for(n in t)"$"===n.charAt(0)&&"$"!==n.charAt(1)&&t.hasOwnProperty(n)&&(r[n]=t[n])}),e.defn(i,"$clone",function(){var e=this,t=n;return t=e.$class().$allocate(),t.$copy_instance_variables(e),t.$copy_singleton_methods(e),t.$initialize_clone(e),t})),e.defn(i,"$caller",function(){function t(){try{throw Error("")}catch(e){return e}}var r,o,$,i,s,c,u,l=this,_=n,p=n,d=n,f=t();return _=f.stack,p=_.$split("\n")["$[]"](a(4,-1,!1)),(r=(o=p)["$reject!"],r.$$p=($=function(e){$.$$s||this;return null==e&&(e=n),e.$strip()["$empty?"]()},$.$$s=l,$),r).call(o),d=(r=(i=l).$lambda,r.$$p=(s=function(e,t,r){s.$$s||this;return null==e&&(e=n),null==t&&(t=n),null==r&&(r=n),""+e+":"+t+" in `("+function(){return r!==!1&&r!==n?r:"unknown method"}()+")'"},s.$$s=l,s),r).call(i),(r=(c=p).$map,r.$$p=(u=function(t){var r,a,o=(u.$$s||this,n),$=n,i=n,s=n;return null==t&&(t=n),(r=o=/\s*at (.*) \((\S+):(\d+):\d+/.$match(t))===n||r.$$is_boolean&&1!=r?(r=o=/\s*at (\S+):(\d+):\d+/.$match(t))===n||r.$$is_boolean&&1!=r?(r=o=/\s*at (.*) \((\S+):(\d+)/.$match(t))===n||r.$$is_boolean&&1!=r?(r=o=/\s*at (.*):(\d+)/.$match(t))===n||r.$$is_boolean&&1!=r?(r=o=/(.*?)@(\S+):(\d+):\d+/.$match(t))===n||r.$$is_boolean&&1!=r?(r=o=/(\S+):(\d+):\d+/.$match(t))===n||r.$$is_boolean&&1!=r?""+i+":-1 in `(can't parse this stack trace)`":(a=o.$captures(),r=e.to_ary(a),i=null==r[0]?n:r[0],s=null==r[1]?n:r[1],a,d["$[]"](i,s)):(a=o.$captures(),r=e.to_ary(a),$=null==r[0]?n:r[0],i=null==r[1]?n:r[1],s=null==r[2]?n:r[2],a,d["$[]"](i,s,$)):(a=o.$captures(),r=e.to_ary(a),i=null==r[0]?n:r[0],s=null==r[1]?n:r[1],a,d["$[]"](i,s)):(a=o.$captures(),r=e.to_ary(a),$=null==r[0]?n:r[0],i=null==r[1]?n:r[1],s=null==r[2]?n:r[2],a,d["$[]"](i,s,$)):(a=o.$captures(),r=e.to_ary(a),i=null==r[0]?n:r[0],s=null==r[1]?n:r[1],a,d["$[]"](i,s)):(a=o.$captures(),r=e.to_ary(a),$=null==r[0]?n:r[0],i=null==r[1]?n:r[1],s=null==r[2]?n:r[2],a,d["$[]"](i,s,$))},u.$$s=l,u),r).call(c)})}(t.base)},Opal.modules["opal/rspec/fixes/opal/class"]=function(e){e.dynamic_require_severity="ignore";var t,n=(e.top,e),r=e.nil,a=(e.breaker,e.slice,e.klass);return e.add_stubs(["$full_class_names?","$name","$to_s","$__id__"]),(t=n.get("Opal").$$scope.get("RSpec").$$scope.get("Compatibility")["$full_class_names?"]())===r||t.$$is_boolean&&1!=t?function(t,$super){function n(){}var o=n=a(t,$super,"Class",n);o.$$proto,o.$$scope;return e.defn(o,"$to_s",function(){var e,t=this;return(e=t.$name())!==!1&&e!==r?e:"#<"+(t.$$is_mod?"Module":"Class")+":0x"+t.$__id__().$to_s(16)+">"}),r&&"to_s"}(n.base,null):r},Opal.modules["opal/rspec/fixes/opal/stdlib/pp"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="ignore";var n,r=(e.top,e),a=e.nil,o=(e.breaker,e.slice,e.klass),$=e.gvars;return e.add_stubs(["$pp_uses_stdout_default?","$p","$args","$===","$+","$inspect","$<<"]),(n=r.get("Opal").$$scope.get("RSpec").$$scope.get("Compatibility")["$pp_uses_stdout_default?"]())===a||n.$$is_boolean&&1!=n?function(n,$super){function r(){}var i=r=o(n,$super,"PP",r);i.$$proto,i.$$scope;return function(n){var r,o=n.$$scope;n.$$proto;return(r="undefined"==typeof console||"undefined"==typeof console.log)===a||r.$$is_boolean&&1!=r?e.defn(n,"$pp",function(e,n,r){var i;return null==$.stdout&&($.stdout=a),null==n&&(n=$.stdout),null==r&&(r=79),(i=o.get("String")["$==="](n))===a||i.$$is_boolean&&1!=i?n["$<<"](t(e.$inspect(),"\n")):t(t(n,e.$inspect()),"\n")}):e.defn(n,"$pp",function(t,n,r){var o,i=this;return null==$.stdout&&($.stdout=a),null==n&&(n=$.stdout),null==r&&(r=79),(o=i).$p.apply(o,e.to_a(i.$args()))}),e.alias(n,"singleline_pp","pp")}(e.get_singleton_class(i))}(r.base,null):a},Opal.modules["opal/rspec/fixes/opal/stdlib/set"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?t>=e:e["$<="](t)}e.dynamic_require_severity="ignore";var r,a=(e.top,e),o=e.nil,$=(e.breaker,e.slice,e.klass);return e.add_stubs(["$set_has_superset?","$is_a?","$raise","$<","$size","$all?","$include?","$<="]),(r=a.get("Opal").$$scope.get("RSpec").$$scope.get("Compatibility")["$set_has_superset?"]())===o||r.$$is_boolean&&1!=r?function(r,$super){function a(){}var i=a=$(r,$super,"Set",a),s=(i.$$proto,i.$$scope);return e.defn(i,"$superset?",function(e){var n,r,a,$=this;return(n=e["$is_a?"](s.get("Set")))!==!1&&n!==o?n:$.$raise(s.get("ArgumentError"),"value must be a set"),t($.$size(),e.$size())?!1:(n=(r=e)["$all?"],n.$$p=(a=function(e){var t=a.$$s||this;return null==e&&(e=o),t["$include?"](e)},a.$$s=$,a),n).call(r)}),e.alias(i,">=","superset?"),e.defn(i,"$proper_superset?",function(e){var t,r,a,$=this;return(t=e["$is_a?"](s.get("Set")))!==!1&&t!==o?t:$.$raise(s.get("ArgumentError"),"value must be a set"),n($.$size(),e.$size())?!1:(t=(r=e)["$all?"],t.$$p=(a=function(e){var t=a.$$s||this;return null==e&&(e=o),t["$include?"](e)},a.$$s=$,a),t).call(r)}),e.alias(i,">","proper_superset?"),e.defn(i,"$subset?",function(e){var n,r,a,$=this;return(n=e["$is_a?"](s.get("Set")))!==!1&&n!==o?n:$.$raise(s.get("ArgumentError"),"value must be a set"),t(e.$size(),$.$size())?!1:(n=(r=$)["$all?"],n.$$p=(a=function(t){a.$$s||this;return null==t&&(t=o),e["$include?"](t)},a.$$s=$,a),n).call(r)}),e.alias(i,"<=","subset?"),e.defn(i,"$proper_subset?",function(e){var t,r,a,$=this;return(t=e["$is_a?"](s.get("Set")))!==!1&&t!==o?t:$.$raise(s.get("ArgumentError"),"value must be a set"),n(e.$size(),$.$size())?!1:(t=(r=$)["$all?"],t.$$p=(a=function(t){a.$$s||this;return null==t&&(t=o),e["$include?"](t)},a.$$s=$,a),t).call(r)}),e.alias(i,"<","proper_subset?")}(a.base,null):o},Opal.modules["opal/rspec/fixes/opal/stdlib"]=function(e){e.dynamic_require_severity="ignore";var t=e.top;e.nil,e.breaker,e.slice;return t.$require("opal/rspec/fixes/opal/stdlib/../stdlib/pp"),t.$require("opal/rspec/fixes/opal/stdlib/../stdlib/set")},Opal.modules["opal/rspec/fixes/opal/corelib/regexp"]=function(e){e.dynamic_require_severity="ignore";var t,n,r=(e.top,e),a=e.nil,o=(e.breaker,e.slice,e.klass),$=e.gvars;return e.add_stubs(["$multiline_regex_works?","$empty_regex_works?","$raise","$regex_case_compare_works?","$match","$coerce_to?","$coerce_to","$new","$call"]),n=r.get("Opal").$$scope.get("RSpec").$$scope.get("Compatibility")["$multiline_regex_works?"](),(t=n!==!1&&n!==a?r.get("Opal").$$scope.get("RSpec").$$scope.get("Compatibility")["$empty_regex_works?"]():n)===a||t.$$is_boolean&&1!=t?function(t,$super){function n(){}var r,i,s=n=o(t,$super,"Regexp",n),c=(s.$$proto,s.$$scope);return((r=c.get("Opal").$$scope.get("RSpec").$$scope.get("Compatibility")["$empty_regex_works?"]())===a||r.$$is_boolean&&1!=r)&&(!function(t){var n;t.$$scope,t.$$proto;return e.defn(t,"$allocate",n=function(){var t=this,r=n.$$p,o=a,$=a,i=a;for(n.$$p=null,$=[],i=0;i<arguments.length;i++)$[i]=arguments[i];return o=e.find_super_dispatcher(t,"allocate",n,r).apply(t,$),o.un_initialized=!0,o}),a&&"allocate"}(e.get_singleton_class(s)),e.defn(s,"$options",function(){var e=this;e.un_initialized&&e.$raise(c.get("TypeError"),"uninitialized Regexp");var t=0;return e.multiline&&(t|=c.get("MULTILINE")),e.ignoreCase&&(t|=c.get("IGNORECASE")),t})),((r=c.get("Opal").$$scope.get("RSpec").$$scope.get("Compatibility")["$regex_case_compare_works?"]())===a||r.$$is_boolean&&1!=r)&&e.defn(s,"$===",function(e){var t=this;return t.$match(c.get("Opal")["$coerce_to?"](e,c.get("String"),"to_str"))!==a}),(r=c.get("Opal").$$scope.get("RSpec").$$scope.get("Compatibility")["$multiline_regex_works?"]())===a||r.$$is_boolean&&1!=r?(e.defn(s,"$match",i=function(e,t){var n=this,r=i.$$p,o=r||a;if(null==$["~"]&&($["~"]=a),i.$$p=null,n.un_initialized&&n.$raise(c.get("TypeError"),"uninitialized Regexp"),t=void 0===t?0:c.get("Opal").$coerce_to(t,c.get("Integer"),"to_int"),e===a)return $["~"]=a;if(e=c.get("Opal").$coerce_to(e,c.get("String"),"to_str"),0>t&&(t+=e.length,0>t))return $["~"]=a;var s=n.source,u="g";n.multiline&&(s=s.replace(".","[\\s\\S]"),u+="m");for(var l,_=new RegExp(s,u+(n.ignoreCase?"i":""));;){if(l=_.exec(e),null===l)return $["~"]=a;if(l.index>=t)return $["~"]=c.get("MatchData").$new(_,l),o===a?$["~"]:o.$call($["~"]);_.lastIndex=l.index+1}}),a&&"match"):a}(r.base,null):a},Opal.modules["opal/rspec/fixes/opal/corelib/error"]=function(e){e.dynamic_require_severity="ignore";var t,n=(e.top,e),r=e.nil,a=(e.breaker,e.slice,e.klass);return e.add_stubs(["$exception_inspect_matches?","$remove_method","$to_s","$empty?","$class","$exception_exception_method_works?","$new","$clone"]),((t=n.get("Opal").$$scope.get("RSpec").$$scope.get("Compatibility")["$exception_inspect_matches?"]())===r||t.$$is_boolean&&1!=t)&&(n.get("Exception").$remove_method("to_s"),function(t,$super){function n(){}var o=n=a(t,$super,"Exception",n),$=o.$$proto;o.$$scope;return $.message=r,e.defn(o,"$message",function(){var e=this;return e.$to_s()}),e.defn(o,"$inspect",function(){var e,t=this,n=r;return n=t.$to_s(),(e=n["$empty?"]())===r||e.$$is_boolean&&1!=e?"#<"+t.$class().$to_s()+": "+t.$to_s()+">":t.$class().$to_s()}),e.defn(o,"$to_s",function(){var e,t,n=this;return t=n.message,(e=t!==!1&&t!==r?n.message.$to_s():t)!==!1&&e!==r?e:n.$class().$to_s()}),r&&"to_s"}(n.base,null)),(t=n.get("Opal").$$scope.get("RSpec").$$scope.get("Compatibility")["$exception_exception_method_works?"]())===r||t.$$is_boolean&&1!=t?function(t,$super){function n(){}var o=n=a(t,$super,"Exception",n);o.$$proto,o.$$scope;return e.defs(o,"$new",function(){var e=this,t=r,n=arguments.length-0;0>n&&(n=0);var a=new Array(n);for(t=0;n>t;t++)a[t]=arguments[t+0];var o=a.length>0&&void 0!==a[0]?a[0]:r,$=new e.$$alloc(o);return Error.captureStackTrace&&Error.captureStackTrace($),$.name=e.$$name,$.$initialize.apply($,a),$}),e.defs(o,"$exception",function(){var t,n=this,a=r,o=arguments.length-0;0>o&&(o=0);var $=new Array(o);for(a=0;o>a;a++)$[a]=arguments[a+0];return(t=n).$new.apply(t,e.to_a($))}),e.defn(o,"$initialize",function(){var e=this,t=r,n=arguments.length-0;0>n&&(n=0);var a=new Array(n);for(t=0;n>t;t++)a[t]=arguments[t+0];return e.message=a.length>0&&void 0!==a[0]?a[0]:r}),e.defn(o,"$exception",function(e){var t=this;if(null==e&&(e=r),e===r||t===e)return t;var n=t.$clone();return n.message=e,n}),r&&"exception"}(n.base,null):r},Opal.modules["opal/rspec/fixes/opal/corelib"]=function(e){e.dynamic_require_severity="ignore";var t=e.top;e.nil,e.breaker,e.slice;return t.$require("opal/rspec/fixes/opal/corelib/../corelib/regexp"),t.$require("opal/rspec/fixes/opal/corelib/../corelib/error")},Opal.modules["opal/rspec/fixes/opal"]=function(e){e.dynamic_require_severity="ignore";var t=e.top;e.nil,e.breaker,e.slice;return t.$require("opal/rspec/fixes/opal/../opal/compatibility"),t.$require("opal/rspec/fixes/opal/../opal/kernel"),t.$require("opal/rspec/fixes/opal/../opal/class"),t.$require("opal/rspec/fixes/opal/../opal/stdlib"),t.$require("opal/rspec/fixes/opal/../opal/corelib")},Opal.modules["opal/rspec/fixes"]=function(e){e.dynamic_require_severity="ignore";var t,n=e.top,r=e,a=e.nil;e.breaker,e.slice;return e.add_stubs(["$const_defined?","$require"]),((t=r.get("Object")["$const_defined?"]("Encoding"))===a||t.$$is_boolean&&1!=t)&&n.$require("encoding"),n.$require("thread"),n.$require("opal/rspec/fixes/../fixes/rspec"),n.$require("opal/rspec/fixes/../fixes/opal")},Opal.modules["opal/rspec/formatter/document_io"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass;return e.add_stubs(["$include"]),function(t){var o,$=o=r(t,"Opal"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"RSpec"),i=($.$$proto,$.$$scope);!function(t,$super){function r(){}var o=r=a(t,$super,"DocumentIO",r),$=o.$$proto,i=o.$$scope;return $.closed=n,o.$include(i.get("IO").$$scope.get("Writable")),e.defn(o,"$initialize",function(){document.open()}),e.defn(o,"$close",function(){var e=this;return e.closed=!0,document.close()}),e.defn(o,"$write",function(e){var t,r=this;return(t=r.closed)===n||t.$$is_boolean&&1!=t?document.write(e):console.error("DOC closed, can't write "+e)}),e.defn(o,"$flush",function(){return n}),n&&"flush"}(i.base,i.get("IO"))}(i.base)}(t.base)},Opal.modules["opal/rspec/formatter/noop_flush_string_io"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass;return function(t){var o,$=o=r(t,"Opal"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"RSpec"),i=($.$$proto,$.$$scope);!function(t,$super){function r(){}var o=r=a(t,$super,"NoopFlushStringIO",r);o.$$proto,o.$$scope;return e.defn(o,"$flush",function(){return n}),n&&"flush"}(i.base,i.get("StringIO"))}(i.base)}(t.base)},Opal.modules["opal/rspec/formatter/element"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,o=e.hash2;return e.add_stubs(["$attr_reader","$new","$===","$each","$__send__","$[]","$html=","$gsub","$native"]),function(t){var $,i=$=r(t,"Opal"),s=(i.$$proto,i.$$scope);!function(t){var $,i=$=r(t,"RSpec"),s=(i.$$proto,i.$$scope);!function(t,$super){function r(){}var $=r=a(t,$super,"Element",r),i=$.$$proto,s=$.$$scope;return i["native"]=n,$.$attr_reader("native"),e.defs($,"$id",function(e){var t=this;return t.$new(document.getElementById(e))}),e.defs($,"$klass",function(e){var t=this;return t.$new(document.getElementsByClassName(e)[0])}),e.defs($,"$from_string",function(e){var t=this,r=n;return r=document.createElement("div"),r.innerHTML=e,t.$new(r.children[0])}),e.defn($,"$initialize",function(e,t){var r,a,$,i=this;return null==t&&(t=o([],{})),(r=s.get("String")["$==="](e))===n||r.$$is_boolean&&1!=r?i["native"]=e:i["native"]=document.createElement(e),(r=(a=t).$each,r.$$p=($=function(e,t){var r=$.$$s||this;return null==e&&(e=n),null==t&&(t=n),r.$__send__(""+e+"=",t)},$.$$s=i,$),r).call(a)}),e.defn($,"$class_name",function(){var e=this;return e["native"].className}),e.defn($,"$get_child_by_tag_name",function(e,t){var r=this,a=n,o=n;null==t&&(t=0),a=r["native"].getElementsByTagName(e),o=[];for(var $=0;$<a.length;$++)o.push(a[$]);return s.get("Element").$new(o["$[]"](t))}),e.defn($,"$class_name=",function(e){var t=this;return t["native"].className=e}),e.defn($,"$native",function(){var e=this;return e["native"]}),e.defn($,"$outer_html",function(){var e=this;return e["native"].outerHTML}),e.defn($,"$on_click=",function(e){var t=this;return t["native"].onclick=e}),e.defn($,"$html=",function(e){var t=this;return t["native"].innerHTML=e}),e.defn($,"$text=",function(e){var t,n,r=this;return t=[e.$gsub(/</,"&lt").$gsub(/>/,"&gt")],n=r,n["$html="].apply(n,t),t[t.length-1]}),e.defn($,"$type=",function(e){var t=this;return t["native"].type=e}),e.defn($,"$append",function(e){var t=this;return t["native"].appendChild(e.$native())}),e.alias($,"<<","append"),e.defn($,"$css_text=",function(e){var t=this;t["native"].styleSheet?t["native"].styleSheet.cssText=e:t["native"].appendChild(document.createTextNode(e))}),e.defn($,"$style",function(e,t){var n=this;return n["native"].style[e]=t}),e.defn($,"$append_to_head",function(){var e=this;return document.getElementsByTagName("head")[0].appendChild(e["native"])}),n&&"append_to_head"}(s.base,null)}(s.base)}(t.base)},Opal.modules["opal/rspec/formatter/html_printer"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.dynamic_require_severity="ignore";var r=e.top,a=e,o=e.nil,$=(e.breaker,e.slice,e.module),i=e.klass;return e.add_stubs(["$puts","$close","$reset_output","$klass","$last","$current_node","$from_string","$string","$append","$new","$<<","$get_child_by_tag_name","$pop","$each","$to_proc","$flush_output","$lambda","$[]","$on_click=","$==","$+","$>","$%","$html=","$id"]),r.$require("opal/rspec/formatter/html_printer/../noop_flush_string_io"),r.$require("opal/rspec/formatter/html_printer/../element"),function(r){var a,s=a=$(r,"Opal"),c=(s.$$proto,s.$$scope);!function(r){var a,s=a=$(r,"RSpec"),c=(s.$$proto,s.$$scope);!function(r,$super){function a(){}var $,s,c,u,l,_,p=a=i(r,$super,"HtmlPrinter",a),d=p.$$proto,f=p.$$scope;return d.output=d.group_stack=d.root_node=d.update_stack=o,e.defn(p,"$initialize",$=function(t){var n=this,r=$.$$p,a=o,i=o;for($.$$p=null,a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return e.find_super_dispatcher(n,"initialize",$,r).apply(n,a),n.group_stack=[],n.update_stack=[]}),e.defn(p,"$print_html_start",s=function(){var t=this,n=s.$$p,r=o,a=o;for(s.$$p=null,r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return e.find_super_dispatcher(t,"print_html_start",s,n).apply(t,r),t.output.$puts("</div>"),t.output.$puts("</div>"),t.output.$puts("</body>"),t.output.$puts("</html>"),t.output.$close(),t.$reset_output(),t.root_node=f.get("Element").$klass("results")}),e.defn(p,"$current_node",function(){var e,t=this;return(e=t.group_stack.$last())===o||e.$$is_boolean&&1!=e?t.root_node:t.group_stack.$last()}),e.defn(p,"$flush_output",function(){var e=this,t=o,n=o;return t=e.$current_node(),n=f.get("Element").$from_string(e.output.$string()),t.$append(n),e.$reset_output()}),e.defn(p,"$reset_output",function(){var e=this;return e.output=f.get("NoopFlushStringIO").$new()}),e.defn(p,"$print_example_group_start",c=function(t,n,r){var a=this,$=c.$$p,i=o,s=o,u=o,l=o;for(c.$$p=null,u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];return e.find_super_dispatcher(a,"print_example_group_start",c,$).apply(a,u),a.output.$puts("</dl></div>"),i=a.$current_node(),s=f.get("Element").$from_string(a.output.$string()),a.$reset_output(),i["$<<"](s),a.group_stack["$<<"](s.$get_child_by_tag_name("dl")),a.update_stack["$<<"]([])}),e.defn(p,"$print_example_group_end",function(){var e,t,n=this;return n.group_stack.$pop(),(e=(t=n.update_stack.$pop()).$each,e.$$p="call".$to_proc(),e).call(t)}),e.defn(p,"$print_example_passed",u=function(t,n){var r=this,a=u.$$p,$=o,i=o;for(u.$$p=null,$=[],i=0;i<arguments.length;i++)$[i]=arguments[i];return e.find_super_dispatcher(r,"print_example_passed",u,a).apply(r,$),r.$flush_output()}),e.defn(p,"$print_example_failed",l=function(t,n,r,a,$,i,s){var c,u,_,p,d=this,g=l.$$p,h=o,m=o,v=o,b=o,y=o,x=o;for(null==s&&(s=!1),l.$$p=null,y=[],x=0;x<arguments.length;x++)y[x]=arguments[x];return e.find_super_dispatcher(d,"print_example_failed",l,g).apply(d,y),d.$flush_output(),h=d.$current_node().$get_child_by_tag_name("dd",m=-1),v=(c=(u=d).$lambda,c.$$p=(_=function(){var e=_.$$s||this;return e.$puts("Exception for example '"+n+"'\n"+$["$[]"]("backtrace")),!1},_.$$s=d,_),c).call(u),b=f.get("Element").$from_string('<form><button type="button">Console</button></form>'),c=[v],p=b,p["$on_click="].apply(p,c),c[c.length-1],h["$<<"](b)}),e.defn(p,"$print_example_pending",_=function(t,n){var r=this,a=_.$$p,$=o,i=o;for(_.$$p=null,$=[],i=0;i<arguments.length;i++)$[i]=arguments[i];return e.find_super_dispatcher(r,"print_example_pending",_,a).apply(r,$),r.$flush_output()}),e.defn(p,"$print_summary",function(e,r,a,$){var i,s,c=o,u=o;return c=""+r+" example"+function(){return r["$=="](1)?o:"s"}()+", ",c=t(c,""+a+" failure"+function(){return a["$=="](1)?o:"s"}()),n($,0)&&(c=t(c,", "+$+" pending")),u="%.5f"["$%"](e),i=["Finished in <strong>"+u+" seconds</strong>"],s=f.get("Element").$id("duration"),s["$html="].apply(s,i),i[i.length-1],i=[c],s=f.get("Element").$id("totals"),s["$html="].apply(s,i),i[i.length-1]}),e.defn(p,"$move_progress",function(e){return moveProgressBar(e)}),e.defn(p,"$make_header_red",function(){return makeRed("rspec-header")}),e.defn(p,"$make_header_yellow",function(){return makeYellow("rspec-header")}),e.defn(p,"$make_example_group_header_red",function(e){var t,n,r,a=this;return a.update_stack.$last()["$<<"]((t=(n=a).$lambda,t.$$p=(r=function(){r.$$s||this;return makeRed("div_group_"+e),makeRed("example_group_"+e)},r.$$s=a,r),t).call(n))}),e.defn(p,"$make_example_group_header_yellow",function(e){var t,n,r,a=this;return a.update_stack.$last()["$<<"]((t=(n=a).$lambda,t.$$p=(r=function(){r.$$s||this;return makeYellow("div_group_"+e),makeYellow("example_group_"+e)},r.$$s=a,r),t).call(n))}),o&&"make_example_group_header_yellow"}(c.base,e.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("HtmlPrinter"))}(c.base)}(a.base)},Opal.modules["opal/rspec/formatter/browser_formatter"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="ignore";var n=e.top,r=e,a=e.nil,o=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$register","$new","$+","$print_example_group_start","$example_group_number","$description","$group","$size","$parent_groups","$flush","$print_example_group_end","$map","$backtrace_line","$backtrace_formatter","$configuration","$backtrace","$exception","$compact"]),n.$require("opal/rspec/formatter/browser_formatter/../document_io"),n.$require("opal/rspec/formatter/browser_formatter/../html_printer"),function(n){var r,i=r=o(n,"Opal"),s=(i.$$proto,i.$$scope);!function(n){var r,i=r=o(n,"RSpec"),s=(i.$$proto,i.$$scope);!function(n,$super){function r(){}var o,i=r=$(n,$super,"BrowserFormatter",r),s=i.$$proto,c=i.$$scope;return s.output=s.example_group_number=s.printer=a,e.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$register(i,"example_group_finished"),e.defn(i,"$initialize",o=function(t){var n=this;o.$$p;return o.$$p=null,e.find_super_dispatcher(n,"initialize",o,null).apply(n,[c.get("DocumentIO").$new()]),n.printer=c.get("Opal").$$scope.get("RSpec").$$scope.get("HtmlPrinter").$new(n.output)}),e.defn(i,"$example_group_started",function(e){var n=this;return n.example_group_red=!1,n.example_group_number=t(n.example_group_number,1),n.printer.$print_example_group_start(n.$example_group_number(),e.$group().$description(),e.$group().$parent_groups().$size()),n.printer.$flush()}),e.defn(i,"$example_group_finished",function(e){var t=this;return t.printer.$print_example_group_end()}),e.defn(i,"$start_dump",function(e){return a}),e.defn(i,"$extra_failure_content",function(t){var n,r,o,$=this,i=a;return i=(n=(r=t.$exception().$backtrace()).$map,n.$$p=(o=function(t){o.$$s||this;return null==t&&(t=a),e.get("RSpec").$configuration().$backtrace_formatter().$backtrace_line(t)},o.$$s=$,o),n).call(r),'    <pre class="ruby"><code>'+i.$compact()+"</code></pre>"}),a&&"extra_failure_content"}(s.base,e.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("HtmlFormatter"))}(s.base)}(r.base)},Opal.modules["opal/rspec/formatter/opal_closed_tty_io"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.klass),a=e.gvars;return e.add_stubs(["$include","$include?","$raise","$write_proc=","$===","$write_proc"]),function(t,$super){function o(){}var $=o=r(t,$super,"OpalClosedTtyIO",o),i=($.$$proto,$.$$scope);return $.$include(i.get("IO").$$scope.get("Writable")),e.defn($,"$initialize",function(e,t){var r,o,$=this,i=n;return null==a.stdout&&(a.stdout=n),null==a.stderr&&(a.stderr=n),((r=["stdout","stderr"]["$include?"](t))===n||r.$$is_boolean&&1!=r)&&$.$raise("Unknown IO type "+t+"!"),r=[function(){return i=e,"phantom"["$==="](i)?function(e){callPhantom([t,e])}:"node"["$==="](i)||"browser"["$==="](i)?function(){return i=t,"stdout"["$==="](i)?a.stdout.$write_proc():"stderr"["$==="](i)?a.stderr.$write_proc():n}():$.$raise("Unknown runner type "+e)}()],o=$,o["$write_proc="].apply(o,r),r[r.length-1],$.tty=!0}),e.defn($,"$closed?",function(){return!0}),n&&"closed?"}(t.base,t.get("IO"))},Opal.modules["opal/rspec/runner"]=function(e){e.dynamic_require_severity="ignore";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),a=e.klass,o=e.gvars;return e.add_stubs(["$phantom?","$node?","$new","$get_opal_closed_tty_io","$then","$exit_with_code","$to_i","$run","$inject","$<<","$value","$all?","$failure_exit_code","$report_async","$ensure","$hooks","$run_groups_async","$reporter","$example_count"]),t.$require("opal/rspec/runner/../formatter/opal_closed_tty_io"),function(t){var $,i=$=r(t,"Core"),s=(i.$$proto,i.$$scope);!function(t,$super){function r(){}var $=r=a(t,$super,"Runner",r),i=$.$$proto,s=$.$$scope;return i.configuration=i.world=n,function(t){var r=t.$$scope;t.$$proto;return e.defn(t,"$browser?",function(){return"undefined"!=typeof document}),e.defn(t,"$phantom?",function(){return"undefined"!=typeof phantom||"undefined"!=typeof OPAL_SPEC_PHANTOM}),e.defn(t,"$node?",function(){return"undefined"!=typeof process&&"undefined"!=typeof process.versions}),e.defn(t,"$non_browser?",function(){var e,t=this;return(e=t["$phantom?"]())!==!1&&e!==n?e:t["$node?"]()}),e.defn(t,"$get_opal_closed_tty_io",function(){var e,t=this,a=n,o=n,$=n;return a=function(){return(e=t["$phantom?"]())===n||e.$$is_boolean&&1!=e?(e=t["$node?"]())===n||e.$$is_boolean&&1!=e?"browser":"node":"phantom"}(),o=r.get("OpalClosedTtyIO").$new(a,"stdout"),$=r.get("OpalClosedTtyIO").$new(a,"stderr"),[$,o]}),e.defn(t,"$autorun",function(){var t,a,o,$=this,i=n,s=n;return a=$.$get_opal_closed_tty_io(),t=e.to_ary(a),i=null==t[0]?n:t[0],s=null==t[1]?n:t[1],a,(t=(a=$.$run(r.get("ARGV"),i,s)).$then,t.$$p=(o=function(e){var t=o.$$s||this;return null==e&&(e=n),t.$exit_with_code(e.$to_i())},o.$$s=$,o),t).call(a)}),e.defn(t,"$exit_with_code",function(t){var r,a=this;return(r="undefined"!=typeof phantom)===n||r.$$is_boolean&&1!=r?(r=a["$node?"]())===n||r.$$is_boolean&&1!=r?e.global.OPAL_SPEC_CODE=t:process.exit(t):phantom_exit(t)}),e.defn(t,"$run",function(e,t,a){var $=this,i=n;return null==o.stderr&&(o.stderr=n),null==o.stdout&&(o.stdout=n),null==t&&(t=o.stderr),null==a&&(a=o.stdout),i=r.get("ConfigurationOptions").$new(e),$.$new(i).$run(t,a)}),n&&"run"}(e.get_singleton_class($)),e.defn($,"$run_groups_async",function(e,t){var r,a,o,$,i,c=this,u=n,l=n;return u=[],l=(r=(a=e).$inject,r.$$p=(o=function(e,r){var a,$,i,s=o.$$s||this;return null==e&&(e=n),null==r&&(r=n),(a=($=e).$then,a.$$p=(i=function(e){i.$$s||this;return null==e&&(e=n),u["$<<"](e),r.$run(t)},i.$$s=s,i),a).call($)},o.$$s=c,o),r).call(a,s.get("Promise").$value(!0)),(r=($=l).$then,r.$$p=(i=function(e){var t,r=i.$$s||this;return null==r.configuration&&(r.configuration=n),null==e&&(e=n),u["$<<"](e),(t=u["$all?"]())===n||t.$$is_boolean&&1!=t?r.configuration.$failure_exit_code():0},i.$$s=c,i),r).call($)}),e.defn($,"$run_specs",function(e){var t,r,a,o=this;return(t=(r=o.configuration.$reporter()).$report_async,t.$$p=(a=function(t){var r,o,$,i,c,u,l=a.$$s||this,_=n;return null==t&&(t=n),_=s.get("SuiteHookContext").$new(),(r=(o=(i=(c=s.get("Promise").$value()).$then,i.$$p=(u=function(){var r=u.$$s||this;return null==r.configuration&&(r.configuration=n),r.configuration.$hooks().$run("before","suite",_),r.$run_groups_async(e,t)},u.$$s=l,u),i).call(c)).$ensure,r.$$p=($=function(e){var t=$.$$s||this;return null==t.configuration&&(t.configuration=n),null==e&&(e=n),t.configuration.$hooks().$run("after","suite",_),e},$.$$s=l,$),r).call(o)},a.$$s=o,a),t).call(r,o.world.$example_count(e))}),n&&"run_specs"}(s.base,null)}(e.get("RSpec"))},Opal.modules["opal/rspec/async/async_example"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e.nil),n=(e.breaker,e.slice,e.klass);return e.add_stubs(["$value","$instance_exec","$to_proc","$rescue","$new","$kind_of?","$then","$subject","$example_group_instance","$is_a?","$[]=","$__memoized","$ensure","$teardown_mocks_for_rspec","$set_exception","$verify_mocks","$expecting_with_rspec?","$configuration","$assign_generated_description","$run","$hooks","$current_example=","$start","$pending?","$mark_pending!","$pending","$finish","$each","$instance_variable_set","$instance_variables","$skipped?","$skip","$!","$dry_run?","$with_around_example_hooks","$run_after_example","$mark_fixed!","$raise","$location","$core_block_run","$resolve_subject","$run_before_example"]),function(r,$super){function a(){}var o=a=n(r,$super,"Example",a),$=o.$$proto,i=o.$$scope;return $.example_block=$.example_group_instance=$.example_group_class=t,e.defn(o,"$core_block_run",function(){var e,n,r,a,o,$,s,c=this,u=t;return u=i.get("Promise").$value((e=(n=c.example_group_instance).$instance_exec,e.$$p=c.example_block.$to_proc(),e).call(n,c)),(e=(r=(o=($=u).$then,o.$$p=(s=function(e){s.$$s||this;return null==e&&(e=t),e},s.$$s=c,s),o).call($)).$rescue,e.$$p=(a=function(e){var n;a.$$s||this;return null==e&&(e=t),(n=e)!==!1&&n!==t?n:e=i.get("Exception").$new("Async promise failed for unspecified reason"),((n=e["$kind_of?"](i.get("Exception")))===t||n.$$is_boolean&&1!=n)&&(e=i.get("Exception").$new(e)),e},a.$$s=c,a),e).call(r)}),e.defn(o,"$resolve_subject",function(){var n,r,a,o=this,$=t;try{if($=o.$example_group_instance().$subject(),(n=$["$is_a?"](i.get("Promise")))!==t&&(!n.$$is_boolean||1==n))return(n=(r=$).$then,n.$$p=(a=function(e){var n=a.$$s||this;return null==e&&(e=t),n.$example_group_instance().$__memoized()["$[]="]("subject",e)},a.$$s=o,a),n).call(r)}catch(s){try{}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}return i.get("Promise").$value()}),e.defn(o,"$run_after_example",function(){var e,n,r,a,o,$,s,c,u,l=this;return(e=(n=(a=(o=(s=(c=l.example_group_class.$hooks().$run("after","example",l)).$then,s.$$p=(u=function(){var e,n=u.$$s||this;return n.$verify_mocks(),(e=i.get("RSpec").$configuration()["$expecting_with_rspec?"]())===t||e.$$is_boolean&&1!=e?t:n.$assign_generated_description()},u.$$s=l,u),s).call(c)).$rescue,a.$$p=($=function(e){var n=$.$$s||this;return null==e&&(e=t),n.$set_exception(e,"in an `after(:example)` hook")},$.$$s=l,$),a).call(o)).$ensure,e.$$p=(r=function(){var e=r.$$s||this;return null==e.example_group_instance&&(e.example_group_instance=t),e.example_group_instance.$teardown_mocks_for_rspec()},r.$$s=l,r),e).call(n)}),e.defn(o,"$run",function(e,n){var r,a,o,$,s,c,u,l,_,p=this;return p.example_group_instance=e,r=[p],a=i.get("RSpec"),a["$current_example="].apply(a,r),r[r.length-1],p.$start(n),(r=p["$pending?"]())===t||r.$$is_boolean&&1!=r||i.get("Pending")["$mark_pending!"](p,p.$pending()),(r=(a=($=(s=(u=(l=i.get("Promise").$value()).$then,u.$$p=(_=function(){var e,n,r,a,o,$,s,c,u,l=_.$$s||this;return(e=(n=(a=(o=(s=(c=i.get("Promise").$value()).$then,s.$$p=(u=function(){var e,n,r,a=u.$$s||this;return(e=a["$skipped?"]())===t||e.$$is_boolean&&1!=e?(e=i.get("RSpec").$configuration()["$dry_run?"]()["$!"]())===t||e.$$is_boolean&&1!=e?t:(e=(n=a).$with_around_example_hooks,e.$$p=(r=function(){var e,n,a,o,$,s,c,u,l,_=r.$$s||this;return(e=(n=(o=($=(c=(u=i.get("Promise").$value()).$then,c.$$p=(l=function(){var e,n,r,a,o,$,s,c,u,_=l.$$s||this;return(e=(n=(a=(o=(s=(c=_.$run_before_example()).$then,s.$$p=(u=function(){var e=u.$$s||this;return e.$resolve_subject()},u.$$s=_,u),s).call(c)).$then,a.$$p=($=function(){var e=$.$$s||this;return e.$core_block_run()},$.$$s=_,$),a).call(o)).$then,e.$$p=(r=function(){var e,n=r.$$s||this;return(e=n["$pending?"]())===t||e.$$is_boolean&&1!=e?t:(i.get("Pending")["$mark_fixed!"](n),n.$raise(i.get("Pending").$$scope.get("PendingExampleFixedError"),"Expected example to fail since it is pending, but it passed.",[n.$location()]))},r.$$s=_,r),e).call(n)},l.$$s=_,l),c).call(u)).$rescue,o.$$p=(s=function(e){var n,r=s.$$s||this;return null==e&&(e=t),(n=e["$is_a?"](i.get("Pending").$$scope.get("SkipDeclaredInExample")))===t||n.$$is_boolean&&1!=n?r.$set_exception(e):t},s.$$s=_,s),o).call($)).$ensure,e.$$p=(a=function(){var e=a.$$s||this;return e.$run_after_example()},a.$$s=_,a),e).call(n)},r.$$s=a,r),e).call(n):i.get("Pending")["$mark_pending!"](a,a.$skip())},u.$$s=l,u),s).call(c)).$rescue,a.$$p=($=function(e){var n=$.$$s||this;return null==e&&(e=t),n.$set_exception(e)},$.$$s=l,$),a).call(o)).$ensure,e.$$p=(r=function(){var e,n,a,o=r.$$s||this;return null==o.example_group_instance&&(o.example_group_instance=t),(e=(n=o.example_group_instance.$instance_variables()).$each,e.$$p=(a=function(e){var n=a.$$s||this;return null==n.example_group_instance&&(n.example_group_instance=t),null==e&&(e=t),n.example_group_instance.$instance_variable_set(e,t)},a.$$s=o,a),e).call(n),o.example_group_instance=t},r.$$s=l,r),e).call(n)},_.$$s=p,_),u).call(l)).$then,$.$$p=(c=function(){var e=c.$$s||this;return e.$finish(n)},c.$$s=p,c),$).call(s)).$ensure,r.$$p=(o=function(e){var n,r;o.$$s||this;return null==e&&(e=t),n=[t],r=i.get("RSpec"),r["$current_example="].apply(r,n),n[n.length-1],e},o.$$s=p,o),r).call(a)}),t&&"run"}(e.get("RSpec").$$scope.get("Core"),null)},Opal.modules.promise=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?t>=e:e["$<="](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.dynamic_require_severity="ignore";var a=(e.top,e),o=e.nil,$=(e.breaker,e.slice,e.klass),i=e.hash2;return e.add_stubs(["$resolve","$new","$reject","$attr_reader","$===","$value","$has_key?","$keys","$!","$==","$<<","$>>","$exception?","$[]","$resolved?","$rejected?","$error","$include?","$action","$realized?","$raise","$^","$call","$resolve!","$exception!","$reject!","$class","$object_id","$+","$inspect","$act?","$nil?","$prev","$push","$concat","$it","$lambda","$reverse","$pop","$<=","$length","$shift","$-","$each","$wait","$then","$to_proc","$map","$reduce","$always","$try","$tap","$all?","$find"]),
function(a,$super){function s(){}var c,u,l,_,p=s=$(a,$super,"Promise",s),d=p.$$proto,f=p.$$scope;return d.value=d.action=d.exception=d.realized=d.delayed=d.error=d.prev=d.next=o,e.defs(p,"$value",function(e){var t=this;return t.$new().$resolve(e)}),e.defs(p,"$error",function(e){var t=this;return t.$new().$reject(e)}),e.defs(p,"$when",function(){var e=o,t=arguments.length-0;0>t&&(t=0);var n=new Array(t);for(e=0;t>e;e++)n[e]=arguments[e+0];return f.get("When").$new(n)}),p.$attr_reader("error","prev","next"),e.defn(p,"$initialize",function(e){var t=this;return null==e&&(e=i([],{})),t.action=e,t.realized=!1,t.exception=!1,t.value=o,t.error=o,t.delayed=!1,t.prev=o,t.next=o}),e.defn(p,"$value",function(){var e,t=this;return(e=f.get("Promise")["$==="](t.value))===o||e.$$is_boolean&&1!=e?t.value:t.value.$value()}),e.defn(p,"$act?",function(){var e,t=this;return(e=t.action["$has_key?"]("success"))!==!1&&e!==o?e:t.action["$has_key?"]("always")}),e.defn(p,"$action",function(){var e=this;return e.action.$keys()}),e.defn(p,"$exception?",function(){var e=this;return e.exception}),e.defn(p,"$realized?",function(){var e=this;return e.realized["$!"]()["$!"]()}),e.defn(p,"$resolved?",function(){var e=this;return e.realized["$=="]("resolve")}),e.defn(p,"$rejected?",function(){var e=this;return e.realized["$=="]("reject")}),e.defn(p,"$^",function(e){var t=this;return e["$<<"](t),t["$>>"](e),e}),e.defn(p,"$<<",function(e){var t=this;return t.prev=e,t}),e.defn(p,"$>>",function(e){var t,n,r,a=this;return a.next=e,(t=a["$exception?"]())===o||t.$$is_boolean&&1!=t?(t=a["$resolved?"]())===o||t.$$is_boolean&&1!=t?(t=a["$rejected?"]())===o||t.$$is_boolean&&1!=t||((t=(n=a.action["$has_key?"]("failure")["$!"]())!==!1&&n!==o?n:f.get("Promise")["$==="](function(){return(r=a.delayed)===o||r.$$is_boolean&&1!=r?a.error:a.delayed["$[]"](0)}()))===o||t.$$is_boolean&&1!=t?(t=e.$action()["$include?"]("always"))===o||t.$$is_boolean&&1!=t||e.$reject(function(){return(t=a.delayed)===o||t.$$is_boolean&&1!=t?a.$error():a.delayed["$[]"](0)}()):e.$reject(function(){return(t=a.delayed)===o||t.$$is_boolean&&1!=t?a.$error():a.delayed["$[]"](0)}())):e.$resolve(function(){return(t=a.delayed)===o||t.$$is_boolean&&1!=t?a.$value():a.delayed["$[]"](0)}()):e.$reject(a.delayed["$[]"](0)),a}),e.defn(p,"$resolve",function(t){var n,r,a=this,$=o,i=o;if(null==t&&(t=o),(n=a["$realized?"]())===o||n.$$is_boolean&&1!=n||a.$raise(f.get("ArgumentError"),"the promise has already been realized"),(n=f.get("Promise")["$==="](t))!==o&&(!n.$$is_boolean||1==n))return t["$<<"](a.prev)["$^"](a);try{(n=$=(r=a.action["$[]"]("success"))!==!1&&r!==o?r:a.action["$[]"]("always"))===o||n.$$is_boolean&&1!=n||(t=$.$call(t)),a["$resolve!"](t)}catch(s){if(!e.rescue(s,[f.get("Exception")]))throw s;i=s;try{a["$exception!"](i)}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}return a}),e.defn(p,"$resolve!",function(e){var t,n=this;return n.realized="resolve",n.value=e,(t=n.next)===o||t.$$is_boolean&&1!=t?n.delayed=[e]:n.next.$resolve(e)}),e.defn(p,"$reject",function(t){var n,r,a=this,$=o,i=o;if(null==t&&(t=o),(n=a["$realized?"]())===o||n.$$is_boolean&&1!=n||a.$raise(f.get("ArgumentError"),"the promise has already been realized"),(n=f.get("Promise")["$==="](t))!==o&&(!n.$$is_boolean||1==n))return t["$<<"](a.prev)["$^"](a);try{(n=$=(r=a.action["$[]"]("failure"))!==!1&&r!==o?r:a.action["$[]"]("always"))===o||n.$$is_boolean&&1!=n||(t=$.$call(t)),(n=a.action["$has_key?"]("always"))===o||n.$$is_boolean&&1!=n?a["$reject!"](t):a["$resolve!"](t)}catch(s){if(!e.rescue(s,[f.get("Exception")]))throw s;i=s;try{a["$exception!"](i)}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}return a}),e.defn(p,"$reject!",function(e){var t,n=this;return n.realized="reject",n.error=e,(t=n.next)===o||t.$$is_boolean&&1!=t?n.delayed=[e]:n.next.$reject(e)}),e.defn(p,"$exception!",function(e){var t=this;return t.exception=!0,t["$reject!"](e)}),e.defn(p,"$then",c=function(){var e,t=this,n=c.$$p,r=n||o;return c.$$p=null,(e=t.next)===o||e.$$is_boolean&&1!=e||t.$raise(f.get("ArgumentError"),"a promise has already been chained"),t["$^"](f.get("Promise").$new(i(["success"],{success:r})))}),e.alias(p,"do","then"),e.defn(p,"$fail",u=function(){var e,t=this,n=u.$$p,r=n||o;return u.$$p=null,(e=t.next)===o||e.$$is_boolean&&1!=e||t.$raise(f.get("ArgumentError"),"a promise has already been chained"),t["$^"](f.get("Promise").$new(i(["failure"],{failure:r})))}),e.alias(p,"rescue","fail"),e.alias(p,"catch","fail"),e.defn(p,"$always",l=function(){var e,t=this,n=l.$$p,r=n||o;return l.$$p=null,(e=t.next)===o||e.$$is_boolean&&1!=e||t.$raise(f.get("ArgumentError"),"a promise has already been chained"),t["$^"](f.get("Promise").$new(i(["always"],{always:r})))}),e.alias(p,"finally","always"),e.alias(p,"ensure","always"),e.defn(p,"$trace",_=function(e){var t,n=this,r=_.$$p,a=r||o;return null==e&&(e=o),_.$$p=null,(t=n.next)===o||t.$$is_boolean&&1!=t||n.$raise(f.get("ArgumentError"),"a promise has already been chained"),n["$^"](f.get("Trace").$new(e,a))}),e.defn(p,"$inspect",function(){var e,n=this,r=o;return r="#<"+n.$class()+"("+n.$object_id()+")",(e=n.next)===o||e.$$is_boolean&&1!=e||(r=t(r," >> "+n.next.$inspect())),r=(e=n["$realized?"]())===o||e.$$is_boolean&&1!=e?t(r,">"):t(r,": "+((e=n.value)!==!1&&e!==o?e:n.error).$inspect()+">")}),function(t,$super){function a(){}var s,c=a=$(t,$super,"Trace",a),u=(c.$$proto,c.$$scope);return e.defs(c,"$it",function(e){var t,n,r=this,a=o,$=o;return a=[],(t=(n=e["$act?"]())!==!1&&n!==o?n:e.$prev()["$nil?"]())===o||t.$$is_boolean&&1!=t||a.$push(e.$value()),(t=$=e.$prev())===o||t.$$is_boolean&&1!=t?a:a.$concat(r.$it($))}),e.defn(c,"$initialize",s=function(t,a){var $,c,l,_=this;s.$$p;return s.$$p=null,_.depth=t,e.find_super_dispatcher(_,"initialize",s,null).apply(_,[i(["success"],{success:($=(c=_).$lambda,$.$$p=(l=function(){var $,i,s=l.$$s||this,c=o;return c=u.get("Trace").$it(s).$reverse(),c.$pop(),($=(i=t!==!1&&t!==o)?n(t,c.$length()):t)===o||$.$$is_boolean&&1!=$||c.$shift(r(c.$length(),t)),($=a).$call.apply($,e.to_a(c))},l.$$s=_,l),$).call(c)})])}),o&&"initialize"}(f.base,p),function(t,$super){function n(){}var r,a,i,s,c,u=n=$(t,$super,"When",n),l=u.$$proto,_=u.$$scope;return l.wait=o,e.defn(u,"$initialize",r=function(t){var n,a,$,i=this;r.$$p;return null==t&&(t=[]),r.$$p=null,e.find_super_dispatcher(i,"initialize",r,null).apply(i,[]),i.wait=[],(n=(a=t).$each,n.$$p=($=function(e){var t=$.$$s||this;return null==e&&(e=o),t.$wait(e)},$.$$s=i,$),n).call(a)}),e.defn(u,"$each",a=function(){var e,t,n,r=this,$=a.$$p,i=$||o;return a.$$p=null,i!==!1&&i!==o||r.$raise(_.get("ArgumentError"),"no block given"),(e=(t=r).$then,e.$$p=(n=function(e){var t,r;n.$$s||this;return null==e&&(e=o),(t=(r=e).$each,t.$$p=i.$to_proc(),t).call(r)},n.$$s=r,n),e).call(t)}),e.defn(u,"$collect",i=function(){var e,t,n,r=this,a=i.$$p,$=a||o;return i.$$p=null,$!==!1&&$!==o||r.$raise(_.get("ArgumentError"),"no block given"),(e=(t=r).$then,e.$$p=(n=function(e){var t,r;n.$$s||this;return null==e&&(e=o),_.get("When").$new((t=(r=e).$map,t.$$p=$.$to_proc(),t).call(r))},n.$$s=r,n),e).call(t)}),e.defn(u,"$inject",s=function(){var t,n,r,a=this,$=s.$$p,i=$||o,c=o,u=arguments.length-0;0>u&&(u=0);var l=new Array(u);for(c=0;u>c;c++)l[c]=arguments[c+0];return s.$$p=null,(t=(n=a).$then,t.$$p=(r=function(t){var n,a;r.$$s||this;return null==t&&(t=o),(n=(a=t).$reduce,n.$$p=i.$to_proc(),n).apply(a,e.to_a(l))},r.$$s=a,r),t).call(n)}),e.alias(u,"map","collect"),e.alias(u,"reduce","inject"),e.defn(u,"$wait",function(e){var t,n,r,a=this;return((t=_.get("Promise")["$==="](e))===o||t.$$is_boolean&&1!=t)&&(e=_.get("Promise").$value(e)),(t=e["$act?"]())===o||t.$$is_boolean&&1!=t||(e=e.$then()),a.wait["$<<"](e),(t=(n=e).$always,t.$$p=(r=function(){var e,t=r.$$s||this;return null==t.next&&(t.next=o),(e=t.next)===o||e.$$is_boolean&&1!=e?o:t.$try()},r.$$s=a,r),t).call(n),a}),e.alias(u,"and","wait"),e.defn(u,"$>>",c=function(){var t,n,r,a=this,$=c.$$p,i=o,s=o;for(c.$$p=null,i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return(t=(n=e.find_super_dispatcher(a,">>",c,$).apply(a,i)).$tap,t.$$p=(r=function(){var e=r.$$s||this;return e.$try()},r.$$s=a,r),t).call(n)}),e.defn(u,"$try",function(){var e,t,n,r,a=this,$=o;return(e=(t=(n=a.wait)["$all?"],t.$$p="realized?".$to_proc(),t).call(n))===o||e.$$is_boolean&&1!=e?o:(e=$=(t=(r=a.wait).$find,t.$$p="rejected?".$to_proc(),t).call(r))===o||e.$$is_boolean&&1!=e?a.$resolve((e=(t=a.wait).$map,e.$$p="value".$to_proc(),e).call(t)):a.$reject($.$error())}),o&&"try"}(f.base,p)}(a.base,null)},Opal.modules["opal/rspec/async/example_group"]=function(e){e.dynamic_require_severity="ignore";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.klass);return e.add_stubs(["$require","$new","$delay","$resolve","$then","$to_proc","$order","$ordering_strategy","$children","$empty?","$value","$inject","$<<","$run","$all?","$wants_to_quit","$world","$top_level?","$clear_remaining_example_groups","$example_group_started","$always","$run_after_context_hooks","$clear","$before_context_ivars","$example_group_finished","$rescue","$is_a?","$for_filtered_examples","$skip_with_exception","$fail_fast?","$wants_to_quit=","$fail_with_exception","$process_descendants","$run_examples","$run_before_context_hooks","$filtered_examples","$lambda","$set_ivars","$!","$[]"]),t.$require("promise"),function(t,$super){function a(){}var o,$,i=a=r(t,$super,"ExampleGroup",a),s=(i.$$proto,i.$$scope);return e.defn(i,"$delay",o=function(e){var t=this,r=o.$$p,a=r||n;return o.$$p=null,setTimeout(a,1e3*e),t}),e.defn(i,"$delay_with_promise",$=function(e){var t,r,a,o,i=this,c=$.$$p,u=c||n,l=n;return $.$$p=null,l=s.get("Promise").$new(),(t=(r=i).$delay,t.$$p=(a=function(){a.$$s||this;return l.$resolve()},a.$$s=i,a),t).call(r,e),(t=(o=l).$then,t.$$p=u.$to_proc(),t).call(o)}),e.defs(i,"$process_descendants",function(e,t){var r,a,o,$,i,c=this,u=n,l=n,_=n,p=n;return u=c.$ordering_strategy().$order(c.$children()),(r=u["$empty?"]())===n||r.$$is_boolean&&1!=r?(l=[],_=s.get("Promise").$value(!0),p=(r=(a=u).$inject,r.$$p=(o=function(e,r){var a,$,i,s=o.$$s||this;return null==e&&(e=n),null==r&&(r=n),(a=($=e).$then,a.$$p=(i=function(e){i.$$s||this;return null==e&&(e=n),l["$<<"](e),r.$run(t)},i.$$s=s,i),a).call($)},o.$$s=c,o),r).call(a,_),(r=($=p).$then,r.$$p=(i=function(t){var r;i.$$s||this;return null==t&&(t=n),l["$<<"](t),(r=e!==!1&&e!==n)?l["$all?"]():e},i.$$s=c,i),r).call($)):s.get("Promise").$value(e)}),e.defs(i,"$run",function(e){var t,r,a,o,$,i,c,u,l,_,p,d,f,g,h,m=this;return(t=s.get("RSpec").$world().$wants_to_quit())===n||t.$$is_boolean&&1!=t?(e.$example_group_started(m),(t=(r=(o=($=(c=(u=(_=(p=(f=(g=s.get("Promise").$value()).$then,f.$$p=(h=function(){var e=h.$$s||this;return e.$run_before_context_hooks(e.$new())},h.$$s=m,h),f).call(g)).$then,_.$$p=(d=function(){var t=d.$$s||this;return t.$run_examples(e)},d.$$s=m,d),_).call(p)).$then,c.$$p=(l=function(t){var r=l.$$s||this;return null==t&&(t=n),r.$process_descendants(t,e)},l.$$s=m,l),c).call(u)).$rescue,o.$$p=(i=function(t){var r,a,o,$,c,u=i.$$s||this,l=n;return null==t&&(t=n),l=function(){return(r=t["$is_a?"](s.get("Pending").$$scope.get("SkipDeclaredInExample")))===n||r.$$is_boolean&&1!=r?((r=u["$fail_fast?"]())===n||r.$$is_boolean&&1!=r||(r=[!0],$=s.get("RSpec").$world(),$["$wants_to_quit="].apply($,r),r[r.length-1]),(r=($=u).$for_filtered_examples,r.$$p=(c=function(r){c.$$s||this;return null==r&&(r=n),r.$fail_with_exception(e,t)},c.$$s=u,c),r).call($,e)):(r=(a=u).$for_filtered_examples,r.$$p=(o=function(r){o.$$s||this;return null==r&&(r=n),r.$skip_with_exception(e,t)},o.$$s=u,o),r).call(a,e)}()},i.$$s=m,i),o).call($)).$always,t.$$p=(a=function(t){var r=a.$$s||this;return null==t&&(t=n),r.$run_after_context_hooks(r.$new()),r.$before_context_ivars().$clear(),e.$example_group_finished(r),t},a.$$s=m,a),t).call(r)):((t=m["$top_level?"]())===n||t.$$is_boolean&&1!=t||s.get("RSpec").$world().$clear_remaining_example_groups(),n)}),e.defs(i,"$run_examples",function(e){var t,r,a,o,$,i,c,u=this,l=n,_=n,p=n,d=n,f=n;return l=u.$ordering_strategy().$order(u.$filtered_examples()),(t=l["$empty?"]())===n||t.$$is_boolean&&1!=t?(_=(t=(r=u).$lambda,t.$$p=(a=function(t){var r,o=a.$$s||this,$=n;return null==t&&(t=n),(r=s.get("RSpec").$world().$wants_to_quit())===n||r.$$is_boolean&&1!=r?($=o.$new(),o.$set_ivars($,o.$before_context_ivars()),t.$run($,e)):s.get("Promise").$value(n)},a.$$s=u,a),t).call(r),p=[],d=s.get("Promise").$value(!0),f=(t=(o=l).$inject,t.$$p=($=function(e,t){var r,a,o,i=$.$$s||this;return null==e&&(e=n),null==t&&(t=n),(r=(a=e).$then,r.$$p=(o=function(e){var r,a,$=o.$$s||this;return null==e&&(e=n),a=$["$fail_fast?"](),(r=a!==!1&&a!==n?e["$!"]():a)===n||r.$$is_boolean&&1!=r||(r=[!0],a=s.get("RSpec").$world(),a["$wants_to_quit="].apply(a,r),r[r.length-1]),p["$<<"](e),_["$[]"](t)},o.$$s=i,o),r).call(a)},$.$$s=u,$),t).call(o,d),(t=(i=f).$then,t.$$p=(c=function(e){var t,r,a=c.$$s||this;return null==e&&(e=n),r=a["$fail_fast?"](),(t=r!==!1&&r!==n?e["$!"]():r)===n||t.$$is_boolean&&1!=t||(t=[!0],r=s.get("RSpec").$world(),r["$wants_to_quit="].apply(r,t),t[t.length-1]),p["$<<"](e),p["$all?"]()},c.$$s=u,c),t).call(i)):s.get("Promise").$value(!0)}),n&&"run_examples"}(e.get("RSpec").$$scope.get("Core"),null)},Opal.modules["opal/rspec/async/hooks"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.klass);return e.add_stubs(["$inject","$then","$run","$value","$hooks"]),function(t,$super){function a(){}var o=a=r(t,$super,"HookCollection",a),$=(o.$$proto,o.$$scope);return e.defn(o,"$run",function(){var e,t,r,a=this;return(e=(t=a.$hooks()).$inject,e.$$p=(r=function(e,t){var a,o,i,s=r.$$s||this;return null==e&&(e=n),null==t&&(t=n),(a=(o=e).$then,a.$$p=(i=function(){var e=i.$$s||this,r=n;return null==e.example&&(e.example=n),r=t.$run(e.example),$.get("Promise").$value(r)},i.$$s=s,i),a).call(o)},r.$$s=a,r),e).call(t,$.get("Promise").$value())}),n&&"run"}(t.get("RSpec").$$scope.get("Core").$$scope.get("Hooks"),null)},Opal.modules["opal/rspec/async/legacy"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),a=e.hash2,o=e.klass;return e.add_stubs(["$build_hash_from","$update","$<<","$examples","$new","$last","$attr_accessor","$extend","$async","$to_proc","$instance_eval","$resolve","$legacy_promise","$reject","$lambda","$legacy_promise=","$instance_exec"]),function(t){var o,$=o=r(t,"Opal"),i=($.$$proto,$.$$scope);!function(t){var o,$=o=r(t,"RSpec"),i=($.$$proto,$.$$scope);!function(t){var o,$,i,s=o=r(t,"AsyncHelpers"),c=(s.$$proto,s.$$scope);!function(t){var o,$,i=o=r(t,"ClassMethods"),s=(i.$$proto,i.$$scope);e.defn(i,"$async",$=function(t){var r=this,o=$.$$p,i=o||n,c=n,u=n,l=arguments.length-1;0>l&&(l=0);var _=new Array(l);for(u=0;l>u;u++)_[u]=arguments[u+1];return $.$$p=null,c=e.get("RSpec").$$scope.get("Core").$$scope.get("Metadata").$build_hash_from(_),i!==!1&&i!==n||c.$update(a(["skip"],{skip:e.get("RSpec").$$scope.get("Core").$$scope.get("Pending").$$scope.get("NOT_YET_IMPLEMENTED")})),r.$examples()["$<<"](s.get("Opal").$$scope.get("RSpec").$$scope.get("LegacyAsyncExample").$new(r,t,c,i)),r.$examples().$last()})}(c.base),s.$attr_accessor("legacy_promise"),e.defs(s,"$included",function(e){return e.$extend(c.get("ClassMethods"))}),e.defn(s,"$run_async",$=function(){var e,t,r=this,a=$.$$p,o=a||n;return $.$$p=null,(e=(t=r).$async,e.$$p=o.$to_proc(),e).call(t)}),e.defn(s,"$async",i=function(){var t,r,a=this,o=i.$$p,$=o||n,s=n;i.$$p=null;try{return(t=(r=a).$instance_eval,t.$$p=$.$to_proc(),t).call(r),a.$legacy_promise().$resolve()}catch(u){if(!e.rescue(u,[c.get("Exception")]))throw u;s=u;try{return a.$legacy_promise().$reject(s)}finally{e.gvars["!"]=e.exceptions.pop()||e.nil}}})}(i.base)}(i.base)}(t.base),function(t,$super){function r(){}var a,$=r=o(t,$super,"LegacyAsyncExample",r),i=($.$$proto,$.$$scope);return e.defn($,"$initialize",a=function(t,r,o,$){var s,c,u,l=this,_=(a.$$p,n),p=n;return null==$&&($=n),a.$$p=null,_=l,p=(s=(c=l).$lambda,s.$$p=(u=function(){var e,t,n=u.$$s||this;return e=[i.get("Promise").$new()],t=n,t["$legacy_promise="].apply(t,e),e[e.length-1],(e=(t=n).$instance_exec,e.$$p=$.$to_proc(),e).call(t,_),n.$legacy_promise()},u.$$s=l,u),s).call(c),e.find_super_dispatcher(l,"initialize",a,null).apply(l,[t,r,o,p])}),n&&"initialize"}(t.get("Opal").$$scope.get("RSpec"),e.get("RSpec").$$scope.get("Core").$$scope.get("Example"))},Opal.modules["opal/rspec/async/reporter"]=function(e){e.dynamic_require_severity="ignore";var t=(e.top,e.nil),n=e.breaker,r=(e.slice,e.klass);return e.add_stubs(["$start","$ensure","$finish"]),function(a,$super){function o(){}var $,i=o=r(a,$super,"Reporter",o);i.$$proto,i.$$scope;return e.defn(i,"$report_async",$=function(r){var a,o,i,s,c=this,u=$.$$p,l=u||t;return $.$$p=null,c.$start(r),(a=(o=(s=e.yield1(l,c))===n?n.$v:s).$ensure,a.$$p=(i=function(e){var n=i.$$s||this;return null==e&&(e=t),n.$finish(),e},i.$$s=c,i),a).call(o)}),t&&"report_async"}(e.get("RSpec").$$scope.get("Core"),null)},Opal.modules["opal/rspec/async"]=function(e){e.dynamic_require_severity="ignore";var t=e.top;e.nil,e.breaker,e.slice;return e.add_stubs(["$require"]),t.$require("opal/rspec/async/async_example"),t.$require("opal/rspec/async/example_group"),t.$require("opal/rspec/async/hooks"),t.$require("opal/rspec/async/legacy"),t.$require("opal/rspec/async/reporter")},Opal.modules["opal/rspec"]=function(e){e.dynamic_require_severity="ignore";var t,n,r,a=e.top,o=e,$=e.nil;e.breaker,e.slice;return e.add_stubs(["$require","$configure","$default_formatter=","$non_browser?","$get_opal_closed_tty_io","$output_stream=","$expect_with","$syntax=","$include"]),a.$require("opal/rspec/pre_require_fixes"),a.$require("opal/rspec/requires"),a.$require("opal/rspec/fixes"),a.$require("opal/rspec/formatter/browser_formatter"),a.$require("opal/rspec/runner"),a.$require("opal/rspec/async"),(t=(n=o.get("RSpec")).$configure,t.$$p=(r=function(t){var n,a,i,s,c=r.$$s||this,u=$,l=$;return null==t&&(t=$),n=[function(){return(i=e.get("RSpec").$$scope.get("Core").$$scope.get("Runner")["$non_browser?"]())===$||i.$$is_boolean&&1!=i?e.get("Opal").$$scope.get("RSpec").$$scope.get("BrowserFormatter"):e.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("ProgressFormatter")}()],a=t,a["$default_formatter="].apply(a,n),n[n.length-1],a=e.get("RSpec").$$scope.get("Core").$$scope.get("Runner").$get_opal_closed_tty_io(),n=e.to_ary(a),u=null==n[0]?$:n[0],l=null==n[1]?$:n[1],a,n=[l],a=t,a["$output_stream="].apply(a,n),n[n.length-1],(n=(a=t).$expect_with,n.$$p=(s=function(e){var t,n;s.$$s||this;return null==e&&(e=$),t=[["should","expect"]],n=e,n["$syntax="].apply(n,t),t[t.length-1]},s.$$s=c,s),n).call(a,"rspec"),t.$include(o.get("Opal").$$scope.get("RSpec").$$scope.get("AsyncHelpers"))},r.$$s=a,r),t).call(n)},Opal.modules["opal-rspec"]=function(e){e.dynamic_require_severity="ignore";var t=e.top;e.nil,e.breaker,e.slice;return e.add_stubs(["$require"]),t.$require("opal/rspec")},Opal.modules.rspec_results=function(e){e.dynamic_require_severity="ignore";var t=e.top;e.nil,e.breaker,e.slice;return e.add_stubs(["$require"]),t.$require("opal"),t.$require("opal-rspec")};